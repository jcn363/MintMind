{"version":3,"names":["cov_tvjbo36tl","actualCoverage","fs","tmpdir","Queue","randomPath","resolveTerminalEncoding","hasStdinWithoutTty","f","s","process","stdin","isTTY","stdinDataListener","durationinMs","Promise","resolve","dataListener","setTimeout","removeListener","once","getStdinFilePath","createStdInFile","targetPath","promises","appendFile","chmod","readFromStdin","verbose","onEnd","encoding","iconv","all","default","encodingExists","b","console","log","appendFileQueue","decoder","getDecoder","on","chunk","chunkStr","write","queue","end"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/environment/node/stdin.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { tmpdir } from 'os';\nimport { Queue } from '../../../base/common/async.js';\nimport { randomPath } from '../../../base/common/extpath.js';\nimport { resolveTerminalEncoding } from '../../../base/node/terminalEncoding.js';\n\nexport function hasStdinWithoutTty() {\n\ttry {\n\t\treturn !process.stdin.isTTY; // Via https://twitter.com/MylesBorins/status/782009479382626304\n\t} catch {\n\t\t// Windows workaround for https://github.com/nodejs/node/issues/11656\n\t}\n\treturn false;\n}\n\nexport function stdinDataListener(durationinMs: number): Promise<boolean> {\n\treturn new Promise(resolve => {\n\t\tconst dataListener = () => resolve(true);\n\n\t\t// wait for 1s maximum...\n\t\tsetTimeout(() => {\n\t\t\tprocess.stdin.removeListener('data', dataListener);\n\n\t\t\tresolve(false);\n\t\t}, durationinMs);\n\n\t\t// ...but finish early if we detect data\n\t\tprocess.stdin.once('data', dataListener);\n\t});\n}\n\nexport function getStdinFilePath(): string {\n\treturn randomPath(tmpdir(), 'code-stdin', 3);\n}\n\nasync function createStdInFile(targetPath: string) {\n\tawait fs.promises.appendFile(targetPath, '');\n\tawait fs.promises.chmod(targetPath, 0o600); // Ensure the file is only read/writable by the user: https://github.com/microsoft/vscode-remote-release/issues/9048\n}\n\nexport async function readFromStdin(targetPath: string, verbose: boolean, onEnd?: Function): Promise<void> {\n\n\tlet [encoding, iconv] = await Promise.all([\n\t\tresolveTerminalEncoding(verbose),\t\t// respect terminal encoding when piping into file\n\t\timport('@vscode/iconv-lite-umd'),\t\t// lazy load encoding module for usage\n\t\tcreateStdInFile(targetPath) \t\t\t// make sure file exists right away (https://github.com/microsoft/vscode/issues/155341)\n\t]);\n\n\tif (!iconv.default.encodingExists(encoding)) {\n\t\tconsole.log(`Unsupported terminal encoding: ${encoding}, falling back to UTF-8.`);\n\t\tencoding = 'utf8';\n\t}\n\n\t// Use a `Queue` to be able to use `appendFile`\n\t// which helps file watchers to be aware of the\n\t// changes because each append closes the underlying\n\t// file descriptor.\n\t// (https://github.com/microsoft/vscode/issues/148952)\n\n\tconst appendFileQueue = new Queue();\n\n\tconst decoder = iconv.default.getDecoder(encoding);\n\n\tprocess.stdin.on('data', chunk => {\n\t\tconst chunkStr = decoder.write(chunk);\n\t\tappendFileQueue.queue(() => fs.promises.appendFile(targetPath, chunkStr));\n\t});\n\n\tprocess.stdin.on('end', () => {\n\t\tconst end = decoder.end();\n\n\t\tappendFileQueue.queue(async () => {\n\t\t\ttry {\n\t\t\t\tif (typeof end === 'string') {\n\t\t\t\t\tawait fs.promises.appendFile(targetPath, end);\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tonEnd?.();\n\t\t\t}\n\t\t});\n\t});\n}\n"],"mappings":"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","ignoreList":[]}