{"version":3,"names":["cov_1mgs05ylct","actualCoverage","decodeBase64","VSBuffer","Codicon","localize","localize2","RawContextKey","createDecorator","registerIcon","StringSHA1","EDIT_SESSION_SYNC_CATEGORY","s","IEditSessionsStorageService","IEditSessionsLogService","ChangeType","f","b","FileType","EditSessionSchemaVersion","EDIT_SESSIONS_SIGNED_IN_KEY","EDIT_SESSIONS_SIGNED_IN","EDIT_SESSIONS_PENDING_KEY","EDIT_SESSIONS_PENDING","EDIT_SESSIONS_CONTAINER_ID","EDIT_SESSIONS_DATA_VIEW_ID","EDIT_SESSIONS_TITLE","EDIT_SESSIONS_VIEW_ICON","cloudDownload","EDIT_SESSIONS_SHOW_VIEW","EDIT_SESSIONS_SCHEME","decodeEditSessionFileContent","version","content","fromString","Error","hashedEditSessionId","editSessionId","sha1","update","digest","editSessionsLogId"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/editSessions/common/editSessions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { decodeBase64, VSBuffer } from '../../../../base/common/buffer.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IResourceRefHandle } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { StringSHA1 } from '../../../../base/common/hash.js';\nimport { EditSessionsStoreClient } from './editSessionsStorageClient.js';\n\nexport const EDIT_SESSION_SYNC_CATEGORY = localize2('cloud changes', 'Cloud Changes');\n\nexport type SyncResource = 'editSessions' | 'workspaceState';\n\nexport const IEditSessionsStorageService = createDecorator<IEditSessionsStorageService>('IEditSessionsStorageService');\nexport interface IEditSessionsStorageService {\n\t_serviceBrand: undefined;\n\n\treadonly SIZE_LIMIT: number;\n\n\treadonly isSignedIn: boolean;\n\treadonly onDidSignIn: Event<void>;\n\treadonly onDidSignOut: Event<void>;\n\n\tstoreClient: EditSessionsStoreClient | undefined;\n\n\tlastReadResources: Map<SyncResource, { ref: string; content: string }>;\n\tlastWrittenResources: Map<SyncResource, { ref: string; content: string }>;\n\n\tinitialize(reason: 'read' | 'write', silent?: boolean): Promise<boolean>;\n\tread(resource: SyncResource, ref: string | undefined): Promise<{ ref: string; content: string } | undefined>;\n\twrite(resource: SyncResource, content: string | EditSession): Promise<string>;\n\tdelete(resource: SyncResource, ref: string | null): Promise<void>;\n\tlist(resource: SyncResource): Promise<IResourceRefHandle[]>;\n\tgetMachineById(machineId: string): Promise<string | undefined>;\n}\n\nexport const IEditSessionsLogService = createDecorator<IEditSessionsLogService>('IEditSessionsLogService');\nexport interface IEditSessionsLogService extends ILogService { }\n\nexport enum ChangeType {\n\tAddition = 1,\n\tDeletion = 2,\n}\n\nexport enum FileType {\n\tFile = 1,\n}\n\ninterface Addition {\n\trelativeFilePath: string;\n\tfileType: FileType.File;\n\tcontents: string;\n\ttype: ChangeType.Addition;\n}\n\ninterface Deletion {\n\trelativeFilePath: string;\n\tfileType: FileType.File;\n\tcontents: undefined;\n\ttype: ChangeType.Deletion;\n}\n\nexport type Change = Addition | Deletion;\n\nexport interface Folder {\n\tname: string;\n\tcanonicalIdentity: string | undefined;\n\tworkingChanges: Change[];\n\tabsoluteUri: string | undefined;\n}\n\nexport const EditSessionSchemaVersion = 3;\n\nexport interface EditSession {\n\tversion: number;\n\tworkspaceStateId?: string;\n\tmachine?: string;\n\tfolders: Folder[];\n}\n\nexport const EDIT_SESSIONS_SIGNED_IN_KEY = 'editSessionsSignedIn';\nexport const EDIT_SESSIONS_SIGNED_IN = new RawContextKey<boolean>(EDIT_SESSIONS_SIGNED_IN_KEY, false);\n\nexport const EDIT_SESSIONS_PENDING_KEY = 'editSessionsPending';\nexport const EDIT_SESSIONS_PENDING = new RawContextKey<boolean>(EDIT_SESSIONS_PENDING_KEY, false);\n\nexport const EDIT_SESSIONS_CONTAINER_ID = 'workbench.view.editSessions';\nexport const EDIT_SESSIONS_DATA_VIEW_ID = 'workbench.views.editSessions.data';\nexport const EDIT_SESSIONS_TITLE: ILocalizedString = localize2('cloud changes', 'Cloud Changes');\n\nexport const EDIT_SESSIONS_VIEW_ICON = registerIcon('edit-sessions-view-icon', Codicon.cloudDownload, localize('editSessionViewIcon', 'View icon of the cloud changes view.'));\n\nexport const EDIT_SESSIONS_SHOW_VIEW = new RawContextKey<boolean>('editSessionsShowView', false);\n\nexport const EDIT_SESSIONS_SCHEME = 'vscode-edit-sessions';\n\nexport function decodeEditSessionFileContent(version: number, content: string): VSBuffer {\n\tswitch (version) {\n\t\tcase 1:\n\t\t\treturn VSBuffer.fromString(content);\n\t\tcase 2:\n\t\t\treturn decodeBase64(content);\n\t\tdefault:\n\t\t\tthrow new Error('Upgrade to a newer version to decode this content.');\n\t}\n}\n\nexport function hashedEditSessionId(editSessionId: string) {\n\tconst sha1 = new StringSHA1();\n\tsha1.update(editSessionId);\n\treturn sha1.digest();\n}\n\nexport const editSessionsLogId = 'editSessions';\n"],"mappings":"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","ignoreList":[]}