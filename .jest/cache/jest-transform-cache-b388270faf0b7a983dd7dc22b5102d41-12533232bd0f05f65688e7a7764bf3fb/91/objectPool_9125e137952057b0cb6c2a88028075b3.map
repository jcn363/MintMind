{"version":3,"names":["cov_1yj2wt32xd","actualCoverage","ObjectPool","_create","_unused","s","Set","_used","_itemData","Map","constructor","f","getUnusedObj","data","obj","size","b","set","values","find","get","getId","delete","setData","add","object","dispose","clear"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/browser/widget/multiDiffEditor/objectPool.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IDisposable, IReference } from '../../../../base/common/lifecycle.js';\n\nexport class ObjectPool<TData extends IObjectData, T extends IPooledObject<TData>> implements IDisposable {\n\tprivate readonly _unused = new Set<T>();\n\tprivate readonly _used = new Set<T>();\n\tprivate readonly _itemData = new Map<T, TData>();\n\n\tconstructor(\n\t\tprivate readonly _create: (data: TData) => T,\n\t) { }\n\n\tpublic getUnusedObj(data: TData): IReference<T> {\n\t\tlet obj: T;\n\n\t\tif (this._unused.size === 0) {\n\t\t\tobj = this._create(data);\n\t\t\tthis._itemData.set(obj, data);\n\t\t} else {\n\t\t\tconst values = [...this._unused.values()];\n\t\t\tobj = values.find(obj => this._itemData.get(obj)!.getId() === data.getId()) ?? values[0];\n\t\t\tthis._unused.delete(obj);\n\t\t\tthis._itemData.set(obj, data);\n\t\t\tobj.setData(data);\n\t\t}\n\t\tthis._used.add(obj);\n\t\treturn {\n\t\t\tobject: obj,\n\t\t\tdispose: () => {\n\t\t\t\tthis._used.delete(obj);\n\t\t\t\tif (this._unused.size > 5) {\n\t\t\t\t\tobj.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tthis._unused.add(obj);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tdispose(): void {\n\t\tfor (const obj of this._used) {\n\t\t\tobj.dispose();\n\t\t}\n\t\tfor (const obj of this._unused) {\n\t\t\tobj.dispose();\n\t\t}\n\t\tthis._used.clear();\n\t\tthis._unused.clear();\n\t}\n}\n\nexport interface IObjectData {\n\tgetId(): unknown;\n}\n\nexport interface IPooledObject<TData> extends IDisposable {\n\tsetData(data: TData): void;\n}\n"],"mappings":"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","ignoreList":[]}