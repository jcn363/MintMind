{"version":3,"names":["_bootstrapFnSource","cov_2n65xnxt06","s","_bootstrapFn","workerUrl","f","listener","event","globalThis","removeEventListener","port","data","Object","defineProperties","value","transferOrOptions","postMessage","get","onmessage","set","addEventListener","msg","dispatchEvent","MessageEvent","ports","b","undefined","start","Worker","constructor","TypeError","importScripts","toString","NestedWorker","EventTarget","onmessageerror","onerror","terminate","nativePostMessage","stringOrUrl","options","bootstrap","blob","Blob","type","blobUrl","URL","createObjectURL","channel","MessageChannel","id","port2","url","port1","bind","revokeObjectURL","close","evt","msgEvent"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/extensions/worker/polyfillNestedWorker.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { NewWorkerMessage, TerminateWorkerMessage } from '../common/polyfillNestedWorker.protocol.js';\n\ndeclare function postMessage(data: any, transferables?: Transferable[]): void;\n\ndeclare type MessageEventHandler = ((ev: MessageEvent<any>) => any) | null;\n\nconst _bootstrapFnSource = (function _bootstrapFn(workerUrl: string) {\n\n\tconst listener: EventListener = (event: Event): void => {\n\t\t// uninstall handler\n\t\tglobalThis.removeEventListener('message', listener);\n\n\t\t// get data\n\t\tconst port = <MessagePort>(<MessageEvent>event).data;\n\n\t\t// postMessage\n\t\t// onmessage\n\t\tObject.defineProperties(globalThis, {\n\t\t\t'postMessage': {\n\t\t\t\tvalue(data: any, transferOrOptions?: any) {\n\t\t\t\t\tport.postMessage(data, transferOrOptions);\n\t\t\t\t}\n\t\t\t},\n\t\t\t'onmessage': {\n\t\t\t\tget() {\n\t\t\t\t\treturn port.onmessage;\n\t\t\t\t},\n\t\t\t\tset(value: MessageEventHandler) {\n\t\t\t\t\tport.onmessage = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// todo onerror\n\t\t});\n\n\t\tport.addEventListener('message', msg => {\n\t\t\tglobalThis.dispatchEvent(new MessageEvent('message', { data: msg.data, ports: msg.ports ? [...msg.ports] : undefined }));\n\t\t});\n\n\t\tport.start();\n\n\t\t// fake recursively nested worker\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tglobalThis.Worker = <any>class { constructor() { throw new TypeError('Nested workers from within nested worker are NOT supported.'); } };\n\n\t\t// load module\n\t\timportScripts(workerUrl);\n\t};\n\n\tglobalThis.addEventListener('message', listener);\n}).toString();\n\n\nexport class NestedWorker extends EventTarget implements Worker {\n\n\tonmessage: ((this: Worker, ev: MessageEvent<any>) => any) | null = null;\n\tonmessageerror: ((this: Worker, ev: MessageEvent<any>) => any) | null = null;\n\tonerror: ((this: AbstractWorker, ev: ErrorEvent) => any) | null = null;\n\n\treadonly terminate: () => void;\n\treadonly postMessage: (message: any, options?: any) => void;\n\n\tconstructor(nativePostMessage: typeof postMessage, stringOrUrl: string | URL, options?: WorkerOptions) {\n\t\tsuper();\n\n\t\t// create bootstrap script\n\t\tconst bootstrap = `((${_bootstrapFnSource})('${stringOrUrl}'))`;\n\t\tconst blob = new Blob([bootstrap], { type: 'application/javascript' });\n\t\tconst blobUrl = URL.createObjectURL(blob);\n\n\t\tconst channel = new MessageChannel();\n\t\tconst id = blobUrl; // works because blob url is unique, needs ID pool otherwise\n\n\t\tconst msg: NewWorkerMessage = {\n\t\t\ttype: '_newWorker',\n\t\t\tid,\n\t\t\tport: channel.port2,\n\t\t\turl: blobUrl,\n\t\t\toptions,\n\t\t};\n\t\tnativePostMessage(msg, [channel.port2]);\n\n\t\t// worker-impl: functions\n\t\tthis.postMessage = channel.port1.postMessage.bind(channel.port1);\n\t\tthis.terminate = () => {\n\t\t\tconst msg: TerminateWorkerMessage = {\n\t\t\t\ttype: '_terminateWorker',\n\t\t\t\tid\n\t\t\t};\n\t\t\tnativePostMessage(msg);\n\t\t\tURL.revokeObjectURL(blobUrl);\n\n\t\t\tchannel.port1.close();\n\t\t\tchannel.port2.close();\n\t\t};\n\n\t\t// worker-impl: events\n\t\tObject.defineProperties(this, {\n\t\t\t'onmessage': {\n\t\t\t\tget() {\n\t\t\t\t\treturn channel.port1.onmessage;\n\t\t\t\t},\n\t\t\t\tset(value: MessageEventHandler) {\n\t\t\t\t\tchannel.port1.onmessage = value;\n\t\t\t\t}\n\t\t\t},\n\t\t\t'onmessageerror': {\n\t\t\t\tget() {\n\t\t\t\t\treturn channel.port1.onmessageerror;\n\t\t\t\t},\n\t\t\t\tset(value: MessageEventHandler) {\n\t\t\t\t\tchannel.port1.onmessageerror = value;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// todo onerror\n\t\t});\n\n\t\tchannel.port1.addEventListener('messageerror', evt => {\n\t\t\tconst msgEvent = new MessageEvent('messageerror', { data: evt.data });\n\t\t\tthis.dispatchEvent(msgEvent);\n\t\t});\n\n\t\tchannel.port1.addEventListener('message', evt => {\n\t\t\tconst msgEvent = new MessageEvent('message', { data: evt.data });\n\t\t\tthis.dispatchEvent(msgEvent);\n\t\t});\n\n\t\tchannel.port1.start();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}