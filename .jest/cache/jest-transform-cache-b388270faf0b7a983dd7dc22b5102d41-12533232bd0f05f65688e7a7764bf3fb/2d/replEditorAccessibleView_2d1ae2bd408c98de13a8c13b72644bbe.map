{"version":3,"names":["cov_z8t06e0s7","actualCoverage","AccessibleContentProvider","ContextKeyExpr","IEditorService","isReplEditorControl","IS_COMPOSITE_NOTEBOOK","NOTEBOOK_CELL_LIST_FOCUSED","getAllOutputsText","ReplEditorAccessibleView","priority","s","name","type","when","and","negate","getProvider","accessor","f","editorService","get","getAccessibleOutputProvider","editorControl","activeEditorPane","getControl","b","notebookEditor","viewModel","getViewModel","lastCellIndex","length","cell","viewCells","outputContent","notebookDocument","activeCodeEditor","focus"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/notebook/browser/replEditorAccessibleView.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { AccessibleViewType, AccessibleContentProvider, AccessibleViewProviderId } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { isReplEditorControl } from '../../replNotebook/browser/replEditor.js';\nimport { IS_COMPOSITE_NOTEBOOK, NOTEBOOK_CELL_LIST_FOCUSED } from '../common/notebookContextKeys.js';\nimport { getAllOutputsText } from './viewModel/cellOutputTextHelper.js';\n\n/**\n * The REPL input is already accessible, so we can show a view for the most recent execution output.\n */\nexport class ReplEditorAccessibleView implements IAccessibleViewImplementation {\n\treadonly priority = 100;\n\treadonly name = 'replEditorInput';\n\treadonly type = AccessibleViewType.View;\n\treadonly when = ContextKeyExpr.and(IS_COMPOSITE_NOTEBOOK, NOTEBOOK_CELL_LIST_FOCUSED.negate());\n\tgetProvider(accessor: ServicesAccessor) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\treturn getAccessibleOutputProvider(editorService);\n\t}\n}\n\nexport function getAccessibleOutputProvider(editorService: IEditorService) {\n\tconst editorControl = editorService.activeEditorPane?.getControl();\n\n\tif (editorControl && isReplEditorControl(editorControl) && editorControl.notebookEditor) {\n\t\tconst notebookEditor = editorControl.notebookEditor;\n\t\tconst viewModel = notebookEditor?.getViewModel();\n\t\tif (notebookEditor && viewModel) {\n\t\t\t// last cell of the viewmodel is the last cell history\n\t\t\tconst lastCellIndex = viewModel.length - 1;\n\t\t\tif (lastCellIndex >= 0) {\n\t\t\t\tconst cell = viewModel.viewCells[lastCellIndex];\n\t\t\t\tconst outputContent = getAllOutputsText(viewModel.notebookDocument, cell);\n\n\t\t\t\tif (outputContent) {\n\t\t\t\t\treturn new AccessibleContentProvider(\n\t\t\t\t\t\tAccessibleViewProviderId.Notebook,\n\t\t\t\t\t\t{ type: AccessibleViewType.View },\n\t\t\t\t\t\t() => { return outputContent; },\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\teditorControl.activeCodeEditor?.focus();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tAccessibilityVerbositySettingId.ReplEditor,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn;\n}\n"],"mappings":"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","ignoreList":[]}