{"version":3,"names":["cov_1qgfoaezw5","actualCoverage","Emitter","ICodeEditorService","InlineCompletionContextKeys","InlineCompletionsController","ContextKeyExpr","Disposable","TextEdit","LineEdit","TextModelText","InlineCompletionsAccessibleView","type","s","priority","name","when","or","inlineSuggestionVisible","inlineEditVisible","getProvider","accessor","f","codeEditorService","get","editor","b","getActiveCodeEditor","getFocusedCodeEditor","model","state","InlineCompletionsAccessibleViewContentProvider","_editor","_model","_onDidChangeContent","_register","onDidChangeContent","event","options","constructor","language","getModel","getLanguageId","undefined","id","verbositySettingKey","provideContent","Error","kind","lineText","textModel","getLineContent","primaryGhostText","lineNumber","ghostText","renderForScreenReader","text","lineEdit","fromTextEdit","edits","humanReadablePatch","getLines","provideNextContent","next","then","fire","providePreviousContent","previous","onClose","stop","focus"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/inlineCompletions/browser/inlineCompletionsAccessibleView.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { InlineCompletionContextKeys } from './controller/inlineCompletionContextKeys.js';\nimport { InlineCompletionsController } from './controller/inlineCompletionsController.js';\nimport { AccessibleViewType, AccessibleViewProviderId, IAccessibleViewContentProvider } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplementation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { InlineCompletionsModel } from './model/inlineCompletionsModel.js';\nimport { TextEdit } from '../../../common/core/edits/textEdit.js';\nimport { LineEdit } from '../../../common/core/edits/lineEdit.js';\nimport { TextModelText } from '../../../common/model/textModelText.js';\n\nexport class InlineCompletionsAccessibleView implements IAccessibleViewImplementation {\n\treadonly type = AccessibleViewType.View;\n\treadonly priority = 95;\n\treadonly name = 'inline-completions';\n\treadonly when = ContextKeyExpr.or(InlineCompletionContextKeys.inlineSuggestionVisible, InlineCompletionContextKeys.inlineEditVisible);\n\tgetProvider(accessor: ServicesAccessor) {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst editor = codeEditorService.getActiveCodeEditor() || codeEditorService.getFocusedCodeEditor();\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = InlineCompletionsController.get(editor)?.model.get();\n\t\tif (!model?.state.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn new InlineCompletionsAccessibleViewContentProvider(editor, model);\n\t}\n}\n\nclass InlineCompletionsAccessibleViewContentProvider extends Disposable implements IAccessibleViewContentProvider {\n\tprivate readonly _onDidChangeContent: Emitter<void> = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeContent: Event<void> = this._onDidChangeContent.event;\n\tpublic readonly options: { language: string | undefined; type: AccessibleViewType.View };\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _model: InlineCompletionsModel,\n\t) {\n\t\tsuper();\n\t\tthis.options = { language: this._editor.getModel()?.getLanguageId() ?? undefined, type: AccessibleViewType.View };\n\t}\n\n\tpublic readonly id = AccessibleViewProviderId.InlineCompletions;\n\tpublic readonly verbositySettingKey = 'accessibility.verbosity.inlineCompletions';\n\n\tpublic provideContent(): string {\n\t\tconst state = this._model.state.get();\n\t\tif (!state) {\n\t\t\tthrow new Error('Inline completion is visible but state is not available');\n\t\t}\n\t\tif (state.kind === 'ghostText') {\n\n\t\t\tconst lineText = this._model.textModel.getLineContent(state.primaryGhostText.lineNumber);\n\t\t\tconst ghostText = state.primaryGhostText.renderForScreenReader(lineText);\n\t\t\tif (!ghostText) {\n\t\t\t\tthrow new Error('Inline completion is visible but ghost text is not available');\n\t\t\t}\n\t\t\treturn lineText + ghostText;\n\t\t} else {\n\t\t\tconst text = new TextModelText(this._model.textModel);\n\t\t\tconst lineEdit = LineEdit.fromTextEdit(new TextEdit(state.edits), text);\n\t\t\treturn lineEdit.humanReadablePatch(text.getLines());\n\t\t}\n\t}\n\tpublic provideNextContent(): string | undefined {\n\t\t// asynchronously update the model and fire the event\n\t\tthis._model.next().then((() => this._onDidChangeContent.fire()));\n\t\treturn;\n\t}\n\tpublic providePreviousContent(): string | undefined {\n\t\t// asynchronously update the model and fire the event\n\t\tthis._model.previous().then((() => this._onDidChangeContent.fire()));\n\t\treturn;\n\t}\n\tpublic onClose(): void {\n\t\tthis._model.stop();\n\t\tthis._editor.focus();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}