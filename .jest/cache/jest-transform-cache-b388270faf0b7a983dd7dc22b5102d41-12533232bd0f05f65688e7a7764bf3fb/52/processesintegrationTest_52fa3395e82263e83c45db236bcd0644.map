{"version":3,"names":["cov_sha2gftfm","actualCoverage","assert","cp","FileAccess","objects","platform","processes","fork","id","f","opts","s","env","mixin","deepClone","process","VSCODE_ESM_ENTRYPOINT","VSCODE_PIPE_LOGGING","VSCODE_VERBOSE_LOGGING","asFileUri","fsPath","suite","test","done","b","child","sender","createQueuedSender","counter","msg1","msg2","msg3","on","msgFromChild","send","strictEqual","kill","isWindows","skip","largeObj","Object","create","i","msg","JSON","stringify"],"sources":["/home/user/Desktop/MintMind/src/vs/base/test/node/processes/processes.integrationTest.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport * as cp from 'child_process';\nimport { FileAccess } from '../../../common/network.js';\nimport * as objects from '../../../common/objects.js';\nimport * as platform from '../../../common/platform.js';\nimport * as processes from '../../../node/processes.js';\n\nfunction fork(id: string): cp.ChildProcess {\n\tconst opts: any = {\n\t\tenv: objects.mixin(objects.deepClone(process.env), {\n\t\t\tVSCODE_ESM_ENTRYPOINT: id,\n\t\t\tVSCODE_PIPE_LOGGING: 'true',\n\t\t\tVSCODE_VERBOSE_LOGGING: true\n\t\t})\n\t};\n\n\treturn cp.fork(FileAccess.asFileUri('bootstrap-fork').fsPath, ['--type=processTests'], opts);\n}\n\nsuite('Processes', () => {\n\ttest('buffered sending - simple data', function (done: () => void) {\n\t\tif (process.env['VSCODE_PID']) {\n\t\t\treturn done(); // this test fails when run from within VS Code\n\t\t}\n\n\t\tconst child = fork('vs/base/test/node/processes/fixtures/fork');\n\t\tconst sender = processes.createQueuedSender(child);\n\n\t\tlet counter = 0;\n\n\t\tconst msg1 = 'Hello One';\n\t\tconst msg2 = 'Hello Two';\n\t\tconst msg3 = 'Hello Three';\n\n\t\tchild.on('message', msgFromChild => {\n\t\t\tif (msgFromChild === 'ready') {\n\t\t\t\tsender.send(msg1);\n\t\t\t\tsender.send(msg2);\n\t\t\t\tsender.send(msg3);\n\t\t\t} else {\n\t\t\t\tcounter++;\n\n\t\t\t\tif (counter === 1) {\n\t\t\t\t\tassert.strictEqual(msgFromChild, msg1);\n\t\t\t\t} else if (counter === 2) {\n\t\t\t\t\tassert.strictEqual(msgFromChild, msg2);\n\t\t\t\t} else if (counter === 3) {\n\t\t\t\t\tassert.strictEqual(msgFromChild, msg3);\n\n\t\t\t\t\tchild.kill();\n\t\t\t\t\tdone();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\t(!platform.isWindows || process.env['VSCODE_PID'] ? test.skip : test)('buffered sending - lots of data (potential deadlock on win32)', function (done: () => void) { // test is only relevant for Windows and seems to crash randomly on some Linux builds\n\t\tconst child = fork('vs/base/test/node/processes/fixtures/fork_large');\n\t\tconst sender = processes.createQueuedSender(child);\n\n\t\tconst largeObj = Object.create(null);\n\t\tfor (let i = 0; i < 10000; i++) {\n\t\t\tlargeObj[i] = 'some data';\n\t\t}\n\n\t\tconst msg = JSON.stringify(largeObj);\n\t\tchild.on('message', msgFromChild => {\n\t\t\tif (msgFromChild === 'ready') {\n\t\t\t\tsender.send(msg);\n\t\t\t\tsender.send(msg);\n\t\t\t\tsender.send(msg);\n\t\t\t} else if (msgFromChild === 'done') {\n\t\t\t\tchild.kill();\n\t\t\t\tdone();\n\t\t\t}\n\t\t});\n\t});\n});\n"],"mappings":"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","ignoreList":[]}