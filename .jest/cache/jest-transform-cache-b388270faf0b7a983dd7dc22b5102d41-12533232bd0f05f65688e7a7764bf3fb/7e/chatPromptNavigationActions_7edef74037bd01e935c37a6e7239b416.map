{"version":3,"names":["localize2","Action2","registerAction2","CHAT_CATEGORY","IChatWidgetService","ChatContextKeys","isRequestVM","isResponseVM","registerChatPromptNavigationActions","cov_1nfzasqfpd","f","s","NextUserPromptAction","constructor","id","title","keybinding","primary","weight","when","inChatSession","precondition","enabled","f1","category","run","accessor","args","navigateUserPrompts","PreviousUserPromptAction","reverse","chatWidgetService","get","widget","lastFocusedWidget","b","items","viewModel","getItems","length","userPrompts","filter","item","focused","getFocus","currentIndex","findIndex","prompt","requestId","nextIndex","targetPrompt","focus","reveal"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/actions/chatPromptNavigationActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { CHAT_CATEGORY } from './chatActions.js';\nimport { IChatWidgetService } from '../chat.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IChatRequestViewModel, isRequestVM, isResponseVM } from '../../common/chatViewModel.js';\n\nexport function registerChatPromptNavigationActions() {\n\tregisterAction2(class NextUserPromptAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.nextUserPrompt',\n\t\t\t\ttitle: localize2('interactive.nextUserPrompt.label', \"Next User Prompt\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.DownArrow,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ChatContextKeys.inChatSession,\n\t\t\t\t},\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tnavigateUserPrompts(accessor, false);\n\t\t}\n\t});\n\n\tregisterAction2(class PreviousUserPromptAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.previousUserPrompt',\n\t\t\t\ttitle: localize2('interactive.previousUserPrompt.label', \"Previous User Prompt\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.UpArrow,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ChatContextKeys.inChatSession,\n\t\t\t\t},\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tnavigateUserPrompts(accessor, true);\n\t\t}\n\t});\n}\n\nfunction navigateUserPrompts(accessor: ServicesAccessor, reverse: boolean) {\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst widget = chatWidgetService.lastFocusedWidget;\n\tif (!widget) {\n\t\treturn;\n\t}\n\n\tconst items = widget.viewModel?.getItems();\n\tif (!items || items.length === 0) {\n\t\treturn;\n\t}\n\n\t// Get all user prompts (requests) in the conversation\n\tconst userPrompts = items.filter((item): item is IChatRequestViewModel => isRequestVM(item));\n\tif (userPrompts.length === 0) {\n\t\treturn;\n\t}\n\n\t// Find the currently focused item\n\tconst focused = widget.getFocus();\n\tlet currentIndex = -1;\n\n\tif (focused) {\n\t\tif (isRequestVM(focused)) {\n\t\t\t// If a request is focused, find its index in the user prompts array\n\t\t\tcurrentIndex = userPrompts.findIndex(prompt => prompt.id === focused.id);\n\t\t} else if (isResponseVM(focused)) {\n\t\t\t// If a response is focused, find the associated request's index\n\t\t\t// Response view models have a requestId property\n\t\t\tcurrentIndex = userPrompts.findIndex(prompt => prompt.id === focused.requestId);\n\t\t}\n\t}\n\n\t// Calculate next index\n\tlet nextIndex: number;\n\tif (currentIndex === -1) {\n\t\t// No current focus, go to first or last prompt based on direction\n\t\tnextIndex = reverse ? userPrompts.length - 1 : 0;\n\t} else {\n\t\t// Navigate to next/previous prompt\n\t\tnextIndex = reverse ? currentIndex - 1 : currentIndex + 1;\n\n\t\t// Clamp instead of wrap and stay at boundaries when trying to navigate past ends\n\t\tif (nextIndex < 0) {\n\t\t\tnextIndex = 0; // already at first, do not move further\n\t\t} else if (nextIndex >= userPrompts.length) {\n\t\t\tnextIndex = userPrompts.length - 1; // already at last, do not move further\n\t\t}\n\n\t\t// avoid re-focusing if we didn't actually move\n\t\tif (nextIndex === currentIndex) {\n\t\t\treturn; // no change in focus\n\t\t}\n\t}\n\n\t// Focus and reveal the selected user prompt\n\tconst targetPrompt = userPrompts[nextIndex];\n\tif (targetPrompt) {\n\t\twidget.focus(targetPrompt);\n\t\twidget.reveal(targetPrompt);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAOA,SAASA,SAAS,Q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","ignoreList":[]}