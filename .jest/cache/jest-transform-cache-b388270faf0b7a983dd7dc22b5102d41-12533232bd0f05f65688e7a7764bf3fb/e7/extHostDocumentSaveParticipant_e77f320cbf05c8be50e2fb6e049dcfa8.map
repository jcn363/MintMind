{"version":3,"names":["cov_18x1ov2zni","actualCoverage","URI","illegalState","TextEdit","Range","TextDocumentSaveReason","EndOfLine","LinkedList","SerializableObjectWithBuffers","ExtHostDocumentSaveParticipant","_logService","_documents","_mainThreadBulkEdits","_thresholds","_callbacks","s","_badListeners","WeakMap","constructor","b","timeout","errors","f","dispose","clear","getOnWillSaveTextDocumentEvent","extension","listener","thisArg","disposables","remove","push","result","Array","isArray","$participateInSave","data","reason","resource","revive","didTimeout","didTimeoutHandle","setTimeout","results","document","getDocument","success","_deliverEventAsyncAndBlameBadListeners","to","clearTimeout","stubEvent","get","Promise","resolve","_deliverEventAsync","then","err","error","identifier","value","Error","message","set","info","promises","t1","Date","now","version","event","Object","freeze","waitUntil","p","isFrozen","apply","reject","handle","all","edits","debug","catch","values","dto","every","e","newText","newEol","range","uri","versionId","undefined","textEdit","from","text","eol","length","$tryApplyWorkspaceEdit"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostDocumentSaveParticipant.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../base/common/event.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { illegalState } from '../../../base/common/errors.js';\nimport { ExtHostDocumentSaveParticipantShape, IWorkspaceEditDto, MainThreadBulkEditsShape } from './extHost.protocol.js';\nimport { TextEdit } from './extHostTypes.js';\nimport { Range, TextDocumentSaveReason, EndOfLine } from './extHostTypeConverters.js';\nimport { ExtHostDocuments } from './extHostDocuments.js';\nimport { SaveReason } from '../../common/editor.js';\nimport type * as vscode from 'vscode';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { SerializableObjectWithBuffers } from '../../services/extensions/common/proxyIdentifier.js';\n\ntype Listener = [Function, any, IExtensionDescription];\n\nexport class ExtHostDocumentSaveParticipant implements ExtHostDocumentSaveParticipantShape {\n\n\tprivate readonly _callbacks = new LinkedList<Listener>();\n\tprivate readonly _badListeners = new WeakMap<Function, number>();\n\n\tconstructor(\n\t\tprivate readonly _logService: ILogService,\n\t\tprivate readonly _documents: ExtHostDocuments,\n\t\tprivate readonly _mainThreadBulkEdits: MainThreadBulkEditsShape,\n\t\tprivate readonly _thresholds: { timeout: number; errors: number } = { timeout: 1500, errors: 3 }\n\t) {\n\t\t//\n\t}\n\n\tdispose(): void {\n\t\tthis._callbacks.clear();\n\t}\n\n\tgetOnWillSaveTextDocumentEvent(extension: IExtensionDescription): Event<vscode.TextDocumentWillSaveEvent> {\n\t\treturn (listener, thisArg, disposables) => {\n\t\t\tconst remove = this._callbacks.push([listener, thisArg, extension]);\n\t\t\tconst result = { dispose: remove };\n\t\t\tif (Array.isArray(disposables)) {\n\t\t\t\tdisposables.push(result);\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t}\n\n\tasync $participateInSave(data: UriComponents, reason: SaveReason): Promise<boolean[]> {\n\t\tconst resource = URI.revive(data);\n\n\t\tlet didTimeout = false;\n\t\tconst didTimeoutHandle = setTimeout(() => didTimeout = true, this._thresholds.timeout);\n\n\t\tconst results: boolean[] = [];\n\t\ttry {\n\t\t\tfor (const listener of [...this._callbacks]) { // copy to prevent concurrent modifications\n\t\t\t\tif (didTimeout) {\n\t\t\t\t\t// timeout - no more listeners\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst document = this._documents.getDocument(resource);\n\t\t\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\t\t\tconst success = await this._deliverEventAsyncAndBlameBadListeners(listener, <any>{ document, reason: TextDocumentSaveReason.to(reason) });\n\t\t\t\tresults.push(success);\n\t\t\t}\n\t\t} finally {\n\t\t\tclearTimeout(didTimeoutHandle);\n\t\t}\n\t\treturn results;\n\t}\n\n\tprivate _deliverEventAsyncAndBlameBadListeners([listener, thisArg, extension]: Listener, stubEvent: vscode.TextDocumentWillSaveEvent): Promise<any> {\n\t\tconst errors = this._badListeners.get(listener);\n\t\tif (typeof errors === 'number' && errors > this._thresholds.errors) {\n\t\t\t// bad listener - ignore\n\t\t\treturn Promise.resolve(false);\n\t\t}\n\n\t\treturn this._deliverEventAsync(extension, listener, thisArg, stubEvent).then(() => {\n\t\t\t// don't send result across the wire\n\t\t\treturn true;\n\n\t\t}, err => {\n\n\t\t\tthis._logService.error(`onWillSaveTextDocument-listener from extension '${extension.identifier.value}' threw ERROR`);\n\t\t\tthis._logService.error(err);\n\n\t\t\tif (!(err instanceof Error) || (<Error>err).message !== 'concurrent_edits') {\n\t\t\t\tconst errors = this._badListeners.get(listener);\n\t\t\t\tthis._badListeners.set(listener, !errors ? 1 : errors + 1);\n\n\t\t\t\tif (typeof errors === 'number' && errors > this._thresholds.errors) {\n\t\t\t\t\tthis._logService.info(`onWillSaveTextDocument-listener from extension '${extension.identifier.value}' will now be IGNORED because of timeouts and/or errors`);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tprivate _deliverEventAsync(extension: IExtensionDescription, listener: Function, thisArg: any, stubEvent: vscode.TextDocumentWillSaveEvent): Promise<any> {\n\n\t\tconst promises: Promise<vscode.TextEdit[]>[] = [];\n\n\t\tconst t1 = Date.now();\n\t\tconst { document, reason } = stubEvent;\n\t\tconst { version } = document;\n\n\t\tconst event = Object.freeze<vscode.TextDocumentWillSaveEvent>({\n\t\t\tdocument,\n\t\t\treason,\n\t\t\twaitUntil(p: Promise<any | vscode.TextEdit[]>) {\n\t\t\t\tif (Object.isFrozen(promises)) {\n\t\t\t\t\tthrow illegalState('waitUntil can not be called async');\n\t\t\t\t}\n\t\t\t\tpromises.push(Promise.resolve(p));\n\t\t\t}\n\t\t});\n\n\t\ttry {\n\t\t\t// fire event\n\t\t\tlistener.apply(thisArg, [event]);\n\t\t} catch (err) {\n\t\t\treturn Promise.reject(err);\n\t\t}\n\n\t\t// freeze promises after event call\n\t\tObject.freeze(promises);\n\n\t\treturn new Promise<vscode.TextEdit[][]>((resolve, reject) => {\n\t\t\t// join on all listener promises, reject after timeout\n\t\t\tconst handle = setTimeout(() => reject(new Error('timeout')), this._thresholds.timeout);\n\n\t\t\treturn Promise.all(promises).then(edits => {\n\t\t\t\tthis._logService.debug(`onWillSaveTextDocument-listener from extension '${extension.identifier.value}' finished after ${(Date.now() - t1)}ms`);\n\t\t\t\tclearTimeout(handle);\n\t\t\t\tresolve(edits);\n\t\t\t}).catch(err => {\n\t\t\t\tclearTimeout(handle);\n\t\t\t\treject(err);\n\t\t\t});\n\n\t\t}).then(values => {\n\t\t\tconst dto: IWorkspaceEditDto = { edits: [] };\n\t\t\tfor (const value of values) {\n\t\t\t\tif (Array.isArray(value) && (<vscode.TextEdit[]>value).every(e => e instanceof TextEdit)) {\n\t\t\t\t\tfor (const { newText, newEol, range } of value) {\n\t\t\t\t\t\tdto.edits.push({\n\t\t\t\t\t\t\tresource: document.uri,\n\t\t\t\t\t\t\tversionId: undefined,\n\t\t\t\t\t\t\ttextEdit: {\n\t\t\t\t\t\t\t\trange: range && Range.from(range),\n\t\t\t\t\t\t\t\ttext: newText,\n\t\t\t\t\t\t\t\teol: newEol && EndOfLine.from(newEol),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// apply edits if any and if document\n\t\t\t// didn't change somehow in the meantime\n\t\t\tif (dto.edits.length === 0) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (version === document.version) {\n\t\t\t\treturn this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(new SerializableObjectWithBuffers(dto));\n\t\t\t}\n\n\t\t\treturn Promise.reject(new Error('concurrent_edits'));\n\t\t});\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}