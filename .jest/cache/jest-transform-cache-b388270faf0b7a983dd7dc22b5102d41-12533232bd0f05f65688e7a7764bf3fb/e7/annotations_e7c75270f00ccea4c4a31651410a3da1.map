{"version":3,"names":["cov_ihovosn67","actualCoverage","findLastIdx","MarkdownString","basename","URI","appendMarkdownString","canMergeMarkdownStrings","contentRefUrl","s","annotateSpecialMarkdownContent","response","f","refIdPool","result","item","previousItemIndex","p","b","kind","previousItem","label","name","isUri","inlineReference","uri","refId","printUri","parse","with","path","String","markdownText","toString","annotationMetadata","merged","content","inlineReferences","push","vulnText","encodeURIComponent","JSON","stringify","vulnerabilities","value","isEditText","isEdit","splice","annotateVulnerabilitiesInText","length","isTrusted","extractCodeblockUrisFromText","text","match","exec","all","uriString","textWithoutResult","substring","index","undefined","extractVulnerabilitiesFromText","newText","full","details","start","textBefore","linesBefore","split","linesInside","previousNewlineIdx","lastIndexOf","startColumn","endPreviousNewlineIdx","endColumn","vulnDetails","decodeURIComponent","forEach","title","description","range","startLineNumber","endLineNumber","err"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/common/annotations.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findLastIdx } from '../../../../base/common/arraysFind.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { IChatProgressRenderableResponseContent, IChatProgressResponseContent, appendMarkdownString, canMergeMarkdownStrings } from './chatModel.js';\nimport { IChatAgentVulnerabilityDetails, IChatMarkdownContent } from './chatService.js';\n\nexport const contentRefUrl = 'http://_vscodecontentref_'; // must be lowercase for URI\n\nexport function annotateSpecialMarkdownContent(response: Iterable<IChatProgressResponseContent>): IChatProgressRenderableResponseContent[] {\n\tlet refIdPool = 0;\n\n\tconst result: IChatProgressRenderableResponseContent[] = [];\n\tfor (const item of response) {\n\t\tconst previousItemIndex = findLastIdx(result, p => p.kind !== 'textEditGroup' && p.kind !== 'undoStop');\n\t\tconst previousItem = result[previousItemIndex];\n\t\tif (item.kind === 'inlineReference') {\n\t\t\tlet label: string | undefined = item.name;\n\t\t\tif (!label) {\n\t\t\t\tif (URI.isUri(item.inlineReference)) {\n\t\t\t\t\tlabel = basename(item.inlineReference);\n\t\t\t\t} else if ('name' in item.inlineReference) {\n\t\t\t\t\tlabel = item.inlineReference.name;\n\t\t\t\t} else {\n\t\t\t\t\tlabel = basename(item.inlineReference.uri);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst refId = refIdPool++;\n\t\t\tconst printUri = URI.parse(contentRefUrl).with({ path: String(refId) });\n\t\t\tconst markdownText = `[${label}](${printUri.toString()})`;\n\n\t\t\tconst annotationMetadata = { [refId]: item };\n\n\t\t\tif (previousItem?.kind === 'markdownContent') {\n\t\t\t\tconst merged = appendMarkdownString(previousItem.content, new MarkdownString(markdownText));\n\t\t\t\tresult[previousItemIndex] = { ...previousItem, content: merged, inlineReferences: { ...annotationMetadata, ...(previousItem.inlineReferences || {}) } };\n\t\t\t} else {\n\t\t\t\tresult.push({ content: new MarkdownString(markdownText), inlineReferences: annotationMetadata, kind: 'markdownContent' });\n\t\t\t}\n\t\t} else if (item.kind === 'markdownContent' && previousItem?.kind === 'markdownContent' && canMergeMarkdownStrings(previousItem.content, item.content)) {\n\t\t\tconst merged = appendMarkdownString(previousItem.content, item.content);\n\t\t\tresult[previousItemIndex] = { ...previousItem, content: merged };\n\t\t} else if (item.kind === 'markdownVuln') {\n\t\t\tconst vulnText = encodeURIComponent(JSON.stringify(item.vulnerabilities));\n\t\t\tconst markdownText = `<vscode_annotation details='${vulnText}'>${item.content.value}</vscode_annotation>`;\n\t\t\tif (previousItem?.kind === 'markdownContent') {\n\t\t\t\t// Since this is inside a codeblock, it needs to be merged into the previous markdown content.\n\t\t\t\tconst merged = appendMarkdownString(previousItem.content, new MarkdownString(markdownText));\n\t\t\t\tresult[previousItemIndex] = { ...previousItem, content: merged };\n\t\t\t} else {\n\t\t\t\tresult.push({ content: new MarkdownString(markdownText), kind: 'markdownContent' });\n\t\t\t}\n\t\t} else if (item.kind === 'codeblockUri') {\n\t\t\tif (previousItem?.kind === 'markdownContent') {\n\t\t\t\tconst isEditText = item.isEdit ? ` isEdit` : '';\n\t\t\t\tconst markdownText = `<vscode_codeblock_uri${isEditText}>${item.uri.toString()}</vscode_codeblock_uri>`;\n\t\t\t\tconst merged = appendMarkdownString(previousItem.content, new MarkdownString(markdownText));\n\t\t\t\t// delete the previous and append to ensure that we don't reorder the edit before the undo stop containing it\n\t\t\t\tresult.splice(previousItemIndex, 1);\n\t\t\t\tresult.push({ ...previousItem, content: merged });\n\t\t\t}\n\t\t} else {\n\t\t\tresult.push(item);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport interface IMarkdownVulnerability {\n\treadonly title: string;\n\treadonly description: string;\n\treadonly range: IRange;\n}\n\nexport function annotateVulnerabilitiesInText(response: ReadonlyArray<IChatProgressResponseContent>): readonly IChatMarkdownContent[] {\n\tconst result: IChatMarkdownContent[] = [];\n\tfor (const item of response) {\n\t\tconst previousItem = result[result.length - 1];\n\t\tif (item.kind === 'markdownContent') {\n\t\t\tif (previousItem?.kind === 'markdownContent') {\n\t\t\t\tresult[result.length - 1] = { content: new MarkdownString(previousItem.content.value + item.content.value, { isTrusted: previousItem.content.isTrusted }), kind: 'markdownContent' };\n\t\t\t} else {\n\t\t\t\tresult.push(item);\n\t\t\t}\n\t\t} else if (item.kind === 'markdownVuln') {\n\t\t\tconst vulnText = encodeURIComponent(JSON.stringify(item.vulnerabilities));\n\t\t\tconst markdownText = `<vscode_annotation details='${vulnText}'>${item.content.value}</vscode_annotation>`;\n\t\t\tif (previousItem?.kind === 'markdownContent') {\n\t\t\t\tresult[result.length - 1] = { content: new MarkdownString(previousItem.content.value + markdownText, { isTrusted: previousItem.content.isTrusted }), kind: 'markdownContent' };\n\t\t\t} else {\n\t\t\t\tresult.push({ content: new MarkdownString(markdownText), kind: 'markdownContent' });\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function extractCodeblockUrisFromText(text: string): { uri: URI; isEdit?: boolean; textWithoutResult: string } | undefined {\n\tconst match = /<vscode_codeblock_uri( isEdit)?>(.*?)<\\/vscode_codeblock_uri>/ms.exec(text);\n\tif (match) {\n\t\tconst [all, isEdit, uriString] = match;\n\t\tif (uriString) {\n\t\t\tconst result = URI.parse(uriString);\n\t\t\tconst textWithoutResult = text.substring(0, match.index) + text.substring(match.index + all.length);\n\t\t\treturn { uri: result, textWithoutResult, isEdit: !!isEdit };\n\t\t}\n\t}\n\treturn undefined;\n}\n\nexport function extractVulnerabilitiesFromText(text: string): { newText: string; vulnerabilities: IMarkdownVulnerability[] } {\n\tconst vulnerabilities: IMarkdownVulnerability[] = [];\n\tlet newText = text;\n\tlet match: RegExpExecArray | null;\n\twhile ((match = /<vscode_annotation details='(.*?)'>(.*?)<\\/vscode_annotation>/ms.exec(newText)) !== null) {\n\t\tconst [full, details, content] = match;\n\t\tconst start = match.index;\n\t\tconst textBefore = newText.substring(0, start);\n\t\tconst linesBefore = textBefore.split('\\n').length - 1;\n\t\tconst linesInside = content.split('\\n').length - 1;\n\n\t\tconst previousNewlineIdx = textBefore.lastIndexOf('\\n');\n\t\tconst startColumn = start - (previousNewlineIdx + 1) + 1;\n\t\tconst endPreviousNewlineIdx = (textBefore + content).lastIndexOf('\\n');\n\t\tconst endColumn = start + content.length - (endPreviousNewlineIdx + 1) + 1;\n\n\t\ttry {\n\t\t\tconst vulnDetails: IChatAgentVulnerabilityDetails[] = JSON.parse(decodeURIComponent(details));\n\t\t\tvulnDetails.forEach(({ title, description }) => vulnerabilities.push({\n\t\t\t\ttitle, description, range: { startLineNumber: linesBefore + 1, startColumn, endLineNumber: linesBefore + linesInside + 1, endColumn }\n\t\t\t}));\n\t\t} catch (err) {\n\t\t\t// Something went wrong with encoding this text, just ignore it\n\t\t}\n\t\tnewText = newText.substring(0, start) + content + newText.substring(start + full.length);\n\t}\n\n\treturn { newText, vulnerabilities };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}