{"version":3,"names":["cov_ecpnqdtlp","actualCoverage","Barrier","Emitter","Event","Disposable","McpGalleryManifestIPCService","_onDidChangeMcpGalleryManifest","s","_register","onDidChangeMcpGalleryManifest","event","_onDidChangeMcpGalleryManifestStatus","onDidChangeMcpGalleryManifestStatus","_mcpGalleryManifest","barrier","mcpGalleryManifestStatus","f","b","constructor","server","registerChannel","listen","None","call","context","command","args","manifest","Array","isArray","Promise","resolve","setMcpGalleryManifest","Error","getMcpGalleryManifest","wait","fire","open"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/mcp/common/mcpGalleryManifestServiceIpc.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Barrier } from '../../../base/common/async.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { IChannelServer } from '../../../base/parts/ipc/common/ipc.js';\nimport { IMcpGalleryManifest, IMcpGalleryManifestService, McpGalleryManifestStatus } from './mcpGalleryManifest.js';\n\nexport class McpGalleryManifestIPCService extends Disposable implements IMcpGalleryManifestService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate _onDidChangeMcpGalleryManifest = this._register(new Emitter<IMcpGalleryManifest | null>());\n\treadonly onDidChangeMcpGalleryManifest = this._onDidChangeMcpGalleryManifest.event;\n\n\tprivate _onDidChangeMcpGalleryManifestStatus = this._register(new Emitter<McpGalleryManifestStatus>());\n\treadonly onDidChangeMcpGalleryManifestStatus = this._onDidChangeMcpGalleryManifestStatus.event;\n\n\tprivate _mcpGalleryManifest: IMcpGalleryManifest | null | undefined;\n\tprivate readonly barrier = new Barrier();\n\n\tget mcpGalleryManifestStatus(): McpGalleryManifestStatus {\n\t\treturn this._mcpGalleryManifest ? McpGalleryManifestStatus.Available : McpGalleryManifestStatus.Unavailable;\n\t}\n\n\tconstructor(server: IChannelServer<unknown>) {\n\t\tsuper();\n\t\tserver.registerChannel('mcpGalleryManifest', {\n\t\t\tlisten: () => Event.None,\n\t\t\tcall: async <T>(context: unknown, command: string, args?: unknown): Promise<T> => {\n\t\t\t\tswitch (command) {\n\t\t\t\t\tcase 'setMcpGalleryManifest': {\n\t\t\t\t\t\tconst manifest = Array.isArray(args) ? args[0] as IMcpGalleryManifest | null : null;\n\t\t\t\t\t\treturn Promise.resolve(this.setMcpGalleryManifest(manifest)) as T;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthrow new Error('Invalid call');\n\t\t\t}\n\t\t});\n\t}\n\n\tasync getMcpGalleryManifest(): Promise<IMcpGalleryManifest | null> {\n\t\tawait this.barrier.wait();\n\t\treturn this._mcpGalleryManifest ?? null;\n\t}\n\n\tprivate setMcpGalleryManifest(manifest: IMcpGalleryManifest | null): void {\n\t\tthis._mcpGalleryManifest = manifest;\n\t\tthis._onDidChangeMcpGalleryManifest.fire(manifest);\n\t\tthis._onDidChangeMcpGalleryManifestStatus.fire(this.mcpGalleryManifestStatus);\n\t\tthis.barrier.open();\n\t}\n\n}\n"],"mappings":"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","ignoreList":[]}