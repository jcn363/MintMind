0810686a011972fd114f7b4d61ee75cb
/* istanbul ignore next */
function cov_73rbd9ckd() {
  var path = "/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/promptSyntax/saveAsPromptFileActions.ts";
  var hash = "27f8db8453dd2f28df6a74e14289331625c50974";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/promptSyntax/saveAsPromptFileActions.ts",
    statementMap: {
      "0": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 20
        }
      },
      "1": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 37
        }
      },
      "2": {
        start: {
          line: 28,
          column: 37
        },
        end: {
          line: 28,
          column: 72
        }
      },
      "3": {
        start: {
          line: 29,
          column: 34
        },
        end: {
          line: 29,
          column: 66
        }
      },
      "4": {
        start: {
          line: 30,
          column: 32
        },
        end: {
          line: 30,
          column: 62
        }
      },
      "5": {
        start: {
          line: 31,
          column: 28
        },
        end: {
          line: 31,
          column: 54
        }
      },
      "6": {
        start: {
          line: 32,
          column: 33
        },
        end: {
          line: 32,
          column: 72
        }
      },
      "7": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 35,
          column: 9
        }
      },
      "8": {
        start: {
          line: 34,
          column: 12
        },
        end: {
          line: 34,
          column: 19
        }
      },
      "9": {
        start: {
          line: 36,
          column: 22
        },
        end: {
          line: 36,
          column: 49
        }
      },
      "10": {
        start: {
          line: 37,
          column: 8
        },
        end: {
          line: 39,
          column: 9
        }
      },
      "11": {
        start: {
          line: 38,
          column: 12
        },
        end: {
          line: 38,
          column: 19
        }
      },
      "12": {
        start: {
          line: 40,
          column: 26
        },
        end: {
          line: 40,
          column: 127
        }
      },
      "13": {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 43,
          column: 9
        }
      },
      "14": {
        start: {
          line: 42,
          column: 12
        },
        end: {
          line: 42,
          column: 19
        }
      },
      "15": {
        start: {
          line: 44,
          column: 24
        },
        end: {
          line: 44,
          column: 150
        }
      },
      "16": {
        start: {
          line: 45,
          column: 8
        },
        end: {
          line: 47,
          column: 9
        }
      },
      "17": {
        start: {
          line: 46,
          column: 12
        },
        end: {
          line: 46,
          column: 19
        }
      },
      "18": {
        start: {
          line: 48,
          column: 24
        },
        end: {
          line: 48,
          column: 56
        }
      },
      "19": {
        start: {
          line: 49,
          column: 8
        },
        end: {
          line: 54,
          column: 9
        }
      },
      "20": {
        start: {
          line: 50,
          column: 12
        },
        end: {
          line: 50,
          column: 82
        }
      },
      "21": {
        start: {
          line: 53,
          column: 12
        },
        end: {
          line: 53,
          column: 55
        }
      },
      "22": {
        start: {
          line: 55,
          column: 8
        },
        end: {
          line: 55,
          column: 88
        }
      },
      "23": {
        start: {
          line: 59,
          column: 4
        },
        end: {
          line: 71,
          column: 6
        }
      },
      "24": {
        start: {
          line: 73,
          column: 45
        },
        end: {
          line: 73,
          column: 83
        }
      },
      "25": {
        start: {
          line: 76,
          column: 8
        },
        end: {
          line: 76,
          column: 238
        }
      },
      "26": {
        start: {
          line: 79,
          column: 44
        },
        end: {
          line: 79,
          column: 81
        }
      },
      "27": {
        start: {
          line: 82,
          column: 8
        },
        end: {
          line: 82,
          column: 231
        }
      },
      "28": {
        start: {
          line: 85,
          column: 51
        },
        end: {
          line: 85,
          column: 95
        }
      },
      "29": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 88,
          column: 280
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 23,
            column: 5
          }
        },
        loc: {
          start: {
            line: 23,
            column: 34
          },
          end: {
            line: 26,
            column: 5
          }
        },
        line: 23
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        loc: {
          start: {
            line: 27,
            column: 35
          },
          end: {
            line: 56,
            column: 5
          }
        },
        line: 27
      },
      "2": {
        name: "createOptions",
        decl: {
          start: {
            line: 58,
            column: 9
          },
          end: {
            line: 58,
            column: 22
          }
        },
        loc: {
          start: {
            line: 58,
            column: 59
          },
          end: {
            line: 72,
            column: 1
          }
        },
        line: 58
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 75,
            column: 4
          },
          end: {
            line: 75,
            column: 5
          }
        },
        loc: {
          start: {
            line: 75,
            column: 18
          },
          end: {
            line: 77,
            column: 5
          }
        },
        line: 75
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 81,
            column: 4
          },
          end: {
            line: 81,
            column: 5
          }
        },
        loc: {
          start: {
            line: 81,
            column: 18
          },
          end: {
            line: 83,
            column: 5
          }
        },
        line: 81
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 87,
            column: 4
          },
          end: {
            line: 87,
            column: 5
          }
        },
        loc: {
          start: {
            line: 87,
            column: 18
          },
          end: {
            line: 89,
            column: 5
          }
        },
        line: 87
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 35,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 35,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 33
      },
      "1": {
        loc: {
          start: {
            line: 37,
            column: 8
          },
          end: {
            line: 39,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 37,
            column: 8
          },
          end: {
            line: 39,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 37
      },
      "2": {
        loc: {
          start: {
            line: 41,
            column: 8
          },
          end: {
            line: 43,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 41,
            column: 8
          },
          end: {
            line: 43,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 41
      },
      "3": {
        loc: {
          start: {
            line: 45,
            column: 8
          },
          end: {
            line: 47,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 45,
            column: 8
          },
          end: {
            line: 47,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 45
      },
      "4": {
        loc: {
          start: {
            line: 49,
            column: 8
          },
          end: {
            line: 54,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 49,
            column: 8
          },
          end: {
            line: 54,
            column: 9
          }
        }, {
          start: {
            line: 52,
            column: 13
          },
          end: {
            line: 54,
            column: 9
          }
        }],
        line: 49
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0]
    },
    inputSourceMap: {
      file: "/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/promptSyntax/saveAsPromptFileActions.ts",
      mappings: "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",
      names: [],
      sources: ["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/promptSyntax/saveAsPromptFileActions.ts"],
      sourcesContent: ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { ILocalizedString, localize2 } from '../../../../../nls.js';\nimport { ICommandActionTitle } from '../../../../../platform/action/common/action.js';\nimport { Action2, IAction2Options, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\nimport { ITextFileService } from '../../../../services/textfile/common/textfiles.js';\nimport { chatEditingWidgetFileStateContextKey, ModifiedFileEntryState } from '../../common/chatEditingService.js';\nimport { getCleanPromptName } from '../../common/promptSyntax/config/promptFileLocations.js';\nimport { AGENT_LANGUAGE_ID, INSTRUCTIONS_LANGUAGE_ID, PROMPT_LANGUAGE_ID, PromptsType } from '../../common/promptSyntax/promptTypes.js';\nimport { CHAT_CATEGORY } from '../actions/chatActions.js';\nimport { askForPromptFileName } from './pickers/askForPromptName.js';\nimport { askForPromptSourceFolder } from './pickers/askForPromptSourceFolder.js';\n\nclass BaseSaveAsPromptFileAction extends Action2 {\n\tconstructor(opts: Readonly<IAction2Options>, private readonly promptType: PromptsType) {\n\t\tsuper(opts);\n\t}\n\n\tasync run(accessor: ServicesAccessor, configUri?: string): Promise<void> {\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst textFileService = accessor.get(ITextFileService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst activeCodeEditor = codeEditorService.getActiveCodeEditor();\n\t\tif (!activeCodeEditor) {\n\t\t\treturn;\n\t\t}\n\t\tconst model = activeCodeEditor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\t\tconst newFolder = await instantiationService.invokeFunction(askForPromptSourceFolder, this.promptType, undefined, true);\n\t\tif (!newFolder) {\n\t\t\treturn;\n\t\t}\n\t\tconst newName = await instantiationService.invokeFunction(askForPromptFileName, this.promptType, newFolder.uri, getCleanPromptName(model.uri));\n\t\tif (!newName) {\n\t\t\treturn;\n\t\t}\n\t\tconst newFile = joinPath(newFolder.uri, newName);\n\t\tif (model.uri.scheme === Schemas.untitled) {\n\t\t\tawait textFileService.saveAs(model.uri, newFile, { from: model.uri });\n\t\t} else {\n\t\t\tawait fileService.copy(model.uri, newFile);\n\t\t}\n\t\tawait codeEditorService.openCodeEditor({ resource: newFile }, activeCodeEditor);\n\t}\n}\n\nfunction createOptions(id: string, title: ICommandActionTitle, description: ILocalizedString, languageId: string): Readonly<IAction2Options> {\n\treturn {\n\t\tid: id,\n\t\ttitle: title,\n\t\tmetadata: {\n\t\t\tdescription: description,\n\t\t},\n\t\tcategory: CHAT_CATEGORY,\n\t\tf1: false,\n\t\tmenu: {\n\t\t\tid: MenuId.EditorContent,\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.equals(ResourceContextKey.Scheme.key, Schemas.untitled),\n\t\t\t\tContextKeyExpr.equals(ResourceContextKey.LangId.key, languageId),\n\t\t\t\tContextKeyExpr.notEquals(chatEditingWidgetFileStateContextKey.key, ModifiedFileEntryState.Modified),\n\t\t\t)\n\t\t}\n\t};\n}\n\nexport const SAVE_AS_PROMPT_FILE_ACTION_ID = 'workbench.action.chat.save-as-prompt';\n\nexport class SaveAsPromptFileAction extends BaseSaveAsPromptFileAction {\n\tconstructor() {\n\t\tsuper(createOptions(SAVE_AS_PROMPT_FILE_ACTION_ID, localize2('promptfile.savePromptFile', \"Save As Prompt File\"), localize2('promptfile.savePromptFile.description', \"Save as prompt file\"), PROMPT_LANGUAGE_ID), PromptsType.prompt);\n\t}\n}\n\nexport const SAVE_AS_AGENT_FILE_ACTION_ID = 'workbench.action.chat.save-as-agent';\n\nexport class SaveAsAgentFileAction extends BaseSaveAsPromptFileAction {\n\tconstructor() {\n\t\tsuper(createOptions(SAVE_AS_AGENT_FILE_ACTION_ID, localize2('promptfile.saveAgentFile', \"Save As Agent File\"), localize2('promptfile.saveAgentFile.description', \"Save as agent file\"), AGENT_LANGUAGE_ID), PromptsType.agent);\n\t}\n}\n\nexport const SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID = 'workbench.action.chat.save-as-instructions';\n\nexport class SaveAsInstructionsFileAction extends BaseSaveAsPromptFileAction {\n\tconstructor() {\n\t\tsuper(createOptions(SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID, localize2('promptfile.saveInstructionsFile', \"Save As Instructions File\"), localize2('promptfile.saveInstructionsFile.description', \"Save as instructions file\"), INSTRUCTIONS_LANGUAGE_ID), PromptsType.instructions);\n\t}\n}\n\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "27f8db8453dd2f28df6a74e14289331625c50974"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_73rbd9ckd = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_73rbd9ckd();
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import { Schemas } from '../../../../../base/common/network.js';
import { joinPath } from '../../../../../base/common/resources.js';
import { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';
import { localize2 } from '../../../../../nls.js';
import { Action2, MenuId } from '../../../../../platform/actions/common/actions.js';
import { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';
import { IFileService } from '../../../../../platform/files/common/files.js';
import { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';
import { ResourceContextKey } from '../../../../common/contextkeys.js';
import { ITextFileService } from '../../../../services/textfile/common/textfiles.js';
import { chatEditingWidgetFileStateContextKey } from '../../common/chatEditingService.js';
import { getCleanPromptName } from '../../common/promptSyntax/config/promptFileLocations.js';
import { AGENT_LANGUAGE_ID, INSTRUCTIONS_LANGUAGE_ID, PROMPT_LANGUAGE_ID, PromptsType } from '../../common/promptSyntax/promptTypes.js';
import { CHAT_CATEGORY } from '../actions/chatActions.js';
import { askForPromptFileName } from './pickers/askForPromptName.js';
import { askForPromptSourceFolder } from './pickers/askForPromptSourceFolder.js';
class BaseSaveAsPromptFileAction extends Action2 {
  promptType;
  constructor(opts, promptType) {
    /* istanbul ignore next */
    cov_73rbd9ckd().f[0]++;
    cov_73rbd9ckd().s[0]++;
    super(opts);
    /* istanbul ignore next */
    cov_73rbd9ckd().s[1]++;
    this.promptType = promptType;
  }
  async run(accessor, configUri) {
    /* istanbul ignore next */
    cov_73rbd9ckd().f[1]++;
    const instantiationService =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[2]++, accessor.get(IInstantiationService));
    const codeEditorService =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[3]++, accessor.get(ICodeEditorService));
    const textFileService =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[4]++, accessor.get(ITextFileService));
    const fileService =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[5]++, accessor.get(IFileService));
    const activeCodeEditor =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[6]++, codeEditorService.getActiveCodeEditor());
    /* istanbul ignore next */
    cov_73rbd9ckd().s[7]++;
    if (!activeCodeEditor) {
      /* istanbul ignore next */
      cov_73rbd9ckd().b[0][0]++;
      cov_73rbd9ckd().s[8]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_73rbd9ckd().b[0][1]++;
    }
    const model =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[9]++, activeCodeEditor.getModel());
    /* istanbul ignore next */
    cov_73rbd9ckd().s[10]++;
    if (!model) {
      /* istanbul ignore next */
      cov_73rbd9ckd().b[1][0]++;
      cov_73rbd9ckd().s[11]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_73rbd9ckd().b[1][1]++;
    }
    const newFolder =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[12]++, await instantiationService.invokeFunction(askForPromptSourceFolder, this.promptType, undefined, true));
    /* istanbul ignore next */
    cov_73rbd9ckd().s[13]++;
    if (!newFolder) {
      /* istanbul ignore next */
      cov_73rbd9ckd().b[2][0]++;
      cov_73rbd9ckd().s[14]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_73rbd9ckd().b[2][1]++;
    }
    const newName =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[15]++, await instantiationService.invokeFunction(askForPromptFileName, this.promptType, newFolder.uri, getCleanPromptName(model.uri)));
    /* istanbul ignore next */
    cov_73rbd9ckd().s[16]++;
    if (!newName) {
      /* istanbul ignore next */
      cov_73rbd9ckd().b[3][0]++;
      cov_73rbd9ckd().s[17]++;
      return;
    } else
    /* istanbul ignore next */
    {
      cov_73rbd9ckd().b[3][1]++;
    }
    const newFile =
    /* istanbul ignore next */
    (cov_73rbd9ckd().s[18]++, joinPath(newFolder.uri, newName));
    /* istanbul ignore next */
    cov_73rbd9ckd().s[19]++;
    if (model.uri.scheme === Schemas.untitled) {
      /* istanbul ignore next */
      cov_73rbd9ckd().b[4][0]++;
      cov_73rbd9ckd().s[20]++;
      await textFileService.saveAs(model.uri, newFile, {
        from: model.uri
      });
    } else {
      /* istanbul ignore next */
      cov_73rbd9ckd().b[4][1]++;
      cov_73rbd9ckd().s[21]++;
      await fileService.copy(model.uri, newFile);
    }
    /* istanbul ignore next */
    cov_73rbd9ckd().s[22]++;
    await codeEditorService.openCodeEditor({
      resource: newFile
    }, activeCodeEditor);
  }
}
function createOptions(id, title, description, languageId) {
  /* istanbul ignore next */
  cov_73rbd9ckd().f[2]++;
  cov_73rbd9ckd().s[23]++;
  return {
    id: id,
    title: title,
    metadata: {
      description: description
    },
    category: CHAT_CATEGORY,
    f1: false,
    menu: {
      id: MenuId.EditorContent,
      when: ContextKeyExpr.and(ContextKeyExpr.equals(ResourceContextKey.Scheme.key, Schemas.untitled), ContextKeyExpr.equals(ResourceContextKey.LangId.key, languageId), ContextKeyExpr.notEquals(chatEditingWidgetFileStateContextKey.key, 0 /* ModifiedFileEntryState.Modified */))
    }
  };
}
export const SAVE_AS_PROMPT_FILE_ACTION_ID =
/* istanbul ignore next */
(cov_73rbd9ckd().s[24]++, 'workbench.action.chat.save-as-prompt');
export class SaveAsPromptFileAction extends BaseSaveAsPromptFileAction {
  constructor() {
    /* istanbul ignore next */
    cov_73rbd9ckd().f[3]++;
    cov_73rbd9ckd().s[25]++;
    super(createOptions(SAVE_AS_PROMPT_FILE_ACTION_ID, localize2('promptfile.savePromptFile', "Save As Prompt File"), localize2('promptfile.savePromptFile.description', "Save as prompt file"), PROMPT_LANGUAGE_ID), PromptsType.prompt);
  }
}
export const SAVE_AS_AGENT_FILE_ACTION_ID =
/* istanbul ignore next */
(cov_73rbd9ckd().s[26]++, 'workbench.action.chat.save-as-agent');
export class SaveAsAgentFileAction extends BaseSaveAsPromptFileAction {
  constructor() {
    /* istanbul ignore next */
    cov_73rbd9ckd().f[4]++;
    cov_73rbd9ckd().s[27]++;
    super(createOptions(SAVE_AS_AGENT_FILE_ACTION_ID, localize2('promptfile.saveAgentFile', "Save As Agent File"), localize2('promptfile.saveAgentFile.description', "Save as agent file"), AGENT_LANGUAGE_ID), PromptsType.agent);
  }
}
export const SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID =
/* istanbul ignore next */
(cov_73rbd9ckd().s[28]++, 'workbench.action.chat.save-as-instructions');
export class SaveAsInstructionsFileAction extends BaseSaveAsPromptFileAction {
  constructor() {
    /* istanbul ignore next */
    cov_73rbd9ckd().f[5]++;
    cov_73rbd9ckd().s[29]++;
    super(createOptions(SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID, localize2('promptfile.saveInstructionsFile', "Save As Instructions File"), localize2('promptfile.saveInstructionsFile.description', "Save as instructions file"), INSTRUCTIONS_LANGUAGE_ID), PromptsType.instructions);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfNzNyYmQ5Y2tkIiwiYWN0dWFsQ292ZXJhZ2UiLCJTY2hlbWFzIiwiam9pblBhdGgiLCJJQ29kZUVkaXRvclNlcnZpY2UiLCJsb2NhbGl6ZTIiLCJBY3Rpb24yIiwiTWVudUlkIiwiQ29udGV4dEtleUV4cHIiLCJJRmlsZVNlcnZpY2UiLCJJSW5zdGFudGlhdGlvblNlcnZpY2UiLCJSZXNvdXJjZUNvbnRleHRLZXkiLCJJVGV4dEZpbGVTZXJ2aWNlIiwiY2hhdEVkaXRpbmdXaWRnZXRGaWxlU3RhdGVDb250ZXh0S2V5IiwiZ2V0Q2xlYW5Qcm9tcHROYW1lIiwiQUdFTlRfTEFOR1VBR0VfSUQiLCJJTlNUUlVDVElPTlNfTEFOR1VBR0VfSUQiLCJQUk9NUFRfTEFOR1VBR0VfSUQiLCJQcm9tcHRzVHlwZSIsIkNIQVRfQ0FURUdPUlkiLCJhc2tGb3JQcm9tcHRGaWxlTmFtZSIsImFza0ZvclByb21wdFNvdXJjZUZvbGRlciIsIkJhc2VTYXZlQXNQcm9tcHRGaWxlQWN0aW9uIiwicHJvbXB0VHlwZSIsImNvbnN0cnVjdG9yIiwib3B0cyIsImYiLCJzIiwicnVuIiwiYWNjZXNzb3IiLCJjb25maWdVcmkiLCJpbnN0YW50aWF0aW9uU2VydmljZSIsImdldCIsImNvZGVFZGl0b3JTZXJ2aWNlIiwidGV4dEZpbGVTZXJ2aWNlIiwiZmlsZVNlcnZpY2UiLCJhY3RpdmVDb2RlRWRpdG9yIiwiZ2V0QWN0aXZlQ29kZUVkaXRvciIsImIiLCJtb2RlbCIsImdldE1vZGVsIiwibmV3Rm9sZGVyIiwiaW52b2tlRnVuY3Rpb24iLCJ1bmRlZmluZWQiLCJuZXdOYW1lIiwidXJpIiwibmV3RmlsZSIsInNjaGVtZSIsInVudGl0bGVkIiwic2F2ZUFzIiwiZnJvbSIsImNvcHkiLCJvcGVuQ29kZUVkaXRvciIsInJlc291cmNlIiwiY3JlYXRlT3B0aW9ucyIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImxhbmd1YWdlSWQiLCJtZXRhZGF0YSIsImNhdGVnb3J5IiwiZjEiLCJtZW51IiwiRWRpdG9yQ29udGVudCIsIndoZW4iLCJhbmQiLCJlcXVhbHMiLCJTY2hlbWUiLCJrZXkiLCJMYW5nSWQiLCJub3RFcXVhbHMiLCJTQVZFX0FTX1BST01QVF9GSUxFX0FDVElPTl9JRCIsIlNhdmVBc1Byb21wdEZpbGVBY3Rpb24iLCJwcm9tcHQiLCJTQVZFX0FTX0FHRU5UX0ZJTEVfQUNUSU9OX0lEIiwiU2F2ZUFzQWdlbnRGaWxlQWN0aW9uIiwiYWdlbnQiLCJTQVZFX0FTX0lOU1RSVUNUSU9OU19GSUxFX0FDVElPTl9JRCIsIlNhdmVBc0luc3RydWN0aW9uc0ZpbGVBY3Rpb24iLCJpbnN0cnVjdGlvbnMiXSwic291cmNlcyI6WyIvaG9tZS91c2VyL0Rlc2t0b3AvTWludE1pbmQvc3JjL3ZzL3dvcmtiZW5jaC9jb250cmliL2NoYXQvYnJvd3Nlci9wcm9tcHRTeW50YXgvc2F2ZUFzUHJvbXB0RmlsZUFjdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCB7IFNjaGVtYXMgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9iYXNlL2NvbW1vbi9uZXR3b3JrLmpzJztcbmltcG9ydCB7IGpvaW5QYXRoIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vYmFzZS9jb21tb24vcmVzb3VyY2VzLmpzJztcbmltcG9ydCB7IFNlcnZpY2VzQWNjZXNzb3IgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9lZGl0b3IvYnJvd3Nlci9lZGl0b3JFeHRlbnNpb25zLmpzJztcbmltcG9ydCB7IElDb2RlRWRpdG9yU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2VkaXRvci9icm93c2VyL3NlcnZpY2VzL2NvZGVFZGl0b3JTZXJ2aWNlLmpzJztcbmltcG9ydCB7IElMb2NhbGl6ZWRTdHJpbmcsIGxvY2FsaXplMiB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL25scy5qcyc7XG5pbXBvcnQgeyBJQ29tbWFuZEFjdGlvblRpdGxlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm0vYWN0aW9uL2NvbW1vbi9hY3Rpb24uanMnO1xuaW1wb3J0IHsgQWN0aW9uMiwgSUFjdGlvbjJPcHRpb25zLCBNZW51SWQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9wbGF0Zm9ybS9hY3Rpb25zL2NvbW1vbi9hY3Rpb25zLmpzJztcbmltcG9ydCB7IENvbnRleHRLZXlFeHByIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm0vY29udGV4dGtleS9jb21tb24vY29udGV4dGtleS5qcyc7XG5pbXBvcnQgeyBJRmlsZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9wbGF0Zm9ybS9maWxlcy9jb21tb24vZmlsZXMuanMnO1xuaW1wb3J0IHsgSUluc3RhbnRpYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvbi5qcyc7XG5pbXBvcnQgeyBSZXNvdXJjZUNvbnRleHRLZXkgfSBmcm9tICcuLi8uLi8uLi8uLi9jb21tb24vY29udGV4dGtleXMuanMnO1xuaW1wb3J0IHsgSVRleHRGaWxlU2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NlcnZpY2VzL3RleHRmaWxlL2NvbW1vbi90ZXh0ZmlsZXMuanMnO1xuaW1wb3J0IHsgY2hhdEVkaXRpbmdXaWRnZXRGaWxlU3RhdGVDb250ZXh0S2V5LCBNb2RpZmllZEZpbGVFbnRyeVN0YXRlIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NoYXRFZGl0aW5nU2VydmljZS5qcyc7XG5pbXBvcnQgeyBnZXRDbGVhblByb21wdE5hbWUgfSBmcm9tICcuLi8uLi9jb21tb24vcHJvbXB0U3ludGF4L2NvbmZpZy9wcm9tcHRGaWxlTG9jYXRpb25zLmpzJztcbmltcG9ydCB7IEFHRU5UX0xBTkdVQUdFX0lELCBJTlNUUlVDVElPTlNfTEFOR1VBR0VfSUQsIFBST01QVF9MQU5HVUFHRV9JRCwgUHJvbXB0c1R5cGUgfSBmcm9tICcuLi8uLi9jb21tb24vcHJvbXB0U3ludGF4L3Byb21wdFR5cGVzLmpzJztcbmltcG9ydCB7IENIQVRfQ0FURUdPUlkgfSBmcm9tICcuLi9hY3Rpb25zL2NoYXRBY3Rpb25zLmpzJztcbmltcG9ydCB7IGFza0ZvclByb21wdEZpbGVOYW1lIH0gZnJvbSAnLi9waWNrZXJzL2Fza0ZvclByb21wdE5hbWUuanMnO1xuaW1wb3J0IHsgYXNrRm9yUHJvbXB0U291cmNlRm9sZGVyIH0gZnJvbSAnLi9waWNrZXJzL2Fza0ZvclByb21wdFNvdXJjZUZvbGRlci5qcyc7XG5cbmNsYXNzIEJhc2VTYXZlQXNQcm9tcHRGaWxlQWN0aW9uIGV4dGVuZHMgQWN0aW9uMiB7XG5cdGNvbnN0cnVjdG9yKG9wdHM6IFJlYWRvbmx5PElBY3Rpb24yT3B0aW9ucz4sIHByaXZhdGUgcmVhZG9ubHkgcHJvbXB0VHlwZTogUHJvbXB0c1R5cGUpIHtcblx0XHRzdXBlcihvcHRzKTtcblx0fVxuXG5cdGFzeW5jIHJ1bihhY2Nlc3NvcjogU2VydmljZXNBY2Nlc3NvciwgY29uZmlnVXJpPzogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgaW5zdGFudGlhdGlvblNlcnZpY2UgPSBhY2Nlc3Nvci5nZXQoSUluc3RhbnRpYXRpb25TZXJ2aWNlKTtcblx0XHRjb25zdCBjb2RlRWRpdG9yU2VydmljZSA9IGFjY2Vzc29yLmdldChJQ29kZUVkaXRvclNlcnZpY2UpO1xuXHRcdGNvbnN0IHRleHRGaWxlU2VydmljZSA9IGFjY2Vzc29yLmdldChJVGV4dEZpbGVTZXJ2aWNlKTtcblx0XHRjb25zdCBmaWxlU2VydmljZSA9IGFjY2Vzc29yLmdldChJRmlsZVNlcnZpY2UpO1xuXHRcdGNvbnN0IGFjdGl2ZUNvZGVFZGl0b3IgPSBjb2RlRWRpdG9yU2VydmljZS5nZXRBY3RpdmVDb2RlRWRpdG9yKCk7XG5cdFx0aWYgKCFhY3RpdmVDb2RlRWRpdG9yKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnN0IG1vZGVsID0gYWN0aXZlQ29kZUVkaXRvci5nZXRNb2RlbCgpO1xuXHRcdGlmICghbW9kZWwpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgbmV3Rm9sZGVyID0gYXdhaXQgaW5zdGFudGlhdGlvblNlcnZpY2UuaW52b2tlRnVuY3Rpb24oYXNrRm9yUHJvbXB0U291cmNlRm9sZGVyLCB0aGlzLnByb21wdFR5cGUsIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cdFx0aWYgKCFuZXdGb2xkZXIpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgbmV3TmFtZSA9IGF3YWl0IGluc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKGFza0ZvclByb21wdEZpbGVOYW1lLCB0aGlzLnByb21wdFR5cGUsIG5ld0ZvbGRlci51cmksIGdldENsZWFuUHJvbXB0TmFtZShtb2RlbC51cmkpKTtcblx0XHRpZiAoIW5ld05hbWUpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgbmV3RmlsZSA9IGpvaW5QYXRoKG5ld0ZvbGRlci51cmksIG5ld05hbWUpO1xuXHRcdGlmIChtb2RlbC51cmkuc2NoZW1lID09PSBTY2hlbWFzLnVudGl0bGVkKSB7XG5cdFx0XHRhd2FpdCB0ZXh0RmlsZVNlcnZpY2Uuc2F2ZUFzKG1vZGVsLnVyaSwgbmV3RmlsZSwgeyBmcm9tOiBtb2RlbC51cmkgfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGF3YWl0IGZpbGVTZXJ2aWNlLmNvcHkobW9kZWwudXJpLCBuZXdGaWxlKTtcblx0XHR9XG5cdFx0YXdhaXQgY29kZUVkaXRvclNlcnZpY2Uub3BlbkNvZGVFZGl0b3IoeyByZXNvdXJjZTogbmV3RmlsZSB9LCBhY3RpdmVDb2RlRWRpdG9yKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKGlkOiBzdHJpbmcsIHRpdGxlOiBJQ29tbWFuZEFjdGlvblRpdGxlLCBkZXNjcmlwdGlvbjogSUxvY2FsaXplZFN0cmluZywgbGFuZ3VhZ2VJZDogc3RyaW5nKTogUmVhZG9ubHk8SUFjdGlvbjJPcHRpb25zPiB7XG5cdHJldHVybiB7XG5cdFx0aWQ6IGlkLFxuXHRcdHRpdGxlOiB0aXRsZSxcblx0XHRtZXRhZGF0YToge1xuXHRcdFx0ZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuXHRcdH0sXG5cdFx0Y2F0ZWdvcnk6IENIQVRfQ0FURUdPUlksXG5cdFx0ZjE6IGZhbHNlLFxuXHRcdG1lbnU6IHtcblx0XHRcdGlkOiBNZW51SWQuRWRpdG9yQ29udGVudCxcblx0XHRcdHdoZW46IENvbnRleHRLZXlFeHByLmFuZChcblx0XHRcdFx0Q29udGV4dEtleUV4cHIuZXF1YWxzKFJlc291cmNlQ29udGV4dEtleS5TY2hlbWUua2V5LCBTY2hlbWFzLnVudGl0bGVkKSxcblx0XHRcdFx0Q29udGV4dEtleUV4cHIuZXF1YWxzKFJlc291cmNlQ29udGV4dEtleS5MYW5nSWQua2V5LCBsYW5ndWFnZUlkKSxcblx0XHRcdFx0Q29udGV4dEtleUV4cHIubm90RXF1YWxzKGNoYXRFZGl0aW5nV2lkZ2V0RmlsZVN0YXRlQ29udGV4dEtleS5rZXksIE1vZGlmaWVkRmlsZUVudHJ5U3RhdGUuTW9kaWZpZWQpLFxuXHRcdFx0KVxuXHRcdH1cblx0fTtcbn1cblxuZXhwb3J0IGNvbnN0IFNBVkVfQVNfUFJPTVBUX0ZJTEVfQUNUSU9OX0lEID0gJ3dvcmtiZW5jaC5hY3Rpb24uY2hhdC5zYXZlLWFzLXByb21wdCc7XG5cbmV4cG9ydCBjbGFzcyBTYXZlQXNQcm9tcHRGaWxlQWN0aW9uIGV4dGVuZHMgQmFzZVNhdmVBc1Byb21wdEZpbGVBY3Rpb24ge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcihjcmVhdGVPcHRpb25zKFNBVkVfQVNfUFJPTVBUX0ZJTEVfQUNUSU9OX0lELCBsb2NhbGl6ZTIoJ3Byb21wdGZpbGUuc2F2ZVByb21wdEZpbGUnLCBcIlNhdmUgQXMgUHJvbXB0IEZpbGVcIiksIGxvY2FsaXplMigncHJvbXB0ZmlsZS5zYXZlUHJvbXB0RmlsZS5kZXNjcmlwdGlvbicsIFwiU2F2ZSBhcyBwcm9tcHQgZmlsZVwiKSwgUFJPTVBUX0xBTkdVQUdFX0lEKSwgUHJvbXB0c1R5cGUucHJvbXB0KTtcblx0fVxufVxuXG5leHBvcnQgY29uc3QgU0FWRV9BU19BR0VOVF9GSUxFX0FDVElPTl9JRCA9ICd3b3JrYmVuY2guYWN0aW9uLmNoYXQuc2F2ZS1hcy1hZ2VudCc7XG5cbmV4cG9ydCBjbGFzcyBTYXZlQXNBZ2VudEZpbGVBY3Rpb24gZXh0ZW5kcyBCYXNlU2F2ZUFzUHJvbXB0RmlsZUFjdGlvbiB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdHN1cGVyKGNyZWF0ZU9wdGlvbnMoU0FWRV9BU19BR0VOVF9GSUxFX0FDVElPTl9JRCwgbG9jYWxpemUyKCdwcm9tcHRmaWxlLnNhdmVBZ2VudEZpbGUnLCBcIlNhdmUgQXMgQWdlbnQgRmlsZVwiKSwgbG9jYWxpemUyKCdwcm9tcHRmaWxlLnNhdmVBZ2VudEZpbGUuZGVzY3JpcHRpb24nLCBcIlNhdmUgYXMgYWdlbnQgZmlsZVwiKSwgQUdFTlRfTEFOR1VBR0VfSUQpLCBQcm9tcHRzVHlwZS5hZ2VudCk7XG5cdH1cbn1cblxuZXhwb3J0IGNvbnN0IFNBVkVfQVNfSU5TVFJVQ1RJT05TX0ZJTEVfQUNUSU9OX0lEID0gJ3dvcmtiZW5jaC5hY3Rpb24uY2hhdC5zYXZlLWFzLWluc3RydWN0aW9ucyc7XG5cbmV4cG9ydCBjbGFzcyBTYXZlQXNJbnN0cnVjdGlvbnNGaWxlQWN0aW9uIGV4dGVuZHMgQmFzZVNhdmVBc1Byb21wdEZpbGVBY3Rpb24ge1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRzdXBlcihjcmVhdGVPcHRpb25zKFNBVkVfQVNfSU5TVFJVQ1RJT05TX0ZJTEVfQUNUSU9OX0lELCBsb2NhbGl6ZTIoJ3Byb21wdGZpbGUuc2F2ZUluc3RydWN0aW9uc0ZpbGUnLCBcIlNhdmUgQXMgSW5zdHJ1Y3Rpb25zIEZpbGVcIiksIGxvY2FsaXplMigncHJvbXB0ZmlsZS5zYXZlSW5zdHJ1Y3Rpb25zRmlsZS5kZXNjcmlwdGlvbicsIFwiU2F2ZSBhcyBpbnN0cnVjdGlvbnMgZmlsZVwiKSwgSU5TVFJVQ1RJT05TX0xBTkdVQUdFX0lEKSwgUHJvbXB0c1R5cGUuaW5zdHJ1Y3Rpb25zKTtcblx0fVxufVxuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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