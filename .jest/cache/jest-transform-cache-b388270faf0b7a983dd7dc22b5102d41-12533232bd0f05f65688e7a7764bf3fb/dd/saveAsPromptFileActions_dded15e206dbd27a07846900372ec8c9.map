{"version":3,"names":["cov_73rbd9ckd","actualCoverage","Schemas","joinPath","ICodeEditorService","localize2","Action2","MenuId","ContextKeyExpr","IFileService","IInstantiationService","ResourceContextKey","ITextFileService","chatEditingWidgetFileStateContextKey","getCleanPromptName","AGENT_LANGUAGE_ID","INSTRUCTIONS_LANGUAGE_ID","PROMPT_LANGUAGE_ID","PromptsType","CHAT_CATEGORY","askForPromptFileName","askForPromptSourceFolder","BaseSaveAsPromptFileAction","promptType","constructor","opts","f","s","run","accessor","configUri","instantiationService","get","codeEditorService","textFileService","fileService","activeCodeEditor","getActiveCodeEditor","b","model","getModel","newFolder","invokeFunction","undefined","newName","uri","newFile","scheme","untitled","saveAs","from","copy","openCodeEditor","resource","createOptions","id","title","description","languageId","metadata","category","f1","menu","EditorContent","when","and","equals","Scheme","key","LangId","notEquals","SAVE_AS_PROMPT_FILE_ACTION_ID","SaveAsPromptFileAction","prompt","SAVE_AS_AGENT_FILE_ACTION_ID","SaveAsAgentFileAction","agent","SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID","SaveAsInstructionsFileAction","instructions"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/promptSyntax/saveAsPromptFileActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { ILocalizedString, localize2 } from '../../../../../nls.js';\nimport { ICommandActionTitle } from '../../../../../platform/action/common/action.js';\nimport { Action2, IAction2Options, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\nimport { ITextFileService } from '../../../../services/textfile/common/textfiles.js';\nimport { chatEditingWidgetFileStateContextKey, ModifiedFileEntryState } from '../../common/chatEditingService.js';\nimport { getCleanPromptName } from '../../common/promptSyntax/config/promptFileLocations.js';\nimport { AGENT_LANGUAGE_ID, INSTRUCTIONS_LANGUAGE_ID, PROMPT_LANGUAGE_ID, PromptsType } from '../../common/promptSyntax/promptTypes.js';\nimport { CHAT_CATEGORY } from '../actions/chatActions.js';\nimport { askForPromptFileName } from './pickers/askForPromptName.js';\nimport { askForPromptSourceFolder } from './pickers/askForPromptSourceFolder.js';\n\nclass BaseSaveAsPromptFileAction extends Action2 {\n\tconstructor(opts: Readonly<IAction2Options>, private readonly promptType: PromptsType) {\n\t\tsuper(opts);\n\t}\n\n\tasync run(accessor: ServicesAccessor, configUri?: string): Promise<void> {\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst textFileService = accessor.get(ITextFileService);\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst activeCodeEditor = codeEditorService.getActiveCodeEditor();\n\t\tif (!activeCodeEditor) {\n\t\t\treturn;\n\t\t}\n\t\tconst model = activeCodeEditor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\t\tconst newFolder = await instantiationService.invokeFunction(askForPromptSourceFolder, this.promptType, undefined, true);\n\t\tif (!newFolder) {\n\t\t\treturn;\n\t\t}\n\t\tconst newName = await instantiationService.invokeFunction(askForPromptFileName, this.promptType, newFolder.uri, getCleanPromptName(model.uri));\n\t\tif (!newName) {\n\t\t\treturn;\n\t\t}\n\t\tconst newFile = joinPath(newFolder.uri, newName);\n\t\tif (model.uri.scheme === Schemas.untitled) {\n\t\t\tawait textFileService.saveAs(model.uri, newFile, { from: model.uri });\n\t\t} else {\n\t\t\tawait fileService.copy(model.uri, newFile);\n\t\t}\n\t\tawait codeEditorService.openCodeEditor({ resource: newFile }, activeCodeEditor);\n\t}\n}\n\nfunction createOptions(id: string, title: ICommandActionTitle, description: ILocalizedString, languageId: string): Readonly<IAction2Options> {\n\treturn {\n\t\tid: id,\n\t\ttitle: title,\n\t\tmetadata: {\n\t\t\tdescription: description,\n\t\t},\n\t\tcategory: CHAT_CATEGORY,\n\t\tf1: false,\n\t\tmenu: {\n\t\t\tid: MenuId.EditorContent,\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.equals(ResourceContextKey.Scheme.key, Schemas.untitled),\n\t\t\t\tContextKeyExpr.equals(ResourceContextKey.LangId.key, languageId),\n\t\t\t\tContextKeyExpr.notEquals(chatEditingWidgetFileStateContextKey.key, ModifiedFileEntryState.Modified),\n\t\t\t)\n\t\t}\n\t};\n}\n\nexport const SAVE_AS_PROMPT_FILE_ACTION_ID = 'workbench.action.chat.save-as-prompt';\n\nexport class SaveAsPromptFileAction extends BaseSaveAsPromptFileAction {\n\tconstructor() {\n\t\tsuper(createOptions(SAVE_AS_PROMPT_FILE_ACTION_ID, localize2('promptfile.savePromptFile', \"Save As Prompt File\"), localize2('promptfile.savePromptFile.description', \"Save as prompt file\"), PROMPT_LANGUAGE_ID), PromptsType.prompt);\n\t}\n}\n\nexport const SAVE_AS_AGENT_FILE_ACTION_ID = 'workbench.action.chat.save-as-agent';\n\nexport class SaveAsAgentFileAction extends BaseSaveAsPromptFileAction {\n\tconstructor() {\n\t\tsuper(createOptions(SAVE_AS_AGENT_FILE_ACTION_ID, localize2('promptfile.saveAgentFile', \"Save As Agent File\"), localize2('promptfile.saveAgentFile.description', \"Save as agent file\"), AGENT_LANGUAGE_ID), PromptsType.agent);\n\t}\n}\n\nexport const SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID = 'workbench.action.chat.save-as-instructions';\n\nexport class SaveAsInstructionsFileAction extends BaseSaveAsPromptFileAction {\n\tconstructor() {\n\t\tsuper(createOptions(SAVE_AS_INSTRUCTIONS_FILE_ACTION_ID, localize2('promptfile.saveInstructionsFile', \"Save As Instructions File\"), localize2('promptfile.saveInstructionsFile.description', \"Save as instructions file\"), INSTRUCTIONS_LANGUAGE_ID), PromptsType.instructions);\n\t}\n}\n\n"],"mappings":"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","ignoreList":[]}