{"version":3,"names":["cov_13ynhveu2b","actualCoverage","ResourceTextEdit","SnippetParser","createCombinedWorkspaceEdit","uri","ranges","edit","f","s","insertText","b","snippet","edits","additionalEdit","map","range","text","escape","insertAsSnippet","sortEditsByYieldTo","yieldsTo","yTo","other","mimeType","handledMimeType","kind","contains","yieldsToMap","Map","yieldTo","arr","get","set","push","size","Array","from","visited","Set","tempStack","visit","nodes","length","node","includes","console","warn","has","slice","pre","pop","add"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/dropOrPasteInto/browser/edit.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nimport { DocumentDropEdit, DocumentPasteEdit, DropYieldTo, WorkspaceEdit } from '../../../common/languages.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\n\n/**\n * Given a {@link DropOrPasteEdit} and set of ranges, creates a {@link WorkspaceEdit} that applies the insert text from\n * the {@link DropOrPasteEdit} at each range plus any additional edits.\n */\nexport function createCombinedWorkspaceEdit(uri: URI, ranges: readonly Range[], edit: DocumentPasteEdit | DocumentDropEdit): WorkspaceEdit {\n\t// If the edit insert text is empty, skip applying at each range\n\tif (typeof edit.insertText === 'string' ? edit.insertText === '' : edit.insertText.snippet === '') {\n\t\treturn {\n\t\t\tedits: edit.additionalEdit?.edits ?? []\n\t\t};\n\t}\n\n\treturn {\n\t\tedits: [\n\t\t\t...ranges.map(range =>\n\t\t\t\tnew ResourceTextEdit(uri,\n\t\t\t\t\t{ range, text: typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) + '$0' : edit.insertText.snippet, insertAsSnippet: true }\n\t\t\t\t)),\n\t\t\t...(edit.additionalEdit?.edits ?? [])\n\t\t]\n\t};\n}\n\nexport function sortEditsByYieldTo<T extends {\n\treadonly kind: HierarchicalKind | undefined;\n\treadonly handledMimeType?: string;\n\treadonly yieldTo?: readonly DropYieldTo[];\n}>(edits: readonly T[]): T[] {\n\tfunction yieldsTo(yTo: DropYieldTo, other: T): boolean {\n\t\tif ('mimeType' in yTo) {\n\t\t\treturn yTo.mimeType === other.handledMimeType;\n\t\t}\n\t\treturn !!other.kind && yTo.kind.contains(other.kind);\n\t}\n\n\t// Build list of nodes each node yields to\n\tconst yieldsToMap = new Map<T, T[]>();\n\tfor (const edit of edits) {\n\t\tfor (const yTo of edit.yieldTo ?? []) {\n\t\t\tfor (const other of edits) {\n\t\t\t\tif (other === edit) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (yieldsTo(yTo, other)) {\n\t\t\t\t\tlet arr = yieldsToMap.get(edit);\n\t\t\t\t\tif (!arr) {\n\t\t\t\t\t\tarr = [];\n\t\t\t\t\t\tyieldsToMap.set(edit, arr);\n\t\t\t\t\t}\n\t\t\t\t\tarr.push(other);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!yieldsToMap.size) {\n\t\treturn Array.from(edits);\n\t}\n\n\t// Topological sort\n\tconst visited = new Set<T>();\n\tconst tempStack: T[] = [];\n\n\tfunction visit(nodes: T[]): T[] {\n\t\tif (!nodes.length) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tif (tempStack.includes(node)) {\n\t\t\tconsole.warn('Yield to cycle detected', node);\n\t\t\treturn nodes;\n\t\t}\n\n\t\tif (visited.has(node)) {\n\t\t\treturn visit(nodes.slice(1));\n\t\t}\n\n\t\tlet pre: T[] = [];\n\t\tconst yTo = yieldsToMap.get(node);\n\t\tif (yTo) {\n\t\t\ttempStack.push(node);\n\t\t\tpre = visit(yTo);\n\t\t\ttempStack.pop();\n\t\t}\n\n\t\tvisited.add(node);\n\n\t\treturn [...pre, node, ...visit(nodes.slice(1))];\n\t}\n\n\treturn visit(Array.from(edits));\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAqBI;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;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","ignoreList":[]}