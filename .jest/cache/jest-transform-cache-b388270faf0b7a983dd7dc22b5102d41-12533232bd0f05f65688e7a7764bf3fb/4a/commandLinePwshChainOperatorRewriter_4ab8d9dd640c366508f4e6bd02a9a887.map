{"version":3,"names":["cov_1ca18uc7fq","actualCoverage","Disposable","isPowerShell","CommandLinePwshChainOperatorRewriter","_treeSitterCommandParser","constructor","f","s","rewrite","options","shell","os","b","doubleAmpersandCaptures","extractPwshDoubleAmpersandChainOperators","commandLine","length","rewritten","capture","reverse","substring","node","startIndex","endIndex","reasoning","undefined"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/chatAgentTools/browser/tools/commandLineRewriter/commandLinePwshChainOperatorRewriter.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { QueryCapture } from '@vscode/tree-sitter-wasm';\nimport { Disposable } from '../../../../../../../base/common/lifecycle.js';\nimport { isPowerShell } from '../../runInTerminalHelpers.js';\nimport type { TreeSitterCommandParser } from '../../treeSitterCommandParser.js';\nimport type { ICommandLineRewriter, ICommandLineRewriterOptions, ICommandLineRewriterResult } from './commandLineRewriter.js';\n\nexport class CommandLinePwshChainOperatorRewriter extends Disposable implements ICommandLineRewriter {\n\tconstructor(\n\t\tprivate readonly _treeSitterCommandParser: TreeSitterCommandParser,\n\t) {\n\t\tsuper();\n\t}\n\n\tasync rewrite(options: ICommandLineRewriterOptions): Promise<ICommandLineRewriterResult | undefined> {\n\t\t// TODO: This should just be Windows PowerShell in the future when the powershell grammar\n\t\t// supports chain operators https://github.com/airbus-cert/tree-sitter-powershell/issues/27\n\t\tif (isPowerShell(options.shell, options.os)) {\n\t\t\tlet doubleAmpersandCaptures: QueryCapture[] | undefined;\n\t\t\ttry {\n\t\t\t\tdoubleAmpersandCaptures = await this._treeSitterCommandParser.extractPwshDoubleAmpersandChainOperators(options.commandLine);\n\t\t\t} catch {\n\t\t\t\t// Swallow tree sitter failures\n\t\t\t}\n\n\t\t\tif (doubleAmpersandCaptures && doubleAmpersandCaptures.length > 0) {\n\t\t\t\tlet rewritten = options.commandLine;\n\t\t\t\tfor (const capture of doubleAmpersandCaptures.reverse()) {\n\t\t\t\t\trewritten = `${rewritten.substring(0, capture.node.startIndex)};${rewritten.substring(capture.node.endIndex)}`;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\trewritten,\n\t\t\t\t\treasoning: '&& re-written to ;'\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAqBM;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AArBN;;;;AAMA,SAASE,UAAU,QAAQ,+CAA+C;AAC1E,SAASC,YAAY,QAAQ,+BAA+B;AAI5D,OAAM,MAAOC,oCAAqC,SAAQF,UAAU;EAEjDG,wBAAA;EADlBC,YACkBD,wBAAiD;IAAA;IAAAL,cAAA,GAAAO,CAAA;IAAAP,cAAA,GAAAQ,CAAA;IAElE,KAAK,EAAE;IAAC;IAAAR,cAAA,GAAAQ,CAAA;IAFS,KAAAH,wBAAwB,GAAxBA,wBAAwB;EAG1C;EAEA,MAAMI,OAAOA,CAACC,OAAoC;IAAA;IAAAV,cAAA,GAAAO,CAAA;IAAAP,cAAA,GAAAQ,CAAA;IACjD;IACA;IACA,IAAIL,YAAY,CAACO,OAAO,CAACC,KAAK,EAAED,OAAO,CAACE,EAAE,CAAC,EAAE;MAAA;MAAAZ,cAAA,GAAAa,CAAA;MAC5C,IAAIC,uBAAmD;MAAC;MAAAd,cAAA,GAAAQ,CAAA;MACxD,IAAI;QAAA;QAAAR,cAAA,GAAAQ,CAAA;QACHM,uBAAuB,GAAG,MAAM,IAAI,CAACT,wBAAwB,CAACU,wCAAwC,CAACL,OAAO,CAACM,WAAW,CAAC;MAC5H,CAAC,CAAC,MAAM;QACP;MAAA;MACA;MAAAhB,cAAA,GAAAQ,CAAA;MAED;MAAI;MAAA,CAAAR,cAAA,GAAAa,CAAA,UAAAC,uBAAuB;MAAA;MAAA,CAAAd,cAAA,GAAAa,CAAA,UAAIC,uBAAuB,CAACG,MAAM,GAAG,CAAC,GAAE;QAAA;QAAAjB,cAAA,GAAAa,CAAA;QAClE,IAAIK,SAAS;QAAA;QAAA,CAAAlB,cAAA,GAAAQ,CAAA,OAAGE,OAAO,CAACM,WAAW;QAAC;QAAAhB,cAAA,GAAAQ,CAAA;QACpC,KAAK,MAAMW,OAAO,IAAIL,uBAAuB,CAACM,OAAO,EAAE,EAAE;UAAA;UAAApB,cAAA,GAAAQ,CAAA;UACxDU,SAAS,GAAG,GAAGA,SAAS,CAACG,SAAS,CAAC,CAAC,EAAEF,OAAO,CAACG,IAAI,CAACC,UAAU,CAAC,IAAIL,SAAS,CAACG,SAAS,CAACF,OAAO,CAACG,IAAI,CAACE,QAAQ,CAAC,EAAE;QAC/G;QAAC;QAAAxB,cAAA,GAAAQ,CAAA;QACD,OAAO;UACNU,SAAS;UACTO,SAAS,EAAE;SACX;MACF,CAAC;MAAA;MAAA;QAAAzB,cAAA,GAAAa,CAAA;MAAA;IACF,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAa,CAAA;IAAA;IAAAb,cAAA,GAAAQ,CAAA;IAED,OAAOkB,SAAS;EACjB","ignoreList":[]}