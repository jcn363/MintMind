{"version":3,"names":["cov_1pq3l9aywq","actualCoverage","applyFontInfo","CharWidthRequest","chr","type","width","constructor","f","s","fulfill","DomCharWidthReader","_bareFontInfo","_requests","_container","_testElements","bareFontInfo","requests","read","targetWindow","_createDomElements","document","body","appendChild","_readFromDomElements","remove","container","createElement","style","position","top","regularDomNode","boldDomNode","fontWeight","italicDomNode","fontStyle","testElements","request","parent","b","testElement","_render","push","htmlString","i","innerText","testString","textContent","len","length","offsetWidth","readCharWidths","reader"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/browser/config/charWidthReader.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { applyFontInfo } from './domFontInfo.js';\nimport { BareFontInfo } from '../../common/config/fontInfo.js';\n\nexport const enum CharWidthRequestType {\n\tRegular = 0,\n\tItalic = 1,\n\tBold = 2\n}\n\nexport class CharWidthRequest {\n\n\tpublic readonly chr: string;\n\tpublic readonly type: CharWidthRequestType;\n\tpublic width: number;\n\n\tconstructor(chr: string, type: CharWidthRequestType) {\n\t\tthis.chr = chr;\n\t\tthis.type = type;\n\t\tthis.width = 0;\n\t}\n\n\tpublic fulfill(width: number) {\n\t\tthis.width = width;\n\t}\n}\n\nclass DomCharWidthReader {\n\n\tprivate readonly _bareFontInfo: BareFontInfo;\n\tprivate readonly _requests: CharWidthRequest[];\n\n\tprivate _container: HTMLElement | null;\n\tprivate _testElements: HTMLSpanElement[] | null;\n\n\tconstructor(bareFontInfo: BareFontInfo, requests: CharWidthRequest[]) {\n\t\tthis._bareFontInfo = bareFontInfo;\n\t\tthis._requests = requests;\n\n\t\tthis._container = null;\n\t\tthis._testElements = null;\n\t}\n\n\tpublic read(targetWindow: Window): void {\n\t\t// Create a test container with all these test elements\n\t\tthis._createDomElements();\n\n\t\t// Add the container to the DOM\n\t\ttargetWindow.document.body.appendChild(this._container!);\n\n\t\t// Read character widths\n\t\tthis._readFromDomElements();\n\n\t\t// Remove the container from the DOM\n\t\tthis._container?.remove();\n\n\t\tthis._container = null;\n\t\tthis._testElements = null;\n\t}\n\n\tprivate _createDomElements(): void {\n\t\tconst container = document.createElement('div');\n\t\tcontainer.style.position = 'absolute';\n\t\tcontainer.style.top = '-50000px';\n\t\tcontainer.style.width = '50000px';\n\n\t\tconst regularDomNode = document.createElement('div');\n\t\tapplyFontInfo(regularDomNode, this._bareFontInfo);\n\t\tcontainer.appendChild(regularDomNode);\n\n\t\tconst boldDomNode = document.createElement('div');\n\t\tapplyFontInfo(boldDomNode, this._bareFontInfo);\n\t\tboldDomNode.style.fontWeight = 'bold';\n\t\tcontainer.appendChild(boldDomNode);\n\n\t\tconst italicDomNode = document.createElement('div');\n\t\tapplyFontInfo(italicDomNode, this._bareFontInfo);\n\t\titalicDomNode.style.fontStyle = 'italic';\n\t\tcontainer.appendChild(italicDomNode);\n\n\t\tconst testElements: HTMLSpanElement[] = [];\n\t\tfor (const request of this._requests) {\n\n\t\t\tlet parent: HTMLElement;\n\t\t\tif (request.type === CharWidthRequestType.Regular) {\n\t\t\t\tparent = regularDomNode;\n\t\t\t}\n\t\t\tif (request.type === CharWidthRequestType.Bold) {\n\t\t\t\tparent = boldDomNode;\n\t\t\t}\n\t\t\tif (request.type === CharWidthRequestType.Italic) {\n\t\t\t\tparent = italicDomNode;\n\t\t\t}\n\n\t\t\tparent!.appendChild(document.createElement('br'));\n\n\t\t\tconst testElement = document.createElement('span');\n\t\t\tDomCharWidthReader._render(testElement, request);\n\t\t\tparent!.appendChild(testElement);\n\n\t\t\ttestElements.push(testElement);\n\t\t}\n\n\t\tthis._container = container;\n\t\tthis._testElements = testElements;\n\t}\n\n\tprivate static _render(testElement: HTMLElement, request: CharWidthRequest): void {\n\t\tif (request.chr === ' ') {\n\t\t\tlet htmlString = '\\u00a0';\n\t\t\t// Repeat character 256 (2^8) times\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\thtmlString += htmlString;\n\t\t\t}\n\t\t\ttestElement.innerText = htmlString;\n\t\t} else {\n\t\t\tlet testString = request.chr;\n\t\t\t// Repeat character 256 (2^8) times\n\t\t\tfor (let i = 0; i < 8; i++) {\n\t\t\t\ttestString += testString;\n\t\t\t}\n\t\t\ttestElement.textContent = testString;\n\t\t}\n\t}\n\n\tprivate _readFromDomElements(): void {\n\t\tfor (let i = 0, len = this._requests.length; i < len; i++) {\n\t\t\tconst request = this._requests[i];\n\t\t\tconst testElement = this._testElements![i];\n\n\t\t\trequest.fulfill(testElement.offsetWidth / 256);\n\t\t}\n\t}\n}\n\nexport function readCharWidths(targetWindow: Window, bareFontInfo: BareFontInfo, requests: CharWidthRequest[]): void {\n\tconst reader = new DomCharWidthReader(bareFontInfo, requests);\n\treader.read(targetWindow);\n}\n"],"mappings":"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","ignoreList":[]}