{"version":3,"names":["SimpleTypedRpcConnection","registerDebugChannel","channelId","createClient","cov_cw9utxcpj","f","g","s","globalThis","queuedNotifications","curHost","undefined","channel","handler","createChannelFactoryFromDebugChannel","sendNotification","data","b","push","curClient","$$debugValueEditor_debugChannels","host","n","Error","h","sendRequest","handleRequest","type","handleNotification"],"sources":["/home/user/Desktop/MintMind/src/vs/base/common/observableInternal/logging/debugger/debuggerRpc.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ChannelFactory, IChannelHandler, API, SimpleTypedRpcConnection, MakeSideAsync } from './rpc.js';\n\nexport function registerDebugChannel<T extends { channelId: string } & API>(\n\tchannelId: T['channelId'],\n\tcreateClient: () => T['client'],\n): SimpleTypedRpcConnection<MakeSideAsync<T['host']>> {\n\t// eslint-disable-next-line local/code-no-any-casts\n\tconst g = globalThis as any as GlobalObj;\n\n\tlet queuedNotifications: unknown[] = [];\n\tlet curHost: IHost | undefined = undefined;\n\n\tconst { channel, handler } = createChannelFactoryFromDebugChannel({\n\t\tsendNotification: (data) => {\n\t\t\tif (curHost) {\n\t\t\t\tcurHost.sendNotification(data);\n\t\t\t} else {\n\t\t\t\tqueuedNotifications.push(data);\n\t\t\t}\n\t\t},\n\t});\n\n\tlet curClient: T['client'] | undefined = undefined;\n\n\t(g.$$debugValueEditor_debugChannels ?? (g.$$debugValueEditor_debugChannels = {}))[channelId] = (host) => {\n\t\tcurClient = createClient();\n\t\tcurHost = host;\n\t\tfor (const n of queuedNotifications) {\n\t\t\thost.sendNotification(n);\n\t\t}\n\t\tqueuedNotifications = [];\n\t\treturn handler;\n\t};\n\n\treturn SimpleTypedRpcConnection.createClient<T>(channel, () => {\n\t\tif (!curClient) { throw new Error('Not supported'); }\n\t\treturn curClient;\n\t});\n}\n\ninterface GlobalObj {\n\t$$debugValueEditor_debugChannels: Record<string, (host: IHost) => { handleRequest: (data: unknown) => unknown }>;\n}\n\ninterface IHost {\n\tsendNotification: (data: unknown) => void;\n}\n\nfunction createChannelFactoryFromDebugChannel(host: IHost): { channel: ChannelFactory; handler: { handleRequest: (data: unknown) => unknown } } {\n\tlet h: IChannelHandler | undefined;\n\tconst channel: ChannelFactory = (handler) => {\n\t\th = handler;\n\t\treturn {\n\t\t\tsendNotification: data => {\n\t\t\t\thost.sendNotification(data);\n\t\t\t},\n\t\t\tsendRequest: data => {\n\t\t\t\tthrow new Error('not supported');\n\t\t\t},\n\t\t};\n\t};\n\treturn {\n\t\tchannel: channel,\n\t\thandler: {\n\t\t\thandleRequest: (data: any) => {\n\t\t\t\tif (data.type === 'notification') {\n\t\t\t\t\treturn h?.handleNotification(data.data);\n\t\t\t\t} else {\n\t\t\t\t\treturn h?.handleRequest(data.data);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t};\n}\n"],"mappings":"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","ignoreList":[]}