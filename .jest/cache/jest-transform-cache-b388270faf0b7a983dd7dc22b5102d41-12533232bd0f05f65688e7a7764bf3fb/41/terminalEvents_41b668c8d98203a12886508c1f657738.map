{"version":3,"names":["cov_1af4oqg677","actualCoverage","DynamicListEventMultiplexer","Event","EventMultiplexer","DisposableMap","DisposableStore","createInstanceCapabilityEventMultiplexer","currentInstances","onAddInstance","onRemoveInstance","capabilityId","getEvent","f","store","s","multiplexer","add","capabilityListeners","addCapability","instance","capability","listener","map","data","instanceCapabilityListeners","get","instanceId","b","set","capabilities","deleteAndDispose","addCapabilityMultiplexer","createOnDidAddCapabilityOfTypeEvent","changeEvent","event","e","removeCapabilityMultiplexer","createOnDidRemoveCapabilityOfTypeEvent","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminal/browser/terminalEvents.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITerminalInstance } from './terminal.js';\nimport { DynamicListEventMultiplexer, Event, EventMultiplexer, IDynamicListEventMultiplexer } from '../../../../base/common/event.js';\nimport { DisposableMap, DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { ITerminalCapabilityImplMap, TerminalCapability } from '../../../../platform/terminal/common/capabilities/capabilities.js';\n\nexport function createInstanceCapabilityEventMultiplexer<T extends TerminalCapability, K>(\n\tcurrentInstances: ITerminalInstance[],\n\tonAddInstance: Event<ITerminalInstance>,\n\tonRemoveInstance: Event<ITerminalInstance>,\n\tcapabilityId: T,\n\tgetEvent: (capability: ITerminalCapabilityImplMap[T]) => Event<K>\n): IDynamicListEventMultiplexer<{ instance: ITerminalInstance; data: K }> {\n\tconst store = new DisposableStore();\n\tconst multiplexer = store.add(new EventMultiplexer<{ instance: ITerminalInstance; data: K }>());\n\tconst capabilityListeners = store.add(new DisposableMap<number, DisposableMap<ITerminalCapabilityImplMap[T], IDisposable>>());\n\n\tfunction addCapability(instance: ITerminalInstance, capability: ITerminalCapabilityImplMap[T]) {\n\t\tconst listener = multiplexer.add(Event.map(getEvent(capability), data => ({ instance, data })));\n\t\tlet instanceCapabilityListeners = capabilityListeners.get(instance.instanceId);\n\t\tif (!instanceCapabilityListeners) {\n\t\t\tinstanceCapabilityListeners = new DisposableMap<ITerminalCapabilityImplMap[T], IDisposable>();\n\t\t\tcapabilityListeners.set(instance.instanceId, instanceCapabilityListeners);\n\t\t}\n\t\tinstanceCapabilityListeners.set(capability, listener);\n\t}\n\n\t// Existing instances\n\tfor (const instance of currentInstances) {\n\t\tconst capability = instance.capabilities.get(capabilityId);\n\t\tif (capability) {\n\t\t\taddCapability(instance, capability);\n\t\t}\n\t}\n\n\t// Removed instances\n\tstore.add(onRemoveInstance(instance => {\n\t\tcapabilityListeners.deleteAndDispose(instance.instanceId);\n\t}));\n\n\t// Added capabilities\n\tconst addCapabilityMultiplexer = store.add(new DynamicListEventMultiplexer(\n\t\tcurrentInstances,\n\t\tonAddInstance,\n\t\tonRemoveInstance,\n\t\tinstance => Event.map(instance.capabilities.createOnDidAddCapabilityOfTypeEvent(capabilityId), changeEvent => ({ instance, changeEvent }))\n\t));\n\tstore.add(addCapabilityMultiplexer.event(e => {\n\t\taddCapability(e.instance, e.changeEvent);\n\t}));\n\n\t// Removed capabilities\n\tconst removeCapabilityMultiplexer = store.add(new DynamicListEventMultiplexer(\n\t\tcurrentInstances,\n\t\tonAddInstance,\n\t\tonRemoveInstance,\n\t\tinstance => Event.map(instance.capabilities.createOnDidRemoveCapabilityOfTypeEvent(capabilityId), changeEvent => ({ instance, changeEvent }))\n\t));\n\tstore.add(removeCapabilityMultiplexer.event(e => {\n\t\tcapabilityListeners.get(e.instance.instanceId)?.deleteAndDispose(e.changeEvent);\n\t}));\n\n\treturn {\n\t\tdispose: () => store.dispose(),\n\t\tevent: multiplexer.event\n\t};\n}\n"],"mappings":"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","ignoreList":[]}