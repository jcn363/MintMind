{"version":3,"names":["createDecorator","ICodeMapperService","cov_oaxerlm26","s","CodeMapperService","_serviceBrand","providers","registerCodeMapperProvider","handle","provider","f","push","dispose","index","indexOf","b","splice","mapCode","request","response","token","result","isCancellationRequested","undefined"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/common/chatCodeMapperService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextEdit } from '../../../../editor/common/languages.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ICellEditOperation } from '../../notebook/common/notebookCommon.js';\n\nexport interface ICodeMapperResponse {\n\ttextEdit: (resource: URI, textEdit: TextEdit[]) => void;\n\tnotebookEdit: (resource: URI, edit: ICellEditOperation[]) => void;\n}\n\nexport interface ICodeMapperCodeBlock {\n\treadonly code: string;\n\treadonly resource: URI;\n\treadonly markdownBeforeBlock?: string;\n}\n\nexport interface ICodeMapperRequest {\n\treadonly codeBlocks: ICodeMapperCodeBlock[];\n\treadonly chatRequestId?: string;\n\treadonly chatRequestModel?: string;\n\treadonly chatSessionId?: string;\n\treadonly location?: string;\n}\n\nexport interface ICodeMapperResult {\n\treadonly errorMessage?: string;\n}\n\nexport interface ICodeMapperProvider {\n\treadonly displayName: string;\n\tmapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken): Promise<ICodeMapperResult | undefined>;\n}\n\nexport const ICodeMapperService = createDecorator<ICodeMapperService>('codeMapperService');\n\nexport interface ICodeMapperService {\n\treadonly _serviceBrand: undefined;\n\treadonly providers: ICodeMapperProvider[];\n\tregisterCodeMapperProvider(handle: number, provider: ICodeMapperProvider): IDisposable;\n\tmapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken): Promise<ICodeMapperResult | undefined>;\n}\n\nexport class CodeMapperService implements ICodeMapperService {\n\t_serviceBrand: undefined;\n\n\tpublic readonly providers: ICodeMapperProvider[] = [];\n\n\tregisterCodeMapperProvider(handle: number, provider: ICodeMapperProvider): IDisposable {\n\t\tthis.providers.push(provider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tconst index = this.providers.indexOf(provider);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tthis.providers.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\tasync mapCode(request: ICodeMapperRequest, response: ICodeMapperResponse, token: CancellationToken) {\n\t\tfor (const provider of this.providers) {\n\t\t\tconst result = await provider.mapCode(request, response, token);\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AASA,SAASA,eAAe,QAAQ,4DAA4D;AA+B5F,OAAO,MAAMC,kBAAkB;AAAA;AAAA,CAAAC,aAAA,GAAAC,CAAA,OAAGH,eAAe,CAAqB,mBAAmB,CAAC;AAS1F,OAAM,MAAOI,iBAAiB;EAC7BC,aAAa;EAEGC,SAAS;EAAA;EAAA,CAAAJ,aAAA,GAAAC,CAAA,OAA0B,EAAE;EAErDI,0BAA0BA,CAACC,MAAc,EAAEC,QAA6B;IAAA;IAAAP,aAAA,GAAAQ,CAAA;IAAAR,aAAA,GAAAC,CAAA;IACvE,IAAI,CAACG,SAAS,CAACK,IAAI,CAACF,QAAQ,CAAC;IAAC;IAAAP,aAAA,GAAAC,CAAA;IAC9B,OAAO;MACNS,OAAO,EAAEA,CAAA,KAAK;QAAA;QAAAV,aAAA,GAAAQ,CAAA;QACb,MAAMG,KAAK;QAAA;QAAA,CAAAX,aAAA,GAAAC,CAAA,OAAG,IAAI,CAACG,SAAS,CAACQ,OAAO,CAACL,QAAQ,CAAC;QAAC;QAAAP,aAAA,GAAAC,CAAA;QAC/C,IAAIU,KAAK,IAAI,CAAC,EAAE;UAAA;UAAAX,aAAA,GAAAa,CAAA;UAAAb,aAAA,GAAAC,CAAA;UACf,IAAI,CAACG,SAAS,CAACU,MAAM,CAACH,KAAK,EAAE,CAAC,CAAC;QAChC,CAAC;QAAA;QAAA;UAAAX,aAAA,GAAAa,CAAA;QAAA;MACF;KACA;EACF;EAEA,MAAME,OAAOA,CAACC,OAA2B,EAAEC,QAA6B,EAAEC,KAAwB;IAAA;IAAAlB,aAAA,GAAAQ,CAAA;IAAAR,aAAA,GAAAC,CAAA;IACjG,KAAK,MAAMM,QAAQ,IAAI,IAAI,CAACH,SAAS,EAAE;MACtC,MAAMe,MAAM;MAAA;MAAA,CAAAnB,aAAA,GAAAC,CAAA,OAAG,MAAMM,QAAQ,CAACQ,OAAO,CAACC,OAAO,EAAEC,QAAQ,EAAEC,KAAK,CAAC;MAAC;MAAAlB,aAAA,GAAAC,CAAA;MAChE,IAAIiB,KAAK,CAACE,uBAAuB,EAAE;QAAA;QAAApB,aAAA,GAAAa,CAAA;QAAAb,aAAA,GAAAC,CAAA;QAClC,OAAOoB,SAAS;MACjB,CAAC;MAAA;MAAA;QAAArB,aAAA,GAAAa,CAAA;MAAA;MAAAb,aAAA,GAAAC,CAAA;MACD,OAAOkB,MAAM;IACd;IAAC;IAAAnB,aAAA,GAAAC,CAAA;IACD,OAAOoB,SAAS;EACjB","ignoreList":[]}