{"version":3,"names":["cov_2ctyvt3kwa","actualCoverage","Emitter","Disposable","nls","Memento","CustomEditorInfo","customEditorsExtensionPoint","RegisteredEditorPriority","ContributedCustomEditors","CUSTOM_EDITORS_STORAGE_ID","s","CUSTOM_EDITORS_ENTRY_ID","_editors","Map","_memento","constructor","storageService","f","mementoObject","getMemento","info","b","add","_register","setHandler","extensions","update","_onChange","onChange","event","clear","extension","webviewEditorContribution","value","id","viewType","displayName","providerDisplayName","description","isBuiltin","localize","identifier","selector","priority","getPriorityFromContribution","Array","from","values","saveMemento","fire","Symbol","iterator","get","getContributedEditors","resource","filter","customEditor","matches","has","console","error","set","contribution","default","option","builtin"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/customEditor/common/contributedCustomEditors.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as nls from '../../../../nls.js';\nimport { IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { Memento } from '../../../common/memento.js';\nimport { CustomEditorPriority, CustomEditorDescriptor, CustomEditorInfo } from './customEditor.js';\nimport { customEditorsExtensionPoint, ICustomEditorsExtensionPoint } from './extensionPoint.js';\nimport { RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { IExtensionPointUser } from '../../../services/extensions/common/extensionsRegistry.js';\n\ninterface CustomEditorsMemento {\n\teditors?: CustomEditorDescriptor[];\n}\n\nexport class ContributedCustomEditors extends Disposable {\n\n\tprivate static readonly CUSTOM_EDITORS_STORAGE_ID = 'customEditors';\n\tprivate static readonly CUSTOM_EDITORS_ENTRY_ID = 'editors';\n\n\tprivate readonly _editors = new Map<string, CustomEditorInfo>();\n\tprivate readonly _memento: Memento<CustomEditorsMemento>;\n\n\tconstructor(storageService: IStorageService) {\n\t\tsuper();\n\n\t\tthis._memento = new Memento(ContributedCustomEditors.CUSTOM_EDITORS_STORAGE_ID, storageService);\n\n\t\tconst mementoObject = this._memento.getMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\tfor (const info of mementoObject[ContributedCustomEditors.CUSTOM_EDITORS_ENTRY_ID] || []) {\n\t\t\tthis.add(new CustomEditorInfo(info));\n\t\t}\n\n\t\tthis._register(customEditorsExtensionPoint.setHandler(extensions => {\n\t\t\tthis.update(extensions);\n\t\t}));\n\t}\n\n\tprivate readonly _onChange = this._register(new Emitter<void>());\n\tpublic readonly onChange = this._onChange.event;\n\n\tprivate update(extensions: readonly IExtensionPointUser<ICustomEditorsExtensionPoint[]>[]) {\n\t\tthis._editors.clear();\n\n\t\tfor (const extension of extensions) {\n\t\t\tfor (const webviewEditorContribution of extension.value) {\n\t\t\t\tthis.add(new CustomEditorInfo({\n\t\t\t\t\tid: webviewEditorContribution.viewType,\n\t\t\t\t\tdisplayName: webviewEditorContribution.displayName,\n\t\t\t\t\tproviderDisplayName: extension.description.isBuiltin ? nls.localize('builtinProviderDisplayName', \"Built-in\") : extension.description.displayName || extension.description.identifier.value,\n\t\t\t\t\tselector: webviewEditorContribution.selector || [],\n\t\t\t\t\tpriority: getPriorityFromContribution(webviewEditorContribution, extension.description),\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\n\t\tconst mementoObject = this._memento.getMemento(StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\tmementoObject[ContributedCustomEditors.CUSTOM_EDITORS_ENTRY_ID] = Array.from(this._editors.values());\n\t\tthis._memento.saveMemento();\n\n\t\tthis._onChange.fire();\n\t}\n\n\tpublic [Symbol.iterator](): Iterator<CustomEditorInfo> {\n\t\treturn this._editors.values();\n\t}\n\n\tpublic get(viewType: string): CustomEditorInfo | undefined {\n\t\treturn this._editors.get(viewType);\n\t}\n\n\tpublic getContributedEditors(resource: URI): readonly CustomEditorInfo[] {\n\t\treturn Array.from(this._editors.values())\n\t\t\t.filter(customEditor => customEditor.matches(resource));\n\t}\n\n\tprivate add(info: CustomEditorInfo): void {\n\t\tif (this._editors.has(info.id)) {\n\t\t\tconsole.error(`Custom editor with id '${info.id}' already registered`);\n\t\t\treturn;\n\t\t}\n\t\tthis._editors.set(info.id, info);\n\t}\n}\n\nfunction getPriorityFromContribution(\n\tcontribution: ICustomEditorsExtensionPoint,\n\textension: IExtensionDescription,\n): RegisteredEditorPriority {\n\tswitch (contribution.priority as CustomEditorPriority | undefined) {\n\t\tcase CustomEditorPriority.default:\n\t\t\treturn RegisteredEditorPriority.default;\n\n\t\tcase CustomEditorPriority.option:\n\t\t\treturn RegisteredEditorPriority.option;\n\n\t\tcase CustomEditorPriority.builtin:\n\t\t\t// Builtin is only valid for builtin extensions\n\t\t\treturn extension.isBuiltin ? RegisteredEditorPriority.builtin : RegisteredEditorPriority.default;\n\n\t\tdefault:\n\t\t\treturn RegisteredEditorPriority.default;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}