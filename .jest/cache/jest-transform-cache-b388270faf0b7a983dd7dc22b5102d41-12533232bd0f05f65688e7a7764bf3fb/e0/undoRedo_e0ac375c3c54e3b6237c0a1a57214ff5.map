{"version":3,"names":["cov_109h37izvq","actualCoverage","createDecorator","IUndoRedoService","s","ResourceEditStackSnapshot","resource","elements","constructor","f","UndoRedoGroup","_ID","id","order","nextOrder","b","None","UndoRedoSource"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/undoRedo/common/undoRedo.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\n\nexport const IUndoRedoService = createDecorator<IUndoRedoService>('undoRedoService');\n\nexport const enum UndoRedoElementType {\n\tResource,\n\tWorkspace\n}\n\nexport interface IResourceUndoRedoElement {\n\treadonly type: UndoRedoElementType.Resource;\n\t/**\n\t * The resource impacted by this element.\n\t */\n\treadonly resource: URI;\n\t/**\n\t * A user presentable label. May be localized.\n\t */\n\treadonly label: string;\n\t/**\n\t * A code describing the operation. Will not be localized.\n\t */\n\treadonly code: string;\n\t/**\n\t * Show a message to the user confirming when trying to undo this element\n\t */\n\treadonly confirmBeforeUndo?: boolean;\n\tundo(): Promise<void> | void;\n\tredo(): Promise<void> | void;\n}\n\nexport interface IWorkspaceUndoRedoElement {\n\treadonly type: UndoRedoElementType.Workspace;\n\t/**\n\t * The resources impacted by this element.\n\t */\n\treadonly resources: readonly URI[];\n\t/**\n\t * A user presentable label. May be localized.\n\t */\n\treadonly label: string;\n\t/**\n\t * A code describing the operation. Will not be localized.\n\t */\n\treadonly code: string;\n\t/**\n\t * Show a message to the user confirming when trying to undo this element\n\t */\n\treadonly confirmBeforeUndo?: boolean;\n\tundo(): Promise<void> | void;\n\tredo(): Promise<void> | void;\n\n\t/**\n\t * If implemented, indicates that this undo/redo element can be split into multiple per resource elements.\n\t */\n\tsplit?(): IResourceUndoRedoElement[];\n\n\t/**\n\t * If implemented, will be invoked before calling `undo()` or `redo()`.\n\t * This is a good place to prepare everything such that the calls to `undo()` or `redo()` are synchronous.\n\t * If a disposable is returned, it will be invoked to clean things up.\n\t */\n\tprepareUndoRedo?(): Promise<IDisposable> | IDisposable | void;\n}\n\nexport type IUndoRedoElement = IResourceUndoRedoElement | IWorkspaceUndoRedoElement;\n\nexport interface IPastFutureElements {\n\tpast: IUndoRedoElement[];\n\tfuture: IUndoRedoElement[];\n}\n\nexport interface UriComparisonKeyComputer {\n\tgetComparisonKey(uri: URI): string;\n}\n\nexport class ResourceEditStackSnapshot {\n\tconstructor(\n\t\tpublic readonly resource: URI,\n\t\tpublic readonly elements: number[]\n\t) { }\n}\n\nexport class UndoRedoGroup {\n\tprivate static _ID = 0;\n\n\tpublic readonly id: number;\n\tprivate order: number;\n\n\tconstructor() {\n\t\tthis.id = UndoRedoGroup._ID++;\n\t\tthis.order = 1;\n\t}\n\n\tpublic nextOrder(): number {\n\t\tif (this.id === 0) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn this.order++;\n\t}\n\n\tpublic static None = new UndoRedoGroup();\n}\n\nexport class UndoRedoSource {\n\tprivate static _ID = 0;\n\n\tpublic readonly id: number;\n\tprivate order: number;\n\n\tconstructor() {\n\t\tthis.id = UndoRedoSource._ID++;\n\t\tthis.order = 1;\n\t}\n\n\tpublic nextOrder(): number {\n\t\tif (this.id === 0) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn this.order++;\n\t}\n\n\tpublic static None = new UndoRedoSource();\n}\n\nexport interface IUndoRedoService {\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Register an URI -> string hasher.\n\t * This is useful for making multiple URIs share the same undo-redo stack.\n\t */\n\tregisterUriComparisonKeyComputer(scheme: string, uriComparisonKeyComputer: UriComparisonKeyComputer): IDisposable;\n\n\t/**\n\t * Get the hash used internally for a certain URI.\n\t * This uses any registered `UriComparisonKeyComputer`.\n\t */\n\tgetUriComparisonKey(resource: URI): string;\n\n\t/**\n\t * Add a new element to the `undo` stack.\n\t * This will destroy the `redo` stack.\n\t */\n\tpushElement(element: IUndoRedoElement, group?: UndoRedoGroup, source?: UndoRedoSource): void;\n\n\t/**\n\t * Get the last pushed element for a resource.\n\t * If the last pushed element has been undone, returns null.\n\t */\n\tgetLastElement(resource: URI): IUndoRedoElement | null;\n\n\t/**\n\t * Get all the elements associated with a resource.\n\t * This includes the past and the future.\n\t */\n\tgetElements(resource: URI): IPastFutureElements;\n\n\t/**\n\t * Validate or invalidate stack elements associated with a resource.\n\t */\n\tsetElementsValidFlag(resource: URI, isValid: boolean, filter: (element: IUndoRedoElement) => boolean): void;\n\n\t/**\n\t * Remove elements that target `resource`.\n\t */\n\tremoveElements(resource: URI): void;\n\n\t/**\n\t * Create a snapshot of the current elements on the undo-redo stack for a resource.\n\t */\n\tcreateSnapshot(resource: URI): ResourceEditStackSnapshot;\n\t/**\n\t * Attempt (as best as possible) to restore a certain snapshot previously created with `createSnapshot` for a resource.\n\t */\n\trestoreSnapshot(snapshot: ResourceEditStackSnapshot): void;\n\n\tcanUndo(resource: URI | UndoRedoSource): boolean;\n\tundo(resource: URI | UndoRedoSource): Promise<void> | void;\n\n\tcanRedo(resource: URI | UndoRedoSource): boolean;\n\tredo(resource: URI | UndoRedoSource): Promise<void> | void;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA2FgB;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AA3FhB;;;;AAOA,SAASE,eAAe,QAAQ,6CAA6C;AAE7E,OAAO,MAAMC,gBAAgB;AAAA;AAAA,CAAAH,cAAA,GAAAI,CAAA,OAAGF,eAAe,CAAmB,iBAAiB,CAAC;AA0EpF,OAAM,MAAOG,yBAAyB;EAEpBC,QAAA;EACAC,QAAA;EAFjBC,YACiBF,QAAa,EACbC,QAAkB;IAAA;IAAAP,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAI,CAAA;IADlB,KAAAE,QAAQ,GAARA,QAAQ;IAAK;IAAAN,cAAA,GAAAI,CAAA;IACb,KAAAG,QAAQ,GAARA,QAAQ;EACrB;;AAGL,OAAM,MAAOG,aAAa;EACjB,OAAOC,GAAG;EAAA;EAAA,CAAAX,cAAA,GAAAI,CAAA,OAAG,CAAC;EAENQ,EAAE;EACVC,KAAK;EAEbL,YAAA;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAI,CAAA;IACC,IAAI,CAACQ,EAAE,GAAGF,aAAa,CAACC,GAAG,EAAE;IAAC;IAAAX,cAAA,GAAAI,CAAA;IAC9B,IAAI,CAACS,KAAK,GAAG,CAAC;EACf;EAEOC,SAASA,CAAA;IAAA;IAAAd,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAI,CAAA;IACf,IAAI,IAAI,CAACQ,EAAE,KAAK,CAAC,EAAE;MAAA;MAAAZ,cAAA,GAAAe,CAAA;MAAAf,cAAA,GAAAI,CAAA;MAClB,OAAO,CAAC;IACT,CAAC;IAAA;IAAA;MAAAJ,cAAA,GAAAe,CAAA;IAAA;IAAAf,cAAA,GAAAI,CAAA;IACD,OAAO,IAAI,CAACS,KAAK,EAAE;EACpB;EAEO,OAAOG,IAAI;EAAA;EAAA,CAAAhB,cAAA,GAAAI,CAAA,OAAG,IAAIM,aAAa,EAAE;;AAGzC,OAAM,MAAOO,cAAc;EAClB,OAAON,GAAG;EAAA;EAAA,CAAAX,cAAA,GAAAI,CAAA,QAAG,CAAC;EAENQ,EAAE;EACVC,KAAK;EAEbL,YAAA;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAI,CAAA;IACC,IAAI,CAACQ,EAAE,GAAGK,cAAc,CAACN,GAAG,EAAE;IAAC;IAAAX,cAAA,GAAAI,CAAA;IAC/B,IAAI,CAACS,KAAK,GAAG,CAAC;EACf;EAEOC,SAASA,CAAA;IAAA;IAAAd,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAI,CAAA;IACf,IAAI,IAAI,CAACQ,EAAE,KAAK,CAAC,EAAE;MAAA;MAAAZ,cAAA,GAAAe,CAAA;MAAAf,cAAA,GAAAI,CAAA;MAClB,OAAO,CAAC;IACT,CAAC;IAAA;IAAA;MAAAJ,cAAA,GAAAe,CAAA;IAAA;IAAAf,cAAA,GAAAI,CAAA;IACD,OAAO,IAAI,CAACS,KAAK,EAAE;EACpB;EAEO,OAAOG,IAAI;EAAA;EAAA,CAAAhB,cAAA,GAAAI,CAAA,QAAG,IAAIa,cAAc,EAAE","ignoreList":[]}