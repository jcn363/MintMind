{"version":3,"names":["cov_2jn90sl95o","actualCoverage","ObjectTreeElementCollapseState","Emitter","Iterable","isCollapsedInSerializedTestTree","InternalTestItem","idCounter","s","getId","f","String","TestItemTreeElement","test","parent","changeEmitter","onChange","event","children","Set","treeId","depth","retired","state","duration","constructor","b","toJSON","controllerId","context","$mid","tests","serialize","p","unshift","TestTreeErrorMessage","message","description","value","testIdentityProvider","element","expandComponent","expand","size","getChildrenForParent","serialized","rootsWithChildren","node","it","rootsWithChildrenArr","length","map","collapsible","collapsed","item","error","PreserveOrExpanded","extId","PreserveOrCollapsed"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/testing/browser/explorerProjections/index.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IIdentityProvider } from '../../../../../base/browser/ui/list/list.js';\nimport { ObjectTree } from '../../../../../base/browser/ui/tree/objectTree.js';\nimport { IObjectTreeElement, ObjectTreeElementCollapseState } from '../../../../../base/browser/ui/tree/tree.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { FuzzyScore } from '../../../../../base/common/filters.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Iterable } from '../../../../../base/common/iterator.js';\nimport { IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../../base/common/marshallingIds.js';\nimport { ISerializedTestTreeCollapseState, isCollapsedInSerializedTestTree } from './testingViewState.js';\nimport { ITestItemContext, InternalTestItem, TestItemExpandState, TestResultState } from '../../common/testTypes.js';\n\n/**\n * Describes a rendering of tests in the explorer view. Different\n * implementations of this are used for trees and lists, and groupings.\n * Originally this was implemented as inline logic within the ViewModel and\n * using a single IncrementalTestChangeCollector, but this became hairy\n * with status projections.\n */\nexport interface ITestTreeProjection extends IDisposable {\n\t/**\n\t * Event that fires when the projection changes.\n\t */\n\treadonly onUpdate: Event<void>;\n\n\t/**\n\t * State to use for applying default collapse state of items.\n\t */\n\tlastState: ISerializedTestTreeCollapseState;\n\n\t/**\n\t * Fired when an element in the tree is expanded.\n\t */\n\texpandElement(element: TestItemTreeElement, depth: number): void;\n\n\t/**\n\t * Gets an element by its extension-assigned ID.\n\t */\n\tgetElementByTestId(testId: string): TestItemTreeElement | undefined;\n\n\t/**\n\t * Applies pending update to the tree.\n\t */\n\tapplyTo(tree: ObjectTree<TestExplorerTreeElement, FuzzyScore>): void;\n}\n\nlet idCounter = 0;\n\nconst getId = () => String(idCounter++);\n\nexport abstract class TestItemTreeElement {\n\tprotected readonly changeEmitter = new Emitter<void>();\n\n\t/**\n\t * Fired whenever the element or test properties change.\n\t */\n\tpublic readonly onChange = this.changeEmitter.event;\n\n\t/**\n\t * Tree children of this item.\n\t */\n\tpublic readonly children = new Set<TestExplorerTreeElement>();\n\n\t/**\n\t * Unique ID of the element in the tree.\n\t */\n\tpublic readonly treeId = getId();\n\n\t/**\n\t * Depth of the element in the tree.\n\t */\n\tpublic depth: number;\n\n\t/**\n\t * Whether the node's test result is 'retired' -- from an outdated test run.\n\t */\n\tpublic retired = false;\n\n\t/**\n\t * State to show on the item. This is generally the item's computed state\n\t * from its children.\n\t */\n\tpublic state = TestResultState.Unset;\n\n\t/**\n\t * Time it took this test/item to run.\n\t */\n\tpublic duration: number | undefined;\n\n\t/**\n\t * Tree element description.\n\t */\n\tpublic abstract description: string | null;\n\n\tconstructor(\n\t\tpublic readonly test: InternalTestItem,\n\t\t/**\n\t\t * Parent tree item. May not actually be the test item who owns this one\n\t\t * in a 'flat' projection.\n\t\t */\n\t\tpublic readonly parent: TestItemTreeElement | null = null,\n\t) {\n\t\tthis.depth = parent ? parent.depth + 1 : 0;\n\t}\n\n\tpublic toJSON() {\n\t\tif (this.depth === 0) {\n\t\t\treturn { controllerId: this.test.controllerId };\n\t\t}\n\n\t\tconst context: ITestItemContext = {\n\t\t\t$mid: MarshalledId.TestItemContext,\n\t\t\ttests: [InternalTestItem.serialize(this.test)],\n\t\t};\n\n\t\tfor (let p = this.parent; p && p.depth > 0; p = p.parent) {\n\t\t\tcontext.tests.unshift(InternalTestItem.serialize(p.test));\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nexport class TestTreeErrorMessage {\n\tpublic readonly treeId = getId();\n\tpublic readonly children = new Set<never>();\n\n\tpublic get description() {\n\t\treturn typeof this.message === 'string' ? this.message : this.message.value;\n\t}\n\n\tconstructor(\n\t\tpublic readonly message: string | IMarkdownString,\n\t\tpublic readonly parent: TestExplorerTreeElement,\n\t) { }\n}\n\nexport type TestExplorerTreeElement = TestItemTreeElement | TestTreeErrorMessage;\n\nexport const testIdentityProvider: IIdentityProvider<TestExplorerTreeElement> = {\n\tgetId(element) {\n\t\t// For \"not expandable\" elements, whether they have children is part of the\n\t\t// ID so they're rerendered if that changes (#204805)\n\t\tconst expandComponent = element instanceof TestTreeErrorMessage\n\t\t\t? 'error'\n\t\t\t: element.test.expand === TestItemExpandState.NotExpandable\n\t\t\t\t? !!element.children.size\n\t\t\t\t: element.test.expand;\n\n\t\treturn element.treeId + '\\0' + expandComponent;\n\t}\n};\n\nexport const getChildrenForParent = (serialized: ISerializedTestTreeCollapseState, rootsWithChildren: Iterable<TestExplorerTreeElement>, node: TestExplorerTreeElement | null): Iterable<IObjectTreeElement<TestExplorerTreeElement>> => {\n\tlet it: Iterable<TestExplorerTreeElement>;\n\tif (node === null) { // roots\n\t\tconst rootsWithChildrenArr = [...rootsWithChildren];\n\t\tif (rootsWithChildrenArr.length === 1) {\n\t\t\treturn getChildrenForParent(serialized, rootsWithChildrenArr, rootsWithChildrenArr[0]);\n\t\t}\n\t\tit = rootsWithChildrenArr;\n\t} else {\n\t\tit = node.children;\n\t}\n\n\treturn Iterable.map(it, element => (\n\t\telement instanceof TestTreeErrorMessage\n\t\t\t? { element }\n\t\t\t: {\n\t\t\t\telement,\n\t\t\t\tcollapsible: element.test.expand !== TestItemExpandState.NotExpandable,\n\t\t\t\tcollapsed: element.test.item.error\n\t\t\t\t\t? ObjectTreeElementCollapseState.PreserveOrExpanded\n\t\t\t\t\t: (isCollapsedInSerializedTestTree(serialized, element.test.item.extId) ?? element.depth > 0\n\t\t\t\t\t\t? ObjectTreeElementCollapseState.PreserveOrCollapsed\n\t\t\t\t\t\t: ObjectTreeElementCollapseState.PreserveOrExpanded),\n\t\t\t\tchildren: getChildrenForParent(serialized, rootsWithChildren, element),\n\t\t\t}\n\t));\n};\n"],"mappings":"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","ignoreList":[]}