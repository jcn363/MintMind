{"version":3,"names":["cov_2ouy91f2il","actualCoverage","MutableDisposable","toDisposable","setupRecreatingStartMarker","xterm","startMarker","fire","store","log","f","markerListener","s","recreateStartMarker","isDisposed","b","marker","raw","registerMarker","value","undefined","clear","onDispose","add","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/chatAgentTools/browser/executeStrategy/strategyHelpers.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore, MutableDisposable, toDisposable, type IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport type { IMarker as IXtermMarker } from '@xterm/xterm';\n\n/**\n * Sets up a recreating start marker which is resilient to prompts that clear/re-render (eg. transient\n * or powerlevel10k style prompts). The marker is recreated at the cursor position whenever the\n * existing marker is disposed. The caller is responsible for adding the startMarker to the store.\n */\nexport function setupRecreatingStartMarker(\n\txterm: { raw: { registerMarker(): IXtermMarker | undefined } },\n\tstartMarker: MutableDisposable<IXtermMarker>,\n\tfire: (marker: IXtermMarker | undefined) => void,\n\tstore: DisposableStore,\n\tlog?: (message: string) => void,\n): void {\n\tconst markerListener = new MutableDisposable<IDisposable>();\n\tconst recreateStartMarker = () => {\n\t\tif (store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tconst marker = xterm.raw.registerMarker();\n\t\tstartMarker.value = marker ?? undefined;\n\t\tfire(marker);\n\t\tif (!marker) {\n\t\t\tmarkerListener.clear();\n\t\t\treturn;\n\t\t}\n\t\tmarkerListener.value = marker.onDispose(() => {\n\t\t\tlog?.('Start marker was disposed, recreating');\n\t\t\trecreateStartMarker();\n\t\t});\n\t};\n\trecreateStartMarker();\n\tstore.add(toDisposable(() => {\n\t\tmarkerListener.dispose();\n\t\tstartMarker.clear();\n\t\tfire(undefined);\n\t}));\n\tstore.add(startMarker);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwBG;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAxBH;;;;AAKA,SAA0BE,iBAAiB,EAAEC,YAAY,QAA0B,4CAA4C;AAG/H;;;;;AAKA,OAAM,SAAUC,0BAA0BA,CACzCC,KAA8D,EAC9DC,WAA4C,EAC5CC,IAAgD,EAChDC,KAAsB,EACtBC,GAA+B;EAAA;EAAAT,cAAA,GAAAU,CAAA;EAE/B,MAAMC,cAAc;EAAA;EAAA,CAAAX,cAAA,GAAAY,CAAA,OAAG,IAAIV,iBAAiB,EAAe;EAAC;EAAAF,cAAA,GAAAY,CAAA;EAC5D,MAAMC,mBAAmB,GAAGA,CAAA,KAAK;IAAA;IAAAb,cAAA,GAAAU,CAAA;IAAAV,cAAA,GAAAY,CAAA;IAChC,IAAIJ,KAAK,CAACM,UAAU,EAAE;MAAA;MAAAd,cAAA,GAAAe,CAAA;MAAAf,cAAA,GAAAY,CAAA;MACrB;IACD,CAAC;IAAA;IAAA;MAAAZ,cAAA,GAAAe,CAAA;IAAA;IACD,MAAMC,MAAM;IAAA;IAAA,CAAAhB,cAAA,GAAAY,CAAA,OAAGP,KAAK,CAACY,GAAG,CAACC,cAAc,EAAE;IAAC;IAAAlB,cAAA,GAAAY,CAAA;IAC1CN,WAAW,CAACa,KAAK;IAAG;IAAA,CAAAnB,cAAA,GAAAe,CAAA,UAAAC,MAAM;IAAA;IAAA,CAAAhB,cAAA,GAAAe,CAAA,UAAIK,SAAS;IAAC;IAAApB,cAAA,GAAAY,CAAA;IACxCL,IAAI,CAACS,MAAM,CAAC;IAAC;IAAAhB,cAAA,GAAAY,CAAA;IACb,IAAI,CAACI,MAAM,EAAE;MAAA;MAAAhB,cAAA,GAAAe,CAAA;MAAAf,cAAA,GAAAY,CAAA;MACZD,cAAc,CAACU,KAAK,EAAE;MAAC;MAAArB,cAAA,GAAAY,CAAA;MACvB;IACD,CAAC;IAAA;IAAA;MAAAZ,cAAA,GAAAe,CAAA;IAAA;IAAAf,cAAA,GAAAY,CAAA;IACDD,cAAc,CAACQ,KAAK,GAAGH,MAAM,CAACM,SAAS,CAAC,MAAK;MAAA;MAAAtB,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAY,CAAA;MAC5CH,GAAG,GAAG,uCAAuC,CAAC;MAAC;MAAAT,cAAA,GAAAY,CAAA;MAC/CC,mBAAmB,EAAE;IACtB,CAAC,CAAC;EACH,CAAC;EAAC;EAAAb,cAAA,GAAAY,CAAA;EACFC,mBAAmB,EAAE;EAAC;EAAAb,cAAA,GAAAY,CAAA;EACtBJ,KAAK,CAACe,GAAG,CAACpB,YAAY,CAAC,MAAK;IAAA;IAAAH,cAAA,GAAAU,CAAA;IAAAV,cAAA,GAAAY,CAAA;IAC3BD,cAAc,CAACa,OAAO,EAAE;IAAC;IAAAxB,cAAA,GAAAY,CAAA;IACzBN,WAAW,CAACe,KAAK,EAAE;IAAC;IAAArB,cAAA,GAAAY,CAAA;IACpBL,IAAI,CAACa,SAAS,CAAC;EAChB,CAAC,CAAC,CAAC;EAAC;EAAApB,cAAA,GAAAY,CAAA;EACJJ,KAAK,CAACe,GAAG,CAACjB,WAAW,CAAC;AACvB","ignoreList":[]}