{"version":3,"names":["cov_2i64z7pas9","actualCoverage","pfs","resultIsMatch","RipgrepTextSearchEngine","NativeTextSearchManager","TextSearchEngineAdapter","query","numThreads","constructor","f","s","search","token","onResult","onMessage","b","folderQueries","length","extraFileResources","Promise","resolve","type","limitHit","stats","messages","pretendOutputChannel","appendLine","msg","message","textSearchManager","reject","matches","map","fileMatchToSerialized","then","c","match","path","resource","fsPath","results","numMatches","reduce","sum","r","m","rangeLocations"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/search/node/textSearchAdapter.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport * as pfs from '../../../../base/node/pfs.js';\nimport { IFileMatch, IProgressMessage, ITextQuery, ITextSearchMatch, ISerializedFileMatch, ISerializedSearchSuccess, resultIsMatch } from '../common/search.js';\nimport { RipgrepTextSearchEngine } from './ripgrepTextSearchEngine.js';\nimport { NativeTextSearchManager } from './textSearchManager.js';\n\nexport class TextSearchEngineAdapter {\n\n\tconstructor(private query: ITextQuery, private numThreads?: number) { }\n\n\tsearch(token: CancellationToken, onResult: (matches: ISerializedFileMatch[]) => void, onMessage: (message: IProgressMessage) => void): Promise<ISerializedSearchSuccess> {\n\t\tif ((!this.query.folderQueries || !this.query.folderQueries.length) && (!this.query.extraFileResources || !this.query.extraFileResources.length)) {\n\t\t\treturn Promise.resolve({\n\t\t\t\ttype: 'success',\n\t\t\t\tlimitHit: false,\n\t\t\t\tstats: {\n\t\t\t\t\ttype: 'searchProcess'\n\t\t\t\t},\n\t\t\t\tmessages: []\n\t\t\t});\n\t\t}\n\n\t\tconst pretendOutputChannel = {\n\t\t\tappendLine(msg: string) {\n\t\t\t\tonMessage({ message: msg });\n\t\t\t}\n\t\t};\n\t\tconst textSearchManager = new NativeTextSearchManager(this.query, new RipgrepTextSearchEngine(pretendOutputChannel, this.numThreads), pfs);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treturn textSearchManager\n\t\t\t\t.search(\n\t\t\t\t\tmatches => {\n\t\t\t\t\t\tonResult(matches.map(fileMatchToSerialized));\n\t\t\t\t\t},\n\t\t\t\t\ttoken)\n\t\t\t\t.then(\n\t\t\t\t\tc => resolve({ limitHit: c.limitHit ?? false, type: 'success', stats: c.stats, messages: [] }),\n\t\t\t\t\treject);\n\t\t});\n\t}\n}\n\nfunction fileMatchToSerialized(match: IFileMatch): ISerializedFileMatch {\n\treturn {\n\t\tpath: match.resource && match.resource.fsPath,\n\t\tresults: match.results,\n\t\tnumMatches: (match.results || []).reduce((sum, r) => {\n\t\t\tif (resultIsMatch(r)) {\n\t\t\t\tconst m = <ITextSearchMatch>r;\n\t\t\t\treturn sum + m.rangeLocations.length;\n\t\t\t} else {\n\t\t\t\treturn sum + 1;\n\t\t\t}\n\t\t}, 0)\n\t};\n}\n"],"mappings":"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","ignoreList":[]}