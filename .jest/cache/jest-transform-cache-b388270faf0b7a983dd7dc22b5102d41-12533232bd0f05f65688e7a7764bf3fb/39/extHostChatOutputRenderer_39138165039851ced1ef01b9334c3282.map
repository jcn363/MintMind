{"version":3,"names":["cov_1v2hk2ru71","actualCoverage","MainContext","Disposable","ExtHostChatOutputRenderer","webviews","_proxy","_renderers","s","Map","constructor","mainContext","f","getProxy","MainThreadChatOutputRenderer","registerChatOutputRenderer","extension","viewType","renderer","has","b","Error","set","$registerChatOutputRenderer","identifier","extensionLocation","delete","$unregisterChatOutputRenderer","$renderChatOutput","mime","valueData","webviewHandle","token","entry","get","webview","createNewWebview","renderChatOutput","Object","freeze","value","buffer"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostChatOutputRenderer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { ExtHostChatOutputRendererShape, IMainContext, MainContext, MainThreadChatOutputRendererShape } from './extHost.protocol.js';\nimport { Disposable } from './extHostTypes.js';\nimport { ExtHostWebviews } from './extHostWebview.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { VSBuffer } from '../../../base/common/buffer.js';\n\nexport class ExtHostChatOutputRenderer implements ExtHostChatOutputRendererShape {\n\n\tprivate readonly _proxy: MainThreadChatOutputRendererShape;\n\n\tprivate readonly _renderers = new Map</*viewType*/ string, {\n\t\treadonly renderer: vscode.ChatOutputRenderer;\n\t\treadonly extension: IExtensionDescription;\n\t}>();\n\n\tconstructor(\n\t\tmainContext: IMainContext,\n\t\tprivate readonly webviews: ExtHostWebviews,\n\t) {\n\t\tthis._proxy = mainContext.getProxy(MainContext.MainThreadChatOutputRenderer);\n\t}\n\n\tregisterChatOutputRenderer(extension: IExtensionDescription, viewType: string, renderer: vscode.ChatOutputRenderer): vscode.Disposable {\n\t\tif (this._renderers.has(viewType)) {\n\t\t\tthrow new Error(`Chat output renderer already registered for: ${viewType}`);\n\t\t}\n\n\t\tthis._renderers.set(viewType, { extension, renderer });\n\t\tthis._proxy.$registerChatOutputRenderer(viewType, extension.identifier, extension.extensionLocation);\n\n\t\treturn new Disposable(() => {\n\t\t\tthis._renderers.delete(viewType);\n\t\t\tthis._proxy.$unregisterChatOutputRenderer(viewType);\n\t\t});\n\t}\n\n\tasync $renderChatOutput(viewType: string, mime: string, valueData: VSBuffer, webviewHandle: string, token: CancellationToken): Promise<void> {\n\t\tconst entry = this._renderers.get(viewType);\n\t\tif (!entry) {\n\t\t\tthrow new Error(`No chat output renderer registered for: ${viewType}`);\n\t\t}\n\n\t\tconst webview = this.webviews.createNewWebview(webviewHandle, {}, entry.extension);\n\t\treturn entry.renderer.renderChatOutput(Object.freeze({ mime, value: valueData.buffer }), webview, {}, token);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}