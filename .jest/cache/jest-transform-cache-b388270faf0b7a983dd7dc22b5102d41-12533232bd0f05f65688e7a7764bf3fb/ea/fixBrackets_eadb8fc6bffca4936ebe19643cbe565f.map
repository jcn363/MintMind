{"version":3,"names":["cov_2pfwenrjg7","actualCoverage","LanguageAgnosticBracketTokens","lengthAdd","lengthGetColumnCountIfZeroLineCount","lengthZero","parseDocument","DenseKeyProvider","TextBufferTokenizer","fixBracketsInLine","tokens","languageConfigurationService","f","denseKeyProvider","s","bracketTokens","languageId","getLanguageConfiguration","tokenizer","StaticTokenizerSource","node","undefined","str","line","getLineContent","processNode","offset","kind","b","openingBracket","length","child","closingBracket","singleLangBracketTokens","getSingleLanguageBracketTokens","closingTokenText","findClosingTokenText","bracketIds","substring","children","lines","constructor","getValue","map","l","join","getLineCount","getLineLength","lineNumber","tokenization","getLineTokens"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/model/bracketPairsTextModelPart/fixBrackets.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ILanguageConfigurationService } from '../../languages/languageConfigurationRegistry.js';\nimport { AstNode, AstNodeKind } from './bracketPairsTree/ast.js';\nimport { LanguageAgnosticBracketTokens } from './bracketPairsTree/brackets.js';\nimport { Length, lengthAdd, lengthGetColumnCountIfZeroLineCount, lengthZero } from './bracketPairsTree/length.js';\nimport { parseDocument } from './bracketPairsTree/parser.js';\nimport { DenseKeyProvider } from './bracketPairsTree/smallImmutableSet.js';\nimport { ITokenizerSource, TextBufferTokenizer } from './bracketPairsTree/tokenizer.js';\nimport { IViewLineTokens } from '../../tokens/lineTokens.js';\n\nexport function fixBracketsInLine(tokens: IViewLineTokens, languageConfigurationService: ILanguageConfigurationService): string {\n\tconst denseKeyProvider = new DenseKeyProvider<string>();\n\tconst bracketTokens = new LanguageAgnosticBracketTokens(denseKeyProvider, (languageId) =>\n\t\tlanguageConfigurationService.getLanguageConfiguration(languageId)\n\t);\n\tconst tokenizer = new TextBufferTokenizer(\n\t\tnew StaticTokenizerSource([tokens]),\n\t\tbracketTokens\n\t);\n\tconst node = parseDocument(tokenizer, [], undefined, true);\n\n\tlet str = '';\n\tconst line = tokens.getLineContent();\n\n\tfunction processNode(node: AstNode, offset: Length) {\n\t\tif (node.kind === AstNodeKind.Pair) {\n\t\t\tprocessNode(node.openingBracket, offset);\n\t\t\toffset = lengthAdd(offset, node.openingBracket.length);\n\n\t\t\tif (node.child) {\n\t\t\t\tprocessNode(node.child, offset);\n\t\t\t\toffset = lengthAdd(offset, node.child.length);\n\t\t\t}\n\t\t\tif (node.closingBracket) {\n\t\t\t\tprocessNode(node.closingBracket, offset);\n\t\t\t\toffset = lengthAdd(offset, node.closingBracket.length);\n\t\t\t} else {\n\t\t\t\tconst singleLangBracketTokens = bracketTokens.getSingleLanguageBracketTokens(node.openingBracket.languageId);\n\n\t\t\t\tconst closingTokenText = singleLangBracketTokens.findClosingTokenText(node.openingBracket.bracketIds);\n\t\t\t\tstr += closingTokenText;\n\t\t\t}\n\t\t} else if (node.kind === AstNodeKind.UnexpectedClosingBracket) {\n\t\t\t// remove the bracket\n\t\t} else if (node.kind === AstNodeKind.Text || node.kind === AstNodeKind.Bracket) {\n\t\t\tstr += line.substring(\n\t\t\t\tlengthGetColumnCountIfZeroLineCount(offset),\n\t\t\t\tlengthGetColumnCountIfZeroLineCount(lengthAdd(offset, node.length))\n\t\t\t);\n\t\t} else if (node.kind === AstNodeKind.List) {\n\t\t\tfor (const child of node.children) {\n\t\t\t\tprocessNode(child, offset);\n\t\t\t\toffset = lengthAdd(offset, child.length);\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessNode(node, lengthZero);\n\n\treturn str;\n}\n\nclass StaticTokenizerSource implements ITokenizerSource {\n\tconstructor(private readonly lines: IViewLineTokens[]) { }\n\n\tgetValue(): string {\n\t\treturn this.lines.map(l => l.getLineContent()).join('\\n');\n\t}\n\tgetLineCount(): number {\n\t\treturn this.lines.length;\n\t}\n\tgetLineLength(lineNumber: number): number {\n\t\treturn this.lines[lineNumber - 1].getLineContent().length;\n\t}\n\n\ttokenization = {\n\t\tgetLineTokens: (lineNumber: number): IViewLineTokens => {\n\t\t\treturn this.lines[lineNumber - 1];\n\t\t}\n\t};\n}\n"],"mappings":"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","ignoreList":[]}