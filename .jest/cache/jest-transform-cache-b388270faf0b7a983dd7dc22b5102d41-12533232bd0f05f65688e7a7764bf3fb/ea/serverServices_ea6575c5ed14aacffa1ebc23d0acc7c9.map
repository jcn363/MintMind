{"version":3,"names":["cov_1ovbr6s8s7","actualCoverage","hostname","release","Emitter","toDisposable","Schemas","path","getMachineId","getSqmMachineId","getDevDeviceId","Promises","IPCServer","StaticRouter","IConfigurationService","ConfigurationService","ExtensionHostDebugBroadcastChannel","IDownloadService","DownloadServiceChannelClient","IEnvironmentService","INativeEnvironmentService","ExtensionGalleryServiceWithNoStorageService","IAllowedExtensionsService","IExtensionGalleryService","ExtensionSignatureVerificationService","IExtensionSignatureVerificationService","ExtensionManagementCLI","ExtensionManagementChannel","ExtensionManagementService","INativeServerExtensionManagementService","IFileService","FileService","DiskFileSystemProvider","SyncDescriptor","InstantiationService","ServiceCollection","ILanguagePackService","NativeLanguagePackService","AbstractLogger","DEFAULT_LOG_LEVEL","getLogLevel","ILoggerService","ILogService","log","LogLevel","LogLevelToString","product","IProductService","IRequestService","RequestChannel","RequestService","resolveCommonProperties","ITelemetryService","getPiiPathsFromEnvironment","isInternalTelemetry","isLoggingOnly","NullAppender","supportsTelemetry","ErrorTelemetry","IPtyService","PtyHostService","IUriIdentityService","UriIdentityService","RemoteAgentEnvironmentChannel","RemoteAgentFileSystemProviderChannel","ServerTelemetryChannel","IServerTelemetryService","ServerNullTelemetryService","ServerTelemetryService","RemoteTerminalChannel","createURITransformer","ServerEnvironmentService","REMOTE_TERMINAL_CHANNEL_NAME","REMOTE_FILE_SYSTEM_CHANNEL_NAME","ExtensionHostStatusService","IExtensionHostStatusService","IExtensionsScannerService","ExtensionsScannerService","IExtensionsProfileScannerService","IUserDataProfilesService","NullPolicyService","OneDataSystemAppender","LoggerService","ServerUserDataProfilesService","ExtensionsProfileScannerService","LogService","LoggerChannel","localize","RemoteExtensionsScannerChannel","RemoteExtensionsScannerService","RemoteExtensionsScannerChannelName","RemoteUserDataProfilesServiceChannel","NodePtyHostStarter","CSSDevelopmentService","ICSSDevelopmentService","AllowedExtensionsService","TelemetryLogAppender","INativeMcpDiscoveryHelperService","NativeMcpDiscoveryHelperChannelName","NativeMcpDiscoveryHelperChannel","NativeMcpDiscoveryHelperService","IExtensionGalleryManifestService","ExtensionGalleryManifestIPCService","IAllowedMcpServersService","IMcpGalleryService","IMcpManagementService","McpManagementService","McpGalleryService","IMcpResourceScannerService","McpResourceScannerService","McpManagementChannel","AllowedMcpServersService","IMcpGalleryManifestService","McpGalleryManifestIPCService","eventPrefix","s","setupServerServices","connectionToken","args","REMOTE_DATA_FOLDER","disposables","f","services","socketServer","SocketServer","productService","_serviceBrand","undefined","set","environmentService","loggerService","logsHome","registerChannel","ctx","getUriTransformer","remoteAuthority","logger","createLogger","name","logService","ServerLogger","setTimeout","cleanupOlderLogs","with","scheme","file","fsPath","then","err","error","onDidChangeLogLevel","logLevel","getLevel","trace","Array","isArray","serverGreeting","b","info","join","ChannelName","router","clientId","fileService","add","registerProvider","uriIdentityService","configurationService","machineSettingsResource","userDataProfilesService","machineId","sqmId","devDeviceId","Promise","all","initialize","init","bind","extensionHostStatusService","requestService","oneDsAppender","isInternal","aiConfig","ariaKey","flush","config","appenders","commonProperties","process","arch","commit","version","date","piiPaths","initialTelemetryLevelArg","injectedTelemetryLevel","downloadChannel","getChannel","instantiationService","createInstance","ptyHostStarter","graceTime","shortGraceTime","scrollback","getValue","ptyHostService","invokeFunction","accessor","mcpManagementService","get","extensionManagementService","extensionsScannerService","extensionGalleryService","languagePackService","remoteExtensionEnvironmentChannel","telemetryChannel","remoteExtensionsScanner","remoteFileSystemChannel","channel","whenExtensionsReady","cleanUp","telemetryService","_uriTransformerCache","Object","create","_onDidConnectEmitter","constructor","emitter","event","acceptConnection","protocol","onDidClientDisconnect","fire","useColors","setLevel","Boolean","stdout","isTTY","message","canLog","Trace","console","now","debug","Debug","Info","warn","Warning","Error","Date","twodigits","getHours","getMinutes","getSeconds","n","String","logsPath","currentLog","basename","logsRoot","dirname","children","readdir","allSessions","filter","test","oldSessions","sort","d","toDelete","slice","Math","max","length","map","rm"],"sources":["/home/user/Desktop/MintMind/src/vs/server/node/serverServices.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { hostname, release } from 'os';\nimport { Emitter, Event } from '../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../base/common/lifecycle.js';\nimport { Schemas } from '../../base/common/network.js';\nimport * as path from '../../base/common/path.js';\nimport { IURITransformer } from '../../base/common/uriIpc.js';\nimport { getMachineId, getSqmMachineId, getDevDeviceId } from '../../base/node/id.js';\nimport { Promises } from '../../base/node/pfs.js';\nimport { ClientConnectionEvent, IMessagePassingProtocol, IPCServer, StaticRouter } from '../../base/parts/ipc/common/ipc.js';\nimport { ProtocolConstants } from '../../base/parts/ipc/common/ipc.net.js';\nimport { IConfigurationService } from '../../platform/configuration/common/configuration.js';\nimport { ConfigurationService } from '../../platform/configuration/common/configurationService.js';\nimport { ExtensionHostDebugBroadcastChannel } from '../../platform/debug/common/extensionHostDebugIpc.js';\nimport { IDownloadService } from '../../platform/download/common/download.js';\nimport { DownloadServiceChannelClient } from '../../platform/download/common/downloadIpc.js';\nimport { IEnvironmentService, INativeEnvironmentService } from '../../platform/environment/common/environment.js';\nimport { ExtensionGalleryServiceWithNoStorageService } from '../../platform/extensionManagement/common/extensionGalleryService.js';\nimport { IAllowedExtensionsService, IExtensionGalleryService } from '../../platform/extensionManagement/common/extensionManagement.js';\nimport { ExtensionSignatureVerificationService, IExtensionSignatureVerificationService } from '../../platform/extensionManagement/node/extensionSignatureVerificationService.js';\nimport { ExtensionManagementCLI } from '../../platform/extensionManagement/common/extensionManagementCLI.js';\nimport { ExtensionManagementChannel } from '../../platform/extensionManagement/common/extensionManagementIpc.js';\nimport { ExtensionManagementService, INativeServerExtensionManagementService } from '../../platform/extensionManagement/node/extensionManagementService.js';\nimport { IFileService } from '../../platform/files/common/files.js';\nimport { FileService } from '../../platform/files/common/fileService.js';\nimport { DiskFileSystemProvider } from '../../platform/files/node/diskFileSystemProvider.js';\nimport { SyncDescriptor } from '../../platform/instantiation/common/descriptors.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { InstantiationService } from '../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../platform/instantiation/common/serviceCollection.js';\nimport { ILanguagePackService } from '../../platform/languagePacks/common/languagePacks.js';\nimport { NativeLanguagePackService } from '../../platform/languagePacks/node/languagePacks.js';\nimport { AbstractLogger, DEFAULT_LOG_LEVEL, getLogLevel, ILoggerService, ILogService, log, LogLevel, LogLevelToString } from '../../platform/log/common/log.js';\nimport product from '../../platform/product/common/product.js';\nimport { IProductService } from '../../platform/product/common/productService.js';\nimport { RemoteAgentConnectionContext } from '../../platform/remote/common/remoteAgentEnvironment.js';\nimport { IRequestService } from '../../platform/request/common/request.js';\nimport { RequestChannel } from '../../platform/request/common/requestIpc.js';\nimport { RequestService } from '../../platform/request/node/requestService.js';\nimport { resolveCommonProperties } from '../../platform/telemetry/common/commonProperties.js';\nimport { ITelemetryService, TelemetryLevel } from '../../platform/telemetry/common/telemetry.js';\nimport { ITelemetryServiceConfig } from '../../platform/telemetry/common/telemetryService.js';\nimport { getPiiPathsFromEnvironment, isInternalTelemetry, isLoggingOnly, ITelemetryAppender, NullAppender, supportsTelemetry } from '../../platform/telemetry/common/telemetryUtils.js';\nimport ErrorTelemetry from '../../platform/telemetry/node/errorTelemetry.js';\nimport { IPtyService, TerminalSettingId } from '../../platform/terminal/common/terminal.js';\nimport { PtyHostService } from '../../platform/terminal/node/ptyHostService.js';\nimport { IUriIdentityService } from '../../platform/uriIdentity/common/uriIdentity.js';\nimport { UriIdentityService } from '../../platform/uriIdentity/common/uriIdentityService.js';\nimport { RemoteAgentEnvironmentChannel } from './remoteAgentEnvironmentImpl.js';\nimport { RemoteAgentFileSystemProviderChannel } from './remoteFileSystemProviderServer.js';\nimport { ServerTelemetryChannel } from '../../platform/telemetry/common/remoteTelemetryChannel.js';\nimport { IServerTelemetryService, ServerNullTelemetryService, ServerTelemetryService } from '../../platform/telemetry/common/serverTelemetryService.js';\nimport { RemoteTerminalChannel } from './remoteTerminalChannel.js';\nimport { createURITransformer } from '../../base/common/uriTransformer.js';\nimport { ServerConnectionToken } from './serverConnectionToken.js';\nimport { ServerEnvironmentService, ServerParsedArgs } from './serverEnvironmentService.js';\nimport { REMOTE_TERMINAL_CHANNEL_NAME } from '../../workbench/contrib/terminal/common/remote/remoteTerminalChannel.js';\nimport { REMOTE_FILE_SYSTEM_CHANNEL_NAME } from '../../workbench/services/remote/common/remoteFileSystemProviderClient.js';\nimport { ExtensionHostStatusService, IExtensionHostStatusService } from './extensionHostStatusService.js';\nimport { IExtensionsScannerService } from '../../platform/extensionManagement/common/extensionsScannerService.js';\nimport { ExtensionsScannerService } from './extensionsScannerService.js';\nimport { IExtensionsProfileScannerService } from '../../platform/extensionManagement/common/extensionsProfileScannerService.js';\nimport { IUserDataProfilesService } from '../../platform/userDataProfile/common/userDataProfile.js';\nimport { NullPolicyService } from '../../platform/policy/common/policy.js';\nimport { OneDataSystemAppender } from '../../platform/telemetry/node/1dsAppender.js';\nimport { LoggerService } from '../../platform/log/node/loggerService.js';\nimport { ServerUserDataProfilesService } from '../../platform/userDataProfile/node/userDataProfile.js';\nimport { ExtensionsProfileScannerService } from '../../platform/extensionManagement/node/extensionsProfileScannerService.js';\nimport { LogService } from '../../platform/log/common/logService.js';\nimport { LoggerChannel } from '../../platform/log/common/logIpc.js';\nimport { localize } from '../../nls.js';\nimport { RemoteExtensionsScannerChannel, RemoteExtensionsScannerService } from './remoteExtensionsScanner.js';\nimport { RemoteExtensionsScannerChannelName } from '../../platform/remote/common/remoteExtensionsScanner.js';\nimport { RemoteUserDataProfilesServiceChannel } from '../../platform/userDataProfile/common/userDataProfileIpc.js';\nimport { NodePtyHostStarter } from '../../platform/terminal/node/nodePtyHostStarter.js';\nimport { CSSDevelopmentService, ICSSDevelopmentService } from '../../platform/cssDev/node/cssDevService.js';\nimport { AllowedExtensionsService } from '../../platform/extensionManagement/common/allowedExtensionsService.js';\nimport { TelemetryLogAppender } from '../../platform/telemetry/common/telemetryLogAppender.js';\nimport { INativeMcpDiscoveryHelperService, NativeMcpDiscoveryHelperChannelName } from '../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { NativeMcpDiscoveryHelperChannel } from '../../platform/mcp/node/nativeMcpDiscoveryHelperChannel.js';\nimport { NativeMcpDiscoveryHelperService } from '../../platform/mcp/node/nativeMcpDiscoveryHelperService.js';\nimport { IExtensionGalleryManifestService } from '../../platform/extensionManagement/common/extensionGalleryManifest.js';\nimport { ExtensionGalleryManifestIPCService } from '../../platform/extensionManagement/common/extensionGalleryManifestServiceIpc.js';\nimport { IAllowedMcpServersService, IMcpGalleryService, IMcpManagementService } from '../../platform/mcp/common/mcpManagement.js';\nimport { McpManagementService } from '../../platform/mcp/node/mcpManagementService.js';\nimport { McpGalleryService } from '../../platform/mcp/common/mcpGalleryService.js';\nimport { IMcpResourceScannerService, McpResourceScannerService } from '../../platform/mcp/common/mcpResourceScannerService.js';\nimport { McpManagementChannel } from '../../platform/mcp/common/mcpManagementIpc.js';\nimport { AllowedMcpServersService } from '../../platform/mcp/common/allowedMcpServersService.js';\nimport { IMcpGalleryManifestService } from '../../platform/mcp/common/mcpGalleryManifest.js';\nimport { McpGalleryManifestIPCService } from '../../platform/mcp/common/mcpGalleryManifestServiceIpc.js';\n\nconst eventPrefix = 'monacoworkbench';\n\nexport async function setupServerServices(connectionToken: ServerConnectionToken, args: ServerParsedArgs, REMOTE_DATA_FOLDER: string, disposables: DisposableStore) {\n\tconst services = new ServiceCollection();\n\tconst socketServer = new SocketServer<RemoteAgentConnectionContext>();\n\n\tconst productService: IProductService = { _serviceBrand: undefined, ...product };\n\tservices.set(IProductService, productService);\n\n\tconst environmentService = new ServerEnvironmentService(args, productService);\n\tservices.set(IEnvironmentService, environmentService);\n\tservices.set(INativeEnvironmentService, environmentService);\n\n\tconst loggerService = new LoggerService(getLogLevel(environmentService), environmentService.logsHome);\n\tservices.set(ILoggerService, loggerService);\n\tsocketServer.registerChannel('logger', new LoggerChannel(loggerService, (ctx: RemoteAgentConnectionContext) => getUriTransformer(ctx.remoteAuthority)));\n\n\tconst logger = loggerService.createLogger('remoteagent', { name: localize('remoteExtensionLog', \"Server\") });\n\tconst logService = new LogService(logger, [new ServerLogger(getLogLevel(environmentService))]);\n\tservices.set(ILogService, logService);\n\tsetTimeout(() => cleanupOlderLogs(environmentService.logsHome.with({ scheme: Schemas.file }).fsPath).then(null, err => logService.error(err)), 10000);\n\tlogService.onDidChangeLogLevel(logLevel => log(logService, logLevel, `Log level changed to ${LogLevelToString(logService.getLevel())}`));\n\n\tlogService.trace(`Remote configuration data at ${REMOTE_DATA_FOLDER}`);\n\tlogService.trace('process arguments:', environmentService.args);\n\tif (Array.isArray(productService.serverGreeting)) {\n\t\tlogService.info(`\\n\\n${productService.serverGreeting.join('\\n')}\\n\\n`);\n\t}\n\n\t// ExtensionHost Debug broadcast service\n\tsocketServer.registerChannel(ExtensionHostDebugBroadcastChannel.ChannelName, new ExtensionHostDebugBroadcastChannel());\n\n\t// TODO: @Sandy @Joao need dynamic context based router\n\tconst router = new StaticRouter<RemoteAgentConnectionContext>(ctx => ctx.clientId === 'renderer');\n\n\t// Files\n\tconst fileService = disposables.add(new FileService(logService));\n\tservices.set(IFileService, fileService);\n\tfileService.registerProvider(Schemas.file, disposables.add(new DiskFileSystemProvider(logService)));\n\n\t// URI Identity\n\tconst uriIdentityService = new UriIdentityService(fileService);\n\tservices.set(IUriIdentityService, uriIdentityService);\n\n\t// Configuration\n\tconst configurationService = new ConfigurationService(environmentService.machineSettingsResource, fileService, new NullPolicyService(), logService);\n\tservices.set(IConfigurationService, configurationService);\n\n\t// User Data Profiles\n\tconst userDataProfilesService = new ServerUserDataProfilesService(uriIdentityService, environmentService, fileService, logService);\n\tservices.set(IUserDataProfilesService, userDataProfilesService);\n\tsocketServer.registerChannel('userDataProfiles', new RemoteUserDataProfilesServiceChannel(userDataProfilesService, (ctx: RemoteAgentConnectionContext) => getUriTransformer(ctx.remoteAuthority)));\n\n\t// Dev Only: CSS service (for ESM)\n\tservices.set(ICSSDevelopmentService, new SyncDescriptor(CSSDevelopmentService, undefined, true));\n\n\t// Initialize\n\tconst [, , machineId, sqmId, devDeviceId] = await Promise.all([\n\t\tconfigurationService.initialize(),\n\t\tuserDataProfilesService.init(),\n\t\tgetMachineId(logService.error.bind(logService)),\n\t\tgetSqmMachineId(logService.error.bind(logService)),\n\t\tgetDevDeviceId(logService.error.bind(logService))\n\t]);\n\n\tconst extensionHostStatusService = new ExtensionHostStatusService();\n\tservices.set(IExtensionHostStatusService, extensionHostStatusService);\n\n\t// Request\n\tconst requestService = new RequestService('remote', configurationService, environmentService, logService);\n\tservices.set(IRequestService, requestService);\n\n\tlet oneDsAppender: ITelemetryAppender = NullAppender;\n\tconst isInternal = isInternalTelemetry(productService, configurationService);\n\tif (supportsTelemetry(productService, environmentService)) {\n\t\tif (!isLoggingOnly(productService, environmentService) && productService.aiConfig?.ariaKey) {\n\t\t\toneDsAppender = new OneDataSystemAppender(requestService, isInternal, eventPrefix, null, productService.aiConfig.ariaKey);\n\t\t\tdisposables.add(toDisposable(() => oneDsAppender?.flush())); // Ensure the AI appender is disposed so that it flushes remaining data\n\t\t}\n\n\t\tconst config: ITelemetryServiceConfig = {\n\t\t\tappenders: [oneDsAppender, new TelemetryLogAppender('', true, loggerService, environmentService, productService)],\n\t\t\tcommonProperties: resolveCommonProperties(release(), hostname(), process.arch, productService.commit, productService.version + '-remote', machineId, sqmId, devDeviceId, isInternal, productService.date, 'remoteAgent'),\n\t\t\tpiiPaths: getPiiPathsFromEnvironment(environmentService)\n\t\t};\n\t\tconst initialTelemetryLevelArg = environmentService.args['telemetry-level'];\n\t\tlet injectedTelemetryLevel: TelemetryLevel = TelemetryLevel.USAGE;\n\t\t// Convert the passed in CLI argument into a telemetry level for the telemetry service\n\t\tif (initialTelemetryLevelArg === 'all') {\n\t\t\tinjectedTelemetryLevel = TelemetryLevel.USAGE;\n\t\t} else if (initialTelemetryLevelArg === 'error') {\n\t\t\tinjectedTelemetryLevel = TelemetryLevel.ERROR;\n\t\t} else if (initialTelemetryLevelArg === 'crash') {\n\t\t\tinjectedTelemetryLevel = TelemetryLevel.CRASH;\n\t\t} else if (initialTelemetryLevelArg !== undefined) {\n\t\t\tinjectedTelemetryLevel = TelemetryLevel.NONE;\n\t\t}\n\t\tservices.set(IServerTelemetryService, new SyncDescriptor(ServerTelemetryService, [config, injectedTelemetryLevel]));\n\t} else {\n\t\tservices.set(IServerTelemetryService, ServerNullTelemetryService);\n\t}\n\n\tservices.set(IExtensionGalleryManifestService, new ExtensionGalleryManifestIPCService(socketServer, productService));\n\tservices.set(IMcpGalleryManifestService, new McpGalleryManifestIPCService(socketServer));\n\tservices.set(IExtensionGalleryService, new SyncDescriptor(ExtensionGalleryServiceWithNoStorageService));\n\n\tconst downloadChannel = socketServer.getChannel('download', router);\n\tservices.set(IDownloadService, new DownloadServiceChannelClient(downloadChannel, () => getUriTransformer('renderer') /* TODO: @Sandy @Joao need dynamic context based router */));\n\n\tservices.set(IExtensionsProfileScannerService, new SyncDescriptor(ExtensionsProfileScannerService));\n\tservices.set(IExtensionsScannerService, new SyncDescriptor(ExtensionsScannerService));\n\tservices.set(IExtensionSignatureVerificationService, new SyncDescriptor(ExtensionSignatureVerificationService));\n\tservices.set(IAllowedExtensionsService, new SyncDescriptor(AllowedExtensionsService));\n\tservices.set(INativeServerExtensionManagementService, new SyncDescriptor(ExtensionManagementService));\n\tservices.set(INativeMcpDiscoveryHelperService, new SyncDescriptor(NativeMcpDiscoveryHelperService));\n\n\tconst instantiationService: IInstantiationService = new InstantiationService(services);\n\tservices.set(ILanguagePackService, instantiationService.createInstance(NativeLanguagePackService));\n\n\tconst ptyHostStarter = instantiationService.createInstance(\n\t\tNodePtyHostStarter,\n\t\t{\n\t\t\tgraceTime: ProtocolConstants.ReconnectionGraceTime,\n\t\t\tshortGraceTime: ProtocolConstants.ReconnectionShortGraceTime,\n\t\t\tscrollback: configurationService.getValue<number>(TerminalSettingId.PersistentSessionScrollback) ?? 100\n\t\t}\n\t);\n\tconst ptyHostService = instantiationService.createInstance(PtyHostService, ptyHostStarter);\n\tservices.set(IPtyService, ptyHostService);\n\n\tservices.set(IAllowedMcpServersService, new SyncDescriptor(AllowedMcpServersService));\n\tservices.set(IMcpResourceScannerService, new SyncDescriptor(McpResourceScannerService));\n\tservices.set(IMcpGalleryService, new SyncDescriptor(McpGalleryService));\n\tservices.set(IMcpManagementService, new SyncDescriptor(McpManagementService));\n\n\tinstantiationService.invokeFunction(accessor => {\n\t\tconst mcpManagementService = accessor.get(IMcpManagementService);\n\t\tconst extensionManagementService = accessor.get(INativeServerExtensionManagementService);\n\t\tconst extensionsScannerService = accessor.get(IExtensionsScannerService);\n\t\tconst extensionGalleryService = accessor.get(IExtensionGalleryService);\n\t\tconst languagePackService = accessor.get(ILanguagePackService);\n\t\tconst remoteExtensionEnvironmentChannel = new RemoteAgentEnvironmentChannel(connectionToken, environmentService, userDataProfilesService, extensionHostStatusService);\n\t\tsocketServer.registerChannel('remoteextensionsenvironment', remoteExtensionEnvironmentChannel);\n\n\t\tconst telemetryChannel = new ServerTelemetryChannel(accessor.get(IServerTelemetryService), oneDsAppender);\n\t\tsocketServer.registerChannel('telemetry', telemetryChannel);\n\n\t\tsocketServer.registerChannel(REMOTE_TERMINAL_CHANNEL_NAME, new RemoteTerminalChannel(environmentService, logService, ptyHostService, productService, extensionManagementService, configurationService));\n\n\t\tconst remoteExtensionsScanner = new RemoteExtensionsScannerService(instantiationService.createInstance(ExtensionManagementCLI, logService), environmentService, userDataProfilesService, extensionsScannerService, logService, extensionGalleryService, languagePackService, extensionManagementService);\n\t\tsocketServer.registerChannel(RemoteExtensionsScannerChannelName, new RemoteExtensionsScannerChannel(remoteExtensionsScanner, (ctx: RemoteAgentConnectionContext) => getUriTransformer(ctx.remoteAuthority)));\n\n\t\tsocketServer.registerChannel(NativeMcpDiscoveryHelperChannelName, instantiationService.createInstance(NativeMcpDiscoveryHelperChannel, (ctx: RemoteAgentConnectionContext) => getUriTransformer(ctx.remoteAuthority)));\n\n\t\tconst remoteFileSystemChannel = disposables.add(new RemoteAgentFileSystemProviderChannel(logService, environmentService, configurationService));\n\t\tsocketServer.registerChannel(REMOTE_FILE_SYSTEM_CHANNEL_NAME, remoteFileSystemChannel);\n\n\t\tsocketServer.registerChannel('request', new RequestChannel(accessor.get(IRequestService)));\n\n\t\tconst channel = new ExtensionManagementChannel(extensionManagementService, (ctx: RemoteAgentConnectionContext) => getUriTransformer(ctx.remoteAuthority));\n\t\tsocketServer.registerChannel('extensions', channel);\n\n\t\tsocketServer.registerChannel('mcpManagement', new McpManagementChannel(mcpManagementService, (ctx: RemoteAgentConnectionContext) => getUriTransformer(ctx.remoteAuthority)));\n\n\t\t// clean up extensions folder\n\t\tremoteExtensionsScanner.whenExtensionsReady().then(() => extensionManagementService.cleanUp());\n\n\t\tdisposables.add(new ErrorTelemetry(accessor.get(ITelemetryService)));\n\n\t\treturn {\n\t\t\ttelemetryService: accessor.get(ITelemetryService)\n\t\t};\n\t});\n\n\treturn { socketServer, instantiationService };\n}\n\nconst _uriTransformerCache: { [remoteAuthority: string]: IURITransformer } = Object.create(null);\n\nfunction getUriTransformer(remoteAuthority: string): IURITransformer {\n\tif (!_uriTransformerCache[remoteAuthority]) {\n\t\t_uriTransformerCache[remoteAuthority] = createURITransformer(remoteAuthority);\n\t}\n\treturn _uriTransformerCache[remoteAuthority];\n}\n\nexport class SocketServer<TContext = string> extends IPCServer<TContext> {\n\n\tprivate _onDidConnectEmitter: Emitter<ClientConnectionEvent>;\n\n\tconstructor() {\n\t\tconst emitter = new Emitter<ClientConnectionEvent>();\n\t\tsuper(emitter.event);\n\t\tthis._onDidConnectEmitter = emitter;\n\t}\n\n\tpublic acceptConnection(protocol: IMessagePassingProtocol, onDidClientDisconnect: Event<void>): void {\n\t\tthis._onDidConnectEmitter.fire({ protocol, onDidClientDisconnect });\n\t}\n}\n\nclass ServerLogger extends AbstractLogger {\n\tprivate useColors: boolean;\n\n\tconstructor(logLevel: LogLevel = DEFAULT_LOG_LEVEL) {\n\t\tsuper();\n\t\tthis.setLevel(logLevel);\n\t\tthis.useColors = Boolean(process.stdout.isTTY);\n\t}\n\n\ttrace(message: string, ...args: unknown[]): void {\n\t\tif (this.canLog(LogLevel.Trace)) {\n\t\t\tif (this.useColors) {\n\t\t\t\tconsole.log(`\\x1b[90m[${now()}]\\x1b[0m`, message, ...args);\n\t\t\t} else {\n\t\t\t\tconsole.log(`[${now()}]`, message, ...args);\n\t\t\t}\n\t\t}\n\t}\n\n\tdebug(message: string, ...args: unknown[]): void {\n\t\tif (this.canLog(LogLevel.Debug)) {\n\t\t\tif (this.useColors) {\n\t\t\t\tconsole.log(`\\x1b[90m[${now()}]\\x1b[0m`, message, ...args);\n\t\t\t} else {\n\t\t\t\tconsole.log(`[${now()}]`, message, ...args);\n\t\t\t}\n\t\t}\n\t}\n\n\tinfo(message: string, ...args: unknown[]): void {\n\t\tif (this.canLog(LogLevel.Info)) {\n\t\t\tif (this.useColors) {\n\t\t\t\tconsole.log(`\\x1b[90m[${now()}]\\x1b[0m`, message, ...args);\n\t\t\t} else {\n\t\t\t\tconsole.log(`[${now()}]`, message, ...args);\n\t\t\t}\n\t\t}\n\t}\n\n\twarn(message: string | Error, ...args: unknown[]): void {\n\t\tif (this.canLog(LogLevel.Warning)) {\n\t\t\tif (this.useColors) {\n\t\t\t\tconsole.warn(`\\x1b[93m[${now()}]\\x1b[0m`, message, ...args);\n\t\t\t} else {\n\t\t\t\tconsole.warn(`[${now()}]`, message, ...args);\n\t\t\t}\n\t\t}\n\t}\n\n\terror(message: string, ...args: unknown[]): void {\n\t\tif (this.canLog(LogLevel.Error)) {\n\t\t\tif (this.useColors) {\n\t\t\t\tconsole.error(`\\x1b[91m[${now()}]\\x1b[0m`, message, ...args);\n\t\t\t} else {\n\t\t\t\tconsole.error(`[${now()}]`, message, ...args);\n\t\t\t}\n\t\t}\n\t}\n\n\tflush(): void {\n\t\t// noop\n\t}\n}\n\nfunction now(): string {\n\tconst date = new Date();\n\treturn `${twodigits(date.getHours())}:${twodigits(date.getMinutes())}:${twodigits(date.getSeconds())}`;\n}\n\nfunction twodigits(n: number): string {\n\tif (n < 10) {\n\t\treturn `0${n}`;\n\t}\n\treturn String(n);\n}\n\n/**\n * Cleans up older logs, while keeping the 10 most recent ones.\n */\nasync function cleanupOlderLogs(logsPath: string): Promise<void> {\n\tconst currentLog = path.basename(logsPath);\n\tconst logsRoot = path.dirname(logsPath);\n\tconst children = await Promises.readdir(logsRoot);\n\tconst allSessions = children.filter(name => /^\\d{8}T\\d{6}$/.test(name));\n\tconst oldSessions = allSessions.sort().filter((d) => d !== currentLog);\n\tconst toDelete = oldSessions.slice(0, Math.max(0, oldSessions.length - 9));\n\n\tawait Promise.all(toDelete.map(name => Promises.rm(path.join(logsRoot, name))));\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkBS;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAlBT;;;;AAKA,SAASE,QAAQ,EAAEC,OAAO,QAAQ,IAAI;AACtC,SAASC,OAAO,QAAe,4BAA4B;AAC3D,SAA0BC,YAAY,QAAQ,gCAAgC;AAC9E,SAASC,OAAO,QAAQ,8BAA8B;AACtD,OAAO,KAAKC,IAAI,MAAM,2BAA2B;AAEjD,SAASC,YAAY,EAAEC,eAAe,EAAEC,cAAc,QAAQ,uBAAuB;AACrF,SAASC,QAAQ,QAAQ,wBAAwB;AACjD,SAAyDC,SAAS,EAAEC,YAAY,QAAQ,oCAAoC;AAE5H,SAASC,qBAAqB,QAAQ,sDAAsD;AAC5F,SAASC,oBAAoB,QAAQ,6DAA6D;AAClG,SAASC,kCAAkC,QAAQ,sDAAsD;AACzG,SAASC,gBAAgB,QAAQ,4CAA4C;AAC7E,SAASC,4BAA4B,QAAQ,+CAA+C;AAC5F,SAASC,mBAAmB,EAAEC,yBAAyB,QAAQ,kDAAkD;AACjH,SAASC,2CAA2C,QAAQ,sEAAsE;AAClI,SAASC,yBAAyB,EAAEC,wBAAwB,QAAQ,kEAAkE;AACtI,SAASC,qCAAqC,EAAEC,sCAAsC,QAAQ,kFAAkF;AAChL,SAASC,sBAAsB,QAAQ,qEAAqE;AAC5G,SAASC,0BAA0B,QAAQ,qEAAqE;AAChH,SAASC,0BAA0B,EAAEC,uCAAuC,QAAQ,uEAAuE;AAC3J,SAASC,YAAY,QAAQ,sCAAsC;AACnE,SAASC,WAAW,QAAQ,4CAA4C;AACxE,SAASC,sBAAsB,QAAQ,qDAAqD;AAC5F,SAASC,cAAc,QAAQ,oDAAoD;AAEnF,SAASC,oBAAoB,QAAQ,6DAA6D;AAClG,SAASC,iBAAiB,QAAQ,0DAA0D;AAC5F,SAASC,oBAAoB,QAAQ,sDAAsD;AAC3F,SAASC,yBAAyB,QAAQ,oDAAoD;AAC9F,SAASC,cAAc,EAAEC,iBAAiB,EAAEC,WAAW,EAAEC,cAAc,EAAEC,WAAW,EAAEC,GAAG,EAAEC,QAAQ,EAAEC,gBAAgB,QAAQ,kCAAkC;AAC/J,OAAOC,OAAO,MAAM,0CAA0C;AAC9D,SAASC,eAAe,QAAQ,iDAAiD;AAEjF,SAASC,eAAe,QAAQ,0CAA0C;AAC1E,SAASC,cAAc,QAAQ,6CAA6C;AAC5E,SAASC,cAAc,QAAQ,+CAA+C;AAC9E,SAASC,uBAAuB,QAAQ,qDAAqD;AAC7F,SAASC,iBAAiB,QAAwB,8CAA8C;AAEhG,SAASC,0BAA0B,EAAEC,mBAAmB,EAAEC,aAAa,EAAsBC,YAAY,EAAEC,iBAAiB,QAAQ,mDAAmD;AACvL,OAAOC,cAAc,MAAM,iDAAiD;AAC5E,SAASC,WAAW,QAA2B,4CAA4C;AAC3F,SAASC,cAAc,QAAQ,gDAAgD;AAC/E,SAASC,mBAAmB,QAAQ,kDAAkD;AACtF,SAASC,kBAAkB,QAAQ,yDAAyD;AAC5F,SAASC,6BAA6B,QAAQ,iCAAiC;AAC/E,SAASC,oCAAoC,QAAQ,qCAAqC;AAC1F,SAASC,sBAAsB,QAAQ,2DAA2D;AAClG,SAASC,uBAAuB,EAAEC,0BAA0B,EAAEC,sBAAsB,QAAQ,2DAA2D;AACvJ,SAASC,qBAAqB,QAAQ,4BAA4B;AAClE,SAASC,oBAAoB,QAAQ,qCAAqC;AAE1E,SAASC,wBAAwB,QAA0B,+BAA+B;AAC1F,SAASC,4BAA4B,QAAQ,yEAAyE;AACtH,SAASC,+BAA+B,QAAQ,0EAA0E;AAC1H,SAASC,0BAA0B,EAAEC,2BAA2B,QAAQ,iCAAiC;AACzG,SAASC,yBAAyB,QAAQ,uEAAuE;AACjH,SAASC,wBAAwB,QAAQ,+BAA+B;AACxE,SAASC,gCAAgC,QAAQ,8EAA8E;AAC/H,SAASC,wBAAwB,QAAQ,0DAA0D;AACnG,SAASC,iBAAiB,QAAQ,wCAAwC;AAC1E,SAASC,qBAAqB,QAAQ,8CAA8C;AACpF,SAASC,aAAa,QAAQ,0CAA0C;AACxE,SAASC,6BAA6B,QAAQ,wDAAwD;AACtG,SAASC,+BAA+B,QAAQ,4EAA4E;AAC5H,SAASC,UAAU,QAAQ,yCAAyC;AACpE,SAASC,aAAa,QAAQ,qCAAqC;AACnE,SAASC,QAAQ,QAAQ,cAAc;AACvC,SAASC,8BAA8B,EAAEC,8BAA8B,QAAQ,8BAA8B;AAC7G,SAASC,kCAAkC,QAAQ,yDAAyD;AAC5G,SAASC,oCAAoC,QAAQ,6DAA6D;AAClH,SAASC,kBAAkB,QAAQ,oDAAoD;AACvF,SAASC,qBAAqB,EAAEC,sBAAsB,QAAQ,6CAA6C;AAC3G,SAASC,wBAAwB,QAAQ,uEAAuE;AAChH,SAASC,oBAAoB,QAAQ,yDAAyD;AAC9F,SAASC,gCAAgC,EAAEC,mCAAmC,QAAQ,uDAAuD;AAC7I,SAASC,+BAA+B,QAAQ,4DAA4D;AAC5G,SAASC,+BAA+B,QAAQ,4DAA4D;AAC5G,SAASC,gCAAgC,QAAQ,uEAAuE;AACxH,SAASC,kCAAkC,QAAQ,iFAAiF;AACpI,SAASC,yBAAyB,EAAEC,kBAAkB,EAAEC,qBAAqB,QAAQ,4CAA4C;AACjI,SAASC,oBAAoB,QAAQ,iDAAiD;AACtF,SAASC,iBAAiB,QAAQ,gDAAgD;AAClF,SAASC,0BAA0B,EAAEC,yBAAyB,QAAQ,wDAAwD;AAC9H,SAASC,oBAAoB,QAAQ,+CAA+C;AACpF,SAASC,wBAAwB,QAAQ,uDAAuD;AAChG,SAASC,0BAA0B,QAAQ,iDAAiD;AAC5F,SAASC,4BAA4B,QAAQ,2DAA2D;AAExG,MAAMC,WAAW;AAAA;AAAA,CAAAlH,cAAA,GAAAmH,CAAA,OAAG,iBAAiB;AAErC,OAAO,eAAeC,mBAAmBA,CAACC,eAAsC,EAAEC,IAAsB,EAAEC,kBAA0B,EAAEC,WAA4B;EAAA;EAAAxH,cAAA,GAAAyH,CAAA;EACjK,MAAMC,QAAQ;EAAA;EAAA,CAAA1H,cAAA,GAAAmH,CAAA,OAAG,IAAIhF,iBAAiB,EAAE;EACxC,MAAMwF,YAAY;EAAA;EAAA,CAAA3H,cAAA,GAAAmH,CAAA,OAAG,IAAIS,YAAY,EAAgC;EAErE,MAAMC,cAAc;EAAA;EAAA,CAAA7H,cAAA,GAAAmH,CAAA,OAAoB;IAAEW,aAAa,EAAEC,SAAS;IAAE,GAAGjF;EAAO,CAAE;EAAC;EAAA9C,cAAA,GAAAmH,CAAA;EACjFO,QAAQ,CAACM,GAAG,CAACjF,eAAe,EAAE8E,cAAc,CAAC;EAE7C,MAAMI,kBAAkB;EAAA;EAAA,CAAAjI,cAAA,GAAAmH,CAAA,OAAG,IAAI5C,wBAAwB,CAAC+C,IAAI,EAAEO,cAAc,CAAC;EAAC;EAAA7H,cAAA,GAAAmH,CAAA;EAC9EO,QAAQ,CAACM,GAAG,CAAC7G,mBAAmB,EAAE8G,kBAAkB,CAAC;EAAC;EAAAjI,cAAA,GAAAmH,CAAA;EACtDO,QAAQ,CAACM,GAAG,CAAC5G,yBAAyB,EAAE6G,kBAAkB,CAAC;EAE3D,MAAMC,aAAa;EAAA;EAAA,CAAAlI,cAAA,GAAAmH,CAAA,OAAG,IAAIjC,aAAa,CAAC1C,WAAW,CAACyF,kBAAkB,CAAC,EAAEA,kBAAkB,CAACE,QAAQ,CAAC;EAAC;EAAAnI,cAAA,GAAAmH,CAAA;EACtGO,QAAQ,CAACM,GAAG,CAACvF,cAAc,EAAEyF,aAAa,CAAC;EAAC;EAAAlI,cAAA,GAAAmH,CAAA;EAC5CQ,YAAY,CAACS,eAAe,CAAC,QAAQ,EAAE,IAAI9C,aAAa,CAAC4C,aAAa,EAAGG,GAAiC,IAAK;IAAA;IAAArI,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAmB,iBAAiB,CAACD,GAAG,CAACE,eAAe,CAAC;EAAD,CAAC,CAAC,CAAC;EAEvJ,MAAMC,MAAM;EAAA;EAAA,CAAAxI,cAAA,GAAAmH,CAAA,QAAGe,aAAa,CAACO,YAAY,CAAC,aAAa,EAAE;IAAEC,IAAI,EAAEnD,QAAQ,CAAC,oBAAoB,EAAE,QAAQ;EAAC,CAAE,CAAC;EAC5G,MAAMoD,UAAU;EAAA;EAAA,CAAA3I,cAAA,GAAAmH,CAAA,QAAG,IAAI9B,UAAU,CAACmD,MAAM,EAAE,CAAC,IAAII,YAAY,CAACpG,WAAW,CAACyF,kBAAkB,CAAC,CAAC,CAAC,CAAC;EAAC;EAAAjI,cAAA,GAAAmH,CAAA;EAC/FO,QAAQ,CAACM,GAAG,CAACtF,WAAW,EAAEiG,UAAU,CAAC;EAAC;EAAA3I,cAAA,GAAAmH,CAAA;EACtC0B,UAAU,CAAC,MAAM;IAAA;IAAA7I,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAA2B,gBAAgB,CAACb,kBAAkB,CAACE,QAAQ,CAACY,IAAI,CAAC;MAAEC,MAAM,EAAE1I,OAAO,CAAC2I;IAAI,CAAE,CAAC,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,IAAI,EAAEC,GAAG,IAAI;MAAA;MAAApJ,cAAA,GAAAyH,CAAA;MAAAzH,cAAA,GAAAmH,CAAA;MAAA,OAAAwB,UAAU,CAACU,KAAK,CAACD,GAAG,CAAC;IAAD,CAAC,CAAC;EAAD,CAAC,EAAE,KAAK,CAAC;EAAC;EAAApJ,cAAA,GAAAmH,CAAA;EACtJwB,UAAU,CAACW,mBAAmB,CAACC,QAAQ,IAAI;IAAA;IAAAvJ,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAxE,GAAG,CAACgG,UAAU,EAAEY,QAAQ,EAAE,wBAAwB1G,gBAAgB,CAAC8F,UAAU,CAACa,QAAQ,EAAE,CAAC,EAAE,CAAC;EAAD,CAAC,CAAC;EAAC;EAAAxJ,cAAA,GAAAmH,CAAA;EAEzIwB,UAAU,CAACc,KAAK,CAAC,gCAAgClC,kBAAkB,EAAE,CAAC;EAAC;EAAAvH,cAAA,GAAAmH,CAAA;EACvEwB,UAAU,CAACc,KAAK,CAAC,oBAAoB,EAAExB,kBAAkB,CAACX,IAAI,CAAC;EAAC;EAAAtH,cAAA,GAAAmH,CAAA;EAChE,IAAIuC,KAAK,CAACC,OAAO,CAAC9B,cAAc,CAAC+B,cAAc,CAAC,EAAE;IAAA;IAAA5J,cAAA,GAAA6J,CAAA;IAAA7J,cAAA,GAAAmH,CAAA;IACjDwB,UAAU,CAACmB,IAAI,CAAC,OAAOjC,cAAc,CAAC+B,cAAc,CAACG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;EACvE,CAAC;EAAA;EAAA;IAAA/J,cAAA,GAAA6J,CAAA;EAAA;EAED;EAAA7J,cAAA,GAAAmH,CAAA;EACAQ,YAAY,CAACS,eAAe,CAACpH,kCAAkC,CAACgJ,WAAW,EAAE,IAAIhJ,kCAAkC,EAAE,CAAC;EAEtH;EACA,MAAMiJ,MAAM;EAAA;EAAA,CAAAjK,cAAA,GAAAmH,CAAA,QAAG,IAAItG,YAAY,CAA+BwH,GAAG,IAAI;IAAA;IAAArI,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAkB,GAAG,CAAC6B,QAAQ,KAAK,UAAU;EAAV,CAAU,CAAC;EAEjG;EACA,MAAMC,WAAW;EAAA;EAAA,CAAAnK,cAAA,GAAAmH,CAAA,QAAGK,WAAW,CAAC4C,GAAG,CAAC,IAAIrI,WAAW,CAAC4G,UAAU,CAAC,CAAC;EAAC;EAAA3I,cAAA,GAAAmH,CAAA;EACjEO,QAAQ,CAACM,GAAG,CAAClG,YAAY,EAAEqI,WAAW,CAAC;EAAC;EAAAnK,cAAA,GAAAmH,CAAA;EACxCgD,WAAW,CAACE,gBAAgB,CAAC/J,OAAO,CAAC2I,IAAI,EAAEzB,WAAW,CAAC4C,GAAG,CAAC,IAAIpI,sBAAsB,CAAC2G,UAAU,CAAC,CAAC,CAAC;EAEnG;EACA,MAAM2B,kBAAkB;EAAA;EAAA,CAAAtK,cAAA,GAAAmH,CAAA,QAAG,IAAIrD,kBAAkB,CAACqG,WAAW,CAAC;EAAC;EAAAnK,cAAA,GAAAmH,CAAA;EAC/DO,QAAQ,CAACM,GAAG,CAACnE,mBAAmB,EAAEyG,kBAAkB,CAAC;EAErD;EACA,MAAMC,oBAAoB;EAAA;EAAA,CAAAvK,cAAA,GAAAmH,CAAA,QAAG,IAAIpG,oBAAoB,CAACkH,kBAAkB,CAACuC,uBAAuB,EAAEL,WAAW,EAAE,IAAInF,iBAAiB,EAAE,EAAE2D,UAAU,CAAC;EAAC;EAAA3I,cAAA,GAAAmH,CAAA;EACpJO,QAAQ,CAACM,GAAG,CAAClH,qBAAqB,EAAEyJ,oBAAoB,CAAC;EAEzD;EACA,MAAME,uBAAuB;EAAA;EAAA,CAAAzK,cAAA,GAAAmH,CAAA,QAAG,IAAIhC,6BAA6B,CAACmF,kBAAkB,EAAErC,kBAAkB,EAAEkC,WAAW,EAAExB,UAAU,CAAC;EAAC;EAAA3I,cAAA,GAAAmH,CAAA;EACnIO,QAAQ,CAACM,GAAG,CAACjD,wBAAwB,EAAE0F,uBAAuB,CAAC;EAAC;EAAAzK,cAAA,GAAAmH,CAAA;EAChEQ,YAAY,CAACS,eAAe,CAAC,kBAAkB,EAAE,IAAIzC,oCAAoC,CAAC8E,uBAAuB,EAAGpC,GAAiC,IAAK;IAAA;IAAArI,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAmB,iBAAiB,CAACD,GAAG,CAACE,eAAe,CAAC;EAAD,CAAC,CAAC,CAAC;EAElM;EAAA;EAAAvI,cAAA,GAAAmH,CAAA;EACAO,QAAQ,CAACM,GAAG,CAAClC,sBAAsB,EAAE,IAAI7D,cAAc,CAAC4D,qBAAqB,EAAEkC,SAAS,EAAE,IAAI,CAAC,CAAC;EAEhG;EACA,MAAM,IAAK2C,SAAS,EAAEC,KAAK,EAAEC,WAAW,CAAC;EAAA;EAAA,CAAA5K,cAAA,GAAAmH,CAAA,QAAG,MAAM0D,OAAO,CAACC,GAAG,CAAC,CAC7DP,oBAAoB,CAACQ,UAAU,EAAE,EACjCN,uBAAuB,CAACO,IAAI,EAAE,EAC9BxK,YAAY,CAACmI,UAAU,CAACU,KAAK,CAAC4B,IAAI,CAACtC,UAAU,CAAC,CAAC,EAC/ClI,eAAe,CAACkI,UAAU,CAACU,KAAK,CAAC4B,IAAI,CAACtC,UAAU,CAAC,CAAC,EAClDjI,cAAc,CAACiI,UAAU,CAACU,KAAK,CAAC4B,IAAI,CAACtC,UAAU,CAAC,CAAC,CACjD,CAAC;EAEF,MAAMuC,0BAA0B;EAAA;EAAA,CAAAlL,cAAA,GAAAmH,CAAA,QAAG,IAAIzC,0BAA0B,EAAE;EAAC;EAAA1E,cAAA,GAAAmH,CAAA;EACpEO,QAAQ,CAACM,GAAG,CAACrD,2BAA2B,EAAEuG,0BAA0B,CAAC;EAErE;EACA,MAAMC,cAAc;EAAA;EAAA,CAAAnL,cAAA,GAAAmH,CAAA,QAAG,IAAIjE,cAAc,CAAC,QAAQ,EAAEqH,oBAAoB,EAAEtC,kBAAkB,EAAEU,UAAU,CAAC;EAAC;EAAA3I,cAAA,GAAAmH,CAAA;EAC1GO,QAAQ,CAACM,GAAG,CAAChF,eAAe,EAAEmI,cAAc,CAAC;EAE7C,IAAIC,aAAa;EAAA;EAAA,CAAApL,cAAA,GAAAmH,CAAA,QAAuB3D,YAAY;EACpD,MAAM6H,UAAU;EAAA;EAAA,CAAArL,cAAA,GAAAmH,CAAA,QAAG7D,mBAAmB,CAACuE,cAAc,EAAE0C,oBAAoB,CAAC;EAAC;EAAAvK,cAAA,GAAAmH,CAAA;EAC7E,IAAI1D,iBAAiB,CAACoE,cAAc,EAAEI,kBAAkB,CAAC,EAAE;IAAA;IAAAjI,cAAA,GAAA6J,CAAA;IAAA7J,cAAA,GAAAmH,CAAA;IAC1D;IAAI;IAAA,CAAAnH,cAAA,GAAA6J,CAAA,WAACtG,aAAa,CAACsE,cAAc,EAAEI,kBAAkB,CAAC;IAAA;IAAA,CAAAjI,cAAA,GAAA6J,CAAA,UAAIhC,cAAc,CAACyD,QAAQ,EAAEC,OAAO,GAAE;MAAA;MAAAvL,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAC3FiE,aAAa,GAAG,IAAInG,qBAAqB,CAACkG,cAAc,EAAEE,UAAU,EAAEnE,WAAW,EAAE,IAAI,EAAEW,cAAc,CAACyD,QAAQ,CAACC,OAAO,CAAC;MAAC;MAAAvL,cAAA,GAAAmH,CAAA;MAC1HK,WAAW,CAAC4C,GAAG,CAAC/J,YAAY,CAAC,MAAM;QAAA;QAAAL,cAAA,GAAAyH,CAAA;QAAAzH,cAAA,GAAAmH,CAAA;QAAA,OAAAiE,aAAa,EAAEI,KAAK,EAAE;MAAF,CAAE,CAAC,CAAC,CAAC,CAAC;IAC9D,CAAC;IAAA;IAAA;MAAAxL,cAAA,GAAA6J,CAAA;IAAA;IAED,MAAM4B,MAAM;IAAA;IAAA,CAAAzL,cAAA,GAAAmH,CAAA,QAA4B;MACvCuE,SAAS,EAAE,CAACN,aAAa,EAAE,IAAIpF,oBAAoB,CAAC,EAAE,EAAE,IAAI,EAAEkC,aAAa,EAAED,kBAAkB,EAAEJ,cAAc,CAAC,CAAC;MACjH8D,gBAAgB,EAAExI,uBAAuB,CAAChD,OAAO,EAAE,EAAED,QAAQ,EAAE,EAAE0L,OAAO,CAACC,IAAI,EAAEhE,cAAc,CAACiE,MAAM,EAAEjE,cAAc,CAACkE,OAAO,GAAG,SAAS,EAAErB,SAAS,EAAEC,KAAK,EAAEC,WAAW,EAAES,UAAU,EAAExD,cAAc,CAACmE,IAAI,EAAE,aAAa,CAAC;MACxNC,QAAQ,EAAE5I,0BAA0B,CAAC4E,kBAAkB;KACvD;IACD,MAAMiE,wBAAwB;IAAA;IAAA,CAAAlM,cAAA,GAAAmH,CAAA,QAAGc,kBAAkB,CAACX,IAAI,CAAC,iBAAiB,CAAC;IAC3E,IAAI6E,sBAAsB;IAAA;IAAA,CAAAnM,cAAA,GAAAmH,CAAA;IAC1B;IAAA;IAAAnH,cAAA,GAAAmH,CAAA;IACA,IAAI+E,wBAAwB,KAAK,KAAK,EAAE;MAAA;MAAAlM,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MACvCgF,sBAAsB;IACvB,CAAC,MAAM;MAAA;MAAAnM,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAAA,IAAI+E,wBAAwB,KAAK,OAAO,EAAE;QAAA;QAAAlM,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QAChDgF,sBAAsB;MACvB,CAAC,MAAM;QAAA;QAAAnM,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QAAA,IAAI+E,wBAAwB,KAAK,OAAO,EAAE;UAAA;UAAAlM,cAAA,GAAA6J,CAAA;UAAA7J,cAAA,GAAAmH,CAAA;UAChDgF,sBAAsB;QACvB,CAAC,MAAM;UAAA;UAAAnM,cAAA,GAAA6J,CAAA;UAAA7J,cAAA,GAAAmH,CAAA;UAAA,IAAI+E,wBAAwB,KAAKnE,SAAS,EAAE;YAAA;YAAA/H,cAAA,GAAA6J,CAAA;YAAA7J,cAAA,GAAAmH,CAAA;YAClDgF,sBAAsB;UACvB,CAAC;UAAA;UAAA;YAAAnM,cAAA,GAAA6J,CAAA;UAAA;QAAD;MAAA;IAAA;IAAC;IAAA7J,cAAA,GAAAmH,CAAA;IACDO,QAAQ,CAACM,GAAG,CAAC9D,uBAAuB,EAAE,IAAIjC,cAAc,CAACmC,sBAAsB,EAAE,CAACqH,MAAM,EAAEU,sBAAsB,CAAC,CAAC,CAAC;EACpH,CAAC,MAAM;IAAA;IAAAnM,cAAA,GAAA6J,CAAA;IAAA7J,cAAA,GAAAmH,CAAA;IACNO,QAAQ,CAACM,GAAG,CAAC9D,uBAAuB,EAAEC,0BAA0B,CAAC;EAClE;EAAC;EAAAnE,cAAA,GAAAmH,CAAA;EAEDO,QAAQ,CAACM,GAAG,CAAC3B,gCAAgC,EAAE,IAAIC,kCAAkC,CAACqB,YAAY,EAAEE,cAAc,CAAC,CAAC;EAAC;EAAA7H,cAAA,GAAAmH,CAAA;EACrHO,QAAQ,CAACM,GAAG,CAAChB,0BAA0B,EAAE,IAAIC,4BAA4B,CAACU,YAAY,CAAC,CAAC;EAAC;EAAA3H,cAAA,GAAAmH,CAAA;EACzFO,QAAQ,CAACM,GAAG,CAACzG,wBAAwB,EAAE,IAAIU,cAAc,CAACZ,2CAA2C,CAAC,CAAC;EAEvG,MAAM+K,eAAe;EAAA;EAAA,CAAApM,cAAA,GAAAmH,CAAA,QAAGQ,YAAY,CAAC0E,UAAU,CAAC,UAAU,EAAEpC,MAAM,CAAC;EAAC;EAAAjK,cAAA,GAAAmH,CAAA;EACpEO,QAAQ,CAACM,GAAG,CAAC/G,gBAAgB,EAAE,IAAIC,4BAA4B,CAACkL,eAAe,EAAE,MAAM;IAAA;IAAApM,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAmB,iBAAiB,CAAC,UAAU,CAAC;EAAD,CAAC,CAAC,0DAA0D,CAAC,CAAC;EAAC;EAAAtI,cAAA,GAAAmH,CAAA;EAElLO,QAAQ,CAACM,GAAG,CAAClD,gCAAgC,EAAE,IAAI7C,cAAc,CAACmD,+BAA+B,CAAC,CAAC;EAAC;EAAApF,cAAA,GAAAmH,CAAA;EACpGO,QAAQ,CAACM,GAAG,CAACpD,yBAAyB,EAAE,IAAI3C,cAAc,CAAC4C,wBAAwB,CAAC,CAAC;EAAC;EAAA7E,cAAA,GAAAmH,CAAA;EACtFO,QAAQ,CAACM,GAAG,CAACvG,sCAAsC,EAAE,IAAIQ,cAAc,CAACT,qCAAqC,CAAC,CAAC;EAAC;EAAAxB,cAAA,GAAAmH,CAAA;EAChHO,QAAQ,CAACM,GAAG,CAAC1G,yBAAyB,EAAE,IAAIW,cAAc,CAAC8D,wBAAwB,CAAC,CAAC;EAAC;EAAA/F,cAAA,GAAAmH,CAAA;EACtFO,QAAQ,CAACM,GAAG,CAACnG,uCAAuC,EAAE,IAAII,cAAc,CAACL,0BAA0B,CAAC,CAAC;EAAC;EAAA5B,cAAA,GAAAmH,CAAA;EACtGO,QAAQ,CAACM,GAAG,CAAC/B,gCAAgC,EAAE,IAAIhE,cAAc,CAACmE,+BAA+B,CAAC,CAAC;EAEnG,MAAMkG,oBAAoB;EAAA;EAAA,CAAAtM,cAAA,GAAAmH,CAAA,QAA0B,IAAIjF,oBAAoB,CAACwF,QAAQ,CAAC;EAAC;EAAA1H,cAAA,GAAAmH,CAAA;EACvFO,QAAQ,CAACM,GAAG,CAAC5F,oBAAoB,EAAEkK,oBAAoB,CAACC,cAAc,CAAClK,yBAAyB,CAAC,CAAC;EAElG,MAAMmK,cAAc;EAAA;EAAA,CAAAxM,cAAA,GAAAmH,CAAA,QAAGmF,oBAAoB,CAACC,cAAc,CACzD3G,kBAAkB,EAClB;IACC6G,SAAS;IACTC,cAAc;IACdC,UAAU;IAAE;IAAA,CAAA3M,cAAA,GAAA6J,CAAA,UAAAU,oBAAoB,CAACqC,QAAQ,uGAAuD;IAAA;IAAA,CAAA5M,cAAA,GAAA6J,CAAA,UAAI,GAAG;GACvG,CACD;EACD,MAAMgD,cAAc;EAAA;EAAA,CAAA7M,cAAA,GAAAmH,CAAA,QAAGmF,oBAAoB,CAACC,cAAc,CAAC3I,cAAc,EAAE4I,cAAc,CAAC;EAAC;EAAAxM,cAAA,GAAAmH,CAAA;EAC3FO,QAAQ,CAACM,GAAG,CAACrE,WAAW,EAAEkJ,cAAc,CAAC;EAAC;EAAA7M,cAAA,GAAAmH,CAAA;EAE1CO,QAAQ,CAACM,GAAG,CAACzB,yBAAyB,EAAE,IAAItE,cAAc,CAAC8E,wBAAwB,CAAC,CAAC;EAAC;EAAA/G,cAAA,GAAAmH,CAAA;EACtFO,QAAQ,CAACM,GAAG,CAACpB,0BAA0B,EAAE,IAAI3E,cAAc,CAAC4E,yBAAyB,CAAC,CAAC;EAAC;EAAA7G,cAAA,GAAAmH,CAAA;EACxFO,QAAQ,CAACM,GAAG,CAACxB,kBAAkB,EAAE,IAAIvE,cAAc,CAAC0E,iBAAiB,CAAC,CAAC;EAAC;EAAA3G,cAAA,GAAAmH,CAAA;EACxEO,QAAQ,CAACM,GAAG,CAACvB,qBAAqB,EAAE,IAAIxE,cAAc,CAACyE,oBAAoB,CAAC,CAAC;EAAC;EAAA1G,cAAA,GAAAmH,CAAA;EAE9EmF,oBAAoB,CAACQ,cAAc,CAACC,QAAQ,IAAG;IAAA;IAAA/M,cAAA,GAAAyH,CAAA;IAC9C,MAAMuF,oBAAoB;IAAA;IAAA,CAAAhN,cAAA,GAAAmH,CAAA,QAAG4F,QAAQ,CAACE,GAAG,CAACxG,qBAAqB,CAAC;IAChE,MAAMyG,0BAA0B;IAAA;IAAA,CAAAlN,cAAA,GAAAmH,CAAA,QAAG4F,QAAQ,CAACE,GAAG,CAACpL,uCAAuC,CAAC;IACxF,MAAMsL,wBAAwB;IAAA;IAAA,CAAAnN,cAAA,GAAAmH,CAAA,QAAG4F,QAAQ,CAACE,GAAG,CAACrI,yBAAyB,CAAC;IACxE,MAAMwI,uBAAuB;IAAA;IAAA,CAAApN,cAAA,GAAAmH,CAAA,QAAG4F,QAAQ,CAACE,GAAG,CAAC1L,wBAAwB,CAAC;IACtE,MAAM8L,mBAAmB;IAAA;IAAA,CAAArN,cAAA,GAAAmH,CAAA,QAAG4F,QAAQ,CAACE,GAAG,CAAC7K,oBAAoB,CAAC;IAC9D,MAAMkL,iCAAiC;IAAA;IAAA,CAAAtN,cAAA,GAAAmH,CAAA,QAAG,IAAIpD,6BAA6B,CAACsD,eAAe,EAAEY,kBAAkB,EAAEwC,uBAAuB,EAAES,0BAA0B,CAAC;IAAC;IAAAlL,cAAA,GAAAmH,CAAA;IACtKQ,YAAY,CAACS,eAAe,CAAC,6BAA6B,EAAEkF,iCAAiC,CAAC;IAE9F,MAAMC,gBAAgB;IAAA;IAAA,CAAAvN,cAAA,GAAAmH,CAAA,QAAG,IAAIlD,sBAAsB,CAAC8I,QAAQ,CAACE,GAAG,CAAC/I,uBAAuB,CAAC,EAAEkH,aAAa,CAAC;IAAC;IAAApL,cAAA,GAAAmH,CAAA;IAC1GQ,YAAY,CAACS,eAAe,CAAC,WAAW,EAAEmF,gBAAgB,CAAC;IAAC;IAAAvN,cAAA,GAAAmH,CAAA;IAE5DQ,YAAY,CAACS,eAAe,CAAC5D,4BAA4B,EAAE,IAAIH,qBAAqB,CAAC4D,kBAAkB,EAAEU,UAAU,EAAEkE,cAAc,EAAEhF,cAAc,EAAEqF,0BAA0B,EAAE3C,oBAAoB,CAAC,CAAC;IAEvM,MAAMiD,uBAAuB;IAAA;IAAA,CAAAxN,cAAA,GAAAmH,CAAA,QAAG,IAAI1B,8BAA8B,CAAC6G,oBAAoB,CAACC,cAAc,CAAC7K,sBAAsB,EAAEiH,UAAU,CAAC,EAAEV,kBAAkB,EAAEwC,uBAAuB,EAAE0C,wBAAwB,EAAExE,UAAU,EAAEyE,uBAAuB,EAAEC,mBAAmB,EAAEH,0BAA0B,CAAC;IAAC;IAAAlN,cAAA,GAAAmH,CAAA;IACzSQ,YAAY,CAACS,eAAe,CAAC1C,kCAAkC,EAAE,IAAIF,8BAA8B,CAACgI,uBAAuB,EAAGnF,GAAiC,IAAK;MAAA;MAAArI,cAAA,GAAAyH,CAAA;MAAAzH,cAAA,GAAAmH,CAAA;MAAA,OAAAmB,iBAAiB,CAACD,GAAG,CAACE,eAAe,CAAC;IAAD,CAAC,CAAC,CAAC;IAAC;IAAAvI,cAAA,GAAAmH,CAAA;IAE7MQ,YAAY,CAACS,eAAe,CAAClC,mCAAmC,EAAEoG,oBAAoB,CAACC,cAAc,CAACpG,+BAA+B,EAAGkC,GAAiC,IAAK;MAAA;MAAArI,cAAA,GAAAyH,CAAA;MAAAzH,cAAA,GAAAmH,CAAA;MAAA,OAAAmB,iBAAiB,CAACD,GAAG,CAACE,eAAe,CAAC;IAAD,CAAC,CAAC,CAAC;IAEtN,MAAMkF,uBAAuB;IAAA;IAAA,CAAAzN,cAAA,GAAAmH,CAAA,SAAGK,WAAW,CAAC4C,GAAG,CAAC,IAAIpG,oCAAoC,CAAC2E,UAAU,EAAEV,kBAAkB,EAAEsC,oBAAoB,CAAC,CAAC;IAAC;IAAAvK,cAAA,GAAAmH,CAAA;IAChJQ,YAAY,CAACS,eAAe,CAAC3D,+BAA+B,EAAEgJ,uBAAuB,CAAC;IAAC;IAAAzN,cAAA,GAAAmH,CAAA;IAEvFQ,YAAY,CAACS,eAAe,CAAC,SAAS,EAAE,IAAInF,cAAc,CAAC8J,QAAQ,CAACE,GAAG,CAACjK,eAAe,CAAC,CAAC,CAAC;IAE1F,MAAM0K,OAAO;IAAA;IAAA,CAAA1N,cAAA,GAAAmH,CAAA,SAAG,IAAIxF,0BAA0B,CAACuL,0BAA0B,EAAG7E,GAAiC,IAAK;MAAA;MAAArI,cAAA,GAAAyH,CAAA;MAAAzH,cAAA,GAAAmH,CAAA;MAAA,OAAAmB,iBAAiB,CAACD,GAAG,CAACE,eAAe,CAAC;IAAD,CAAC,CAAC;IAAC;IAAAvI,cAAA,GAAAmH,CAAA;IAC1JQ,YAAY,CAACS,eAAe,CAAC,YAAY,EAAEsF,OAAO,CAAC;IAAC;IAAA1N,cAAA,GAAAmH,CAAA;IAEpDQ,YAAY,CAACS,eAAe,CAAC,eAAe,EAAE,IAAItB,oBAAoB,CAACkG,oBAAoB,EAAG3E,GAAiC,IAAK;MAAA;MAAArI,cAAA,GAAAyH,CAAA;MAAAzH,cAAA,GAAAmH,CAAA;MAAA,OAAAmB,iBAAiB,CAACD,GAAG,CAACE,eAAe,CAAC;IAAD,CAAC,CAAC,CAAC;IAE5K;IAAA;IAAAvI,cAAA,GAAAmH,CAAA;IACAqG,uBAAuB,CAACG,mBAAmB,EAAE,CAACxE,IAAI,CAAC,MAAM;MAAA;MAAAnJ,cAAA,GAAAyH,CAAA;MAAAzH,cAAA,GAAAmH,CAAA;MAAA,OAAA+F,0BAA0B,CAACU,OAAO,EAAE;IAAF,CAAE,CAAC;IAAC;IAAA5N,cAAA,GAAAmH,CAAA;IAE/FK,WAAW,CAAC4C,GAAG,CAAC,IAAI1G,cAAc,CAACqJ,QAAQ,CAACE,GAAG,CAAC7J,iBAAiB,CAAC,CAAC,CAAC;IAAC;IAAApD,cAAA,GAAAmH,CAAA;IAErE,OAAO;MACN0G,gBAAgB,EAAEd,QAAQ,CAACE,GAAG,CAAC7J,iBAAiB;KAChD;EACF,CAAC,CAAC;EAAC;EAAApD,cAAA,GAAAmH,CAAA;EAEH,OAAO;IAAEQ,YAAY;IAAE2E;EAAoB,CAAE;AAC9C;AAEA,MAAMwB,oBAAoB;AAAA;AAAA,CAAA9N,cAAA,GAAAmH,CAAA,SAAmD4G,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;AAEhG,SAAS1F,iBAAiBA,CAACC,eAAuB;EAAA;EAAAvI,cAAA,GAAAyH,CAAA;EAAAzH,cAAA,GAAAmH,CAAA;EACjD,IAAI,CAAC2G,oBAAoB,CAACvF,eAAe,CAAC,EAAE;IAAA;IAAAvI,cAAA,GAAA6J,CAAA;IAAA7J,cAAA,GAAAmH,CAAA;IAC3C2G,oBAAoB,CAACvF,eAAe,CAAC,GAAGjE,oBAAoB,CAACiE,eAAe,CAAC;EAC9E,CAAC;EAAA;EAAA;IAAAvI,cAAA,GAAA6J,CAAA;EAAA;EAAA7J,cAAA,GAAAmH,CAAA;EACD,OAAO2G,oBAAoB,CAACvF,eAAe,CAAC;AAC7C;AAEA,OAAM,MAAOX,YAAgC,SAAQhH,SAAmB;EAE/DqN,oBAAoB;EAE5BC,YAAA;IAAA;IAAAlO,cAAA,GAAAyH,CAAA;IACC,MAAM0G,OAAO;IAAA;IAAA,CAAAnO,cAAA,GAAAmH,CAAA,SAAG,IAAI/G,OAAO,EAAyB;IAAC;IAAAJ,cAAA,GAAAmH,CAAA;IACrD,KAAK,CAACgH,OAAO,CAACC,KAAK,CAAC;IAAC;IAAApO,cAAA,GAAAmH,CAAA;IACrB,IAAI,CAAC8G,oBAAoB,GAAGE,OAAO;EACpC;EAEOE,gBAAgBA,CAACC,QAAiC,EAAEC,qBAAkC;IAAA;IAAAvO,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAC5F,IAAI,CAAC8G,oBAAoB,CAACO,IAAI,CAAC;MAAEF,QAAQ;MAAEC;IAAqB,CAAE,CAAC;EACpE;;AAGD,MAAM3F,YAAa,SAAQtG,cAAc;EAChCmM,SAAS;EAEjBP,YAAY3E,QAAA;EAAA;EAAA,CAAAvJ,cAAA,GAAA6J,CAAA,WAAqBtH,iBAAiB;IAAA;IAAAvC,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IACjD,KAAK,EAAE;IAAC;IAAAnH,cAAA,GAAAmH,CAAA;IACR,IAAI,CAACuH,QAAQ,CAACnF,QAAQ,CAAC;IAAC;IAAAvJ,cAAA,GAAAmH,CAAA;IACxB,IAAI,CAACsH,SAAS,GAAGE,OAAO,CAAC/C,OAAO,CAACgD,MAAM,CAACC,KAAK,CAAC;EAC/C;EAEApF,KAAKA,CAACqF,OAAe,EAAE,GAAGxH,IAAe;IAAA;IAAAtH,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IACxC,IAAI,IAAI,CAAC4H,MAAM,CAACnM,QAAQ,CAACoM,KAAK,CAAC,EAAE;MAAA;MAAAhP,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAChC,IAAI,IAAI,CAACsH,SAAS,EAAE;QAAA;QAAAzO,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACnB8H,OAAO,CAACtM,GAAG,CAAC,YAAYuM,GAAG,EAAE,UAAU,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC3D,CAAC,MAAM;QAAA;QAAAtH,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACN8H,OAAO,CAACtM,GAAG,CAAC,IAAIuM,GAAG,EAAE,GAAG,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC5C;IACD,CAAC;IAAA;IAAA;MAAAtH,cAAA,GAAA6J,CAAA;IAAA;EACF;EAEAsF,KAAKA,CAACL,OAAe,EAAE,GAAGxH,IAAe;IAAA;IAAAtH,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IACxC,IAAI,IAAI,CAAC4H,MAAM,CAACnM,QAAQ,CAACwM,KAAK,CAAC,EAAE;MAAA;MAAApP,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAChC,IAAI,IAAI,CAACsH,SAAS,EAAE;QAAA;QAAAzO,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACnB8H,OAAO,CAACtM,GAAG,CAAC,YAAYuM,GAAG,EAAE,UAAU,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC3D,CAAC,MAAM;QAAA;QAAAtH,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACN8H,OAAO,CAACtM,GAAG,CAAC,IAAIuM,GAAG,EAAE,GAAG,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC5C;IACD,CAAC;IAAA;IAAA;MAAAtH,cAAA,GAAA6J,CAAA;IAAA;EACF;EAEAC,IAAIA,CAACgF,OAAe,EAAE,GAAGxH,IAAe;IAAA;IAAAtH,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IACvC,IAAI,IAAI,CAAC4H,MAAM,CAACnM,QAAQ,CAACyM,IAAI,CAAC,EAAE;MAAA;MAAArP,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAC/B,IAAI,IAAI,CAACsH,SAAS,EAAE;QAAA;QAAAzO,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACnB8H,OAAO,CAACtM,GAAG,CAAC,YAAYuM,GAAG,EAAE,UAAU,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC3D,CAAC,MAAM;QAAA;QAAAtH,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACN8H,OAAO,CAACtM,GAAG,CAAC,IAAIuM,GAAG,EAAE,GAAG,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC5C;IACD,CAAC;IAAA;IAAA;MAAAtH,cAAA,GAAA6J,CAAA;IAAA;EACF;EAEAyF,IAAIA,CAACR,OAAuB,EAAE,GAAGxH,IAAe;IAAA;IAAAtH,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAC/C,IAAI,IAAI,CAAC4H,MAAM,CAACnM,QAAQ,CAAC2M,OAAO,CAAC,EAAE;MAAA;MAAAvP,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAClC,IAAI,IAAI,CAACsH,SAAS,EAAE;QAAA;QAAAzO,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACnB8H,OAAO,CAACK,IAAI,CAAC,YAAYJ,GAAG,EAAE,UAAU,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC5D,CAAC,MAAM;QAAA;QAAAtH,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACN8H,OAAO,CAACK,IAAI,CAAC,IAAIJ,GAAG,EAAE,GAAG,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC7C;IACD,CAAC;IAAA;IAAA;MAAAtH,cAAA,GAAA6J,CAAA;IAAA;EACF;EAEAR,KAAKA,CAACyF,OAAe,EAAE,GAAGxH,IAAe;IAAA;IAAAtH,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IACxC,IAAI,IAAI,CAAC4H,MAAM,CAACnM,QAAQ,CAAC4M,KAAK,CAAC,EAAE;MAAA;MAAAxP,cAAA,GAAA6J,CAAA;MAAA7J,cAAA,GAAAmH,CAAA;MAChC,IAAI,IAAI,CAACsH,SAAS,EAAE;QAAA;QAAAzO,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACnB8H,OAAO,CAAC5F,KAAK,CAAC,YAAY6F,GAAG,EAAE,UAAU,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC7D,CAAC,MAAM;QAAA;QAAAtH,cAAA,GAAA6J,CAAA;QAAA7J,cAAA,GAAAmH,CAAA;QACN8H,OAAO,CAAC5F,KAAK,CAAC,IAAI6F,GAAG,EAAE,GAAG,EAAEJ,OAAO,EAAE,GAAGxH,IAAI,CAAC;MAC9C;IACD,CAAC;IAAA;IAAA;MAAAtH,cAAA,GAAA6J,CAAA;IAAA;EACF;EAEA2B,KAAKA,CAAA;IAAA;IAAAxL,cAAA,GAAAyH,CAAA;EAEL,CAAC,CADA;;AAIF,SAASyH,GAAGA,CAAA;EAAA;EAAAlP,cAAA,GAAAyH,CAAA;EACX,MAAMuE,IAAI;EAAA;EAAA,CAAAhM,cAAA,GAAAmH,CAAA,SAAG,IAAIsI,IAAI,EAAE;EAAC;EAAAzP,cAAA,GAAAmH,CAAA;EACxB,OAAO,GAAGuI,SAAS,CAAC1D,IAAI,CAAC2D,QAAQ,EAAE,CAAC,IAAID,SAAS,CAAC1D,IAAI,CAAC4D,UAAU,EAAE,CAAC,IAAIF,SAAS,CAAC1D,IAAI,CAAC6D,UAAU,EAAE,CAAC,EAAE;AACvG;AAEA,SAASH,SAASA,CAACI,CAAS;EAAA;EAAA9P,cAAA,GAAAyH,CAAA;EAAAzH,cAAA,GAAAmH,CAAA;EAC3B,IAAI2I,CAAC,GAAG,EAAE,EAAE;IAAA;IAAA9P,cAAA,GAAA6J,CAAA;IAAA7J,cAAA,GAAAmH,CAAA;IACX,OAAO,IAAI2I,CAAC,EAAE;EACf,CAAC;EAAA;EAAA;IAAA9P,cAAA,GAAA6J,CAAA;EAAA;EAAA7J,cAAA,GAAAmH,CAAA;EACD,OAAO4I,MAAM,CAACD,CAAC,CAAC;AACjB;AAEA;;;AAGA,eAAehH,gBAAgBA,CAACkH,QAAgB;EAAA;EAAAhQ,cAAA,GAAAyH,CAAA;EAC/C,MAAMwI,UAAU;EAAA;EAAA,CAAAjQ,cAAA,GAAAmH,CAAA,SAAG5G,IAAI,CAAC2P,QAAQ,CAACF,QAAQ,CAAC;EAC1C,MAAMG,QAAQ;EAAA;EAAA,CAAAnQ,cAAA,GAAAmH,CAAA,SAAG5G,IAAI,CAAC6P,OAAO,CAACJ,QAAQ,CAAC;EACvC,MAAMK,QAAQ;EAAA;EAAA,CAAArQ,cAAA,GAAAmH,CAAA,SAAG,MAAMxG,QAAQ,CAAC2P,OAAO,CAACH,QAAQ,CAAC;EACjD,MAAMI,WAAW;EAAA;EAAA,CAAAvQ,cAAA,GAAAmH,CAAA,SAAGkJ,QAAQ,CAACG,MAAM,CAAC9H,IAAI,IAAI;IAAA;IAAA1I,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,sBAAe,CAACsJ,IAAI,CAAC/H,IAAI,CAAC;EAAD,CAAC,CAAC;EACvE,MAAMgI,WAAW;EAAA;EAAA,CAAA1Q,cAAA,GAAAmH,CAAA,SAAGoJ,WAAW,CAACI,IAAI,EAAE,CAACH,MAAM,CAAEI,CAAC,IAAK;IAAA;IAAA5Q,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAyJ,CAAC,KAAKX,UAAU;EAAV,CAAU,CAAC;EACtE,MAAMY,QAAQ;EAAA;EAAA,CAAA7Q,cAAA,GAAAmH,CAAA,SAAGuJ,WAAW,CAACI,KAAK,CAAC,CAAC,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEN,WAAW,CAACO,MAAM,GAAG,CAAC,CAAC,CAAC;EAAC;EAAAjR,cAAA,GAAAmH,CAAA;EAE3E,MAAM0D,OAAO,CAACC,GAAG,CAAC+F,QAAQ,CAACK,GAAG,CAACxI,IAAI,IAAI;IAAA;IAAA1I,cAAA,GAAAyH,CAAA;IAAAzH,cAAA,GAAAmH,CAAA;IAAA,OAAAxG,QAAQ,CAACwQ,EAAE,CAAC5Q,IAAI,CAACwJ,IAAI,CAACoG,QAAQ,EAAEzH,IAAI,CAAC,CAAC;EAAD,CAAC,CAAC,CAAC;AAChF","ignoreList":[]}