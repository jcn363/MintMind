{"version":3,"names":["cov_1ro7urtt4h","actualCoverage","assert","Event","Client","TestServiceClient","FileAccess","createClient","f","s","asFileUri","fsPath","serverName","env","MINTMIND_ESM_ENTRYPOINT","verbose","suite","slow","timeout","client","channel","service","setup","getChannel","teardown","dispose","test","result","pong","strictEqual","incoming","outgoing","event","toPromise","once","onMarco","promise","marco","promiseResult","eventResult","Promise","all","answer","count","disposable","answer_1","answer_2"],"sources":["/home/user/Desktop/MintMind/src/vs/base/parts/ipc/test/node/ipc.cp.integrationTest.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../common/event.js';\nimport { IChannel } from '../../common/ipc.js';\nimport { Client } from '../../node/ipc.cp.js';\nimport { ITestService, TestServiceClient } from './testService.js';\nimport { FileAccess } from '../../../../common/network.js';\n\nfunction createClient(): Client {\n\treturn new Client(FileAccess.asFileUri('bootstrap-fork').fsPath, {\n\t\tserverName: 'TestServer',\n\t\tenv: { MINTMIND_ESM_ENTRYPOINT: 'vs/base/parts/ipc/test/node/testApp', verbose: true }\n\t});\n}\n\nsuite('IPC, Child Process', function () {\n\tthis.slow(2000);\n\tthis.timeout(10000);\n\n\tlet client: Client;\n\tlet channel: IChannel;\n\tlet service: ITestService;\n\n\tsetup(() => {\n\t\tclient = createClient();\n\t\tchannel = client.getChannel('test');\n\t\tservice = new TestServiceClient(channel);\n\t});\n\n\tteardown(() => {\n\t\tclient.dispose();\n\t});\n\n\ttest('createChannel', async () => {\n\t\tconst result = await service.pong('ping');\n\t\tassert.strictEqual(result.incoming, 'ping');\n\t\tassert.strictEqual(result.outgoing, 'pong');\n\t});\n\n\ttest('events', async () => {\n\t\tconst event = Event.toPromise(Event.once(service.onMarco));\n\t\tconst promise = service.marco();\n\n\t\tconst [promiseResult, eventResult] = await Promise.all([promise, event]);\n\n\t\tassert.strictEqual(promiseResult, 'polo');\n\t\tassert.strictEqual(eventResult.answer, 'polo');\n\t});\n\n\ttest('event dispose', async () => {\n\t\tlet count = 0;\n\t\tconst disposable = service.onMarco(() => count++);\n\n\t\tconst answer = await service.marco();\n\t\tassert.strictEqual(answer, 'polo');\n\t\tassert.strictEqual(count, 1);\n\n\t\tconst answer_1 = await service.marco();\n\t\tassert.strictEqual(answer_1, 'polo');\n\t\tassert.strictEqual(count, 2);\n\t\tdisposable.dispose();\n\n\t\tconst answer_2 = await service.marco();\n\t\tassert.strictEqual(answer_2, 'polo');\n\t\tassert.strictEqual(count, 2);\n\t});\n});\n"],"mappings":"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","ignoreList":[]}