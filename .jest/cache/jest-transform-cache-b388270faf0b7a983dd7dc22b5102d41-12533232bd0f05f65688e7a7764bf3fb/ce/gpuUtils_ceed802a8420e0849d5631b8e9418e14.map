{"version":3,"names":["cov_1cgxg74fpf","actualCoverage","BugIndicatingError","toDisposable","quadVertices","s","Float32Array","ensureNonNullable","value","f","b","Error","observeDevicePixelDimensions","element","parentWindow","callback","observer","ResizeObserver","entries","entry","find","target","disconnect","undefined","width","devicePixelContentBoxSize","inlineSize","height","blockSize","observe","box"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/browser/gpu/gpuUtils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BugIndicatingError } from '../../../base/common/errors.js';\nimport { toDisposable, type IDisposable } from '../../../base/common/lifecycle.js';\n\nexport const quadVertices = new Float32Array([\n\t1, 0,\n\t1, 1,\n\t0, 1,\n\t0, 0,\n\t0, 1,\n\t1, 0,\n]);\n\nexport function ensureNonNullable<T>(value: T | null): T {\n\tif (!value) {\n\t\tthrow new Error(`Value \"${value}\" cannot be null`);\n\t}\n\treturn value;\n}\n\n// TODO: Move capabilities into ElementSizeObserver?\nexport function observeDevicePixelDimensions(element: HTMLElement, parentWindow: Window & typeof globalThis, callback: (deviceWidth: number, deviceHeight: number) => void): IDisposable {\n\t// Observe any resizes to the element and extract the actual pixel size of the element if the\n\t// devicePixelContentBoxSize API is supported. This allows correcting rounding errors when\n\t// converting between CSS pixels and device pixels which causes blurry rendering when device\n\t// pixel ratio is not a round number.\n\tlet observer: ResizeObserver | undefined = new parentWindow.ResizeObserver((entries) => {\n\t\tconst entry = entries.find((entry) => entry.target === element);\n\t\tif (!entry) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Disconnect if devicePixelContentBoxSize isn't supported by the browser\n\t\tif (!('devicePixelContentBoxSize' in entry)) {\n\t\t\tobserver?.disconnect();\n\t\t\tobserver = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\t// Fire the callback, ignore events where the dimensions are 0x0 as the canvas is likely hidden\n\t\tconst width = entry.devicePixelContentBoxSize[0].inlineSize;\n\t\tconst height = entry.devicePixelContentBoxSize[0].blockSize;\n\t\tif (width > 0 && height > 0) {\n\t\t\tcallback(width, height);\n\t\t}\n\t});\n\ttry {\n\t\t// eslint-disable-next-line local/code-no-any-casts, @typescript-eslint/no-explicit-any\n\t\tobserver.observe(element, { box: ['device-pixel-content-box'] } as any);\n\t} catch {\n\t\tobserver.disconnect();\n\t\tobserver = undefined;\n\t\tthrow new BugIndicatingError('Could not observe device pixel dimensions');\n\t}\n\treturn toDisposable(() => observer?.disconnect());\n}\n"],"mappings":"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","ignoreList":[]}