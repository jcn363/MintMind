{"version":3,"names":["cov_17vtjxaft6","actualCoverage","CancellationToken","illegalArgument","onUnexpectedExternalError","IModelService","ILanguageFeaturesService","DefaultDocumentColorProvider","IConfigurationService","getColors","colorProviderRegistry","model","token","defaultColorDecoratorsEnablement","b","f","s","_findColorData","ColorDataCollector","getColorPresentations","colorInfo","provider","Promise","resolve","provideColorPresentations","constructor","compute","colors","documentColors","provideDocumentColors","Array","isArray","push","ExtColorDataCollector","range","color","red","green","blue","alpha","ColorPresentationsCollector","_token","None","collector","validDocumentColorProviderFound","defaultProvider","colorData","documentColorProviders","ordered","i","length","e","_setupColorCommand","accessor","resource","colorProvider","get","getModel","getValue"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/colorPicker/browser/color.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../common/core/range.js';\nimport { ITextModel } from '../../../common/model.js';\nimport { DocumentColorProvider, IColorInformation, IColorPresentation } from '../../../common/languages.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { LanguageFeatureRegistry } from '../../../common/languageFeatureRegistry.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ServicesAccessor } from '../../../browser/editorExtensions.js';\n\nexport async function getColors(colorProviderRegistry: LanguageFeatureRegistry<DocumentColorProvider>, model: ITextModel, token: CancellationToken, defaultColorDecoratorsEnablement: 'auto' | 'always' | 'never' = 'auto'): Promise<IColorData[]> {\n\treturn _findColorData<IColorData>(new ColorDataCollector(), colorProviderRegistry, model, token, defaultColorDecoratorsEnablement);\n}\n\nexport function getColorPresentations(model: ITextModel, colorInfo: IColorInformation, provider: DocumentColorProvider, token: CancellationToken): Promise<IColorPresentation[] | null | undefined> {\n\treturn Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\n\nexport interface IColorData {\n\tcolorInfo: IColorInformation;\n\tprovider: DocumentColorProvider;\n}\n\nexport interface IExtColorData { range: IRange; color: [number, number, number, number] }\n\ninterface DataCollector<T> {\n\tcompute(provider: DocumentColorProvider, model: ITextModel, token: CancellationToken, result: T[]): Promise<boolean>;\n}\n\nclass ColorDataCollector implements DataCollector<IColorData> {\n\tconstructor() { }\n\tasync compute(provider: DocumentColorProvider, model: ITextModel, token: CancellationToken, colors: IColorData[]): Promise<boolean> {\n\t\tconst documentColors = await provider.provideDocumentColors(model, token);\n\t\tif (Array.isArray(documentColors)) {\n\t\t\tfor (const colorInfo of documentColors) {\n\t\t\t\tcolors.push({ colorInfo, provider });\n\t\t\t}\n\t\t}\n\t\treturn Array.isArray(documentColors);\n\t}\n}\n\nexport class ExtColorDataCollector implements DataCollector<IExtColorData> {\n\tconstructor() { }\n\tasync compute(provider: DocumentColorProvider, model: ITextModel, token: CancellationToken, colors: IExtColorData[]): Promise<boolean> {\n\t\tconst documentColors = await provider.provideDocumentColors(model, token);\n\t\tif (Array.isArray(documentColors)) {\n\t\t\tfor (const colorInfo of documentColors) {\n\t\t\t\tcolors.push({ range: colorInfo.range, color: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha] });\n\t\t\t}\n\t\t}\n\t\treturn Array.isArray(documentColors);\n\t}\n\n}\n\nexport class ColorPresentationsCollector implements DataCollector<IColorPresentation> {\n\tconstructor(private colorInfo: IColorInformation) { }\n\tasync compute(provider: DocumentColorProvider, model: ITextModel, _token: CancellationToken, colors: IColorPresentation[]): Promise<boolean> {\n\t\tconst documentColors = await provider.provideColorPresentations(model, this.colorInfo, CancellationToken.None);\n\t\tif (Array.isArray(documentColors)) {\n\t\t\tcolors.push(...documentColors);\n\t\t}\n\t\treturn Array.isArray(documentColors);\n\t}\n}\n\nexport async function _findColorData<T extends IColorPresentation | IExtColorData | IColorData>(collector: DataCollector<T>, colorProviderRegistry: LanguageFeatureRegistry<DocumentColorProvider>, model: ITextModel, token: CancellationToken, defaultColorDecoratorsEnablement: 'auto' | 'always' | 'never'): Promise<T[]> {\n\tlet validDocumentColorProviderFound = false;\n\tlet defaultProvider: DefaultDocumentColorProvider | undefined;\n\tconst colorData: T[] = [];\n\tconst documentColorProviders = colorProviderRegistry.ordered(model);\n\tfor (let i = documentColorProviders.length - 1; i >= 0; i--) {\n\t\tconst provider = documentColorProviders[i];\n\t\tif (defaultColorDecoratorsEnablement !== 'always' && provider instanceof DefaultDocumentColorProvider) {\n\t\t\tdefaultProvider = provider;\n\t\t} else {\n\t\t\ttry {\n\t\t\t\tif (await collector.compute(provider, model, token, colorData)) {\n\t\t\t\t\tvalidDocumentColorProviderFound = true;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedExternalError(e);\n\t\t\t}\n\t\t}\n\t}\n\tif (validDocumentColorProviderFound) {\n\t\treturn colorData;\n\t}\n\tif (defaultProvider && defaultColorDecoratorsEnablement !== 'never') {\n\t\tawait collector.compute(defaultProvider, model, token, colorData);\n\t\treturn colorData;\n\t}\n\treturn [];\n}\n\nexport function _setupColorCommand(accessor: ServicesAccessor, resource: URI): { model: ITextModel; colorProviderRegistry: LanguageFeatureRegistry<DocumentColorProvider>; defaultColorDecoratorsEnablement: 'auto' | 'always' | 'never' } {\n\tconst { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n\tconst model = accessor.get(IModelService).getModel(resource);\n\tif (!model) {\n\t\tthrow illegalArgument();\n\t}\n\tconst defaultColorDecoratorsEnablement = accessor.get(IConfigurationService).getValue<'auto' | 'always' | 'never'>('editor.defaultColorDecorators', { resource });\n\treturn { model, colorProviderRegistry, defaultColorDecoratorsEnablement };\n}\n\n"],"mappings":"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","ignoreList":[]}