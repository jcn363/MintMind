{"version":3,"names":["cov_1zluswnajo","actualCoverage","raceCancellation","CancellationToken","CancellationError","Lazy","toDisposable","revive","generateUuid","isToolInvocationContext","ExtensionEditToolId","InternalEditToolId","InternalFetchWebPageToolId","SearchExtensionsToolId","checkProposedApiEnabled","isProposedApiEnabled","SerializableObjectWithBuffers","MainContext","typeConvert","Tool","_data","_apiObject","s","f","that","Object","freeze","name","id","description","modelDescription","inputSchema","tags","b","source","undefined","_apiObjectWithChatParticipantAdditions","LanguageModelToolSource","to","constructor","data","update","newData","apiObject","value","apiObjectWithChatParticipantAdditions","ExtHostLanguageModelTools","_languageModels","_registeredTools","Map","_proxy","_tokenCountFuncs","_allTools","mainContext","getProxy","MainThreadLanguageModelTools","$getTools","then","tools","tool","set","$countTokensForInvocation","callId","input","token","fn","get","Error","invokeTool","extension","toolId","options","tokenizationOptions","countTokens","toolInvocationToken","result","$invokeTool","parameters","tokenBudget","context","chatRequestId","chatInteractionId","fromSubAgent","dto","LanguageModelToolResult","delete","$onDidChangeTools","oldTools","Set","keys","existing","getTools","hasParticipantAdditions","Array","from","values","map","filter","item","chatSessionId","sessionId","modelId","model","getModel","None","progress","lastProgress","report","increment","$acceptToolProgress","message","MarkdownString","fromStrict","extensionResult","Promise","resolve","invoke","getLanguageModelByIdentifier","getDefaultLanguageModel","$prepareToolInvocation","prepareInvocation","pastTenseMessage","presentation","confirmationMessages","title","invocationMessage","registerTool","$registerTool","$unregisterTool"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostLanguageModelTools.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { raceCancellation } from '../../../base/common/async.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { CancellationError } from '../../../base/common/errors.js';\nimport { Lazy } from '../../../base/common/lazy.js';\nimport { IDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { generateUuid } from '../../../base/common/uuid.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { IPreparedToolInvocation, isToolInvocationContext, IToolInvocation, IToolInvocationContext, IToolInvocationPreparationContext, IToolResult, ToolInvocationPresentation } from '../../contrib/chat/common/languageModelToolsService.js';\nimport { ExtensionEditToolId, InternalEditToolId } from '../../contrib/chat/common/tools/editFileTool.js';\nimport { InternalFetchWebPageToolId } from '../../contrib/chat/common/tools/tools.js';\nimport { SearchExtensionsToolId } from '../../contrib/extensions/common/searchExtensionsTool.js';\nimport { checkProposedApiEnabled, isProposedApiEnabled } from '../../services/extensions/common/extensions.js';\nimport { Dto, SerializableObjectWithBuffers } from '../../services/extensions/common/proxyIdentifier.js';\nimport { ExtHostLanguageModelToolsShape, IMainContext, IToolDataDto, MainContext, MainThreadLanguageModelToolsShape } from './extHost.protocol.js';\nimport { ExtHostLanguageModels } from './extHostLanguageModels.js';\nimport * as typeConvert from './extHostTypeConverters.js';\n\nclass Tool {\n\n\tprivate _data: IToolDataDto;\n\tprivate _apiObject = new Lazy<vscode.LanguageModelToolInformation>(() => {\n\t\tconst that = this;\n\t\treturn Object.freeze({\n\t\t\tget name() { return that._data.id; },\n\t\t\tget description() { return that._data.modelDescription; },\n\t\t\tget inputSchema() { return that._data.inputSchema; },\n\t\t\tget tags() { return that._data.tags ?? []; },\n\t\t\tget source() { return undefined; }\n\t\t});\n\t});\n\n\tprivate _apiObjectWithChatParticipantAdditions = new Lazy<vscode.LanguageModelToolInformation>(() => {\n\t\tconst that = this;\n\t\tconst source = typeConvert.LanguageModelToolSource.to(that._data.source);\n\n\t\treturn Object.freeze({\n\t\t\tget name() { return that._data.id; },\n\t\t\tget description() { return that._data.modelDescription; },\n\t\t\tget inputSchema() { return that._data.inputSchema; },\n\t\t\tget tags() { return that._data.tags ?? []; },\n\t\t\tget source() { return source; }\n\t\t});\n\t});\n\n\tconstructor(data: IToolDataDto) {\n\t\tthis._data = data;\n\t}\n\n\tupdate(newData: IToolDataDto): void {\n\t\tthis._data = newData;\n\t}\n\n\tget data(): IToolDataDto {\n\t\treturn this._data;\n\t}\n\n\tget apiObject(): vscode.LanguageModelToolInformation {\n\t\treturn this._apiObject.value;\n\t}\n\n\tget apiObjectWithChatParticipantAdditions() {\n\t\treturn this._apiObjectWithChatParticipantAdditions.value;\n\t}\n}\n\nexport class ExtHostLanguageModelTools implements ExtHostLanguageModelToolsShape {\n\t/** A map of tools that were registered in this EH */\n\tprivate readonly _registeredTools = new Map<string, { extension: IExtensionDescription; tool: vscode.LanguageModelTool<Object> }>();\n\tprivate readonly _proxy: MainThreadLanguageModelToolsShape;\n\tprivate readonly _tokenCountFuncs = new Map</* call ID */string, (text: string, token?: vscode.CancellationToken) => Thenable<number>>();\n\n\t/** A map of all known tools, from other EHs or registered in vscode core */\n\tprivate readonly _allTools = new Map<string, Tool>();\n\n\tconstructor(\n\t\tmainContext: IMainContext,\n\t\tprivate readonly _languageModels: ExtHostLanguageModels,\n\t) {\n\t\tthis._proxy = mainContext.getProxy(MainContext.MainThreadLanguageModelTools);\n\n\t\tthis._proxy.$getTools().then(tools => {\n\t\t\tfor (const tool of tools) {\n\t\t\t\tthis._allTools.set(tool.id, new Tool(revive(tool)));\n\t\t\t}\n\t\t});\n\t}\n\n\tasync $countTokensForInvocation(callId: string, input: string, token: CancellationToken): Promise<number> {\n\t\tconst fn = this._tokenCountFuncs.get(callId);\n\t\tif (!fn) {\n\t\t\tthrow new Error(`Tool invocation call ${callId} not found`);\n\t\t}\n\n\t\treturn await fn(input, token);\n\t}\n\n\tasync invokeTool(extension: IExtensionDescription, toolId: string, options: vscode.LanguageModelToolInvocationOptions<any>, token?: CancellationToken): Promise<vscode.LanguageModelToolResult> {\n\t\tconst callId = generateUuid();\n\t\tif (options.tokenizationOptions) {\n\t\t\tthis._tokenCountFuncs.set(callId, options.tokenizationOptions.countTokens);\n\t\t}\n\n\t\ttry {\n\t\t\tif (options.toolInvocationToken && !isToolInvocationContext(options.toolInvocationToken)) {\n\t\t\t\tthrow new Error(`Invalid tool invocation token`);\n\t\t\t}\n\n\t\t\tif ((toolId === InternalEditToolId || toolId === ExtensionEditToolId) && !isProposedApiEnabled(extension, 'chatParticipantPrivate')) {\n\t\t\t\tthrow new Error(`Invalid tool: ${toolId}`);\n\t\t\t}\n\n\t\t\t// Making the round trip here because not all tools were necessarily registered in this EH\n\t\t\tconst result = await this._proxy.$invokeTool({\n\t\t\t\ttoolId,\n\t\t\t\tcallId,\n\t\t\t\tparameters: options.input,\n\t\t\t\ttokenBudget: options.tokenizationOptions?.tokenBudget,\n\t\t\t\tcontext: options.toolInvocationToken as IToolInvocationContext | undefined,\n\t\t\t\tchatRequestId: isProposedApiEnabled(extension, 'chatParticipantPrivate') ? options.chatRequestId : undefined,\n\t\t\t\tchatInteractionId: isProposedApiEnabled(extension, 'chatParticipantPrivate') ? options.chatInteractionId : undefined,\n\t\t\t\tfromSubAgent: isProposedApiEnabled(extension, 'chatParticipantPrivate') ? options.fromSubAgent : undefined,\n\t\t\t}, token);\n\n\t\t\tconst dto: Dto<IToolResult> = result instanceof SerializableObjectWithBuffers ? result.value : result;\n\t\t\treturn typeConvert.LanguageModelToolResult.to(revive(dto));\n\t\t} finally {\n\t\t\tthis._tokenCountFuncs.delete(callId);\n\t\t}\n\t}\n\n\t$onDidChangeTools(tools: IToolDataDto[]): void {\n\n\t\tconst oldTools = new Set(this._registeredTools.keys());\n\n\t\tfor (const tool of tools) {\n\t\t\toldTools.delete(tool.id);\n\t\t\tconst existing = this._allTools.get(tool.id);\n\t\t\tif (existing) {\n\t\t\t\texisting.update(tool);\n\t\t\t} else {\n\t\t\t\tthis._allTools.set(tool.id, new Tool(revive(tool)));\n\t\t\t}\n\t\t}\n\n\t\tfor (const id of oldTools) {\n\t\t\tthis._allTools.delete(id);\n\t\t}\n\t}\n\n\tgetTools(extension: IExtensionDescription): vscode.LanguageModelToolInformation[] {\n\t\tconst hasParticipantAdditions = isProposedApiEnabled(extension, 'chatParticipantPrivate');\n\t\treturn Array.from(this._allTools.values())\n\t\t\t.map(tool => hasParticipantAdditions ? tool.apiObjectWithChatParticipantAdditions : tool.apiObject)\n\t\t\t.filter(tool => {\n\t\t\t\tswitch (tool.name) {\n\t\t\t\t\tcase InternalEditToolId:\n\t\t\t\t\tcase ExtensionEditToolId:\n\t\t\t\t\tcase InternalFetchWebPageToolId:\n\t\t\t\t\tcase SearchExtensionsToolId:\n\t\t\t\t\t\treturn isProposedApiEnabled(extension, 'chatParticipantPrivate');\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tasync $invokeTool(dto: IToolInvocation, token: CancellationToken): Promise<Dto<IToolResult> | SerializableObjectWithBuffers<Dto<IToolResult>>> {\n\t\tconst item = this._registeredTools.get(dto.toolId);\n\t\tif (!item) {\n\t\t\tthrow new Error(`Unknown tool ${dto.toolId}`);\n\t\t}\n\n\t\tconst options: vscode.LanguageModelToolInvocationOptions<Object> = {\n\t\t\tinput: dto.parameters,\n\t\t\ttoolInvocationToken: dto.context as vscode.ChatParticipantToolToken | undefined,\n\t\t};\n\t\tif (isProposedApiEnabled(item.extension, 'chatParticipantPrivate')) {\n\t\t\toptions.chatRequestId = dto.chatRequestId;\n\t\t\toptions.chatInteractionId = dto.chatInteractionId;\n\t\t\toptions.chatSessionId = dto.context?.sessionId;\n\t\t\toptions.fromSubAgent = dto.fromSubAgent;\n\t\t}\n\n\t\tif (isProposedApiEnabled(item.extension, 'chatParticipantAdditions') && dto.modelId) {\n\t\t\toptions.model = await this.getModel(dto.modelId, item.extension);\n\t\t}\n\n\t\tif (dto.tokenBudget !== undefined) {\n\t\t\toptions.tokenizationOptions = {\n\t\t\t\ttokenBudget: dto.tokenBudget,\n\t\t\t\tcountTokens: this._tokenCountFuncs.get(dto.callId) || ((value, token = CancellationToken.None) =>\n\t\t\t\t\tthis._proxy.$countTokensForInvocation(dto.callId, value, token))\n\t\t\t};\n\t\t}\n\n\t\tlet progress: vscode.Progress<{ message?: string | vscode.MarkdownString; increment?: number }> | undefined;\n\t\tif (isProposedApiEnabled(item.extension, 'toolProgress')) {\n\t\t\tlet lastProgress: number | undefined;\n\t\t\tprogress = {\n\t\t\t\treport: value => {\n\t\t\t\t\tif (value.increment !== undefined) {\n\t\t\t\t\t\tlastProgress = (lastProgress ?? 0) + value.increment;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._proxy.$acceptToolProgress(dto.callId, {\n\t\t\t\t\t\tmessage: typeConvert.MarkdownString.fromStrict(value.message),\n\t\t\t\t\t\tprogress: lastProgress === undefined ? undefined : lastProgress / 100,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// todo: 'any' cast because TS can't handle the overloads\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tconst extensionResult = await raceCancellation(Promise.resolve((item.tool.invoke as any)(options, token, progress!)), token);\n\t\tif (!extensionResult) {\n\t\t\tthrow new CancellationError();\n\t\t}\n\n\t\treturn typeConvert.LanguageModelToolResult.from(extensionResult, item.extension);\n\t}\n\n\tprivate async getModel(modelId: string, extension: IExtensionDescription): Promise<vscode.LanguageModelChat> {\n\t\tlet model: vscode.LanguageModelChat | undefined;\n\t\tif (modelId) {\n\t\t\tmodel = await this._languageModels.getLanguageModelByIdentifier(extension, modelId);\n\t\t}\n\t\tif (!model) {\n\t\t\tmodel = await this._languageModels.getDefaultLanguageModel(extension);\n\t\t\tif (!model) {\n\t\t\t\tthrow new Error('Language model unavailable');\n\t\t\t}\n\t\t}\n\n\t\treturn model;\n\t}\n\n\tasync $prepareToolInvocation(toolId: string, context: IToolInvocationPreparationContext, token: CancellationToken): Promise<IPreparedToolInvocation | undefined> {\n\t\tconst item = this._registeredTools.get(toolId);\n\t\tif (!item) {\n\t\t\tthrow new Error(`Unknown tool ${toolId}`);\n\t\t}\n\n\t\tconst options: vscode.LanguageModelToolInvocationPrepareOptions<any> = {\n\t\t\tinput: context.parameters,\n\t\t\tchatRequestId: context.chatRequestId,\n\t\t\tchatSessionId: context.chatSessionId,\n\t\t\tchatInteractionId: context.chatInteractionId\n\t\t};\n\t\tif (item.tool.prepareInvocation) {\n\t\t\tconst result = await item.tool.prepareInvocation(options, token);\n\t\t\tif (!result) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (result.pastTenseMessage || result.presentation) {\n\t\t\t\tcheckProposedApiEnabled(item.extension, 'chatParticipantPrivate');\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tconfirmationMessages: result.confirmationMessages ? {\n\t\t\t\t\ttitle: typeof result.confirmationMessages.title === 'string' ? result.confirmationMessages.title : typeConvert.MarkdownString.from(result.confirmationMessages.title),\n\t\t\t\t\tmessage: typeof result.confirmationMessages.message === 'string' ? result.confirmationMessages.message : typeConvert.MarkdownString.from(result.confirmationMessages.message),\n\t\t\t\t} : undefined,\n\t\t\t\tinvocationMessage: typeConvert.MarkdownString.fromStrict(result.invocationMessage),\n\t\t\t\tpastTenseMessage: typeConvert.MarkdownString.fromStrict(result.pastTenseMessage),\n\t\t\t\tpresentation: result.presentation as ToolInvocationPresentation | undefined\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tregisterTool(extension: IExtensionDescription, id: string, tool: vscode.LanguageModelTool<any>): IDisposable {\n\t\tthis._registeredTools.set(id, { extension, tool });\n\t\tthis._proxy.$registerTool(id);\n\n\t\treturn toDisposable(() => {\n\t\t\tthis._registeredTools.delete(id);\n\t\t\tthis._proxy.$unregisterTool(id);\n\t\t});\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}