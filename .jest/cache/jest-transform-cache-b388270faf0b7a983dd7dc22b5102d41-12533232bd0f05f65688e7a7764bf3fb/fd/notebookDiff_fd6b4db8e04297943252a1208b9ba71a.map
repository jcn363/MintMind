{"version":3,"names":["cov_1sr2nraj5l","actualCoverage","computeDiff","originalModel","modifiedModel","diffResult","f","cellChanges","s","cellsDiff","changes","cellDiffInfo","originalCellIndex","modifiedCellIndex","firstChangeIndex","i","length","change","j","originalStart","originalCell","cells","modifiedCell","getHashValue","b","push","type","modifiedLCS","computeModifiedLCS","originalLength","modifiedStart","modifiedLength","result","modifiedLen","Math","min","cellKind","isTheSame","equal"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/notebook/common/notebookDiff.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDiffChange } from '../../../../base/common/diff/diff.js';\nimport { CellKind, INotebookDiffResult } from './notebookCommon.js';\n\nexport type CellDiffInfo = {\n\toriginalCellIndex: number;\n\tmodifiedCellIndex: number;\n\ttype: 'unchanged' | 'modified';\n} |\n{\n\toriginalCellIndex: number;\n\ttype: 'delete';\n} |\n{\n\tmodifiedCellIndex: number;\n\ttype: 'insert';\n};\n\ninterface ICell {\n\tcellKind: CellKind;\n\tgetHashValue(): number;\n\tequal(cell: ICell): boolean;\n}\n// interface INotebookDiffResult {\n// \tcellsDiff: IDiffResult;\n// \tmetadataChanged: boolean;\n// }\n\nexport function computeDiff(originalModel: { readonly cells: readonly ICell[] }, modifiedModel: { readonly cells: readonly ICell[] }, diffResult: INotebookDiffResult) {\n\tconst cellChanges = diffResult.cellsDiff.changes;\n\tconst cellDiffInfo: CellDiffInfo[] = [];\n\tlet originalCellIndex = 0;\n\tlet modifiedCellIndex = 0;\n\n\tlet firstChangeIndex = -1;\n\n\tfor (let i = 0; i < cellChanges.length; i++) {\n\t\tconst change = cellChanges[i];\n\t\t// common cells\n\n\t\tfor (let j = 0; j < change.originalStart - originalCellIndex; j++) {\n\t\t\tconst originalCell = originalModel.cells[originalCellIndex + j];\n\t\t\tconst modifiedCell = modifiedModel.cells[modifiedCellIndex + j];\n\t\t\tif (originalCell.getHashValue() === modifiedCell.getHashValue()) {\n\t\t\t\tcellDiffInfo.push({\n\t\t\t\t\toriginalCellIndex: originalCellIndex + j,\n\t\t\t\t\tmodifiedCellIndex: modifiedCellIndex + j,\n\t\t\t\t\ttype: 'unchanged'\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (firstChangeIndex === -1) {\n\t\t\t\t\tfirstChangeIndex = cellDiffInfo.length;\n\t\t\t\t}\n\t\t\t\tcellDiffInfo.push({\n\t\t\t\t\toriginalCellIndex: originalCellIndex + j,\n\t\t\t\t\tmodifiedCellIndex: modifiedCellIndex + j,\n\t\t\t\t\ttype: 'modified'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst modifiedLCS = computeModifiedLCS(change, originalModel, modifiedModel);\n\t\tif (modifiedLCS.length && firstChangeIndex === -1) {\n\t\t\tfirstChangeIndex = cellDiffInfo.length;\n\t\t}\n\n\t\tcellDiffInfo.push(...modifiedLCS);\n\t\toriginalCellIndex = change.originalStart + change.originalLength;\n\t\tmodifiedCellIndex = change.modifiedStart + change.modifiedLength;\n\t}\n\n\tfor (let i = originalCellIndex; i < originalModel.cells.length; i++) {\n\t\tcellDiffInfo.push({\n\t\t\toriginalCellIndex: i,\n\t\t\tmodifiedCellIndex: i - originalCellIndex + modifiedCellIndex,\n\t\t\ttype: 'unchanged'\n\t\t});\n\t}\n\n\treturn {\n\t\tcellDiffInfo,\n\t\tfirstChangeIndex\n\t};\n}\n\nfunction computeModifiedLCS(change: IDiffChange, originalModel: { readonly cells: readonly ICell[] }, modifiedModel: { readonly cells: readonly ICell[] }) {\n\tconst result: CellDiffInfo[] = [];\n\t// modified cells\n\tconst modifiedLen = Math.min(change.originalLength, change.modifiedLength);\n\n\tfor (let j = 0; j < modifiedLen; j++) {\n\t\tconst originalCell = originalModel.cells[change.originalStart + j];\n\t\tconst modifiedCell = modifiedModel.cells[change.modifiedStart + j];\n\t\tif (originalCell.cellKind !== modifiedCell.cellKind) {\n\t\t\tresult.push({\n\t\t\t\toriginalCellIndex: change.originalStart + j,\n\t\t\t\ttype: 'delete'\n\t\t\t});\n\t\t\tresult.push({\n\t\t\t\tmodifiedCellIndex: change.modifiedStart + j,\n\t\t\t\ttype: 'insert'\n\t\t\t});\n\t\t} else {\n\t\t\tconst isTheSame = originalCell.equal(modifiedCell);\n\t\t\tresult.push({\n\t\t\t\toriginalCellIndex: change.originalStart + j,\n\t\t\t\tmodifiedCellIndex: change.modifiedStart + j,\n\t\t\t\ttype: isTheSame ? 'unchanged' : 'modified'\n\t\t\t});\n\t\t}\n\t}\n\n\tfor (let j = modifiedLen; j < change.originalLength; j++) {\n\t\t// deletion\n\t\tresult.push({\n\t\t\toriginalCellIndex: change.originalStart + j,\n\t\t\ttype: 'delete'\n\t\t});\n\t}\n\n\tfor (let j = modifiedLen; j < change.modifiedLength; j++) {\n\t\tresult.push({\n\t\t\tmodifiedCellIndex: change.modifiedStart + j,\n\t\t\ttype: 'insert'\n\t\t});\n\t}\n\n\treturn result;\n}\n"],"mappings":"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","ignoreList":[]}