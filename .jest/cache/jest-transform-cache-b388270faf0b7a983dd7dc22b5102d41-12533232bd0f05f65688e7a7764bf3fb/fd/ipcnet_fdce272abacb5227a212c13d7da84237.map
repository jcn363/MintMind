{"version":3,"names":["cov_1hixg9l3z4","actualCoverage","VSBuffer","Emitter","Disposable","DisposableStore","IPCClient","SocketDiagnostics","s","f","enableDiagnostics","records","socketIds","WeakMap","lastUsedSocketId","getSocketId","nativeObject","label","has","b","id","String","set","get","traceSocketEvent","socketDebugLabel","type","data","Uint8Array","ArrayBuffer","isView","copiedData","alloc","byteLength","push","timestamp","Date","now","buff","emptyBuffer","getEmptyBuffer","ChunkStream","_chunks","_totalLength","constructor","acceptChunk","read","byteCount","_read","peek","advance","Error","result","shift","slice","resultOffset","chunkIndex","chunk","chunkPart","protocolMessageTypeToString","messageType","ProtocolMessage","ack","writtenTime","size","ProtocolReader","_socket","_isDisposed","_incomingData","lastReadTime","_onMessage","_register","onMessage","event","_state","readHead","readLen","socket","onData","readUInt32BE","readUInt8","messageSize","fire","readEntireBuffer","dispose","ProtocolWriter","_isPaused","_data","lastWriteTime","flush","err","drain","_writeNow","pause","resume","_scheduleWriting","write","msg","header","writeUInt8","writeUInt32BE","_writeSoon","_bufferAdd","head","body","wasEmpty","_bufferTake","ret","concat","length","_writeNowTimeout","setTimeout","Protocol","_socketWriter","_socketReader","_onDidDispose","onDidDispose","onClose","getSocket","sendDisconnect","send","buffer","Client","protocol","fromSocket","ipcLogger","end","BufferedEmitter","_emitter","_hasListeners","_isDeliveringMessages","_bufferedMessages","onWillAddFirstListener","queueMicrotask","_deliverMessages","onDidRemoveLastListener","flushBuffer","QueueElement","next","Queue","_first","_last","current","toArray","resultLen","it","pop","item","element","LoadEstimator","_HISTORY_LENGTH","_INSTANCE","getInstance","lastRuns","i","setInterval","load","historyLimit","score","hasHighLoad","PersistentProtocol","_isReconnecting","_didSendDisconnect","_outgoingUnackMsg","_outgoingMsgId","_outgoingAckId","_outgoingAckTimeout","_incomingMsgId","_incomingAckId","_incomingMsgLastTime","_incomingAckTimeout","_keepAliveInterval","_lastReplayRequestTime","_lastSocketTimeoutTime","_socketDisposables","_loadEstimator","_shouldSendKeepAlive","_onControlMessage","onControlMessage","_onSocketClose","onSocketClose","_onSocketTimeout","onSocketTimeout","unacknowledgedCount","opts","loadEstimator","sendKeepAlive","add","_receiveMessage","e","initialChunk","_sendKeepAlive","clearTimeout","clearInterval","sendPause","sendResume","pauseSocketWriting","getMillisSinceLastIncomingData","beginAcceptReconnection","initialDataChunk","endAcceptReconnection","toSend","len","_recvAckCheck","acceptDisconnect","first","_sendAckCheck","myId","sendControl","timeSinceLastIncomingMsg","_sendAck","oldestUnacknowledgedMsg","timeSinceOldestUnacknowledgedMsg","timeSinceLastReceivedSomeData","timeSinceLastTimeout","unacknowledgedMsgCount","minimumTimeUntilTimeout","Math","max"],"sources":["/home/user/Desktop/MintMind/src/vs/base/parts/ipc/common/ipc.net.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../common/buffer.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, IDisposable } from '../../../common/lifecycle.js';\nimport { IIPCLogger, IMessagePassingProtocol, IPCClient } from './ipc.js';\n\nexport const enum SocketDiagnosticsEventType {\n\tCreated = 'created',\n\tRead = 'read',\n\tWrite = 'write',\n\tOpen = 'open',\n\tError = 'error',\n\tClose = 'close',\n\n\tBrowserWebSocketBlobReceived = 'browserWebSocketBlobReceived',\n\n\tNodeEndReceived = 'nodeEndReceived',\n\tNodeEndSent = 'nodeEndSent',\n\tNodeDrainBegin = 'nodeDrainBegin',\n\tNodeDrainEnd = 'nodeDrainEnd',\n\n\tzlibInflateError = 'zlibInflateError',\n\tzlibInflateData = 'zlibInflateData',\n\tzlibInflateInitialWrite = 'zlibInflateInitialWrite',\n\tzlibInflateInitialFlushFired = 'zlibInflateInitialFlushFired',\n\tzlibInflateWrite = 'zlibInflateWrite',\n\tzlibInflateFlushFired = 'zlibInflateFlushFired',\n\tzlibDeflateError = 'zlibDeflateError',\n\tzlibDeflateData = 'zlibDeflateData',\n\tzlibDeflateWrite = 'zlibDeflateWrite',\n\tzlibDeflateFlushFired = 'zlibDeflateFlushFired',\n\n\tWebSocketNodeSocketWrite = 'webSocketNodeSocketWrite',\n\tWebSocketNodeSocketPeekedHeader = 'webSocketNodeSocketPeekedHeader',\n\tWebSocketNodeSocketReadHeader = 'webSocketNodeSocketReadHeader',\n\tWebSocketNodeSocketReadData = 'webSocketNodeSocketReadData',\n\tWebSocketNodeSocketUnmaskedData = 'webSocketNodeSocketUnmaskedData',\n\tWebSocketNodeSocketDrainBegin = 'webSocketNodeSocketDrainBegin',\n\tWebSocketNodeSocketDrainEnd = 'webSocketNodeSocketDrainEnd',\n\n\tProtocolHeaderRead = 'protocolHeaderRead',\n\tProtocolMessageRead = 'protocolMessageRead',\n\tProtocolHeaderWrite = 'protocolHeaderWrite',\n\tProtocolMessageWrite = 'protocolMessageWrite',\n\tProtocolWrite = 'protocolWrite',\n}\n\nexport namespace SocketDiagnostics {\n\n\texport const enableDiagnostics = false;\n\n\texport interface IRecord {\n\t\ttimestamp: number;\n\t\tid: string;\n\t\tlabel: string;\n\t\ttype: SocketDiagnosticsEventType;\n\t\tbuff?: VSBuffer;\n\t\tdata?: any;\n\t}\n\n\texport const records: IRecord[] = [];\n\tconst socketIds = new WeakMap<any, string>();\n\tlet lastUsedSocketId = 0;\n\n\tfunction getSocketId(nativeObject: unknown, label: string): string {\n\t\tif (!socketIds.has(nativeObject)) {\n\t\t\tconst id = String(++lastUsedSocketId);\n\t\t\tsocketIds.set(nativeObject, id);\n\t\t}\n\t\treturn socketIds.get(nativeObject)!;\n\t}\n\n\texport function traceSocketEvent(nativeObject: unknown, socketDebugLabel: string, type: SocketDiagnosticsEventType, data?: VSBuffer | Uint8Array | ArrayBuffer | ArrayBufferView | any): void {\n\t\tif (!enableDiagnostics) {\n\t\t\treturn;\n\t\t}\n\t\tconst id = getSocketId(nativeObject, socketDebugLabel);\n\n\t\tif (data instanceof VSBuffer || data instanceof Uint8Array || data instanceof ArrayBuffer || ArrayBuffer.isView(data)) {\n\t\t\tconst copiedData = VSBuffer.alloc(data.byteLength);\n\t\t\tcopiedData.set(data);\n\t\t\trecords.push({ timestamp: Date.now(), id, label: socketDebugLabel, type, buff: copiedData });\n\t\t} else {\n\t\t\t// data is a custom object\n\t\t\trecords.push({ timestamp: Date.now(), id, label: socketDebugLabel, type, data: data });\n\t\t}\n\t}\n}\n\nexport const enum SocketCloseEventType {\n\tNodeSocketCloseEvent = 0,\n\tWebSocketCloseEvent = 1\n}\n\nexport interface NodeSocketCloseEvent {\n\t/**\n\t * The type of the event\n\t */\n\treadonly type: SocketCloseEventType.NodeSocketCloseEvent;\n\t/**\n\t * `true` if the socket had a transmission error.\n\t */\n\treadonly hadError: boolean;\n\t/**\n\t * Underlying error.\n\t */\n\treadonly error: Error | undefined;\n}\n\nexport interface WebSocketCloseEvent {\n\t/**\n\t * The type of the event\n\t */\n\treadonly type: SocketCloseEventType.WebSocketCloseEvent;\n\t/**\n\t * Returns the WebSocket connection close code provided by the server.\n\t */\n\treadonly code: number;\n\t/**\n\t * Returns the WebSocket connection close reason provided by the server.\n\t */\n\treadonly reason: string;\n\t/**\n\t * Returns true if the connection closed cleanly; false otherwise.\n\t */\n\treadonly wasClean: boolean;\n\t/**\n\t * Underlying event.\n\t */\n\treadonly event: any | undefined;\n}\n\nexport type SocketCloseEvent = NodeSocketCloseEvent | WebSocketCloseEvent | undefined;\n\nexport interface SocketTimeoutEvent {\n\treadonly unacknowledgedMsgCount: number;\n\treadonly timeSinceOldestUnacknowledgedMsg: number;\n\treadonly timeSinceLastReceivedSomeData: number;\n}\n\nexport interface ISocket extends IDisposable {\n\tonData(listener: (e: VSBuffer) => void): IDisposable;\n\tonClose(listener: (e: SocketCloseEvent) => void): IDisposable;\n\tonEnd(listener: () => void): IDisposable;\n\twrite(buffer: VSBuffer): void;\n\tend(): void;\n\tdrain(): Promise<void>;\n\n\ttraceSocketEvent(type: SocketDiagnosticsEventType, data?: VSBuffer | Uint8Array | ArrayBuffer | ArrayBufferView | any): void;\n}\n\nlet emptyBuffer: VSBuffer | null = null;\nfunction getEmptyBuffer(): VSBuffer {\n\tif (!emptyBuffer) {\n\t\temptyBuffer = VSBuffer.alloc(0);\n\t}\n\treturn emptyBuffer;\n}\n\nexport class ChunkStream {\n\n\tprivate _chunks: VSBuffer[];\n\tprivate _totalLength: number;\n\n\tpublic get byteLength() {\n\t\treturn this._totalLength;\n\t}\n\n\tconstructor() {\n\t\tthis._chunks = [];\n\t\tthis._totalLength = 0;\n\t}\n\n\tpublic acceptChunk(buff: VSBuffer) {\n\t\tthis._chunks.push(buff);\n\t\tthis._totalLength += buff.byteLength;\n\t}\n\n\tpublic read(byteCount: number): VSBuffer {\n\t\treturn this._read(byteCount, true);\n\t}\n\n\tpublic peek(byteCount: number): VSBuffer {\n\t\treturn this._read(byteCount, false);\n\t}\n\n\tprivate _read(byteCount: number, advance: boolean): VSBuffer {\n\n\t\tif (byteCount === 0) {\n\t\t\treturn getEmptyBuffer();\n\t\t}\n\n\t\tif (byteCount > this._totalLength) {\n\t\t\tthrow new Error(`Cannot read so many bytes!`);\n\t\t}\n\n\t\tif (this._chunks[0].byteLength === byteCount) {\n\t\t\t// super fast path, precisely first chunk must be returned\n\t\t\tconst result = this._chunks[0];\n\t\t\tif (advance) {\n\t\t\t\tthis._chunks.shift();\n\t\t\t\tthis._totalLength -= byteCount;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tif (this._chunks[0].byteLength > byteCount) {\n\t\t\t// fast path, the reading is entirely within the first chunk\n\t\t\tconst result = this._chunks[0].slice(0, byteCount);\n\t\t\tif (advance) {\n\t\t\t\tthis._chunks[0] = this._chunks[0].slice(byteCount);\n\t\t\t\tthis._totalLength -= byteCount;\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tconst result = VSBuffer.alloc(byteCount);\n\t\tlet resultOffset = 0;\n\t\tlet chunkIndex = 0;\n\t\twhile (byteCount > 0) {\n\t\t\tconst chunk = this._chunks[chunkIndex];\n\t\t\tif (chunk.byteLength > byteCount) {\n\t\t\t\t// this chunk will survive\n\t\t\t\tconst chunkPart = chunk.slice(0, byteCount);\n\t\t\t\tresult.set(chunkPart, resultOffset);\n\t\t\t\tresultOffset += byteCount;\n\n\t\t\t\tif (advance) {\n\t\t\t\t\tthis._chunks[chunkIndex] = chunk.slice(byteCount);\n\t\t\t\t\tthis._totalLength -= byteCount;\n\t\t\t\t}\n\n\t\t\t\tbyteCount -= byteCount;\n\t\t\t} else {\n\t\t\t\t// this chunk will be entirely read\n\t\t\t\tresult.set(chunk, resultOffset);\n\t\t\t\tresultOffset += chunk.byteLength;\n\n\t\t\t\tif (advance) {\n\t\t\t\t\tthis._chunks.shift();\n\t\t\t\t\tthis._totalLength -= chunk.byteLength;\n\t\t\t\t} else {\n\t\t\t\t\tchunkIndex++;\n\t\t\t\t}\n\n\t\t\t\tbyteCount -= chunk.byteLength;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nconst enum ProtocolMessageType {\n\tNone = 0,\n\tRegular = 1,\n\tControl = 2,\n\tAck = 3,\n\tDisconnect = 5,\n\tReplayRequest = 6,\n\tPause = 7,\n\tResume = 8,\n\tKeepAlive = 9\n}\n\nfunction protocolMessageTypeToString(messageType: ProtocolMessageType) {\n\tswitch (messageType) {\n\t\tcase ProtocolMessageType.None: return 'None';\n\t\tcase ProtocolMessageType.Regular: return 'Regular';\n\t\tcase ProtocolMessageType.Control: return 'Control';\n\t\tcase ProtocolMessageType.Ack: return 'Ack';\n\t\tcase ProtocolMessageType.Disconnect: return 'Disconnect';\n\t\tcase ProtocolMessageType.ReplayRequest: return 'ReplayRequest';\n\t\tcase ProtocolMessageType.Pause: return 'PauseWriting';\n\t\tcase ProtocolMessageType.Resume: return 'ResumeWriting';\n\t\tcase ProtocolMessageType.KeepAlive: return 'KeepAlive';\n\t}\n}\n\nexport const enum ProtocolConstants {\n\tHeaderLength = 13,\n\t/**\n\t * Send an Acknowledge message at most 2 seconds later...\n\t */\n\tAcknowledgeTime = 2000, // 2 seconds\n\t/**\n\t * If there is a sent message that has been unacknowledged for 20 seconds,\n\t * and we didn't see any incoming server data in the past 20 seconds,\n\t * then consider the connection has timed out.\n\t */\n\tTimeoutTime = 20000, // 20 seconds\n\t/**\n\t * If there is no reconnection within this time-frame, consider the connection permanently closed...\n\t */\n\tReconnectionGraceTime = 3 * 60 * 60 * 1000, // 3hrs\n\t/**\n\t * Maximal grace time between the first and the last reconnection...\n\t */\n\tReconnectionShortGraceTime = 5 * 60 * 1000, // 5min\n\t/**\n\t * Send a message every 5 seconds to avoid that the connection is closed by the OS.\n\t */\n\tKeepAliveSendTime = 5000, // 5 seconds\n}\n\nclass ProtocolMessage {\n\n\tpublic writtenTime: number;\n\n\tconstructor(\n\t\tpublic readonly type: ProtocolMessageType,\n\t\tpublic readonly id: number,\n\t\tpublic readonly ack: number,\n\t\tpublic readonly data: VSBuffer\n\t) {\n\t\tthis.writtenTime = 0;\n\t}\n\n\tpublic get size(): number {\n\t\treturn this.data.byteLength;\n\t}\n}\n\nclass ProtocolReader extends Disposable {\n\n\tprivate readonly _socket: ISocket;\n\tprivate _isDisposed: boolean;\n\tprivate readonly _incomingData: ChunkStream;\n\tpublic lastReadTime: number;\n\n\tprivate readonly _onMessage = this._register(new Emitter<ProtocolMessage>());\n\tpublic readonly onMessage: Event<ProtocolMessage> = this._onMessage.event;\n\n\tprivate readonly _state = {\n\t\treadHead: true,\n\t\treadLen: ProtocolConstants.HeaderLength,\n\t\tmessageType: ProtocolMessageType.None,\n\t\tid: 0,\n\t\tack: 0\n\t};\n\n\tconstructor(socket: ISocket) {\n\t\tsuper();\n\t\tthis._socket = socket;\n\t\tthis._isDisposed = false;\n\t\tthis._incomingData = new ChunkStream();\n\t\tthis._register(this._socket.onData(data => this.acceptChunk(data)));\n\t\tthis.lastReadTime = Date.now();\n\t}\n\n\tpublic acceptChunk(data: VSBuffer | null): void {\n\t\tif (!data || data.byteLength === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.lastReadTime = Date.now();\n\n\t\tthis._incomingData.acceptChunk(data);\n\n\t\twhile (this._incomingData.byteLength >= this._state.readLen) {\n\n\t\t\tconst buff = this._incomingData.read(this._state.readLen);\n\n\t\t\tif (this._state.readHead) {\n\t\t\t\t// buff is the header\n\n\t\t\t\t// save new state => next time will read the body\n\t\t\t\tthis._state.readHead = false;\n\t\t\t\tthis._state.readLen = buff.readUInt32BE(9);\n\t\t\t\tthis._state.messageType = buff.readUInt8(0);\n\t\t\t\tthis._state.id = buff.readUInt32BE(1);\n\t\t\t\tthis._state.ack = buff.readUInt32BE(5);\n\n\t\t\t\tthis._socket.traceSocketEvent(SocketDiagnosticsEventType.ProtocolHeaderRead, { messageType: protocolMessageTypeToString(this._state.messageType), id: this._state.id, ack: this._state.ack, messageSize: this._state.readLen });\n\n\t\t\t} else {\n\t\t\t\t// buff is the body\n\t\t\t\tconst messageType = this._state.messageType;\n\t\t\t\tconst id = this._state.id;\n\t\t\t\tconst ack = this._state.ack;\n\n\t\t\t\t// save new state => next time will read the header\n\t\t\t\tthis._state.readHead = true;\n\t\t\t\tthis._state.readLen = ProtocolConstants.HeaderLength;\n\t\t\t\tthis._state.messageType = ProtocolMessageType.None;\n\t\t\t\tthis._state.id = 0;\n\t\t\t\tthis._state.ack = 0;\n\n\t\t\t\tthis._socket.traceSocketEvent(SocketDiagnosticsEventType.ProtocolMessageRead, buff);\n\n\t\t\t\tthis._onMessage.fire(new ProtocolMessage(messageType, id, ack, buff));\n\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\t// check if an event listener lead to our disposal\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic readEntireBuffer(): VSBuffer {\n\t\treturn this._incomingData.read(this._incomingData.byteLength);\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._isDisposed = true;\n\t\tsuper.dispose();\n\t}\n}\n\nclass ProtocolWriter {\n\n\tprivate _isDisposed: boolean;\n\tprivate _isPaused: boolean;\n\tprivate readonly _socket: ISocket;\n\tprivate _data: VSBuffer[];\n\tprivate _totalLength: number;\n\tpublic lastWriteTime: number;\n\n\tconstructor(socket: ISocket) {\n\t\tthis._isDisposed = false;\n\t\tthis._isPaused = false;\n\t\tthis._socket = socket;\n\t\tthis._data = [];\n\t\tthis._totalLength = 0;\n\t\tthis.lastWriteTime = 0;\n\t}\n\n\tpublic dispose(): void {\n\t\ttry {\n\t\t\tthis.flush();\n\t\t} catch (err) {\n\t\t\t// ignore error, since the socket could be already closed\n\t\t}\n\t\tthis._isDisposed = true;\n\t}\n\n\tpublic drain(): Promise<void> {\n\t\tthis.flush();\n\t\treturn this._socket.drain();\n\t}\n\n\tpublic flush(): void {\n\t\t// flush\n\t\tthis._writeNow();\n\t}\n\n\tpublic pause(): void {\n\t\tthis._isPaused = true;\n\t}\n\n\tpublic resume(): void {\n\t\tthis._isPaused = false;\n\t\tthis._scheduleWriting();\n\t}\n\n\tpublic write(msg: ProtocolMessage) {\n\t\tif (this._isDisposed) {\n\t\t\t// ignore: there could be left-over promises which complete and then\n\t\t\t// decide to write a response, etc...\n\t\t\treturn;\n\t\t}\n\t\tmsg.writtenTime = Date.now();\n\t\tthis.lastWriteTime = Date.now();\n\t\tconst header = VSBuffer.alloc(ProtocolConstants.HeaderLength);\n\t\theader.writeUInt8(msg.type, 0);\n\t\theader.writeUInt32BE(msg.id, 1);\n\t\theader.writeUInt32BE(msg.ack, 5);\n\t\theader.writeUInt32BE(msg.data.byteLength, 9);\n\n\t\tthis._socket.traceSocketEvent(SocketDiagnosticsEventType.ProtocolHeaderWrite, { messageType: protocolMessageTypeToString(msg.type), id: msg.id, ack: msg.ack, messageSize: msg.data.byteLength });\n\t\tthis._socket.traceSocketEvent(SocketDiagnosticsEventType.ProtocolMessageWrite, msg.data);\n\n\t\tthis._writeSoon(header, msg.data);\n\t}\n\n\tprivate _bufferAdd(head: VSBuffer, body: VSBuffer): boolean {\n\t\tconst wasEmpty = this._totalLength === 0;\n\t\tthis._data.push(head, body);\n\t\tthis._totalLength += head.byteLength + body.byteLength;\n\t\treturn wasEmpty;\n\t}\n\n\tprivate _bufferTake(): VSBuffer {\n\t\tconst ret = VSBuffer.concat(this._data, this._totalLength);\n\t\tthis._data.length = 0;\n\t\tthis._totalLength = 0;\n\t\treturn ret;\n\t}\n\n\tprivate _writeSoon(header: VSBuffer, data: VSBuffer): void {\n\t\tif (this._bufferAdd(header, data)) {\n\t\t\tthis._scheduleWriting();\n\t\t}\n\t}\n\n\tprivate _writeNowTimeout: Timeout | null = null;\n\tprivate _scheduleWriting(): void {\n\t\tif (this._writeNowTimeout) {\n\t\t\treturn;\n\t\t}\n\t\tthis._writeNowTimeout = setTimeout(() => {\n\t\t\tthis._writeNowTimeout = null;\n\t\t\tthis._writeNow();\n\t\t});\n\t}\n\n\tprivate _writeNow(): void {\n\t\tif (this._totalLength === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._isPaused) {\n\t\t\treturn;\n\t\t}\n\t\tconst data = this._bufferTake();\n\t\tthis._socket.traceSocketEvent(SocketDiagnosticsEventType.ProtocolWrite, { byteLength: data.byteLength });\n\t\tthis._socket.write(data);\n\t}\n}\n\n/**\n * A message has the following format:\n * ```\n *     /-------------------------------|------\\\n *     |             HEADER            |      |\n *     |-------------------------------| DATA |\n *     | TYPE | ID | ACK | DATA_LENGTH |      |\n *     \\-------------------------------|------/\n * ```\n * The header is 9 bytes and consists of:\n *  - TYPE is 1 byte (ProtocolMessageType) - the message type\n *  - ID is 4 bytes (u32be) - the message id (can be 0 to indicate to be ignored)\n *  - ACK is 4 bytes (u32be) - the acknowledged message id (can be 0 to indicate to be ignored)\n *  - DATA_LENGTH is 4 bytes (u32be) - the length in bytes of DATA\n *\n * Only Regular messages are counted, other messages are not counted, nor acknowledged.\n */\nexport class Protocol extends Disposable implements IMessagePassingProtocol {\n\n\tprivate _socket: ISocket;\n\tprivate _socketWriter: ProtocolWriter;\n\tprivate _socketReader: ProtocolReader;\n\n\tprivate readonly _onMessage = new Emitter<VSBuffer>();\n\treadonly onMessage: Event<VSBuffer> = this._onMessage.event;\n\n\tprivate readonly _onDidDispose = new Emitter<void>();\n\treadonly onDidDispose: Event<void> = this._onDidDispose.event;\n\n\tconstructor(socket: ISocket) {\n\t\tsuper();\n\t\tthis._socket = socket;\n\t\tthis._socketWriter = this._register(new ProtocolWriter(this._socket));\n\t\tthis._socketReader = this._register(new ProtocolReader(this._socket));\n\n\t\tthis._register(this._socketReader.onMessage((msg) => {\n\t\t\tif (msg.type === ProtocolMessageType.Regular) {\n\t\t\t\tthis._onMessage.fire(msg.data);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._socket.onClose(() => this._onDidDispose.fire()));\n\t}\n\n\tdrain(): Promise<void> {\n\t\treturn this._socketWriter.drain();\n\t}\n\n\tgetSocket(): ISocket {\n\t\treturn this._socket;\n\t}\n\n\tsendDisconnect(): void {\n\t\t// Nothing to do...\n\t}\n\n\tsend(buffer: VSBuffer): void {\n\t\tthis._socketWriter.write(new ProtocolMessage(ProtocolMessageType.Regular, 0, 0, buffer));\n\t}\n}\n\nexport class Client<TContext = string> extends IPCClient<TContext> {\n\n\tstatic fromSocket<TContext = string>(socket: ISocket, id: TContext): Client<TContext> {\n\t\treturn new Client(new Protocol(socket), id);\n\t}\n\n\tget onDidDispose(): Event<void> { return this.protocol.onDidDispose; }\n\n\tconstructor(private protocol: Protocol | PersistentProtocol, id: TContext, ipcLogger: IIPCLogger | null = null) {\n\t\tsuper(protocol, id, ipcLogger);\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tconst socket = this.protocol.getSocket();\n\t\t// should be sent gracefully with a .flush(), but try to send it out as a\n\t\t// last resort here if nothing else:\n\t\tthis.protocol.sendDisconnect();\n\t\tthis.protocol.dispose();\n\t\tsocket.end();\n\t}\n}\n\n/**\n * Will ensure no messages are lost if there are no event listeners.\n */\nexport class BufferedEmitter<T> {\n\tprivate _emitter: Emitter<T>;\n\tpublic readonly event: Event<T>;\n\n\tprivate _hasListeners = false;\n\tprivate _isDeliveringMessages = false;\n\tprivate _bufferedMessages: T[] = [];\n\n\tconstructor() {\n\t\tthis._emitter = new Emitter<T>({\n\t\t\tonWillAddFirstListener: () => {\n\t\t\t\tthis._hasListeners = true;\n\t\t\t\t// it is important to deliver these messages after this call, but before\n\t\t\t\t// other messages have a chance to be received (to guarantee in order delivery)\n\t\t\t\t// that's why we're using here queueMicrotask and not other types of timeouts\n\t\t\t\tqueueMicrotask(() => this._deliverMessages());\n\t\t\t},\n\t\t\tonDidRemoveLastListener: () => {\n\t\t\t\tthis._hasListeners = false;\n\t\t\t}\n\t\t});\n\n\t\tthis.event = this._emitter.event;\n\t}\n\n\tprivate _deliverMessages(): void {\n\t\tif (this._isDeliveringMessages) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isDeliveringMessages = true;\n\t\twhile (this._hasListeners && this._bufferedMessages.length > 0) {\n\t\t\tthis._emitter.fire(this._bufferedMessages.shift()!);\n\t\t}\n\t\tthis._isDeliveringMessages = false;\n\t}\n\n\tpublic fire(event: T): void {\n\t\tif (this._hasListeners) {\n\t\t\tif (this._bufferedMessages.length > 0) {\n\t\t\t\tthis._bufferedMessages.push(event);\n\t\t\t} else {\n\t\t\t\tthis._emitter.fire(event);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._bufferedMessages.push(event);\n\t\t}\n\t}\n\n\tpublic flushBuffer(): void {\n\t\tthis._bufferedMessages = [];\n\t}\n}\n\nclass QueueElement<T> {\n\tpublic readonly data: T;\n\tpublic next: QueueElement<T> | null;\n\n\tconstructor(data: T) {\n\t\tthis.data = data;\n\t\tthis.next = null;\n\t}\n}\n\nclass Queue<T> {\n\n\tprivate _first: QueueElement<T> | null;\n\tprivate _last: QueueElement<T> | null;\n\n\tconstructor() {\n\t\tthis._first = null;\n\t\tthis._last = null;\n\t}\n\n\tpublic length(): number {\n\t\tlet result = 0;\n\t\tlet current = this._first;\n\t\twhile (current) {\n\t\t\tcurrent = current.next;\n\t\t\tresult++;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic peek(): T | null {\n\t\tif (!this._first) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this._first.data;\n\t}\n\n\tpublic toArray(): T[] {\n\t\tconst result: T[] = [];\n\t\tlet resultLen = 0;\n\t\tlet it = this._first;\n\t\twhile (it) {\n\t\t\tresult[resultLen++] = it.data;\n\t\t\tit = it.next;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic pop(): void {\n\t\tif (!this._first) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._first === this._last) {\n\t\t\tthis._first = null;\n\t\t\tthis._last = null;\n\t\t\treturn;\n\t\t}\n\t\tthis._first = this._first.next;\n\t}\n\n\tpublic push(item: T): void {\n\t\tconst element = new QueueElement(item);\n\t\tif (!this._first) {\n\t\t\tthis._first = element;\n\t\t\tthis._last = element;\n\t\t\treturn;\n\t\t}\n\t\tthis._last!.next = element;\n\t\tthis._last = element;\n\t}\n}\n\nclass LoadEstimator {\n\n\tprivate static _HISTORY_LENGTH = 10;\n\tprivate static _INSTANCE: LoadEstimator | null = null;\n\tpublic static getInstance(): LoadEstimator {\n\t\tif (!LoadEstimator._INSTANCE) {\n\t\t\tLoadEstimator._INSTANCE = new LoadEstimator();\n\t\t}\n\t\treturn LoadEstimator._INSTANCE;\n\t}\n\n\tprivate lastRuns: number[];\n\n\tconstructor() {\n\t\tthis.lastRuns = [];\n\t\tconst now = Date.now();\n\t\tfor (let i = 0; i < LoadEstimator._HISTORY_LENGTH; i++) {\n\t\t\tthis.lastRuns[i] = now - 1000 * i;\n\t\t}\n\t\tsetInterval(() => {\n\t\t\tfor (let i = LoadEstimator._HISTORY_LENGTH; i >= 1; i--) {\n\t\t\t\tthis.lastRuns[i] = this.lastRuns[i - 1];\n\t\t\t}\n\t\t\tthis.lastRuns[0] = Date.now();\n\t\t}, 1000);\n\t}\n\n\t/**\n\t * returns an estimative number, from 0 (low load) to 1 (high load)\n\t */\n\tprivate load(): number {\n\t\tconst now = Date.now();\n\t\tconst historyLimit = (1 + LoadEstimator._HISTORY_LENGTH) * 1000;\n\t\tlet score = 0;\n\t\tfor (let i = 0; i < LoadEstimator._HISTORY_LENGTH; i++) {\n\t\t\tif (now - this.lastRuns[i] <= historyLimit) {\n\t\t\t\tscore++;\n\t\t\t}\n\t\t}\n\t\treturn 1 - score / LoadEstimator._HISTORY_LENGTH;\n\t}\n\n\tpublic hasHighLoad(): boolean {\n\t\treturn this.load() >= 0.5;\n\t}\n}\n\nexport interface ILoadEstimator {\n\thasHighLoad(): boolean;\n}\n\nexport interface PersistentProtocolOptions {\n\t/**\n\t * The socket to use.\n\t */\n\tsocket: ISocket;\n\t/**\n\t * The initial chunk of data that has already been received from the socket.\n\t */\n\tinitialChunk?: VSBuffer | null;\n\t/**\n\t * The CPU load estimator to use.\n\t */\n\tloadEstimator?: ILoadEstimator;\n\t/**\n\t * Whether to send keep alive messages. Defaults to true.\n\t */\n\tsendKeepAlive?: boolean;\n}\n\n/**\n * Same as Protocol, but will actually track messages and acks.\n * Moreover, it will ensure no messages are lost if there are no event listeners.\n */\nexport class PersistentProtocol implements IMessagePassingProtocol {\n\n\tprivate _isReconnecting: boolean;\n\tprivate _didSendDisconnect?: boolean;\n\n\tprivate _outgoingUnackMsg: Queue<ProtocolMessage>;\n\tprivate _outgoingMsgId: number;\n\tprivate _outgoingAckId: number;\n\tprivate _outgoingAckTimeout: Timeout | null;\n\n\tprivate _incomingMsgId: number;\n\tprivate _incomingAckId: number;\n\tprivate _incomingMsgLastTime: number;\n\tprivate _incomingAckTimeout: Timeout | null;\n\n\tprivate _keepAliveInterval: Timeout | null;\n\n\tprivate _lastReplayRequestTime: number;\n\tprivate _lastSocketTimeoutTime: number;\n\n\tprivate _socket: ISocket;\n\tprivate _socketWriter: ProtocolWriter;\n\tprivate _socketReader: ProtocolReader;\n\t// eslint-disable-next-line local/code-no-potentially-unsafe-disposables\n\tprivate _socketDisposables: DisposableStore;\n\n\tprivate readonly _loadEstimator: ILoadEstimator;\n\tprivate readonly _shouldSendKeepAlive: boolean;\n\n\tprivate readonly _onControlMessage = new BufferedEmitter<VSBuffer>();\n\treadonly onControlMessage: Event<VSBuffer> = this._onControlMessage.event;\n\n\tprivate readonly _onMessage = new BufferedEmitter<VSBuffer>();\n\treadonly onMessage: Event<VSBuffer> = this._onMessage.event;\n\n\tprivate readonly _onDidDispose = new BufferedEmitter<void>();\n\treadonly onDidDispose: Event<void> = this._onDidDispose.event;\n\n\tprivate readonly _onSocketClose = new BufferedEmitter<SocketCloseEvent>();\n\treadonly onSocketClose: Event<SocketCloseEvent> = this._onSocketClose.event;\n\n\tprivate readonly _onSocketTimeout = new BufferedEmitter<SocketTimeoutEvent>();\n\treadonly onSocketTimeout: Event<SocketTimeoutEvent> = this._onSocketTimeout.event;\n\n\tpublic get unacknowledgedCount(): number {\n\t\treturn this._outgoingMsgId - this._outgoingAckId;\n\t}\n\n\tconstructor(opts: PersistentProtocolOptions) {\n\t\tthis._loadEstimator = opts.loadEstimator ?? LoadEstimator.getInstance();\n\t\tthis._shouldSendKeepAlive = opts.sendKeepAlive ?? true;\n\t\tthis._isReconnecting = false;\n\t\tthis._outgoingUnackMsg = new Queue<ProtocolMessage>();\n\t\tthis._outgoingMsgId = 0;\n\t\tthis._outgoingAckId = 0;\n\t\tthis._outgoingAckTimeout = null;\n\n\t\tthis._incomingMsgId = 0;\n\t\tthis._incomingAckId = 0;\n\t\tthis._incomingMsgLastTime = 0;\n\t\tthis._incomingAckTimeout = null;\n\n\t\tthis._lastReplayRequestTime = 0;\n\t\tthis._lastSocketTimeoutTime = Date.now();\n\n\t\tthis._socketDisposables = new DisposableStore();\n\t\tthis._socket = opts.socket;\n\t\tthis._socketWriter = this._socketDisposables.add(new ProtocolWriter(this._socket));\n\t\tthis._socketReader = this._socketDisposables.add(new ProtocolReader(this._socket));\n\t\tthis._socketDisposables.add(this._socketReader.onMessage(msg => this._receiveMessage(msg)));\n\t\tthis._socketDisposables.add(this._socket.onClose(e => this._onSocketClose.fire(e)));\n\n\t\tif (opts.initialChunk) {\n\t\t\tthis._socketReader.acceptChunk(opts.initialChunk);\n\t\t}\n\n\t\tif (this._shouldSendKeepAlive) {\n\t\t\tthis._keepAliveInterval = setInterval(() => {\n\t\t\t\tthis._sendKeepAlive();\n\t\t\t}, ProtocolConstants.KeepAliveSendTime);\n\t\t} else {\n\t\t\tthis._keepAliveInterval = null;\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tif (this._outgoingAckTimeout) {\n\t\t\tclearTimeout(this._outgoingAckTimeout);\n\t\t\tthis._outgoingAckTimeout = null;\n\t\t}\n\t\tif (this._incomingAckTimeout) {\n\t\t\tclearTimeout(this._incomingAckTimeout);\n\t\t\tthis._incomingAckTimeout = null;\n\t\t}\n\t\tif (this._keepAliveInterval) {\n\t\t\tclearInterval(this._keepAliveInterval);\n\t\t\tthis._keepAliveInterval = null;\n\t\t}\n\t\tthis._socketDisposables.dispose();\n\t}\n\n\tdrain(): Promise<void> {\n\t\treturn this._socketWriter.drain();\n\t}\n\n\tsendDisconnect(): void {\n\t\tif (!this._didSendDisconnect) {\n\t\t\tthis._didSendDisconnect = true;\n\t\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Disconnect, 0, 0, getEmptyBuffer());\n\t\t\tthis._socketWriter.write(msg);\n\t\t\tthis._socketWriter.flush();\n\t\t}\n\t}\n\n\tsendPause(): void {\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Pause, 0, 0, getEmptyBuffer());\n\t\tthis._socketWriter.write(msg);\n\t}\n\n\tsendResume(): void {\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Resume, 0, 0, getEmptyBuffer());\n\t\tthis._socketWriter.write(msg);\n\t}\n\n\tpauseSocketWriting() {\n\t\tthis._socketWriter.pause();\n\t}\n\n\tpublic getSocket(): ISocket {\n\t\treturn this._socket;\n\t}\n\n\tpublic getMillisSinceLastIncomingData(): number {\n\t\treturn Date.now() - this._socketReader.lastReadTime;\n\t}\n\n\tpublic beginAcceptReconnection(socket: ISocket, initialDataChunk: VSBuffer | null): void {\n\t\tthis._isReconnecting = true;\n\n\t\tthis._socketDisposables.dispose();\n\t\tthis._socketDisposables = new DisposableStore();\n\t\tthis._onControlMessage.flushBuffer();\n\t\tthis._onSocketClose.flushBuffer();\n\t\tthis._onSocketTimeout.flushBuffer();\n\t\tthis._socket.dispose();\n\n\t\tthis._lastReplayRequestTime = 0;\n\t\tthis._lastSocketTimeoutTime = Date.now();\n\n\t\tthis._socket = socket;\n\t\tthis._socketWriter = this._socketDisposables.add(new ProtocolWriter(this._socket));\n\t\tthis._socketReader = this._socketDisposables.add(new ProtocolReader(this._socket));\n\t\tthis._socketDisposables.add(this._socketReader.onMessage(msg => this._receiveMessage(msg)));\n\t\tthis._socketDisposables.add(this._socket.onClose(e => this._onSocketClose.fire(e)));\n\n\t\tthis._socketReader.acceptChunk(initialDataChunk);\n\t}\n\n\tpublic endAcceptReconnection(): void {\n\t\tthis._isReconnecting = false;\n\n\t\t// After a reconnection, let the other party know (again) which messages have been received.\n\t\t// (perhaps the other party didn't receive a previous ACK)\n\t\tthis._incomingAckId = this._incomingMsgId;\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Ack, 0, this._incomingAckId, getEmptyBuffer());\n\t\tthis._socketWriter.write(msg);\n\n\t\t// Send again all unacknowledged messages\n\t\tconst toSend = this._outgoingUnackMsg.toArray();\n\t\tfor (let i = 0, len = toSend.length; i < len; i++) {\n\t\t\tthis._socketWriter.write(toSend[i]);\n\t\t}\n\t\tthis._recvAckCheck();\n\t}\n\n\tpublic acceptDisconnect(): void {\n\t\tthis._onDidDispose.fire();\n\t}\n\n\tprivate _receiveMessage(msg: ProtocolMessage): void {\n\t\tif (msg.ack > this._outgoingAckId) {\n\t\t\tthis._outgoingAckId = msg.ack;\n\t\t\tdo {\n\t\t\t\tconst first = this._outgoingUnackMsg.peek();\n\t\t\t\tif (first && first.id <= msg.ack) {\n\t\t\t\t\t// this message has been confirmed, remove it\n\t\t\t\t\tthis._outgoingUnackMsg.pop();\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} while (true);\n\t\t}\n\n\t\tswitch (msg.type) {\n\t\t\tcase ProtocolMessageType.None: {\n\t\t\t\t// N/A\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.Regular: {\n\t\t\t\tif (msg.id > this._incomingMsgId) {\n\t\t\t\t\tif (msg.id !== this._incomingMsgId + 1) {\n\t\t\t\t\t\t// in case we missed some messages we ask the other party to resend them\n\t\t\t\t\t\tconst now = Date.now();\n\t\t\t\t\t\tif (now - this._lastReplayRequestTime > 10000) {\n\t\t\t\t\t\t\t// send a replay request at most once every 10s\n\t\t\t\t\t\t\tthis._lastReplayRequestTime = now;\n\t\t\t\t\t\t\tthis._socketWriter.write(new ProtocolMessage(ProtocolMessageType.ReplayRequest, 0, 0, getEmptyBuffer()));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._incomingMsgId = msg.id;\n\t\t\t\t\t\tthis._incomingMsgLastTime = Date.now();\n\t\t\t\t\t\tthis._sendAckCheck();\n\t\t\t\t\t\tthis._onMessage.fire(msg.data);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.Control: {\n\t\t\t\tthis._onControlMessage.fire(msg.data);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.Ack: {\n\t\t\t\t// nothing to do, .ack is handled above already\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.Disconnect: {\n\t\t\t\tthis._onDidDispose.fire();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.ReplayRequest: {\n\t\t\t\t// Send again all unacknowledged messages\n\t\t\t\tconst toSend = this._outgoingUnackMsg.toArray();\n\t\t\t\tfor (let i = 0, len = toSend.length; i < len; i++) {\n\t\t\t\t\tthis._socketWriter.write(toSend[i]);\n\t\t\t\t}\n\t\t\t\tthis._recvAckCheck();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.Pause: {\n\t\t\t\tthis._socketWriter.pause();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.Resume: {\n\t\t\t\tthis._socketWriter.resume();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ProtocolMessageType.KeepAlive: {\n\t\t\t\t// nothing to do\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treadEntireBuffer(): VSBuffer {\n\t\treturn this._socketReader.readEntireBuffer();\n\t}\n\n\tflush(): void {\n\t\tthis._socketWriter.flush();\n\t}\n\n\tsend(buffer: VSBuffer): void {\n\t\tconst myId = ++this._outgoingMsgId;\n\t\tthis._incomingAckId = this._incomingMsgId;\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Regular, myId, this._incomingAckId, buffer);\n\t\tthis._outgoingUnackMsg.push(msg);\n\t\tif (!this._isReconnecting) {\n\t\t\tthis._socketWriter.write(msg);\n\t\t\tthis._recvAckCheck();\n\t\t}\n\t}\n\n\t/**\n\t * Send a message which will not be part of the regular acknowledge flow.\n\t * Use this for early control messages which are repeated in case of reconnection.\n\t */\n\tsendControl(buffer: VSBuffer): void {\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Control, 0, 0, buffer);\n\t\tthis._socketWriter.write(msg);\n\t}\n\n\tprivate _sendAckCheck(): void {\n\t\tif (this._incomingMsgId <= this._incomingAckId) {\n\t\t\t// nothink to acknowledge\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._incomingAckTimeout) {\n\t\t\t// there will be a check in the near future\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeSinceLastIncomingMsg = Date.now() - this._incomingMsgLastTime;\n\t\tif (timeSinceLastIncomingMsg >= ProtocolConstants.AcknowledgeTime) {\n\t\t\t// sufficient time has passed since this message has been received,\n\t\t\t// and no message from our side needed to be sent in the meantime,\n\t\t\t// so we will send a message containing only an ack.\n\t\t\tthis._sendAck();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._incomingAckTimeout = setTimeout(() => {\n\t\t\tthis._incomingAckTimeout = null;\n\t\t\tthis._sendAckCheck();\n\t\t}, ProtocolConstants.AcknowledgeTime - timeSinceLastIncomingMsg + 5);\n\t}\n\n\tprivate _recvAckCheck(): void {\n\t\tif (this._outgoingMsgId <= this._outgoingAckId) {\n\t\t\t// everything has been acknowledged\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._outgoingAckTimeout) {\n\t\t\t// there will be a check in the near future\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isReconnecting) {\n\t\t\t// do not cause a timeout during reconnection,\n\t\t\t// because messages will not be actually written until `endAcceptReconnection`\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldestUnacknowledgedMsg = this._outgoingUnackMsg.peek()!;\n\t\tconst timeSinceOldestUnacknowledgedMsg = Date.now() - oldestUnacknowledgedMsg.writtenTime;\n\t\tconst timeSinceLastReceivedSomeData = Date.now() - this._socketReader.lastReadTime;\n\t\tconst timeSinceLastTimeout = Date.now() - this._lastSocketTimeoutTime;\n\n\t\tif (\n\t\t\ttimeSinceOldestUnacknowledgedMsg >= ProtocolConstants.TimeoutTime\n\t\t\t&& timeSinceLastReceivedSomeData >= ProtocolConstants.TimeoutTime\n\t\t\t&& timeSinceLastTimeout >= ProtocolConstants.TimeoutTime\n\t\t) {\n\t\t\t// It's been a long time since our sent message was acknowledged\n\t\t\t// and a long time since we received some data\n\n\t\t\t// But this might be caused by the event loop being busy and failing to read messages\n\t\t\tif (!this._loadEstimator.hasHighLoad()) {\n\t\t\t\t// Trash the socket\n\t\t\t\tthis._lastSocketTimeoutTime = Date.now();\n\t\t\t\tthis._onSocketTimeout.fire({\n\t\t\t\t\tunacknowledgedMsgCount: this._outgoingUnackMsg.length(),\n\t\t\t\t\ttimeSinceOldestUnacknowledgedMsg,\n\t\t\t\t\ttimeSinceLastReceivedSomeData\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst minimumTimeUntilTimeout = Math.max(\n\t\t\tProtocolConstants.TimeoutTime - timeSinceOldestUnacknowledgedMsg,\n\t\t\tProtocolConstants.TimeoutTime - timeSinceLastReceivedSomeData,\n\t\t\tProtocolConstants.TimeoutTime - timeSinceLastTimeout,\n\t\t\t500\n\t\t);\n\n\t\tthis._outgoingAckTimeout = setTimeout(() => {\n\t\t\tthis._outgoingAckTimeout = null;\n\t\t\tthis._recvAckCheck();\n\t\t}, minimumTimeUntilTimeout);\n\t}\n\n\tprivate _sendAck(): void {\n\t\tif (this._incomingMsgId <= this._incomingAckId) {\n\t\t\t// nothink to acknowledge\n\t\t\treturn;\n\t\t}\n\n\t\tthis._incomingAckId = this._incomingMsgId;\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.Ack, 0, this._incomingAckId, getEmptyBuffer());\n\t\tthis._socketWriter.write(msg);\n\t}\n\n\tprivate _sendKeepAlive(): void {\n\t\tthis._incomingAckId = this._incomingMsgId;\n\t\tconst msg = new ProtocolMessage(ProtocolMessageType.KeepAlive, 0, this._incomingAckId, getEmptyBuffer());\n\t\tthis._socketWriter.write(msg);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}