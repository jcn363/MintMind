{"version":3,"names":["cov_1h8nyfscno","actualCoverage","DisposableStore","DisposableTracker","setDisposableTracker","join","isWindows","URI","toResource","path","f","s","b","file","btoa","test","fullTitle","suiteRepeat","n","description","callback","i","suite","testRepeat","assertThrowsAsync","block","message","err","Error","ensureNoDisposablesAreLeakedInTestSuite","tracker","store","setup","teardown","dispose","currentTest","state","result","computeLeakingDisposables","console","error","details","leaks","length","testContext","add","o","throwIfDisposablesAreLeaked","body","logToConsole","throwIfDisposablesAreLeakedAsync"],"sources":["/home/user/Desktop/MintMind/src/vs/base/test/common/utils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore, DisposableTracker, IDisposable, setDisposableTracker } from '../../common/lifecycle.js';\nimport { join } from '../../common/path.js';\nimport { isWindows } from '../../common/platform.js';\nimport { URI } from '../../common/uri.js';\n\nexport type ValueCallback<T = any> = (value: T | Promise<T>) => void;\n\nexport function toResource(this: any, path: string): URI {\n\tif (isWindows) {\n\t\treturn URI.file(join('C:\\\\', btoa(this.test.fullTitle()), path));\n\t}\n\n\treturn URI.file(join('/', btoa(this.test.fullTitle()), path));\n}\n\nexport function suiteRepeat(n: number, description: string, callback: (this: any) => void): void {\n\tfor (let i = 0; i < n; i++) {\n\t\tsuite(`${description} (iteration ${i})`, callback);\n\t}\n}\n\nexport function testRepeat(n: number, description: string, callback: (this: any) => any): void {\n\tfor (let i = 0; i < n; i++) {\n\t\ttest(`${description} (iteration ${i})`, callback);\n\t}\n}\n\nexport async function assertThrowsAsync(block: () => any, message: string | Error = 'Missing expected exception'): Promise<void> {\n\ttry {\n\t\tawait block();\n\t} catch {\n\t\treturn;\n\t}\n\n\tconst err = message instanceof Error ? message : new Error(message);\n\tthrow err;\n}\n\n/**\n * Use this function to ensure that all disposables are cleaned up at the end of each test in the current suite.\n *\n * Use `markAsSingleton` if disposable singletons are created lazily that are allowed to outlive the test.\n * Make sure that the singleton properly registers all child disposables so that they are excluded too.\n *\n * @returns A {@link DisposableStore} that can optionally be used to track disposables in the test.\n * This will be automatically disposed on test teardown.\n*/\nexport function ensureNoDisposablesAreLeakedInTestSuite(): Pick<DisposableStore, 'add'> {\n\tlet tracker: DisposableTracker | undefined;\n\tlet store: DisposableStore;\n\tsetup(() => {\n\t\tstore = new DisposableStore();\n\t\ttracker = new DisposableTracker();\n\t\tsetDisposableTracker(tracker);\n\t});\n\n\tteardown(function (this: import('mocha').Context) {\n\t\tstore.dispose();\n\t\tsetDisposableTracker(null);\n\t\tif (this.currentTest?.state !== 'failed') {\n\t\t\tconst result = tracker!.computeLeakingDisposables();\n\t\t\tif (result) {\n\t\t\t\tconsole.error(result.details);\n\t\t\t\tthrow new Error(`There are ${result.leaks.length} undisposed disposables!${result.details}`);\n\t\t\t}\n\t\t}\n\t});\n\n\t// Wrap store as the suite function is called before it's initialized\n\tconst testContext = {\n\t\tadd<T extends IDisposable>(o: T): T {\n\t\t\treturn store.add(o);\n\t\t}\n\t};\n\treturn testContext;\n}\n\nexport function throwIfDisposablesAreLeaked(body: () => void, logToConsole = true): void {\n\tconst tracker = new DisposableTracker();\n\tsetDisposableTracker(tracker);\n\tbody();\n\tsetDisposableTracker(null);\n\tcomputeLeakingDisposables(tracker, logToConsole);\n}\n\nexport async function throwIfDisposablesAreLeakedAsync(body: () => Promise<void>): Promise<void> {\n\tconst tracker = new DisposableTracker();\n\tsetDisposableTracker(tracker);\n\tawait body();\n\tsetDisposableTracker(null);\n\tcomputeLeakingDisposables(tracker);\n}\n\nfunction computeLeakingDisposables(tracker: DisposableTracker, logToConsole = true) {\n\tconst result = tracker.computeLeakingDisposables();\n\tif (result) {\n\t\tif (logToConsole) {\n\t\t\tconsole.error(result.details);\n\t\t}\n\t\tthrow new Error(`There are ${result.leaks.length} undisposed disposables!${result.details}`);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}