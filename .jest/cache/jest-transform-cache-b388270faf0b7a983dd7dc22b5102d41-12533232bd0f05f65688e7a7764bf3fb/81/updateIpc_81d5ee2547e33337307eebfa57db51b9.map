{"version":3,"names":["cov_16owk4wyd0","actualCoverage","Emitter","DisposableStore","State","UpdateChannel","service","constructor","f","s","listen","_","event","b","onStateChange","Error","call","command","arg","checkForUpdates","downloadUpdate","applyUpdate","quitAndInstall","Promise","resolve","state","isLatestVersion","_applySpecificUpdate","UpdateChannelClient","channel","disposables","_onStateChange","_state","Uninitialized","fire","add","then","explicit","packagePath","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/update/common/updateIpc.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { IChannel, IServerChannel } from '../../../base/parts/ipc/common/ipc.js';\nimport { IUpdateService, State } from './update.js';\n\nexport class UpdateChannel implements IServerChannel {\n\n\tconstructor(private service: IUpdateService) { }\n\n\tlisten(_: unknown, event: string): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onStateChange': return this.service.onStateChange;\n\t\t}\n\n\t\tthrow new Error(`Event not found: ${event}`);\n\t}\n\n\tcall(_: unknown, command: string, arg?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase 'checkForUpdates': return this.service.checkForUpdates(arg);\n\t\t\tcase 'downloadUpdate': return this.service.downloadUpdate();\n\t\t\tcase 'applyUpdate': return this.service.applyUpdate();\n\t\t\tcase 'quitAndInstall': return this.service.quitAndInstall();\n\t\t\tcase '_getInitialState': return Promise.resolve(this.service.state);\n\t\t\tcase 'isLatestVersion': return this.service.isLatestVersion();\n\t\t\tcase '_applySpecificUpdate': return this.service._applySpecificUpdate(arg);\n\t\t}\n\n\t\tthrow new Error(`Call not found: ${command}`);\n\t}\n}\n\nexport class UpdateChannelClient implements IUpdateService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\tprivate readonly disposables = new DisposableStore();\n\n\tprivate readonly _onStateChange = new Emitter<State>();\n\treadonly onStateChange: Event<State> = this._onStateChange.event;\n\n\tprivate _state: State = State.Uninitialized;\n\tget state(): State { return this._state; }\n\tset state(state: State) {\n\t\tthis._state = state;\n\t\tthis._onStateChange.fire(state);\n\t}\n\n\tconstructor(private readonly channel: IChannel) {\n\t\tthis.disposables.add(this.channel.listen<State>('onStateChange')(state => this.state = state));\n\t\tthis.channel.call<State>('_getInitialState').then(state => this.state = state);\n\t}\n\n\tcheckForUpdates(explicit: boolean): Promise<void> {\n\t\treturn this.channel.call('checkForUpdates', explicit);\n\t}\n\n\tdownloadUpdate(): Promise<void> {\n\t\treturn this.channel.call('downloadUpdate');\n\t}\n\n\tapplyUpdate(): Promise<void> {\n\t\treturn this.channel.call('applyUpdate');\n\t}\n\n\tquitAndInstall(): Promise<void> {\n\t\treturn this.channel.call('quitAndInstall');\n\t}\n\n\tisLatestVersion(): Promise<boolean | undefined> {\n\t\treturn this.channel.call('isLatestVersion');\n\t}\n\n\t_applySpecificUpdate(packagePath: string): Promise<void> {\n\t\treturn this.channel.call('_applySpecificUpdate', packagePath);\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}