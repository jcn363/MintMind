{"version":3,"names":["cov_bzh8p3fok","actualCoverage","h","structuralEquals","Disposable","autorun","constObservable","derivedObservableWithCache","derivedOpts","derived","observableCodeEditor","PlaceholderTextContribution","_editor","get","editor","f","s","getContribution","ID","_editorObs","_placeholderText","_state","_shouldViewBeAlive","_view","constructor","getOption","owner","equalsFn","reader","p","read","b","undefined","valueIsEmpty","placeholder","isOrWasTrue","element","store","add","data","shouldBeVisibile","root","style","display","innerText","info","layoutInfo","left","contentLeft","width","contentWidth","verticalScrollbarWidth","top","getTopForLineNumber","fontFamily","fontSize","lineHeight","createOverlayWidget","allowEditorOverflow","minContentWidthInPx","position","domNode","recomputeInitiallyAndOnChange","_store","fn","lastValue"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/placeholderText/browser/placeholderTextContribution.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { h } from '../../../../base/browser/dom.js';\nimport { structuralEquals } from '../../../../base/common/equals.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, constObservable, DebugOwner, derivedObservableWithCache, derivedOpts, derived, IObservable, IReader } from '../../../../base/common/observable.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { observableCodeEditor } from '../../../browser/observableCodeEditor.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IEditorContribution } from '../../../common/editorCommon.js';\n\n/**\n * Use the editor option to set the placeholder text.\n*/\nexport class PlaceholderTextContribution extends Disposable implements IEditorContribution {\n\tpublic static get(editor: ICodeEditor): PlaceholderTextContribution {\n\t\treturn editor.getContribution<PlaceholderTextContribution>(PlaceholderTextContribution.ID)!;\n\t}\n\n\tpublic static readonly ID = 'editor.contrib.placeholderText';\n\tprivate readonly _editorObs;\n\n\tprivate readonly _placeholderText;\n\n\tprivate readonly _state;\n\n\tprivate readonly _shouldViewBeAlive;\n\n\tprivate readonly _view;\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t) {\n\t\tsuper();\n\t\tthis._editorObs = observableCodeEditor(this._editor);\n\t\tthis._placeholderText = this._editorObs.getOption(EditorOption.placeholder);\n\t\tthis._state = derivedOpts<{ placeholder: string } | undefined>({ owner: this, equalsFn: structuralEquals }, reader => {\n\t\t\tconst p = this._placeholderText.read(reader);\n\t\t\tif (!p) { return undefined; }\n\t\t\tif (!this._editorObs.valueIsEmpty.read(reader)) { return undefined; }\n\t\t\treturn { placeholder: p };\n\t\t});\n\t\tthis._shouldViewBeAlive = isOrWasTrue(this, reader => this._state.read(reader)?.placeholder !== undefined);\n\t\tthis._view = derived((reader) => {\n\t\t\tif (!this._shouldViewBeAlive.read(reader)) { return; }\n\n\t\t\tconst element = h('div.editorPlaceholder');\n\n\t\t\treader.store.add(autorun(reader => {\n\t\t\t\tconst data = this._state.read(reader);\n\t\t\t\tconst shouldBeVisibile = data?.placeholder !== undefined;\n\t\t\t\telement.root.style.display = shouldBeVisibile ? 'block' : 'none';\n\t\t\t\telement.root.innerText = data?.placeholder ?? '';\n\t\t\t}));\n\t\t\treader.store.add(autorun(reader => {\n\t\t\t\tconst info = this._editorObs.layoutInfo.read(reader);\n\t\t\t\telement.root.style.left = `${info.contentLeft}px`;\n\t\t\t\telement.root.style.width = (info.contentWidth - info.verticalScrollbarWidth) + 'px';\n\t\t\t\telement.root.style.top = `${this._editor.getTopForLineNumber(0)}px`;\n\t\t\t}));\n\t\t\treader.store.add(autorun(reader => {\n\t\t\t\telement.root.style.fontFamily = this._editorObs.getOption(EditorOption.fontFamily).read(reader);\n\t\t\t\telement.root.style.fontSize = this._editorObs.getOption(EditorOption.fontSize).read(reader) + 'px';\n\t\t\t\telement.root.style.lineHeight = this._editorObs.getOption(EditorOption.lineHeight).read(reader) + 'px';\n\t\t\t}));\n\t\t\treader.store.add(this._editorObs.createOverlayWidget({\n\t\t\t\tallowEditorOverflow: false,\n\t\t\t\tminContentWidthInPx: constObservable(0),\n\t\t\t\tposition: constObservable(null),\n\t\t\t\tdomNode: element.root,\n\t\t\t}));\n\t\t});\n\t\tthis._view.recomputeInitiallyAndOnChange(this._store);\n\t}\n}\n\nfunction isOrWasTrue(owner: DebugOwner, fn: (reader: IReader) => boolean): IObservable<boolean> {\n\treturn derivedObservableWithCache<boolean>(owner, (reader, lastValue) => {\n\t\tif (lastValue === true) { return true; }\n\t\treturn fn(reader);\n\t});\n}\n"],"mappings":"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","ignoreList":[]}