{"version":3,"names":["cov_1ia6svphp5","actualCoverage","URI","URLHandlerChannel","handler","constructor","f","s","listen","_","event","Error","call","command","arg","b","handleURL","revive","URLHandlerChannelClient","channel","uri","options","toJSON","URLHandlerRouter","next","logService","routeCall","hub","cancellationToken","Array","isArray","length","trace","toString","query","match","exec","windowId","regex","RegExp","connection","connections","find","c","ctx","test","routeEvent"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/url/common/urlIpc.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Client, IChannel, IClientRouter, IConnectionHub, IServerChannel } from '../../../base/parts/ipc/common/ipc.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IOpenURLOptions, IURLHandler } from './url.js';\n\nexport class URLHandlerChannel implements IServerChannel {\n\n\tconstructor(private handler: IURLHandler) { }\n\n\tlisten<T>(_: unknown, event: string): Event<T> {\n\t\tthrow new Error(`Event not found: ${event}`);\n\t}\n\n\tcall(_: unknown, command: string, arg?: any): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase 'handleURL': return this.handler.handleURL(URI.revive(arg[0]), arg[1]);\n\t\t}\n\n\t\tthrow new Error(`Call not found: ${command}`);\n\t}\n}\n\nexport class URLHandlerChannelClient implements IURLHandler {\n\n\tconstructor(private channel: IChannel) { }\n\n\thandleURL(uri: URI, options?: IOpenURLOptions): Promise<boolean> {\n\t\treturn this.channel.call('handleURL', [uri.toJSON(), options]);\n\t}\n}\n\nexport class URLHandlerRouter implements IClientRouter<string> {\n\n\tconstructor(\n\t\tprivate next: IClientRouter<string>,\n\t\tprivate readonly logService: ILogService\n\t) { }\n\n\tasync routeCall(hub: IConnectionHub<string>, command: string, arg?: any, cancellationToken?: CancellationToken): Promise<Client<string>> {\n\t\tif (command !== 'handleURL') {\n\t\t\tthrow new Error(`Call not found: ${command}`);\n\t\t}\n\n\t\tif (Array.isArray(arg) && arg.length > 0) {\n\t\t\tconst uri = URI.revive(arg[0]);\n\n\t\t\tthis.logService.trace('URLHandlerRouter#routeCall() with URI argument', uri.toString(true));\n\n\t\t\tif (uri.query) {\n\t\t\t\tconst match = /\\bwindowId=(\\d+)/.exec(uri.query);\n\n\t\t\t\tif (match) {\n\t\t\t\t\tconst windowId = match[1];\n\n\t\t\t\t\tthis.logService.trace(`URLHandlerRouter#routeCall(): found windowId query parameter with value \"${windowId}\"`, uri.toString(true));\n\n\t\t\t\t\tconst regex = new RegExp(`window:${windowId}`);\n\t\t\t\t\tconst connection = hub.connections.find(c => {\n\t\t\t\t\t\tthis.logService.trace('URLHandlerRouter#routeCall(): testing connection', c.ctx);\n\n\t\t\t\t\t\treturn regex.test(c.ctx);\n\t\t\t\t\t});\n\t\t\t\t\tif (connection) {\n\t\t\t\t\t\tthis.logService.trace('URLHandlerRouter#routeCall(): found a connection to route', uri.toString(true));\n\n\t\t\t\t\t\treturn connection;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.logService.trace('URLHandlerRouter#routeCall(): did not find a connection to route', uri.toString(true));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.logService.trace('URLHandlerRouter#routeCall(): did not find windowId query parameter', uri.toString(true));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.logService.trace('URLHandlerRouter#routeCall() without URI argument');\n\t\t}\n\n\t\treturn this.next.routeCall(hub, command, arg, cancellationToken);\n\t}\n\n\trouteEvent(_: IConnectionHub<string>, event: string): Promise<Client<string>> {\n\t\tthrow new Error(`Event not found: ${event}`);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}