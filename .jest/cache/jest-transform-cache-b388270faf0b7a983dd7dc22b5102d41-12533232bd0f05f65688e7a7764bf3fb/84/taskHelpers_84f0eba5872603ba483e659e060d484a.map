{"version":3,"names":["cov_6j2bws2c","actualCoverage","MarkdownString","URI","Range","getOutput","OutputMonitor","OutputMonitorState","Event","getTaskDefinition","id","f","idx","s","indexOf","taskType","substring","taskLabel","b","test","getTaskRepresentation","task","label","script","command","name","toString","getTaskForTool","taskDefinition","workspaceFolder","configurationService","taskService","allowParentTask","index","workspaceFolderToTaskMap","getWorkspaceTasks","configTasks","folder","keys","tasksConfig","getValue","resource","parse","tasks","concat","configTask","type","hide","tasksForWorkspace","workspaceFolderPath","file","path","configuringTasks","configurations","byIdentifier","configuredTask","Object","values","find","t","_label","resolvedTask","tryResolveTask","customTasks","set","resolveDependencyTasks","parentTask","configurationProperties","dependsOn","undefined","dependencyTasks","Promise","all","map","dep","depId","_key","filter","collectTerminalResults","terminals","instantiationService","invocationContext","progress","token","disposableStore","isActive","results","isCancellationRequested","commonTaskIdToTaskMap","taskIdToTaskMap","taskLabelToTaskMap","dependencyTask","getCommonTaskId","_id","instance","report","message","shellLaunchConfig","terminalTask","length","reconnectionData","reconnectionProperties","data","lastTask","title","execution","sessionId","outputMonitor","add","createInstance","taskProblemPollFn","toPromise","onDidFinishCommand","pollingResult","push","output","pollDurationMs","resources","state","Idle","inputToolManualAcceptCount","outputMonitorTelemetryCounters","inputToolManualRejectCount","inputToolManualChars","inputToolAutoAcceptCount","inputToolAutoChars","inputToolManualShownCount","inputToolFreeFormInputShownCount","inputToolFreeFormInputCount","getTaskProblems","instanceId","problemList","resultResources","owner","markers","entries","i","uri","marker","range","startLineNumber","startColumn","endLineNumber","endColumn","fsPath","lastTenLines","split","line","slice","join","Error"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/chatAgentTools/browser/taskHelpers.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { IStringDictionary } from '../../../../../base/common/collections.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerData } from '../../../../../platform/markers/common/markers.js';\nimport { IToolInvocationContext, ToolProgress } from '../../../chat/common/languageModelToolsService.js';\nimport { ConfiguringTask, ITaskDependency, Task } from '../../../tasks/common/tasks.js';\nimport { ITaskService } from '../../../tasks/common/taskService.js';\nimport { ITerminalInstance } from '../../../terminal/browser/terminal.js';\nimport { getOutput } from './outputHelpers.js';\nimport { OutputMonitor } from './tools/monitoring/outputMonitor.js';\nimport { IExecution, IPollingResult, OutputMonitorState } from './tools/monitoring/types.js';\nimport { Event } from '../../../../../base/common/event.js';\nimport { IReconnectionTaskData } from '../../../tasks/browser/terminalTaskSystem.js';\n\n\nexport function getTaskDefinition(id: string) {\n\tconst idx = id.indexOf(': ');\n\tconst taskType = id.substring(0, idx);\n\tlet taskLabel = idx > 0 ? id.substring(idx + 2) : id;\n\n\tif (/^\\d+$/.test(taskLabel)) {\n\t\ttaskLabel = id;\n\t}\n\n\treturn { taskLabel, taskType };\n\n}\n\nexport function getTaskRepresentation(task: IConfiguredTask | Task): string {\n\tif ('label' in task && task.label) {\n\t\treturn task.label;\n\t} else if ('script' in task && task.script) {\n\t\treturn task.script;\n\t} else if ('command' in task && task.command) {\n\t\treturn typeof task.command === 'string' ? task.command : task.command.name?.toString() || '';\n\t}\n\treturn '';\n}\n\nexport async function getTaskForTool(id: string | undefined, taskDefinition: { taskLabel?: string; taskType?: string }, workspaceFolder: string, configurationService: IConfigurationService, taskService: ITaskService, allowParentTask?: boolean): Promise<Task | undefined> {\n\tlet index = 0;\n\tlet task: IConfiguredTask | undefined;\n\tconst workspaceFolderToTaskMap = await taskService.getWorkspaceTasks();\n\tlet configTasks: IConfiguredTask[] = [];\n\tfor (const folder of workspaceFolderToTaskMap.keys()) {\n\t\tconst tasksConfig = configurationService.getValue('tasks', { resource: URI.parse(folder) }) as { tasks: IConfiguredTask[] } | undefined;\n\t\tif (tasksConfig?.tasks) {\n\t\t\tconfigTasks = configTasks.concat(tasksConfig.tasks);\n\t\t}\n\t}\n\tfor (const configTask of configTasks) {\n\t\tif ((!allowParentTask && !configTask.type) || ('hide' in configTask && configTask.hide)) {\n\t\t\t// Skip these as they are not included in the agent prompt and we need to align with\n\t\t\t// the indices used there.\n\t\t\tcontinue;\n\t\t}\n\n\t\tif ((configTask.type && taskDefinition.taskType ? configTask.type === taskDefinition.taskType : true) &&\n\t\t\t((getTaskRepresentation(configTask) === taskDefinition?.taskLabel) || (id === configTask.label))) {\n\t\t\ttask = configTask;\n\t\t\tbreak;\n\t\t} else if (!configTask.label && id === `${configTask.type}: ${index}`) {\n\t\t\ttask = configTask;\n\t\t\tbreak;\n\t\t}\n\t\tindex++;\n\t}\n\tif (!task) {\n\t\treturn;\n\t}\n\n\tlet tasksForWorkspace;\n\tconst workspaceFolderPath = URI.file(workspaceFolder).path;\n\tfor (const [folder, tasks] of workspaceFolderToTaskMap) {\n\t\tif (URI.parse(folder).path === workspaceFolderPath) {\n\t\t\ttasksForWorkspace = tasks;\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (!tasksForWorkspace) {\n\t\treturn;\n\t}\n\tconst configuringTasks: IStringDictionary<ConfiguringTask> | undefined = tasksForWorkspace.configurations?.byIdentifier;\n\tconst configuredTask: ConfiguringTask | undefined = Object.values(configuringTasks ?? {}).find(t => {\n\t\treturn t.type === task.type && (t._label === task.label || t._label === `${task.type}: ${getTaskRepresentation(task)}` || t._label === getTaskRepresentation(task));\n\t});\n\tlet resolvedTask: Task | undefined;\n\tif (configuredTask) {\n\t\tresolvedTask = await taskService.tryResolveTask(configuredTask);\n\t}\n\tif (!resolvedTask) {\n\t\tconst customTasks: Task[] | undefined = tasksForWorkspace.set?.tasks;\n\t\tresolvedTask = customTasks?.find(t => task.label === t._label || task.label === t._label);\n\t}\n\treturn resolvedTask;\n}\n\n/**\n * Represents a configured task in the system.\n *\n * This interface is used to define tasks that can be executed within the workspace.\n * It includes optional properties for identifying and describing the task.\n *\n * Properties:\n * - `type`: (optional) The type of the task, which categorizes it (e.g., \"build\", \"test\").\n * - `label`: (optional) A user-facing label for the task, typically used for display purposes.\n * - `script`: (optional) A script associated with the task, if applicable.\n * - `command`: (optional) A command associated with the task, if applicable.\n *\n */\nexport interface IConfiguredTask {\n\tlabel?: string;\n\ttype?: string;\n\tscript?: string;\n\tcommand?: string;\n\targs?: string[];\n\tisBackground?: boolean;\n\tproblemMatcher?: string[];\n\tgroup?: string;\n}\n\nexport async function resolveDependencyTasks(parentTask: Task, workspaceFolder: string, configurationService: IConfigurationService, taskService: ITaskService): Promise<Task[] | undefined> {\n\tif (!parentTask.configurationProperties?.dependsOn) {\n\t\treturn undefined;\n\t}\n\tconst dependencyTasks = await Promise.all(parentTask.configurationProperties.dependsOn.map(async (dep: ITaskDependency) => {\n\t\tconst depId: string | undefined = typeof dep.task === 'string' ? dep.task : dep.task?._key;\n\t\tif (!depId) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn await getTaskForTool(depId, { taskLabel: depId }, workspaceFolder, configurationService, taskService);\n\t}));\n\treturn dependencyTasks.filter((t: Task | undefined): t is Task => t !== undefined);\n}\n\n/**\n * Collects output, polling duration, and idle status for all terminals.\n */\nexport async function collectTerminalResults(\n\tterminals: ITerminalInstance[],\n\ttask: Task,\n\tinstantiationService: IInstantiationService,\n\tinvocationContext: IToolInvocationContext,\n\tprogress: ToolProgress,\n\ttoken: CancellationToken,\n\tdisposableStore: DisposableStore,\n\tisActive?: (task: Task) => Promise<boolean>,\n\tdependencyTasks?: Task[]\n): Promise<Array<{\n\tname: string;\n\toutput: string;\n\tresources?: ILinkLocation[];\n\tpollDurationMs: number;\n\tstate: OutputMonitorState;\n\tinputToolManualAcceptCount: number;\n\tinputToolManualRejectCount: number;\n\tinputToolManualChars: number;\n\tinputToolManualShownCount: number;\n\tinputToolFreeFormInputShownCount: number;\n\tinputToolFreeFormInputCount: number;\n}>> {\n\tconst results: Array<{ state: OutputMonitorState; name: string; output: string; resources?: ILinkLocation[]; pollDurationMs: number; inputToolManualAcceptCount: number; inputToolManualRejectCount: number; inputToolManualChars: number; inputToolAutoAcceptCount: number; inputToolAutoChars: number; inputToolManualShownCount: number; inputToolFreeFormInputCount: number; inputToolFreeFormInputShownCount: number }> = [];\n\tif (token.isCancellationRequested) {\n\t\treturn results;\n\t}\n\n\tconst commonTaskIdToTaskMap: { [key: string]: Task } = {};\n\tconst taskIdToTaskMap: { [key: string]: Task } = {};\n\tconst taskLabelToTaskMap: { [key: string]: Task } = {};\n\n\tfor (const dependencyTask of dependencyTasks ?? []) {\n\t\tcommonTaskIdToTaskMap[dependencyTask.getCommonTaskId()] = dependencyTask;\n\t\ttaskIdToTaskMap[dependencyTask._id] = dependencyTask;\n\t\ttaskLabelToTaskMap[dependencyTask._label] = dependencyTask;\n\t}\n\n\tfor (const instance of terminals) {\n\t\tprogress.report({ message: new MarkdownString(`Checking output for \\`${instance.shellLaunchConfig.name ?? 'unknown'}\\``) });\n\n\t\tlet terminalTask = task;\n\n\t\t// For composite tasks, find the actual dependency task running in this terminal\n\t\tif (dependencyTasks?.length) {\n\t\t\t// Use reconnection data if possible to match, since the properties here are unique\n\t\t\tconst reconnectionData = instance.reconnectionProperties?.data as IReconnectionTaskData | undefined;\n\t\t\tif (reconnectionData) {\n\t\t\t\tif (reconnectionData.lastTask in commonTaskIdToTaskMap) {\n\t\t\t\t\tterminalTask = commonTaskIdToTaskMap[reconnectionData.lastTask];\n\t\t\t\t} else if (reconnectionData.id in taskIdToTaskMap) {\n\t\t\t\t\tterminalTask = taskIdToTaskMap[reconnectionData.id];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Otherwise, fallback to label matching\n\t\t\t\tif (instance.shellLaunchConfig.name && instance.shellLaunchConfig.name in taskLabelToTaskMap) {\n\t\t\t\t\tterminalTask = taskLabelToTaskMap[instance.shellLaunchConfig.name];\n\t\t\t\t} else if (instance.title in taskLabelToTaskMap) {\n\t\t\t\t\tterminalTask = taskLabelToTaskMap[instance.title];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst execution: IExecution = {\n\t\t\tgetOutput: () => getOutput(instance) ?? '',\n\t\t\ttask: terminalTask,\n\t\t\tisActive: isActive ? () => isActive(terminalTask) : undefined,\n\t\t\tinstance,\n\t\t\tdependencyTasks,\n\t\t\tsessionId: invocationContext.sessionId\n\t\t};\n\n\t\tconst outputMonitor = disposableStore.add(instantiationService.createInstance(OutputMonitor, execution, taskProblemPollFn, invocationContext, token, task._label));\n\t\tawait Event.toPromise(outputMonitor.onDidFinishCommand);\n\t\tconst pollingResult = outputMonitor.pollingResult;\n\t\tresults.push({\n\t\t\tname: instance.shellLaunchConfig.name ?? instance.title ?? 'unknown',\n\t\t\toutput: pollingResult?.output ?? '',\n\t\t\tpollDurationMs: pollingResult?.pollDurationMs ?? 0,\n\t\t\tresources: pollingResult?.resources,\n\t\t\tstate: pollingResult?.state || OutputMonitorState.Idle,\n\t\t\tinputToolManualAcceptCount: outputMonitor.outputMonitorTelemetryCounters.inputToolManualAcceptCount ?? 0,\n\t\t\tinputToolManualRejectCount: outputMonitor.outputMonitorTelemetryCounters.inputToolManualRejectCount ?? 0,\n\t\t\tinputToolManualChars: outputMonitor.outputMonitorTelemetryCounters.inputToolManualChars ?? 0,\n\t\t\tinputToolAutoAcceptCount: outputMonitor.outputMonitorTelemetryCounters.inputToolAutoAcceptCount ?? 0,\n\t\t\tinputToolAutoChars: outputMonitor.outputMonitorTelemetryCounters.inputToolAutoChars ?? 0,\n\t\t\tinputToolManualShownCount: outputMonitor.outputMonitorTelemetryCounters.inputToolManualShownCount ?? 0,\n\t\t\tinputToolFreeFormInputShownCount: outputMonitor.outputMonitorTelemetryCounters.inputToolFreeFormInputShownCount ?? 0,\n\t\t\tinputToolFreeFormInputCount: outputMonitor.outputMonitorTelemetryCounters.inputToolFreeFormInputCount ?? 0,\n\t\t});\n\t}\n\treturn results;\n}\n\nexport async function taskProblemPollFn(execution: IExecution, token: CancellationToken, taskService: ITaskService): Promise<IPollingResult | undefined> {\n\tif (token.isCancellationRequested) {\n\t\treturn;\n\t}\n\tif (execution.task) {\n\t\tconst data: Map<string, { resources: URI[]; markers: IMarkerData[] }> | undefined = taskService.getTaskProblems(execution.instance.instanceId);\n\t\tif (data) {\n\t\t\t// Problem matchers exist for this task\n\t\t\tconst problemList: string[] = [];\n\t\t\tconst resultResources: ILinkLocation[] = [];\n\t\t\tfor (const [owner, { resources, markers }] of data.entries()) {\n\t\t\t\tfor (let i = 0; i < markers.length; i++) {\n\t\t\t\t\tconst uri: URI | undefined = resources[i];\n\t\t\t\t\tconst marker = markers[i];\n\t\t\t\t\tresultResources.push({\n\t\t\t\t\t\turi,\n\t\t\t\t\t\trange: marker.startLineNumber !== undefined && marker.startColumn !== undefined && marker.endLineNumber !== undefined && marker.endColumn !== undefined\n\t\t\t\t\t\t\t? new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn)\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t});\n\t\t\t\t\tconst message = marker.message ?? '';\n\t\t\t\t\tproblemList.push(`Problem: ${message} in ${uri.fsPath} coming from ${owner} starting on line ${marker.startLineNumber}${marker.startColumn ? `, column ${marker.startColumn} and ending on line ${marker.endLineNumber}${marker.endColumn ? `, column ${marker.endColumn}` : ''}` : ''}`);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (problemList.length === 0) {\n\t\t\t\tconst lastTenLines = execution.getOutput().split('\\n').filter(line => line !== '').slice(-10).join('\\n');\n\t\t\t\treturn {\n\t\t\t\t\tstate: OutputMonitorState.Idle,\n\t\t\t\t\toutput: `Task completed with output:\\n${lastTenLines}`,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tstate: OutputMonitorState.Idle,\n\t\t\t\toutput: problemList.join('\\n'),\n\t\t\t\tresources: resultResources,\n\t\t\t};\n\t\t}\n\t}\n\tthrow new Error('Polling failed');\n}\n\nexport interface ILinkLocation { uri: URI; range?: Range }\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}