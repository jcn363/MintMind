{"version":3,"names":["cov_2omt5wubae","actualCoverage","$","CompareResult","MergeEditorLineRange","join","ActionsSource","ConflictActionsFactory","getAlignments","ViewZoneComputer","input1Editor","input2Editor","resultEditor","conflictActionsFactoryInput1","conflictActionsFactoryInput2","conflictActionsFactoryResult","constructor","f","s","computeViewZones","reader","viewModel","options","input1LinesAdded","input2LinesAdded","baseLinesAdded","resultLinesAdded","input1ViewZones","input2ViewZones","baseViewZones","resultViewZones","model","resultDiffs","baseResultDiffs","read","baseRangeWithStoreAndTouchingDiffs","modifiedBaseRanges","baseRange","diff","intersectsOrTouches","inputRange","b","neitherLessOrGreaterThan","compareByStart","shouldShowCodeLenses","codeLensesVisible","showNonConflictingChanges","lastModifiedBaseRange","undefined","lastBaseResultDiff","m","left","isConflicting","isHandled","actions","shouldAlignResult","inputIsEmpty","push","CommandViewZone","input1Range","startLineNumber","itemsInput1","input2Range","itemsInput2","shouldAlignBase","Placeholder","afterLineNumber","resultingDeltaFromOriginalToModified","resultItems","lastResultDiff","rights","at","alignedLines","map","a","input1Line","baseLine","input2Line","resultLine","length","endLineNumberExclusive","outputRange","input1Line_","input2Line_","baseLine_","resultLine_","max","Math","diffInput1","Spacer","diffInput2","diffBase","diffResult","MergeEditorViewZones","MergeEditorViewZone","heightInLines","create","viewZoneChangeAccessor","viewZoneIdsToCleanUp","disposableStore","addZone","domNode","heightPx","heightInPx","conflictActionsFactory","lineNumber","items","add","createWidget"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/mergeEditor/browser/view/viewZones.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $ } from '../../../../../base/browser/dom.js';\nimport { CompareResult } from '../../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { IObservable, IReader } from '../../../../../base/common/observable.js';\nimport { ICodeEditor, IViewZoneChangeAccessor } from '../../../../../editor/browser/editorBrowser.js';\nimport { MergeEditorLineRange } from '../model/lineRange.js';\nimport { DetailedLineRangeMapping } from '../model/mapping.js';\nimport { ModifiedBaseRange } from '../model/modifiedBaseRange.js';\nimport { join } from '../utils.js';\nimport { ActionsSource, ConflictActionsFactory, IContentWidgetAction } from './conflictActions.js';\nimport { getAlignments } from './lineAlignment.js';\nimport { MergeEditorViewModel } from './viewModel.js';\n\nexport class ViewZoneComputer {\n\tprivate readonly conflictActionsFactoryInput1;\n\tprivate readonly conflictActionsFactoryInput2;\n\tprivate readonly conflictActionsFactoryResult;\n\n\tconstructor(\n\t\tprivate readonly input1Editor: ICodeEditor,\n\t\tprivate readonly input2Editor: ICodeEditor,\n\t\tprivate readonly resultEditor: ICodeEditor,\n\t) {\n\t\tthis.conflictActionsFactoryInput1 = new ConflictActionsFactory(this.input1Editor);\n\t\tthis.conflictActionsFactoryInput2 = new ConflictActionsFactory(this.input2Editor);\n\t\tthis.conflictActionsFactoryResult = new ConflictActionsFactory(this.resultEditor);\n\t}\n\n\tpublic computeViewZones(\n\t\treader: IReader,\n\t\tviewModel: MergeEditorViewModel,\n\t\toptions: {\n\t\t\tshouldAlignResult: boolean;\n\t\t\tshouldAlignBase: boolean;\n\t\t\tcodeLensesVisible: boolean;\n\t\t\tshowNonConflictingChanges: boolean;\n\t\t}\n\t): MergeEditorViewZones {\n\t\tlet input1LinesAdded = 0;\n\t\tlet input2LinesAdded = 0;\n\t\tlet baseLinesAdded = 0;\n\t\tlet resultLinesAdded = 0;\n\n\t\tconst input1ViewZones: MergeEditorViewZone[] = [];\n\t\tconst input2ViewZones: MergeEditorViewZone[] = [];\n\t\tconst baseViewZones: MergeEditorViewZone[] = [];\n\t\tconst resultViewZones: MergeEditorViewZone[] = [];\n\n\t\tconst model = viewModel.model;\n\n\t\tconst resultDiffs = model.baseResultDiffs.read(reader);\n\t\tconst baseRangeWithStoreAndTouchingDiffs = join(\n\t\t\tmodel.modifiedBaseRanges.read(reader),\n\t\t\tresultDiffs,\n\t\t\t(baseRange, diff) =>\n\t\t\t\tbaseRange.baseRange.intersectsOrTouches(diff.inputRange)\n\t\t\t\t\t? CompareResult.neitherLessOrGreaterThan\n\t\t\t\t\t: MergeEditorLineRange.compareByStart(\n\t\t\t\t\t\tbaseRange.baseRange,\n\t\t\t\t\t\tdiff.inputRange\n\t\t\t\t\t)\n\t\t);\n\n\t\tconst shouldShowCodeLenses = options.codeLensesVisible;\n\t\tconst showNonConflictingChanges = options.showNonConflictingChanges;\n\n\t\tlet lastModifiedBaseRange: ModifiedBaseRange | undefined = undefined;\n\t\tlet lastBaseResultDiff: DetailedLineRangeMapping | undefined = undefined;\n\t\tfor (const m of baseRangeWithStoreAndTouchingDiffs) {\n\t\t\tif (shouldShowCodeLenses && m.left && (m.left.isConflicting || showNonConflictingChanges || !model.isHandled(m.left).read(reader))) {\n\t\t\t\tconst actions = new ActionsSource(viewModel, m.left);\n\t\t\t\tif (options.shouldAlignResult || !actions.inputIsEmpty.read(reader)) {\n\t\t\t\t\tinput1ViewZones.push(new CommandViewZone(this.conflictActionsFactoryInput1, m.left.input1Range.startLineNumber - 1, actions.itemsInput1));\n\t\t\t\t\tinput2ViewZones.push(new CommandViewZone(this.conflictActionsFactoryInput2, m.left.input2Range.startLineNumber - 1, actions.itemsInput2));\n\t\t\t\t\tif (options.shouldAlignBase) {\n\t\t\t\t\t\tbaseViewZones.push(new Placeholder(m.left.baseRange.startLineNumber - 1, 16));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst afterLineNumber = m.left.baseRange.startLineNumber + (lastBaseResultDiff?.resultingDeltaFromOriginalToModified ?? 0) - 1;\n\t\t\t\tresultViewZones.push(new CommandViewZone(this.conflictActionsFactoryResult, afterLineNumber, actions.resultItems));\n\n\t\t\t}\n\n\t\t\tconst lastResultDiff = m.rights.at(-1)!;\n\t\t\tif (lastResultDiff) {\n\t\t\t\tlastBaseResultDiff = lastResultDiff;\n\t\t\t}\n\t\t\tlet alignedLines: LineAlignment[];\n\t\t\tif (m.left) {\n\t\t\t\talignedLines = getAlignments(m.left).map(a => ({\n\t\t\t\t\tinput1Line: a[0],\n\t\t\t\t\tbaseLine: a[1],\n\t\t\t\t\tinput2Line: a[2],\n\t\t\t\t\tresultLine: undefined,\n\t\t\t\t}));\n\n\t\t\t\tlastModifiedBaseRange = m.left;\n\t\t\t\t// This is a total hack.\n\t\t\t\talignedLines[alignedLines.length - 1].resultLine =\n\t\t\t\t\tm.left.baseRange.endLineNumberExclusive\n\t\t\t\t\t+ (lastBaseResultDiff ? lastBaseResultDiff.resultingDeltaFromOriginalToModified : 0);\n\n\t\t\t} else {\n\t\t\t\talignedLines = [{\n\t\t\t\t\tbaseLine: lastResultDiff.inputRange.endLineNumberExclusive,\n\t\t\t\t\tinput1Line: lastResultDiff.inputRange.endLineNumberExclusive + (lastModifiedBaseRange ? (lastModifiedBaseRange.input1Range.endLineNumberExclusive - lastModifiedBaseRange.baseRange.endLineNumberExclusive) : 0),\n\t\t\t\t\tinput2Line: lastResultDiff.inputRange.endLineNumberExclusive + (lastModifiedBaseRange ? (lastModifiedBaseRange.input2Range.endLineNumberExclusive - lastModifiedBaseRange.baseRange.endLineNumberExclusive) : 0),\n\t\t\t\t\tresultLine: lastResultDiff.outputRange.endLineNumberExclusive,\n\t\t\t\t}];\n\t\t\t}\n\n\t\t\tfor (const { input1Line, baseLine, input2Line, resultLine } of alignedLines) {\n\t\t\t\tif (!options.shouldAlignBase && (input1Line === undefined || input2Line === undefined)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst input1Line_ =\n\t\t\t\t\tinput1Line !== undefined ? input1Line + input1LinesAdded : -1;\n\t\t\t\tconst input2Line_ =\n\t\t\t\t\tinput2Line !== undefined ? input2Line + input2LinesAdded : -1;\n\t\t\t\tconst baseLine_ = baseLine + baseLinesAdded;\n\t\t\t\tconst resultLine_ = resultLine !== undefined ? resultLine + resultLinesAdded : -1;\n\n\t\t\t\tconst max = Math.max(options.shouldAlignBase ? baseLine_ : 0, input1Line_, input2Line_, options.shouldAlignResult ? resultLine_ : 0);\n\n\t\t\t\tif (input1Line !== undefined) {\n\t\t\t\t\tconst diffInput1 = max - input1Line_;\n\t\t\t\t\tif (diffInput1 > 0) {\n\t\t\t\t\t\tinput1ViewZones.push(new Spacer(input1Line - 1, diffInput1));\n\t\t\t\t\t\tinput1LinesAdded += diffInput1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (input2Line !== undefined) {\n\t\t\t\t\tconst diffInput2 = max - input2Line_;\n\t\t\t\t\tif (diffInput2 > 0) {\n\t\t\t\t\t\tinput2ViewZones.push(new Spacer(input2Line - 1, diffInput2));\n\t\t\t\t\t\tinput2LinesAdded += diffInput2;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (options.shouldAlignBase) {\n\t\t\t\t\tconst diffBase = max - baseLine_;\n\t\t\t\t\tif (diffBase > 0) {\n\t\t\t\t\t\tbaseViewZones.push(new Spacer(baseLine - 1, diffBase));\n\t\t\t\t\t\tbaseLinesAdded += diffBase;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (options.shouldAlignResult && resultLine !== undefined) {\n\t\t\t\t\tconst diffResult = max - resultLine_;\n\t\t\t\t\tif (diffResult > 0) {\n\t\t\t\t\t\tresultViewZones.push(new Spacer(resultLine - 1, diffResult));\n\t\t\t\t\t\tresultLinesAdded += diffResult;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new MergeEditorViewZones(input1ViewZones, input2ViewZones, baseViewZones, resultViewZones);\n\t}\n}\n\ninterface LineAlignment {\n\tbaseLine: number;\n\tinput1Line?: number;\n\tinput2Line?: number;\n\tresultLine?: number;\n}\n\nexport class MergeEditorViewZones {\n\tconstructor(\n\t\tpublic readonly input1ViewZones: readonly MergeEditorViewZone[],\n\t\tpublic readonly input2ViewZones: readonly MergeEditorViewZone[],\n\t\tpublic readonly baseViewZones: readonly MergeEditorViewZone[],\n\t\tpublic readonly resultViewZones: readonly MergeEditorViewZone[],\n\t) { }\n}\n\n/**\n * This is an abstract class to create various editor view zones.\n*/\nexport abstract class MergeEditorViewZone {\n\tabstract create(viewZoneChangeAccessor: IViewZoneChangeAccessor, viewZoneIdsToCleanUp: string[], disposableStore: DisposableStore): void;\n}\n\nclass Spacer extends MergeEditorViewZone {\n\tconstructor(\n\t\tprivate readonly afterLineNumber: number,\n\t\tprivate readonly heightInLines: number\n\t) {\n\t\tsuper();\n\t}\n\n\toverride create(\n\t\tviewZoneChangeAccessor: IViewZoneChangeAccessor,\n\t\tviewZoneIdsToCleanUp: string[],\n\t\tdisposableStore: DisposableStore\n\t): void {\n\t\tviewZoneIdsToCleanUp.push(\n\t\t\tviewZoneChangeAccessor.addZone({\n\t\t\t\tafterLineNumber: this.afterLineNumber,\n\t\t\t\theightInLines: this.heightInLines,\n\t\t\t\tdomNode: $('div.diagonal-fill'),\n\t\t\t})\n\t\t);\n\t}\n}\n\nclass Placeholder extends MergeEditorViewZone {\n\tconstructor(\n\t\tprivate readonly afterLineNumber: number,\n\t\tprivate readonly heightPx: number\n\t) {\n\t\tsuper();\n\t}\n\n\toverride create(\n\t\tviewZoneChangeAccessor: IViewZoneChangeAccessor,\n\t\tviewZoneIdsToCleanUp: string[],\n\t\tdisposableStore: DisposableStore\n\t): void {\n\t\tviewZoneIdsToCleanUp.push(\n\t\t\tviewZoneChangeAccessor.addZone({\n\t\t\t\tafterLineNumber: this.afterLineNumber,\n\t\t\t\theightInPx: this.heightPx,\n\t\t\t\tdomNode: $('div.conflict-actions-placeholder'),\n\t\t\t})\n\t\t);\n\t}\n}\n\nclass CommandViewZone extends MergeEditorViewZone {\n\tconstructor(\n\t\tprivate readonly conflictActionsFactory: ConflictActionsFactory,\n\t\tprivate readonly lineNumber: number,\n\t\tprivate readonly items: IObservable<IContentWidgetAction[]>,\n\t) {\n\t\tsuper();\n\t}\n\n\toverride create(viewZoneChangeAccessor: IViewZoneChangeAccessor, viewZoneIdsToCleanUp: string[], disposableStore: DisposableStore): void {\n\t\tdisposableStore.add(\n\t\t\tthis.conflictActionsFactory.createWidget(\n\t\t\t\tviewZoneChangeAccessor,\n\t\t\t\tthis.lineNumber,\n\t\t\t\tthis.items,\n\t\t\t\tviewZoneIdsToCleanUp,\n\t\t\t)\n\t\t);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}