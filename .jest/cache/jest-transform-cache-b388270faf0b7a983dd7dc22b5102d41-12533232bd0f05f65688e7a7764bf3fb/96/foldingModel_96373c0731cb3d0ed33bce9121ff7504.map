{"version":3,"names":["cov_2aip9bgz4q","actualCoverage","renderAsPlaintext","Emitter","DisposableStore","marked","FoldingRegions","sanitizeRanges","CellKind","cellRangesToIndexes","foldingRangeLimit","s","limit","update","f","FoldingModel","_viewModel","_viewModelStore","_regions","regions","_onDidFoldingRegionChanges","onDidFoldingRegionChanged","event","_foldingRangeDecorationIds","constructor","Uint32Array","dispose","detachViewModel","clear","attachViewModel","model","add","onDidChangeViewCells","recompute","onDidChangeSelection","b","indexes","getSelections","changed","forEach","index","regionIndex","findRange","isCollapsed","getStartLineNumber","setCollapsed","getParentIndex","fire","getRegionAtLine","lineNumber","toRegion","getRegionsInside","region","filter","result","endLineNumber","Number","MAX_VALUE","length","levelStack","i","len","current","containedBy","pop","push","getAllRegionsAtLine","level","parentIndex","newState","viewModel","cells","viewCells","stack","cell","cellKind","Markup","language","minDepth","Math","min","Array","from","getMarkdownHeadersInCell","getText","header","depth","endIndex","rawFoldingRanges","map","entry","startIndex","end","undefined","start","rank","range","newRegions","nextCollapsed","k","collapsedIndex","decRange","getTrackedRange","collasedStartIndex","cellRanges","startLineNumber","id","setTrackedRange","str","getMemento","collapsedRanges","applyMemento","state","updateFoldingStateAtIndex","foldingModel","collapsed","cellContent","token","lexer","gfm","type","text","value","raw","trim"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/notebook/browser/viewModel/foldingModel.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { renderAsPlaintext } from '../../../../../base/browser/markdownRenderer.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { marked } from '../../../../../base/common/marked/marked.js';\nimport { TrackedRangeStickiness } from '../../../../../editor/common/model.js';\nimport { FoldingLimitReporter } from '../../../../../editor/contrib/folding/browser/folding.js';\nimport { FoldingRegion, FoldingRegions } from '../../../../../editor/contrib/folding/browser/foldingRanges.js';\nimport { IFoldingRangeData, sanitizeRanges } from '../../../../../editor/contrib/folding/browser/syntaxRangeProvider.js';\nimport { INotebookViewModel } from '../notebookBrowser.js';\nimport { CellKind } from '../../common/notebookCommon.js';\nimport { cellRangesToIndexes, ICellRange } from '../../common/notebookRange.js';\n\ntype RegionFilter = (r: FoldingRegion) => boolean;\ntype RegionFilterWithLevel = (r: FoldingRegion, level: number) => boolean;\n\nconst foldingRangeLimit: FoldingLimitReporter = {\n\tlimit: 5000,\n\tupdate: () => { }\n};\n\nexport class FoldingModel implements IDisposable {\n\tprivate _viewModel: INotebookViewModel | null = null;\n\tprivate readonly _viewModelStore = new DisposableStore();\n\tprivate _regions: FoldingRegions;\n\tget regions() {\n\t\treturn this._regions;\n\t}\n\n\tprivate readonly _onDidFoldingRegionChanges = new Emitter<void>();\n\treadonly onDidFoldingRegionChanged: Event<void> = this._onDidFoldingRegionChanges.event;\n\n\tprivate _foldingRangeDecorationIds: string[] = [];\n\n\tconstructor() {\n\t\tthis._regions = new FoldingRegions(new Uint32Array(0), new Uint32Array(0));\n\t}\n\n\tdispose() {\n\t\tthis._onDidFoldingRegionChanges.dispose();\n\t\tthis._viewModelStore.dispose();\n\t}\n\n\tdetachViewModel() {\n\t\tthis._viewModelStore.clear();\n\t\tthis._viewModel = null;\n\t}\n\n\tattachViewModel(model: INotebookViewModel) {\n\t\tthis._viewModel = model;\n\n\t\tthis._viewModelStore.add(this._viewModel.onDidChangeViewCells(() => {\n\t\t\tthis.recompute();\n\t\t}));\n\n\t\tthis._viewModelStore.add(this._viewModel.onDidChangeSelection(() => {\n\t\t\tif (!this._viewModel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst indexes = cellRangesToIndexes(this._viewModel.getSelections());\n\n\t\t\tlet changed = false;\n\n\t\t\tindexes.forEach(index => {\n\t\t\t\tlet regionIndex = this.regions.findRange(index + 1);\n\n\t\t\t\twhile (regionIndex !== -1) {\n\t\t\t\t\tif (this._regions.isCollapsed(regionIndex) && index > this._regions.getStartLineNumber(regionIndex) - 1) {\n\t\t\t\t\t\tthis._regions.setCollapsed(regionIndex, false);\n\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t}\n\t\t\t\t\tregionIndex = this._regions.getParentIndex(regionIndex);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (changed) {\n\t\t\t\tthis._onDidFoldingRegionChanges.fire();\n\t\t\t}\n\n\t\t}));\n\n\t\tthis.recompute();\n\t}\n\n\tgetRegionAtLine(lineNumber: number): FoldingRegion | null {\n\t\tif (this._regions) {\n\t\t\tconst index = this._regions.findRange(lineNumber);\n\t\t\tif (index >= 0) {\n\t\t\t\treturn this._regions.toRegion(index);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetRegionsInside(region: FoldingRegion | null, filter?: RegionFilter | RegionFilterWithLevel): FoldingRegion[] {\n\t\tconst result: FoldingRegion[] = [];\n\t\tconst index = region ? region.regionIndex + 1 : 0;\n\t\tconst endLineNumber = region ? region.endLineNumber : Number.MAX_VALUE;\n\n\t\tif (filter && filter.length === 2) {\n\t\t\tconst levelStack: FoldingRegion[] = [];\n\t\t\tfor (let i = index, len = this._regions.length; i < len; i++) {\n\t\t\t\tconst current = this._regions.toRegion(i);\n\t\t\t\tif (this._regions.getStartLineNumber(i) < endLineNumber) {\n\t\t\t\t\twhile (levelStack.length > 0 && !current.containedBy(levelStack[levelStack.length - 1])) {\n\t\t\t\t\t\tlevelStack.pop();\n\t\t\t\t\t}\n\t\t\t\t\tlevelStack.push(current);\n\t\t\t\t\tif (filter(current, levelStack.length)) {\n\t\t\t\t\t\tresult.push(current);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = index, len = this._regions.length; i < len; i++) {\n\t\t\t\tconst current = this._regions.toRegion(i);\n\t\t\t\tif (this._regions.getStartLineNumber(i) < endLineNumber) {\n\t\t\t\t\tif (!filter || (filter as RegionFilter)(current)) {\n\t\t\t\t\t\tresult.push(current);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tgetAllRegionsAtLine(lineNumber: number, filter?: (r: FoldingRegion, level: number) => boolean): FoldingRegion[] {\n\t\tconst result: FoldingRegion[] = [];\n\t\tif (this._regions) {\n\t\t\tlet index = this._regions.findRange(lineNumber);\n\t\t\tlet level = 1;\n\t\t\twhile (index >= 0) {\n\t\t\t\tconst current = this._regions.toRegion(index);\n\t\t\t\tif (!filter || filter(current, level)) {\n\t\t\t\t\tresult.push(current);\n\t\t\t\t}\n\t\t\t\tlevel++;\n\t\t\t\tindex = current.parentIndex;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tsetCollapsed(index: number, newState: boolean) {\n\t\tthis._regions.setCollapsed(index, newState);\n\t}\n\n\trecompute() {\n\t\tif (!this._viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewModel = this._viewModel;\n\t\tconst cells = viewModel.viewCells;\n\t\tconst stack: { index: number; level: number; endIndex: number }[] = [];\n\n\t\tfor (let i = 0; i < cells.length; i++) {\n\t\t\tconst cell = cells[i];\n\n\t\t\tif (cell.cellKind !== CellKind.Markup || cell.language !== 'markdown') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst minDepth = Math.min(7, ...Array.from(getMarkdownHeadersInCell(cell.getText()), header => header.depth));\n\t\t\tif (minDepth < 7) {\n\t\t\t\t// header 1 to 6\n\t\t\t\tstack.push({ index: i, level: minDepth, endIndex: 0 });\n\t\t\t}\n\t\t}\n\n\t\t// calculate folding ranges\n\t\tconst rawFoldingRanges: IFoldingRangeData[] = stack.map((entry, startIndex) => {\n\t\t\tlet end: number | undefined = undefined;\n\t\t\tfor (let i = startIndex + 1; i < stack.length; ++i) {\n\t\t\t\tif (stack[i].level <= entry.level) {\n\t\t\t\t\tend = stack[i].index - 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst endIndex = end !== undefined ? end : cells.length - 1;\n\n\t\t\t// one based\n\t\t\treturn {\n\t\t\t\tstart: entry.index + 1,\n\t\t\t\tend: endIndex + 1,\n\t\t\t\trank: 1\n\t\t\t};\n\t\t}).filter(range => range.start !== range.end);\n\n\t\tconst newRegions = sanitizeRanges(rawFoldingRanges, foldingRangeLimit);\n\n\t\t// restore collased state\n\t\tlet i = 0;\n\t\tconst nextCollapsed = () => {\n\t\t\twhile (i < this._regions.length) {\n\t\t\t\tconst isCollapsed = this._regions.isCollapsed(i);\n\t\t\t\ti++;\n\t\t\t\tif (isCollapsed) {\n\t\t\t\t\treturn i - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t};\n\n\t\tlet k = 0;\n\t\tlet collapsedIndex = nextCollapsed();\n\n\t\twhile (collapsedIndex !== -1 && k < newRegions.length) {\n\t\t\t// get the latest range\n\t\t\tconst decRange = viewModel.getTrackedRange(this._foldingRangeDecorationIds[collapsedIndex]);\n\t\t\tif (decRange) {\n\t\t\t\tconst collasedStartIndex = decRange.start;\n\n\t\t\t\twhile (k < newRegions.length) {\n\t\t\t\t\tconst startIndex = newRegions.getStartLineNumber(k) - 1;\n\t\t\t\t\tif (collasedStartIndex >= startIndex) {\n\t\t\t\t\t\tnewRegions.setCollapsed(k, collasedStartIndex === startIndex);\n\t\t\t\t\t\tk++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcollapsedIndex = nextCollapsed();\n\t\t}\n\n\t\twhile (k < newRegions.length) {\n\t\t\tnewRegions.setCollapsed(k, false);\n\t\t\tk++;\n\t\t}\n\n\t\tconst cellRanges: ICellRange[] = [];\n\t\tfor (let i = 0; i < newRegions.length; i++) {\n\t\t\tconst region = newRegions.toRegion(i);\n\t\t\tcellRanges.push({ start: region.startLineNumber - 1, end: region.endLineNumber - 1 });\n\t\t}\n\n\t\t// remove old tracked ranges and add new ones\n\t\t// TODO@rebornix, implement delta\n\t\tthis._foldingRangeDecorationIds.forEach(id => viewModel.setTrackedRange(id, null, TrackedRangeStickiness.GrowsOnlyWhenTypingAfter));\n\t\tthis._foldingRangeDecorationIds = cellRanges.map(region => viewModel.setTrackedRange(null, region, TrackedRangeStickiness.GrowsOnlyWhenTypingAfter)).filter(str => str !== null) as string[];\n\n\t\tthis._regions = newRegions;\n\t\tthis._onDidFoldingRegionChanges.fire();\n\t}\n\n\tgetMemento(): ICellRange[] {\n\t\tconst collapsedRanges: ICellRange[] = [];\n\t\tlet i = 0;\n\t\twhile (i < this._regions.length) {\n\t\t\tconst isCollapsed = this._regions.isCollapsed(i);\n\n\t\t\tif (isCollapsed) {\n\t\t\t\tconst region = this._regions.toRegion(i);\n\t\t\t\tcollapsedRanges.push({ start: region.startLineNumber - 1, end: region.endLineNumber - 1 });\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\treturn collapsedRanges;\n\t}\n\n\tpublic applyMemento(state: ICellRange[]): boolean {\n\t\tif (!this._viewModel) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet i = 0;\n\t\tlet k = 0;\n\n\t\twhile (k < state.length && i < this._regions.length) {\n\t\t\t// get the latest range\n\t\t\tconst decRange = this._viewModel.getTrackedRange(this._foldingRangeDecorationIds[i]);\n\t\t\tif (decRange) {\n\t\t\t\tconst collasedStartIndex = state[k].start;\n\n\t\t\t\twhile (i < this._regions.length) {\n\t\t\t\t\tconst startIndex = this._regions.getStartLineNumber(i) - 1;\n\t\t\t\t\tif (collasedStartIndex >= startIndex) {\n\t\t\t\t\t\tthis._regions.setCollapsed(i, collasedStartIndex === startIndex);\n\t\t\t\t\t\ti++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tk++;\n\t\t}\n\n\t\twhile (i < this._regions.length) {\n\t\t\tthis._regions.setCollapsed(i, false);\n\t\t\ti++;\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nexport function updateFoldingStateAtIndex(foldingModel: FoldingModel, index: number, collapsed: boolean) {\n\tconst range = foldingModel.regions.findRange(index + 1);\n\tfoldingModel.setCollapsed(range, collapsed);\n}\n\nexport function* getMarkdownHeadersInCell(cellContent: string): Iterable<{ readonly depth: number; readonly text: string }> {\n\tfor (const token of marked.lexer(cellContent, { gfm: true })) {\n\t\tif (token.type === 'heading') {\n\t\t\tyield {\n\t\t\t\tdepth: token.depth,\n\t\t\t\ttext: renderAsPlaintext({ value: token.raw }).trim()\n\t\t\t};\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAuBE;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAvBF;;;;AAKA,SAASE,iBAAiB,QAAQ,iDAAiD;AACnF,SAASC,OAAO,QAAe,qCAAqC;AACpE,SAASC,eAAe,QAAqB,yCAAyC;AACtF,SAASC,MAAM,QAAQ,6CAA6C;AAGpE,SAAwBC,cAAc,QAAQ,gEAAgE;AAC9G,SAA4BC,cAAc,QAAQ,sEAAsE;AAExH,SAASC,QAAQ,QAAQ,gCAAgC;AACzD,SAASC,mBAAmB,QAAoB,+BAA+B;AAK/E,MAAMC,iBAAiB;AAAA;AAAA,CAAAV,cAAA,GAAAW,CAAA,OAAyB;EAC/CC,KAAK,EAAE,IAAI;EACXC,MAAM,EAAEA,CAAA,KAAK;IAAA;IAAAb,cAAA,GAAAc,CAAA;EAAG;CAChB;AAED,OAAM,MAAOC,YAAY;EAChBC,UAAU;EAAA;EAAA,CAAAhB,cAAA,GAAAW,CAAA,OAA8B,IAAI;EACnCM,eAAe;EAAA;EAAA,CAAAjB,cAAA,GAAAW,CAAA,OAAG,IAAIP,eAAe,EAAE;EAChDc,QAAQ;EAChB,IAAIC,OAAOA,CAAA;IAAA;IAAAnB,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACV,OAAO,IAAI,CAACO,QAAQ;EACrB;EAEiBE,0BAA0B;EAAA;EAAA,CAAApB,cAAA,GAAAW,CAAA,OAAG,IAAIR,OAAO,EAAQ;EACxDkB,yBAAyB;EAAA;EAAA,CAAArB,cAAA,GAAAW,CAAA,OAAgB,IAAI,CAACS,0BAA0B,CAACE,KAAK;EAE/EC,0BAA0B;EAAA;EAAA,CAAAvB,cAAA,GAAAW,CAAA,OAAa,EAAE;EAEjDa,YAAA;IAAA;IAAAxB,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACC,IAAI,CAACO,QAAQ,GAAG,IAAIZ,cAAc,CAAC,IAAImB,WAAW,CAAC,CAAC,CAAC,EAAE,IAAIA,WAAW,CAAC,CAAC,CAAC,CAAC;EAC3E;EAEAC,OAAOA,CAAA;IAAA;IAAA1B,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACN,IAAI,CAACS,0BAA0B,CAACM,OAAO,EAAE;IAAC;IAAA1B,cAAA,GAAAW,CAAA;IAC1C,IAAI,CAACM,eAAe,CAACS,OAAO,EAAE;EAC/B;EAEAC,eAAeA,CAAA;IAAA;IAAA3B,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACd,IAAI,CAACM,eAAe,CAACW,KAAK,EAAE;IAAC;IAAA5B,cAAA,GAAAW,CAAA;IAC7B,IAAI,CAACK,UAAU,GAAG,IAAI;EACvB;EAEAa,eAAeA,CAACC,KAAyB;IAAA;IAAA9B,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACxC,IAAI,CAACK,UAAU,GAAGc,KAAK;IAAC;IAAA9B,cAAA,GAAAW,CAAA;IAExB,IAAI,CAACM,eAAe,CAACc,GAAG,CAAC,IAAI,CAACf,UAAU,CAACgB,oBAAoB,CAAC,MAAK;MAAA;MAAAhC,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAClE,IAAI,CAACsB,SAAS,EAAE;IACjB,CAAC,CAAC,CAAC;IAAC;IAAAjC,cAAA,GAAAW,CAAA;IAEJ,IAAI,CAACM,eAAe,CAACc,GAAG,CAAC,IAAI,CAACf,UAAU,CAACkB,oBAAoB,CAAC,MAAK;MAAA;MAAAlC,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAClE,IAAI,CAAC,IAAI,CAACK,UAAU,EAAE;QAAA;QAAAhB,cAAA,GAAAmC,CAAA;QAAAnC,cAAA,GAAAW,CAAA;QACrB;MACD,CAAC;MAAA;MAAA;QAAAX,cAAA,GAAAmC,CAAA;MAAA;MAED,MAAMC,OAAO;MAAA;MAAA,CAAApC,cAAA,GAAAW,CAAA,QAAGF,mBAAmB,CAAC,IAAI,CAACO,UAAU,CAACqB,aAAa,EAAE,CAAC;MAEpE,IAAIC,OAAO;MAAA;MAAA,CAAAtC,cAAA,GAAAW,CAAA,QAAG,KAAK;MAAC;MAAAX,cAAA,GAAAW,CAAA;MAEpByB,OAAO,CAACG,OAAO,CAACC,KAAK,IAAG;QAAA;QAAAxC,cAAA,GAAAc,CAAA;QACvB,IAAI2B,WAAW;QAAA;QAAA,CAAAzC,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACQ,OAAO,CAACuB,SAAS,CAACF,KAAK,GAAG,CAAC,CAAC;QAAC;QAAAxC,cAAA,GAAAW,CAAA;QAEpD,OAAO8B,WAAW,KAAK,CAAC,CAAC,EAAE;UAAA;UAAAzC,cAAA,GAAAW,CAAA;UAC1B;UAAI;UAAA,CAAAX,cAAA,GAAAmC,CAAA,cAAI,CAACjB,QAAQ,CAACyB,WAAW,CAACF,WAAW,CAAC;UAAA;UAAA,CAAAzC,cAAA,GAAAmC,CAAA,UAAIK,KAAK,GAAG,IAAI,CAACtB,QAAQ,CAAC0B,kBAAkB,CAACH,WAAW,CAAC,GAAG,CAAC,GAAE;YAAA;YAAAzC,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACxG,IAAI,CAACO,QAAQ,CAAC2B,YAAY,CAACJ,WAAW,EAAE,KAAK,CAAC;YAAC;YAAAzC,cAAA,GAAAW,CAAA;YAC/C2B,OAAO,GAAG,IAAI;UACf,CAAC;UAAA;UAAA;YAAAtC,cAAA,GAAAmC,CAAA;UAAA;UAAAnC,cAAA,GAAAW,CAAA;UACD8B,WAAW,GAAG,IAAI,CAACvB,QAAQ,CAAC4B,cAAc,CAACL,WAAW,CAAC;QACxD;MACD,CAAC,CAAC;MAAC;MAAAzC,cAAA,GAAAW,CAAA;MAEH,IAAI2B,OAAO,EAAE;QAAA;QAAAtC,cAAA,GAAAmC,CAAA;QAAAnC,cAAA,GAAAW,CAAA;QACZ,IAAI,CAACS,0BAA0B,CAAC2B,IAAI,EAAE;MACvC,CAAC;MAAA;MAAA;QAAA/C,cAAA,GAAAmC,CAAA;MAAA;IAEF,CAAC,CAAC,CAAC;IAAC;IAAAnC,cAAA,GAAAW,CAAA;IAEJ,IAAI,CAACsB,SAAS,EAAE;EACjB;EAEAe,eAAeA,CAACC,UAAkB;IAAA;IAAAjD,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACjC,IAAI,IAAI,CAACO,QAAQ,EAAE;MAAA;MAAAlB,cAAA,GAAAmC,CAAA;MAClB,MAAMK,KAAK;MAAA;MAAA,CAAAxC,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACwB,SAAS,CAACO,UAAU,CAAC;MAAC;MAAAjD,cAAA,GAAAW,CAAA;MAClD,IAAI6B,KAAK,IAAI,CAAC,EAAE;QAAA;QAAAxC,cAAA,GAAAmC,CAAA;QAAAnC,cAAA,GAAAW,CAAA;QACf,OAAO,IAAI,CAACO,QAAQ,CAACgC,QAAQ,CAACV,KAAK,CAAC;MACrC,CAAC;MAAA;MAAA;QAAAxC,cAAA,GAAAmC,CAAA;MAAA;IACF,CAAC;IAAA;IAAA;MAAAnC,cAAA,GAAAmC,CAAA;IAAA;IAAAnC,cAAA,GAAAW,CAAA;IACD,OAAO,IAAI;EACZ;EAEAwC,gBAAgBA,CAACC,MAA4B,EAAEC,MAA6C;IAAA;IAAArD,cAAA,GAAAc,CAAA;IAC3F,MAAMwC,MAAM;IAAA;IAAA,CAAAtD,cAAA,GAAAW,CAAA,QAAoB,EAAE;IAClC,MAAM6B,KAAK;IAAA;IAAA,CAAAxC,cAAA,GAAAW,CAAA,QAAGyC,MAAM;IAAA;IAAA,CAAApD,cAAA,GAAAmC,CAAA,UAAGiB,MAAM,CAACX,WAAW,GAAG,CAAC;IAAA;IAAA,CAAAzC,cAAA,GAAAmC,CAAA,UAAG,CAAC;IACjD,MAAMoB,aAAa;IAAA;IAAA,CAAAvD,cAAA,GAAAW,CAAA,QAAGyC,MAAM;IAAA;IAAA,CAAApD,cAAA,GAAAmC,CAAA,UAAGiB,MAAM,CAACG,aAAa;IAAA;IAAA,CAAAvD,cAAA,GAAAmC,CAAA,UAAGqB,MAAM,CAACC,SAAS;IAAC;IAAAzD,cAAA,GAAAW,CAAA;IAEvE;IAAI;IAAA,CAAAX,cAAA,GAAAmC,CAAA,UAAAkB,MAAM;IAAA;IAAA,CAAArD,cAAA,GAAAmC,CAAA,UAAIkB,MAAM,CAACK,MAAM,KAAK,CAAC,GAAE;MAAA;MAAA1D,cAAA,GAAAmC,CAAA;MAClC,MAAMwB,UAAU;MAAA;MAAA,CAAA3D,cAAA,GAAAW,CAAA,QAAoB,EAAE;MAAC;MAAAX,cAAA,GAAAW,CAAA;MACvC,KAAK,IAAIiD,CAAC;QAAA;QAAA,CAAA5D,cAAA,GAAAW,CAAA,QAAG6B,KAAK,GAAEqB,GAAG;QAAA;QAAA,CAAA7D,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACwC,MAAM,GAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;QAC7D,MAAME,OAAO;QAAA;QAAA,CAAA9D,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACgC,QAAQ,CAACU,CAAC,CAAC;QAAC;QAAA5D,cAAA,GAAAW,CAAA;QAC1C,IAAI,IAAI,CAACO,QAAQ,CAAC0B,kBAAkB,CAACgB,CAAC,CAAC,GAAGL,aAAa,EAAE;UAAA;UAAAvD,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UACxD;UAAO;UAAA,CAAAX,cAAA,GAAAmC,CAAA,WAAAwB,UAAU,CAACD,MAAM,GAAG,CAAC;UAAA;UAAA,CAAA1D,cAAA,GAAAmC,CAAA,WAAI,CAAC2B,OAAO,CAACC,WAAW,CAACJ,UAAU,CAACA,UAAU,CAACD,MAAM,GAAG,CAAC,CAAC,CAAC,GAAE;YAAA;YAAA1D,cAAA,GAAAW,CAAA;YACxFgD,UAAU,CAACK,GAAG,EAAE;UACjB;UAAC;UAAAhE,cAAA,GAAAW,CAAA;UACDgD,UAAU,CAACM,IAAI,CAACH,OAAO,CAAC;UAAC;UAAA9D,cAAA,GAAAW,CAAA;UACzB,IAAI0C,MAAM,CAACS,OAAO,EAAEH,UAAU,CAACD,MAAM,CAAC,EAAE;YAAA;YAAA1D,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACvC2C,MAAM,CAACW,IAAI,CAACH,OAAO,CAAC;UACrB,CAAC;UAAA;UAAA;YAAA9D,cAAA,GAAAmC,CAAA;UAAA;QACF,CAAC,MAAM;UAAA;UAAAnC,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UACN;QACD;MACD;IACD,CAAC,MAAM;MAAA;MAAAX,cAAA,GAAAmC,CAAA;MAAAnC,cAAA,GAAAW,CAAA;MACN,KAAK,IAAIiD,CAAC;QAAA;QAAA,CAAA5D,cAAA,GAAAW,CAAA,QAAG6B,KAAK,GAAEqB,GAAG;QAAA;QAAA,CAAA7D,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACwC,MAAM,GAAEE,CAAC,GAAGC,GAAG,EAAED,CAAC,EAAE,EAAE;QAC7D,MAAME,OAAO;QAAA;QAAA,CAAA9D,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACgC,QAAQ,CAACU,CAAC,CAAC;QAAC;QAAA5D,cAAA,GAAAW,CAAA;QAC1C,IAAI,IAAI,CAACO,QAAQ,CAAC0B,kBAAkB,CAACgB,CAAC,CAAC,GAAGL,aAAa,EAAE;UAAA;UAAAvD,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UACxD;UAAI;UAAA,CAAAX,cAAA,GAAAmC,CAAA,YAACkB,MAAM;UAAA;UAAA,CAAArD,cAAA,GAAAmC,CAAA,WAAKkB,MAAuB,CAACS,OAAO,CAAC,GAAE;YAAA;YAAA9D,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACjD2C,MAAM,CAACW,IAAI,CAACH,OAAO,CAAC;UACrB,CAAC;UAAA;UAAA;YAAA9D,cAAA,GAAAmC,CAAA;UAAA;QACF,CAAC,MAAM;UAAA;UAAAnC,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UACN;QACD;MACD;IACD;IAAC;IAAAX,cAAA,GAAAW,CAAA;IACD,OAAO2C,MAAM;EACd;EAEAY,mBAAmBA,CAACjB,UAAkB,EAAEI,MAAqD;IAAA;IAAArD,cAAA,GAAAc,CAAA;IAC5F,MAAMwC,MAAM;IAAA;IAAA,CAAAtD,cAAA,GAAAW,CAAA,QAAoB,EAAE;IAAC;IAAAX,cAAA,GAAAW,CAAA;IACnC,IAAI,IAAI,CAACO,QAAQ,EAAE;MAAA;MAAAlB,cAAA,GAAAmC,CAAA;MAClB,IAAIK,KAAK;MAAA;MAAA,CAAAxC,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACwB,SAAS,CAACO,UAAU,CAAC;MAC/C,IAAIkB,KAAK;MAAA;MAAA,CAAAnE,cAAA,GAAAW,CAAA,QAAG,CAAC;MAAC;MAAAX,cAAA,GAAAW,CAAA;MACd,OAAO6B,KAAK,IAAI,CAAC,EAAE;QAClB,MAAMsB,OAAO;QAAA;QAAA,CAAA9D,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACO,QAAQ,CAACgC,QAAQ,CAACV,KAAK,CAAC;QAAC;QAAAxC,cAAA,GAAAW,CAAA;QAC9C;QAAI;QAAA,CAAAX,cAAA,GAAAmC,CAAA,YAACkB,MAAM;QAAA;QAAA,CAAArD,cAAA,GAAAmC,CAAA,WAAIkB,MAAM,CAACS,OAAO,EAAEK,KAAK,CAAC,GAAE;UAAA;UAAAnE,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UACtC2C,MAAM,CAACW,IAAI,CAACH,OAAO,CAAC;QACrB,CAAC;QAAA;QAAA;UAAA9D,cAAA,GAAAmC,CAAA;QAAA;QAAAnC,cAAA,GAAAW,CAAA;QACDwD,KAAK,EAAE;QAAC;QAAAnE,cAAA,GAAAW,CAAA;QACR6B,KAAK,GAAGsB,OAAO,CAACM,WAAW;MAC5B;IACD,CAAC;IAAA;IAAA;MAAApE,cAAA,GAAAmC,CAAA;IAAA;IAAAnC,cAAA,GAAAW,CAAA;IACD,OAAO2C,MAAM;EACd;EAEAT,YAAYA,CAACL,KAAa,EAAE6B,QAAiB;IAAA;IAAArE,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IAC5C,IAAI,CAACO,QAAQ,CAAC2B,YAAY,CAACL,KAAK,EAAE6B,QAAQ,CAAC;EAC5C;EAEApC,SAASA,CAAA;IAAA;IAAAjC,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACR,IAAI,CAAC,IAAI,CAACK,UAAU,EAAE;MAAA;MAAAhB,cAAA,GAAAmC,CAAA;MAAAnC,cAAA,GAAAW,CAAA;MACrB;IACD,CAAC;IAAA;IAAA;MAAAX,cAAA,GAAAmC,CAAA;IAAA;IAED,MAAMmC,SAAS;IAAA;IAAA,CAAAtE,cAAA,GAAAW,CAAA,QAAG,IAAI,CAACK,UAAU;IACjC,MAAMuD,KAAK;IAAA;IAAA,CAAAvE,cAAA,GAAAW,CAAA,QAAG2D,SAAS,CAACE,SAAS;IACjC,MAAMC,KAAK;IAAA;IAAA,CAAAzE,cAAA,GAAAW,CAAA,QAAyD,EAAE;IAAC;IAAAX,cAAA,GAAAW,CAAA;IAEvE,KAAK,IAAIiD,CAAC;IAAA;IAAA,CAAA5D,cAAA,GAAAW,CAAA,QAAG,CAAC,GAAEiD,CAAC,GAAGW,KAAK,CAACb,MAAM,EAAEE,CAAC,EAAE,EAAE;MACtC,MAAMc,IAAI;MAAA;MAAA,CAAA1E,cAAA,GAAAW,CAAA,QAAG4D,KAAK,CAACX,CAAC,CAAC;MAAC;MAAA5D,cAAA,GAAAW,CAAA;MAEtB;MAAI;MAAA,CAAAX,cAAA,GAAAmC,CAAA,WAAAuC,IAAI,CAACC,QAAQ,KAAKnE,QAAQ,CAACoE,MAAM;MAAA;MAAA,CAAA5E,cAAA,GAAAmC,CAAA,WAAIuC,IAAI,CAACG,QAAQ,KAAK,UAAU,GAAE;QAAA;QAAA7E,cAAA,GAAAmC,CAAA;QAAAnC,cAAA,GAAAW,CAAA;QACtE;MACD,CAAC;MAAA;MAAA;QAAAX,cAAA,GAAAmC,CAAA;MAAA;MAED,MAAM2C,QAAQ;MAAA;MAAA,CAAA9E,cAAA,GAAAW,CAAA,QAAGoE,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,GAAGC,KAAK,CAACC,IAAI,CAACC,wBAAwB,CAACT,IAAI,CAACU,OAAO,EAAE,CAAC,EAAEC,MAAM,IAAI;QAAA;QAAArF,cAAA,GAAAc,CAAA;QAAAd,cAAA,GAAAW,CAAA;QAAA,OAAA0E,MAAM,CAACC,KAAK;MAAL,CAAK,CAAC,CAAC;MAAC;MAAAtF,cAAA,GAAAW,CAAA;MAC9G,IAAImE,QAAQ,GAAG,CAAC,EAAE;QAAA;QAAA9E,cAAA,GAAAmC,CAAA;QAAAnC,cAAA,GAAAW,CAAA;QACjB;QACA8D,KAAK,CAACR,IAAI,CAAC;UAAEzB,KAAK,EAAEoB,CAAC;UAAEO,KAAK,EAAEW,QAAQ;UAAES,QAAQ,EAAE;QAAC,CAAE,CAAC;MACvD,CAAC;MAAA;MAAA;QAAAvF,cAAA,GAAAmC,CAAA;MAAA;IACF;IAEA;IACA,MAAMqD,gBAAgB;IAAA;IAAA,CAAAxF,cAAA,GAAAW,CAAA,QAAwB8D,KAAK,CAACgB,GAAG,CAAC,CAACC,KAAK,EAAEC,UAAU,KAAI;MAAA;MAAA3F,cAAA,GAAAc,CAAA;MAC7E,IAAI8E,GAAG;MAAA;MAAA,CAAA5F,cAAA,GAAAW,CAAA,QAAuBkF,SAAS;MAAC;MAAA7F,cAAA,GAAAW,CAAA;MACxC,KAAK,IAAIiD,CAAC;MAAA;MAAA,CAAA5D,cAAA,GAAAW,CAAA,QAAGgF,UAAU,GAAG,CAAC,GAAE/B,CAAC,GAAGa,KAAK,CAACf,MAAM,EAAE,EAAEE,CAAC,EAAE;QAAA;QAAA5D,cAAA,GAAAW,CAAA;QACnD,IAAI8D,KAAK,CAACb,CAAC,CAAC,CAACO,KAAK,IAAIuB,KAAK,CAACvB,KAAK,EAAE;UAAA;UAAAnE,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UAClCiF,GAAG,GAAGnB,KAAK,CAACb,CAAC,CAAC,CAACpB,KAAK,GAAG,CAAC;UAAC;UAAAxC,cAAA,GAAAW,CAAA;UACzB;QACD,CAAC;QAAA;QAAA;UAAAX,cAAA,GAAAmC,CAAA;QAAA;MACF;MAEA,MAAMoD,QAAQ;MAAA;MAAA,CAAAvF,cAAA,GAAAW,CAAA,QAAGiF,GAAG,KAAKC,SAAS;MAAA;MAAA,CAAA7F,cAAA,GAAAmC,CAAA,WAAGyD,GAAG;MAAA;MAAA,CAAA5F,cAAA,GAAAmC,CAAA,WAAGoC,KAAK,CAACb,MAAM,GAAG,CAAC;MAE3D;MAAA;MAAA1D,cAAA,GAAAW,CAAA;MACA,OAAO;QACNmF,KAAK,EAAEJ,KAAK,CAAClD,KAAK,GAAG,CAAC;QACtBoD,GAAG,EAAEL,QAAQ,GAAG,CAAC;QACjBQ,IAAI,EAAE;OACN;IACF,CAAC,CAAC,CAAC1C,MAAM,CAAC2C,KAAK,IAAI;MAAA;MAAAhG,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAAA,OAAAqF,KAAK,CAACF,KAAK,KAAKE,KAAK,CAACJ,GAAG;IAAH,CAAG,CAAC;IAE7C,MAAMK,UAAU;IAAA;IAAA,CAAAjG,cAAA,GAAAW,CAAA,QAAGJ,cAAc,CAACiF,gBAAgB,EAAE9E,iBAAiB,CAAC;IAEtE;IACA,IAAIkD,CAAC;IAAA;IAAA,CAAA5D,cAAA,GAAAW,CAAA,QAAG,CAAC;IAAC;IAAAX,cAAA,GAAAW,CAAA;IACV,MAAMuF,aAAa,GAAGA,CAAA,KAAK;MAAA;MAAAlG,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAC1B,OAAOiD,CAAC,GAAG,IAAI,CAAC1C,QAAQ,CAACwC,MAAM,EAAE;QAChC,MAAMf,WAAW;QAAA;QAAA,CAAA3C,cAAA,GAAAW,CAAA,SAAG,IAAI,CAACO,QAAQ,CAACyB,WAAW,CAACiB,CAAC,CAAC;QAAC;QAAA5D,cAAA,GAAAW,CAAA;QACjDiD,CAAC,EAAE;QAAC;QAAA5D,cAAA,GAAAW,CAAA;QACJ,IAAIgC,WAAW,EAAE;UAAA;UAAA3C,cAAA,GAAAmC,CAAA;UAAAnC,cAAA,GAAAW,CAAA;UAChB,OAAOiD,CAAC,GAAG,CAAC;QACb,CAAC;QAAA;QAAA;UAAA5D,cAAA,GAAAmC,CAAA;QAAA;MACF;MAAC;MAAAnC,cAAA,GAAAW,CAAA;MACD,OAAO,CAAC,CAAC;IACV,CAAC;IAED,IAAIwF,CAAC;IAAA;IAAA,CAAAnG,cAAA,GAAAW,CAAA,SAAG,CAAC;IACT,IAAIyF,cAAc;IAAA;IAAA,CAAApG,cAAA,GAAAW,CAAA,SAAGuF,aAAa,EAAE;IAAC;IAAAlG,cAAA,GAAAW,CAAA;IAErC;IAAO;IAAA,CAAAX,cAAA,GAAAmC,CAAA,WAAAiE,cAAc,KAAK,CAAC,CAAC;IAAA;IAAA,CAAApG,cAAA,GAAAmC,CAAA,WAAIgE,CAAC,GAAGF,UAAU,CAACvC,MAAM,GAAE;MACtD;MACA,MAAM2C,QAAQ;MAAA;MAAA,CAAArG,cAAA,GAAAW,CAAA,SAAG2D,SAAS,CAACgC,eAAe,CAAC,IAAI,CAAC/E,0BAA0B,CAAC6E,cAAc,CAAC,CAAC;MAAC;MAAApG,cAAA,GAAAW,CAAA;MAC5F,IAAI0F,QAAQ,EAAE;QAAA;QAAArG,cAAA,GAAAmC,CAAA;QACb,MAAMoE,kBAAkB;QAAA;QAAA,CAAAvG,cAAA,GAAAW,CAAA,SAAG0F,QAAQ,CAACP,KAAK;QAAC;QAAA9F,cAAA,GAAAW,CAAA;QAE1C,OAAOwF,CAAC,GAAGF,UAAU,CAACvC,MAAM,EAAE;UAC7B,MAAMiC,UAAU;UAAA;UAAA,CAAA3F,cAAA,GAAAW,CAAA,SAAGsF,UAAU,CAACrD,kBAAkB,CAACuD,CAAC,CAAC,GAAG,CAAC;UAAC;UAAAnG,cAAA,GAAAW,CAAA;UACxD,IAAI4F,kBAAkB,IAAIZ,UAAU,EAAE;YAAA;YAAA3F,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACrCsF,UAAU,CAACpD,YAAY,CAACsD,CAAC,EAAEI,kBAAkB,KAAKZ,UAAU,CAAC;YAAC;YAAA3F,cAAA,GAAAW,CAAA;YAC9DwF,CAAC,EAAE;UACJ,CAAC,MAAM;YAAA;YAAAnG,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACN;UACD;QACD;MACD,CAAC;MAAA;MAAA;QAAAX,cAAA,GAAAmC,CAAA;MAAA;MAAAnC,cAAA,GAAAW,CAAA;MACDyF,cAAc,GAAGF,aAAa,EAAE;IACjC;IAAC;IAAAlG,cAAA,GAAAW,CAAA;IAED,OAAOwF,CAAC,GAAGF,UAAU,CAACvC,MAAM,EAAE;MAAA;MAAA1D,cAAA,GAAAW,CAAA;MAC7BsF,UAAU,CAACpD,YAAY,CAACsD,CAAC,EAAE,KAAK,CAAC;MAAC;MAAAnG,cAAA,GAAAW,CAAA;MAClCwF,CAAC,EAAE;IACJ;IAEA,MAAMK,UAAU;IAAA;IAAA,CAAAxG,cAAA,GAAAW,CAAA,SAAiB,EAAE;IAAC;IAAAX,cAAA,GAAAW,CAAA;IACpC,KAAK,IAAIiD,CAAC;IAAA;IAAA,CAAA5D,cAAA,GAAAW,CAAA,SAAG,CAAC,GAAEiD,CAAC,GAAGqC,UAAU,CAACvC,MAAM,EAAEE,CAAC,EAAE,EAAE;MAC3C,MAAMR,MAAM;MAAA;MAAA,CAAApD,cAAA,GAAAW,CAAA,SAAGsF,UAAU,CAAC/C,QAAQ,CAACU,CAAC,CAAC;MAAC;MAAA5D,cAAA,GAAAW,CAAA;MACtC6F,UAAU,CAACvC,IAAI,CAAC;QAAE6B,KAAK,EAAE1C,MAAM,CAACqD,eAAe,GAAG,CAAC;QAAEb,GAAG,EAAExC,MAAM,CAACG,aAAa,GAAG;MAAC,CAAE,CAAC;IACtF;IAEA;IACA;IAAA;IAAAvD,cAAA,GAAAW,CAAA;IACA,IAAI,CAACY,0BAA0B,CAACgB,OAAO,CAACmE,EAAE,IAAI;MAAA;MAAA1G,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAAA,OAAA2D,SAAS,CAACqC,eAAe,CAACD,EAAE,EAAE,IAAI,0DAAkD;IAAlD,CAAkD,CAAC;IAAC;IAAA1G,cAAA,GAAAW,CAAA;IACpI,IAAI,CAACY,0BAA0B,GAAGiF,UAAU,CAACf,GAAG,CAACrC,MAAM,IAAI;MAAA;MAAApD,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAAA,OAAA2D,SAAS,CAACqC,eAAe,CAAC,IAAI,EAAEvD,MAAM,0DAAkD;IAAlD,CAAkD,CAAC,CAACC,MAAM,CAACuD,GAAG,IAAI;MAAA;MAAA5G,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAW,CAAA;MAAA,OAAAiG,GAAG,KAAK,IAAI;IAAJ,CAAI,CAAa;IAAC;IAAA5G,cAAA,GAAAW,CAAA;IAE7L,IAAI,CAACO,QAAQ,GAAG+E,UAAU;IAAC;IAAAjG,cAAA,GAAAW,CAAA;IAC3B,IAAI,CAACS,0BAA0B,CAAC2B,IAAI,EAAE;EACvC;EAEA8D,UAAUA,CAAA;IAAA;IAAA7G,cAAA,GAAAc,CAAA;IACT,MAAMgG,eAAe;IAAA;IAAA,CAAA9G,cAAA,GAAAW,CAAA,SAAiB,EAAE;IACxC,IAAIiD,CAAC;IAAA;IAAA,CAAA5D,cAAA,GAAAW,CAAA,SAAG,CAAC;IAAC;IAAAX,cAAA,GAAAW,CAAA;IACV,OAAOiD,CAAC,GAAG,IAAI,CAAC1C,QAAQ,CAACwC,MAAM,EAAE;MAChC,MAAMf,WAAW;MAAA;MAAA,CAAA3C,cAAA,GAAAW,CAAA,SAAG,IAAI,CAACO,QAAQ,CAACyB,WAAW,CAACiB,CAAC,CAAC;MAAC;MAAA5D,cAAA,GAAAW,CAAA;MAEjD,IAAIgC,WAAW,EAAE;QAAA;QAAA3C,cAAA,GAAAmC,CAAA;QAChB,MAAMiB,MAAM;QAAA;QAAA,CAAApD,cAAA,GAAAW,CAAA,SAAG,IAAI,CAACO,QAAQ,CAACgC,QAAQ,CAACU,CAAC,CAAC;QAAC;QAAA5D,cAAA,GAAAW,CAAA;QACzCmG,eAAe,CAAC7C,IAAI,CAAC;UAAE6B,KAAK,EAAE1C,MAAM,CAACqD,eAAe,GAAG,CAAC;UAAEb,GAAG,EAAExC,MAAM,CAACG,aAAa,GAAG;QAAC,CAAE,CAAC;MAC3F,CAAC;MAAA;MAAA;QAAAvD,cAAA,GAAAmC,CAAA;MAAA;MAAAnC,cAAA,GAAAW,CAAA;MAEDiD,CAAC,EAAE;IACJ;IAAC;IAAA5D,cAAA,GAAAW,CAAA;IAED,OAAOmG,eAAe;EACvB;EAEOC,YAAYA,CAACC,KAAmB;IAAA;IAAAhH,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAW,CAAA;IACtC,IAAI,CAAC,IAAI,CAACK,UAAU,EAAE;MAAA;MAAAhB,cAAA,GAAAmC,CAAA;MAAAnC,cAAA,GAAAW,CAAA;MACrB,OAAO,KAAK;IACb,CAAC;IAAA;IAAA;MAAAX,cAAA,GAAAmC,CAAA;IAAA;IAED,IAAIyB,CAAC;IAAA;IAAA,CAAA5D,cAAA,GAAAW,CAAA,SAAG,CAAC;IACT,IAAIwF,CAAC;IAAA;IAAA,CAAAnG,cAAA,GAAAW,CAAA,SAAG,CAAC;IAAC;IAAAX,cAAA,GAAAW,CAAA;IAEV;IAAO;IAAA,CAAAX,cAAA,GAAAmC,CAAA,WAAAgE,CAAC,GAAGa,KAAK,CAACtD,MAAM;IAAA;IAAA,CAAA1D,cAAA,GAAAmC,CAAA,WAAIyB,CAAC,GAAG,IAAI,CAAC1C,QAAQ,CAACwC,MAAM,GAAE;MACpD;MACA,MAAM2C,QAAQ;MAAA;MAAA,CAAArG,cAAA,GAAAW,CAAA,SAAG,IAAI,CAACK,UAAU,CAACsF,eAAe,CAAC,IAAI,CAAC/E,0BAA0B,CAACqC,CAAC,CAAC,CAAC;MAAC;MAAA5D,cAAA,GAAAW,CAAA;MACrF,IAAI0F,QAAQ,EAAE;QAAA;QAAArG,cAAA,GAAAmC,CAAA;QACb,MAAMoE,kBAAkB;QAAA;QAAA,CAAAvG,cAAA,GAAAW,CAAA,SAAGqG,KAAK,CAACb,CAAC,CAAC,CAACL,KAAK;QAAC;QAAA9F,cAAA,GAAAW,CAAA;QAE1C,OAAOiD,CAAC,GAAG,IAAI,CAAC1C,QAAQ,CAACwC,MAAM,EAAE;UAChC,MAAMiC,UAAU;UAAA;UAAA,CAAA3F,cAAA,GAAAW,CAAA,SAAG,IAAI,CAACO,QAAQ,CAAC0B,kBAAkB,CAACgB,CAAC,CAAC,GAAG,CAAC;UAAC;UAAA5D,cAAA,GAAAW,CAAA;UAC3D,IAAI4F,kBAAkB,IAAIZ,UAAU,EAAE;YAAA;YAAA3F,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACrC,IAAI,CAACO,QAAQ,CAAC2B,YAAY,CAACe,CAAC,EAAE2C,kBAAkB,KAAKZ,UAAU,CAAC;YAAC;YAAA3F,cAAA,GAAAW,CAAA;YACjEiD,CAAC,EAAE;UACJ,CAAC,MAAM;YAAA;YAAA5D,cAAA,GAAAmC,CAAA;YAAAnC,cAAA,GAAAW,CAAA;YACN;UACD;QACD;MACD,CAAC;MAAA;MAAA;QAAAX,cAAA,GAAAmC,CAAA;MAAA;MAAAnC,cAAA,GAAAW,CAAA;MACDwF,CAAC,EAAE;IACJ;IAAC;IAAAnG,cAAA,GAAAW,CAAA;IAED,OAAOiD,CAAC,GAAG,IAAI,CAAC1C,QAAQ,CAACwC,MAAM,EAAE;MAAA;MAAA1D,cAAA,GAAAW,CAAA;MAChC,IAAI,CAACO,QAAQ,CAAC2B,YAAY,CAACe,CAAC,EAAE,KAAK,CAAC;MAAC;MAAA5D,cAAA,GAAAW,CAAA;MACrCiD,CAAC,EAAE;IACJ;IAAC;IAAA5D,cAAA,GAAAW,CAAA;IAED,OAAO,IAAI;EACZ;;AAGD,OAAM,SAAUsG,yBAAyBA,CAACC,YAA0B,EAAE1E,KAAa,EAAE2E,SAAkB;EAAA;EAAAnH,cAAA,GAAAc,CAAA;EACtG,MAAMkF,KAAK;EAAA;EAAA,CAAAhG,cAAA,GAAAW,CAAA,SAAGuG,YAAY,CAAC/F,OAAO,CAACuB,SAAS,CAACF,KAAK,GAAG,CAAC,CAAC;EAAC;EAAAxC,cAAA,GAAAW,CAAA;EACxDuG,YAAY,CAACrE,YAAY,CAACmD,KAAK,EAAEmB,SAAS,CAAC;AAC5C;AAEA,OAAM,UAAWhC,wBAAwBA,CAACiC,WAAmB;EAAA;EAAApH,cAAA,GAAAc,CAAA;EAAAd,cAAA,GAAAW,CAAA;EAC5D,KAAK,MAAM0G,KAAK,IAAIhH,MAAM,CAACiH,KAAK,CAACF,WAAW,EAAE;IAAEG,GAAG,EAAE;EAAI,CAAE,CAAC,EAAE;IAAA;IAAAvH,cAAA,GAAAW,CAAA;IAC7D,IAAI0G,KAAK,CAACG,IAAI,KAAK,SAAS,EAAE;MAAA;MAAAxH,cAAA,GAAAmC,CAAA;MAAAnC,cAAA,GAAAW,CAAA;MAC7B,MAAM;QACL2E,KAAK,EAAE+B,KAAK,CAAC/B,KAAK;QAClBmC,IAAI,EAAEvH,iBAAiB,CAAC;UAAEwH,KAAK,EAAEL,KAAK,CAACM;QAAG,CAAE,CAAC,CAACC,IAAI;OAClD;IACF,CAAC;IAAA;IAAA;MAAA5H,cAAA,GAAAmC,CAAA;IAAA;EACF;AACD","ignoreList":[]}