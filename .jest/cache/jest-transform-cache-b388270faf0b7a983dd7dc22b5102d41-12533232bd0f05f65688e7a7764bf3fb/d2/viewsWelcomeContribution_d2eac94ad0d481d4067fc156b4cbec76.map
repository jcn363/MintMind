{"version":3,"names":["cov_sghrin5q2","actualCoverage","nls","Disposable","ContextKeyExpr","ViewIdentifierMap","Registry","Extensions","ViewContainerExtensions","isProposedApiEnabled","viewsRegistry","s","as","ViewsRegistry","ViewsWelcomeContribution","viewWelcomeContents","Map","constructor","extensionPoint","f","setHandler","_","added","removed","contribution","welcome","value","disposable","get","dispose","welcomesByViewId","group","order","parseGroupAndOrder","precondition","deserialize","enablement","id","b","view","viewContentMap","set","content","contents","when","disposables","registerViewWelcomeContent2","description","collector","warn","localize","identifier","idx","lastIndexOf","substr","Number","undefined"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/welcomeViews/common/viewsWelcomeContribution.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { Disposable, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { IExtensionPoint, IExtensionPointUser } from '../../../services/extensions/common/extensionsRegistry.js';\nimport { ViewsWelcomeExtensionPoint, ViewWelcome, ViewIdentifierMap } from './viewsWelcomeExtensionPoint.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions as ViewContainerExtensions, IViewContentDescriptor, IViewsRegistry } from '../../../common/views.js';\nimport { isProposedApiEnabled } from '../../../services/extensions/common/extensions.js';\n\nconst viewsRegistry = Registry.as<IViewsRegistry>(ViewContainerExtensions.ViewsRegistry);\n\nexport class ViewsWelcomeContribution extends Disposable implements IWorkbenchContribution {\n\n\tprivate viewWelcomeContents = new Map<ViewWelcome, IDisposable>();\n\n\tconstructor(extensionPoint: IExtensionPoint<ViewsWelcomeExtensionPoint>) {\n\t\tsuper();\n\n\t\textensionPoint.setHandler((_, { added, removed }) => {\n\t\t\tfor (const contribution of removed) {\n\t\t\t\tfor (const welcome of contribution.value) {\n\t\t\t\t\tconst disposable = this.viewWelcomeContents.get(welcome);\n\n\t\t\t\t\tdisposable?.dispose();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst welcomesByViewId = new Map<string, Map<ViewWelcome, IViewContentDescriptor>>();\n\n\t\t\tfor (const contribution of added) {\n\t\t\t\tfor (const welcome of contribution.value) {\n\t\t\t\t\tconst { group, order } = parseGroupAndOrder(welcome, contribution);\n\t\t\t\t\tconst precondition = ContextKeyExpr.deserialize(welcome.enablement);\n\n\t\t\t\t\tconst id = ViewIdentifierMap[welcome.view] ?? welcome.view;\n\t\t\t\t\tlet viewContentMap = welcomesByViewId.get(id);\n\t\t\t\t\tif (!viewContentMap) {\n\t\t\t\t\t\tviewContentMap = new Map();\n\t\t\t\t\t\twelcomesByViewId.set(id, viewContentMap);\n\t\t\t\t\t}\n\n\t\t\t\t\tviewContentMap.set(welcome, {\n\t\t\t\t\t\tcontent: welcome.contents,\n\t\t\t\t\t\twhen: ContextKeyExpr.deserialize(welcome.when),\n\t\t\t\t\t\tprecondition,\n\t\t\t\t\t\tgroup,\n\t\t\t\t\t\torder\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [id, viewContentMap] of welcomesByViewId) {\n\t\t\t\tconst disposables = viewsRegistry.registerViewWelcomeContent2(id, viewContentMap);\n\n\t\t\t\tfor (const [welcome, disposable] of disposables) {\n\t\t\t\t\tthis.viewWelcomeContents.set(welcome, disposable);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction parseGroupAndOrder(welcome: ViewWelcome, contribution: IExtensionPointUser<ViewsWelcomeExtensionPoint>): { group: string | undefined; order: number | undefined } {\n\n\tlet group: string | undefined;\n\tlet order: number | undefined;\n\tif (welcome.group) {\n\t\tif (!isProposedApiEnabled(contribution.description, 'contribViewsWelcome')) {\n\t\t\tcontribution.collector.warn(nls.localize('ViewsWelcomeExtensionPoint.proposedAPI', \"The viewsWelcome contribution in '{0}' requires 'enabledApiProposals: [\\\"contribViewsWelcome\\\"]' in order to use the 'group' proposed property.\", contribution.description.identifier.value));\n\t\t\treturn { group, order };\n\t\t}\n\n\t\tconst idx = welcome.group.lastIndexOf('@');\n\t\tif (idx > 0) {\n\t\t\tgroup = welcome.group.substr(0, idx);\n\t\t\torder = Number(welcome.group.substr(idx + 1)) || undefined;\n\t\t} else {\n\t\t\tgroup = welcome.group;\n\t\t}\n\t}\n\treturn { group, order };\n}\n"],"mappings":"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","ignoreList":[]}