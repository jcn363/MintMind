{"version":3,"names":["cov_1ahp25flgp","actualCoverage","Disposable","DisposableStore","MarkerSeverity","TaskProblemMonitor","terminalMarkerMap","s","Map","terminalDisposables","constructor","f","addTerminal","terminal","problemMatcher","set","instanceId","resources","markers","store","add","onDisposed","delete","get","dispose","onDidFindErrors","markerData","b","clear","marker","severity","Error","resource","toString","markersForOwner","owner","markerMap","onDidRequestInvalidateLastMarker","getTaskProblems","undefined","size","result","markersMap","push"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/tasks/browser/taskProblemMonitor.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { AbstractProblemCollector } from '../common/problemCollectors.js';\nimport { ITerminalInstance } from '../../terminal/browser/terminal.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IMarkerData, MarkerSeverity, IMarker as ITaskMarker } from '../../../../platform/markers/common/markers.js';\n\ninterface ITerminalMarkerData {\n\treadonly resources: Map<string, URI>;\n\treadonly markers: Map<string, Map<string, IMarkerData>>;\n}\n\nexport class TaskProblemMonitor extends Disposable {\n\n\tprivate readonly terminalMarkerMap: Map<number, ITerminalMarkerData> = new Map();\n\tprivate readonly terminalDisposables: Map<number, DisposableStore> = new Map();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\taddTerminal(terminal: ITerminalInstance, problemMatcher: AbstractProblemCollector) {\n\t\tthis.terminalMarkerMap.set(terminal.instanceId, {\n\t\t\tresources: new Map<string, URI>(),\n\t\t\tmarkers: new Map<string, Map<string, IMarkerData>>()\n\t\t});\n\n\t\tconst store = new DisposableStore();\n\t\tthis.terminalDisposables.set(terminal.instanceId, store);\n\n\t\tstore.add(terminal.onDisposed(() => {\n\t\t\tthis.terminalMarkerMap.delete(terminal.instanceId);\n\t\t\tthis.terminalDisposables.get(terminal.instanceId)?.dispose();\n\t\t\tthis.terminalDisposables.delete(terminal.instanceId);\n\t\t}));\n\n\t\tstore.add(problemMatcher.onDidFindErrors((markers: ITaskMarker[]) => {\n\t\t\tconst markerData = this.terminalMarkerMap.get(terminal.instanceId);\n\t\t\tif (markerData) {\n\t\t\t\t// Clear existing markers for a new set, otherwise older compilation\n\t\t\t\t// issues will be included\n\t\t\t\tmarkerData.markers.clear();\n\t\t\t\tmarkerData.resources.clear();\n\n\t\t\t\tfor (const marker of markers) {\n\t\t\t\t\tif (marker.severity === MarkerSeverity.Error) {\n\t\t\t\t\t\tmarkerData.resources.set(marker.resource.toString(), marker.resource);\n\t\t\t\t\t\tconst markersForOwner = markerData.markers.get(marker.owner);\n\t\t\t\t\t\tlet markerMap = markersForOwner;\n\t\t\t\t\t\tif (!markerMap) {\n\t\t\t\t\t\t\tmarkerMap = new Map();\n\t\t\t\t\t\t\tmarkerData.markers.set(marker.owner, markerMap);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmarkerMap.set(marker.resource.toString(), marker);\n\t\t\t\t\t\tthis.terminalMarkerMap.set(terminal.instanceId, markerData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tstore.add(problemMatcher.onDidRequestInvalidateLastMarker(() => {\n\t\t\tconst markerData = this.terminalMarkerMap.get(terminal.instanceId);\n\t\t\tmarkerData?.markers.clear();\n\t\t\tmarkerData?.resources.clear();\n\t\t\tthis.terminalMarkerMap.set(terminal.instanceId, {\n\t\t\t\tresources: new Map<string, URI>(),\n\t\t\t\tmarkers: new Map<string, Map<string, IMarkerData>>()\n\t\t\t});\n\t\t}));\n\t}\n\n\t/**\n\t * Gets the task problems for a specific terminal instance\n\t * @param instanceId The terminal instance ID\n\t * @returns Map of problem matchers to their resources and marker data, or undefined if no problems found\n\t */\n\tpublic getTaskProblems(instanceId: number): Map<string, { resources: URI[]; markers: IMarkerData[] }> | undefined {\n\t\tconst markerData = this.terminalMarkerMap.get(instanceId);\n\t\tif (!markerData) {\n\t\t\treturn undefined;\n\t\t} else if (markerData.markers.size === 0) {\n\t\t\treturn new Map();\n\t\t}\n\n\t\tconst result = new Map<string, { resources: URI[]; markers: IMarkerData[] }>();\n\t\tfor (const [owner, markersMap] of markerData.markers) {\n\t\t\tconst resources: URI[] = [];\n\t\t\tconst markers: IMarkerData[] = [];\n\t\t\tfor (const [resource, marker] of markersMap) {\n\t\t\t\tresources.push(markerData.resources.get(resource)!);\n\t\t\t\tmarkers.push(marker);\n\t\t\t}\n\t\t\tresult.set(owner, { resources, markers });\n\t\t}\n\t\treturn result;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA4BG;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AA5BH;;;;AAKA,SAASE,UAAU,EAAEC,eAAe,QAAQ,sCAAsC;AAIlF,SAAsBC,cAAc,QAAgC,gDAAgD;AAOpH,OAAM,MAAOC,kBAAmB,SAAQH,UAAU;EAEhCI,iBAAiB;EAAA;EAAA,CAAAN,cAAA,GAAAO,CAAA,OAAqC,IAAIC,GAAG,EAAE;EAC/DC,mBAAmB;EAAA;EAAA,CAAAT,cAAA,GAAAO,CAAA,OAAiC,IAAIC,GAAG,EAAE;EAE9EE,YAAA;IAAA;IAAAV,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAO,CAAA;IACC,KAAK,EAAE;EACR;EAEAK,WAAWA,CAACC,QAA2B,EAAEC,cAAwC;IAAA;IAAAd,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAO,CAAA;IAChF,IAAI,CAACD,iBAAiB,CAACS,GAAG,CAACF,QAAQ,CAACG,UAAU,EAAE;MAC/CC,SAAS,EAAE,IAAIT,GAAG,EAAe;MACjCU,OAAO,EAAE,IAAIV,GAAG;KAChB,CAAC;IAEF,MAAMW,KAAK;IAAA;IAAA,CAAAnB,cAAA,GAAAO,CAAA,OAAG,IAAIJ,eAAe,EAAE;IAAC;IAAAH,cAAA,GAAAO,CAAA;IACpC,IAAI,CAACE,mBAAmB,CAACM,GAAG,CAACF,QAAQ,CAACG,UAAU,EAAEG,KAAK,CAAC;IAAC;IAAAnB,cAAA,GAAAO,CAAA;IAEzDY,KAAK,CAACC,GAAG,CAACP,QAAQ,CAACQ,UAAU,CAAC,MAAK;MAAA;MAAArB,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAO,CAAA;MAClC,IAAI,CAACD,iBAAiB,CAACgB,MAAM,CAACT,QAAQ,CAACG,UAAU,CAAC;MAAC;MAAAhB,cAAA,GAAAO,CAAA;MACnD,IAAI,CAACE,mBAAmB,CAACc,GAAG,CAACV,QAAQ,CAACG,UAAU,CAAC,EAAEQ,OAAO,EAAE;MAAC;MAAAxB,cAAA,GAAAO,CAAA;MAC7D,IAAI,CAACE,mBAAmB,CAACa,MAAM,CAACT,QAAQ,CAACG,UAAU,CAAC;IACrD,CAAC,CAAC,CAAC;IAAC;IAAAhB,cAAA,GAAAO,CAAA;IAEJY,KAAK,CAACC,GAAG,CAACN,cAAc,CAACW,eAAe,CAAEP,OAAsB,IAAI;MAAA;MAAAlB,cAAA,GAAAW,CAAA;MACnE,MAAMe,UAAU;MAAA;MAAA,CAAA1B,cAAA,GAAAO,CAAA,QAAG,IAAI,CAACD,iBAAiB,CAACiB,GAAG,CAACV,QAAQ,CAACG,UAAU,CAAC;MAAC;MAAAhB,cAAA,GAAAO,CAAA;MACnE,IAAImB,UAAU,EAAE;QAAA;QAAA1B,cAAA,GAAA2B,CAAA;QAAA3B,cAAA,GAAAO,CAAA;QACf;QACA;QACAmB,UAAU,CAACR,OAAO,CAACU,KAAK,EAAE;QAAC;QAAA5B,cAAA,GAAAO,CAAA;QAC3BmB,UAAU,CAACT,SAAS,CAACW,KAAK,EAAE;QAAC;QAAA5B,cAAA,GAAAO,CAAA;QAE7B,KAAK,MAAMsB,MAAM,IAAIX,OAAO,EAAE;UAAA;UAAAlB,cAAA,GAAAO,CAAA;UAC7B,IAAIsB,MAAM,CAACC,QAAQ,KAAK1B,cAAc,CAAC2B,KAAK,EAAE;YAAA;YAAA/B,cAAA,GAAA2B,CAAA;YAAA3B,cAAA,GAAAO,CAAA;YAC7CmB,UAAU,CAACT,SAAS,CAACF,GAAG,CAACc,MAAM,CAACG,QAAQ,CAACC,QAAQ,EAAE,EAAEJ,MAAM,CAACG,QAAQ,CAAC;YACrE,MAAME,eAAe;YAAA;YAAA,CAAAlC,cAAA,GAAAO,CAAA,QAAGmB,UAAU,CAACR,OAAO,CAACK,GAAG,CAACM,MAAM,CAACM,KAAK,CAAC;YAC5D,IAAIC,SAAS;YAAA;YAAA,CAAApC,cAAA,GAAAO,CAAA,QAAG2B,eAAe;YAAC;YAAAlC,cAAA,GAAAO,CAAA;YAChC,IAAI,CAAC6B,SAAS,EAAE;cAAA;cAAApC,cAAA,GAAA2B,CAAA;cAAA3B,cAAA,GAAAO,CAAA;cACf6B,SAAS,GAAG,IAAI5B,GAAG,EAAE;cAAC;cAAAR,cAAA,GAAAO,CAAA;cACtBmB,UAAU,CAACR,OAAO,CAACH,GAAG,CAACc,MAAM,CAACM,KAAK,EAAEC,SAAS,CAAC;YAChD,CAAC;YAAA;YAAA;cAAApC,cAAA,GAAA2B,CAAA;YAAA;YAAA3B,cAAA,GAAAO,CAAA;YACD6B,SAAS,CAACrB,GAAG,CAACc,MAAM,CAACG,QAAQ,CAACC,QAAQ,EAAE,EAAEJ,MAAM,CAAC;YAAC;YAAA7B,cAAA,GAAAO,CAAA;YAClD,IAAI,CAACD,iBAAiB,CAACS,GAAG,CAACF,QAAQ,CAACG,UAAU,EAAEU,UAAU,CAAC;UAC5D,CAAC;UAAA;UAAA;YAAA1B,cAAA,GAAA2B,CAAA;UAAA;QACF;MACD,CAAC;MAAA;MAAA;QAAA3B,cAAA,GAAA2B,CAAA;MAAA;IACF,CAAC,CAAC,CAAC;IAAC;IAAA3B,cAAA,GAAAO,CAAA;IACJY,KAAK,CAACC,GAAG,CAACN,cAAc,CAACuB,gCAAgC,CAAC,MAAK;MAAA;MAAArC,cAAA,GAAAW,CAAA;MAC9D,MAAMe,UAAU;MAAA;MAAA,CAAA1B,cAAA,GAAAO,CAAA,QAAG,IAAI,CAACD,iBAAiB,CAACiB,GAAG,CAACV,QAAQ,CAACG,UAAU,CAAC;MAAC;MAAAhB,cAAA,GAAAO,CAAA;MACnEmB,UAAU,EAAER,OAAO,CAACU,KAAK,EAAE;MAAC;MAAA5B,cAAA,GAAAO,CAAA;MAC5BmB,UAAU,EAAET,SAAS,CAACW,KAAK,EAAE;MAAC;MAAA5B,cAAA,GAAAO,CAAA;MAC9B,IAAI,CAACD,iBAAiB,CAACS,GAAG,CAACF,QAAQ,CAACG,UAAU,EAAE;QAC/CC,SAAS,EAAE,IAAIT,GAAG,EAAe;QACjCU,OAAO,EAAE,IAAIV,GAAG;OAChB,CAAC;IACH,CAAC,CAAC,CAAC;EACJ;EAEA;;;;;EAKO8B,eAAeA,CAACtB,UAAkB;IAAA;IAAAhB,cAAA,GAAAW,CAAA;IACxC,MAAMe,UAAU;IAAA;IAAA,CAAA1B,cAAA,GAAAO,CAAA,QAAG,IAAI,CAACD,iBAAiB,CAACiB,GAAG,CAACP,UAAU,CAAC;IAAC;IAAAhB,cAAA,GAAAO,CAAA;IAC1D,IAAI,CAACmB,UAAU,EAAE;MAAA;MAAA1B,cAAA,GAAA2B,CAAA;MAAA3B,cAAA,GAAAO,CAAA;MAChB,OAAOgC,SAAS;IACjB,CAAC,MAAM;MAAA;MAAAvC,cAAA,GAAA2B,CAAA;MAAA3B,cAAA,GAAAO,CAAA;MAAA,IAAImB,UAAU,CAACR,OAAO,CAACsB,IAAI,KAAK,CAAC,EAAE;QAAA;QAAAxC,cAAA,GAAA2B,CAAA;QAAA3B,cAAA,GAAAO,CAAA;QACzC,OAAO,IAAIC,GAAG,EAAE;MACjB,CAAC;MAAA;MAAA;QAAAR,cAAA,GAAA2B,CAAA;MAAA;IAAD;IAEA,MAAMc,MAAM;IAAA;IAAA,CAAAzC,cAAA,GAAAO,CAAA,QAAG,IAAIC,GAAG,EAAwD;IAAC;IAAAR,cAAA,GAAAO,CAAA;IAC/E,KAAK,MAAM,CAAC4B,KAAK,EAAEO,UAAU,CAAC,IAAIhB,UAAU,CAACR,OAAO,EAAE;MACrD,MAAMD,SAAS;MAAA;MAAA,CAAAjB,cAAA,GAAAO,CAAA,QAAU,EAAE;MAC3B,MAAMW,OAAO;MAAA;MAAA,CAAAlB,cAAA,GAAAO,CAAA,QAAkB,EAAE;MAAC;MAAAP,cAAA,GAAAO,CAAA;MAClC,KAAK,MAAM,CAACyB,QAAQ,EAAEH,MAAM,CAAC,IAAIa,UAAU,EAAE;QAAA;QAAA1C,cAAA,GAAAO,CAAA;QAC5CU,SAAS,CAAC0B,IAAI,CAACjB,UAAU,CAACT,SAAS,CAACM,GAAG,CAACS,QAAQ,CAAE,CAAC;QAAC;QAAAhC,cAAA,GAAAO,CAAA;QACpDW,OAAO,CAACyB,IAAI,CAACd,MAAM,CAAC;MACrB;MAAC;MAAA7B,cAAA,GAAAO,CAAA;MACDkC,MAAM,CAAC1B,GAAG,CAACoB,KAAK,EAAE;QAAElB,SAAS;QAAEC;MAAO,CAAE,CAAC;IAC1C;IAAC;IAAAlB,cAAA,GAAAO,CAAA;IACD,OAAOkC,MAAM;EACd","ignoreList":[]}