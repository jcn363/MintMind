{"version":3,"names":["cov_1mj32jgi1l","actualCoverage","constants","FSConstants","promises","FSPromises","createInterface","readLines","Platform","getOSReleaseInfo","errorLogger","f","s","b","isMacintosh","isWindows","handle","filePath","open","R_OK","err","osReleaseKeys","Set","releaseInfo","id","line","input","createReadStream","crlfDelay","Infinity","includes","key","split","toUpperCase","trim","has","value","replace","toLowerCase","id_like","version_id"],"sources":["/home/user/Desktop/MintMind/src/vs/base/node/osReleaseInfo.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { constants as FSConstants, promises as FSPromises } from 'fs';\nimport { createInterface as readLines } from 'readline';\nimport * as Platform from '../common/platform.js';\n\ntype ReleaseInfo = {\n\tid: string;\n\tid_like?: string;\n\tversion_id?: string;\n};\n\nexport async function getOSReleaseInfo(errorLogger: (error: any) => void): Promise<ReleaseInfo | undefined> {\n\tif (Platform.isMacintosh || Platform.isWindows) {\n\t\treturn;\n\t}\n\n\t// Extract release information on linux based systems\n\t// using the identifiers specified in\n\t// https://www.freedesktop.org/software/systemd/man/os-release.html\n\tlet handle: FSPromises.FileHandle | undefined;\n\tfor (const filePath of ['/etc/os-release', '/usr/lib/os-release', '/etc/lsb-release']) {\n\t\ttry {\n\t\t\thandle = await FSPromises.open(filePath, FSConstants.R_OK);\n\t\t\tbreak;\n\t\t} catch (err) { }\n\t}\n\n\tif (!handle) {\n\t\terrorLogger('Unable to retrieve release information from known identifier paths.');\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst osReleaseKeys = new Set([\n\t\t\t'ID',\n\t\t\t'DISTRIB_ID',\n\t\t\t'ID_LIKE',\n\t\t\t'VERSION_ID',\n\t\t\t'DISTRIB_RELEASE',\n\t\t]);\n\t\tconst releaseInfo: ReleaseInfo = {\n\t\t\tid: 'unknown'\n\t\t};\n\n\t\tfor await (const line of readLines({ input: handle.createReadStream(), crlfDelay: Infinity })) {\n\t\t\tif (!line.includes('=')) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst key = line.split('=')[0].toUpperCase().trim();\n\t\t\tif (osReleaseKeys.has(key)) {\n\t\t\t\tconst value = line.split('=')[1].replace(/\"/g, '').toLowerCase().trim();\n\t\t\t\tif (key === 'ID' || key === 'DISTRIB_ID') {\n\t\t\t\t\treleaseInfo.id = value;\n\t\t\t\t} else if (key === 'ID_LIKE') {\n\t\t\t\t\treleaseInfo.id_like = value;\n\t\t\t\t} else if (key === 'VERSION_ID' || key === 'DISTRIB_RELEASE') {\n\t\t\t\t\treleaseInfo.version_id = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn releaseInfo;\n\t} catch (err) {\n\t\terrorLogger(err);\n\t}\n\n\treturn;\n}\n"],"mappings":"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","ignoreList":[]}