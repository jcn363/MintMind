{"version":3,"names":["cov_2p2b420fh4","actualCoverage","mapArrayOrNot","glob","objects","extpath","fuzzyContains","getNLines","createDecorator","paths","isCancellationError","TextSearchCompleteMessageType","isThenable","VIEWLET_ID","s","PANEL_ID","VIEW_ID","SEARCH_RESULT_LANGUAGE_ID","SEARCH_EXCLUDE_CONFIG","DEFAULT_MAX_SEARCH_RESULTS","SEARCH_ELIDED_PREFIX","SEARCH_ELIDED_SUFFIX","SEARCH_ELIDED_MIN_LEN","length","ISearchService","resultIsMatch","result","f","b","rangeLocations","previewText","isFileMatch","p","resource","isAIKeyword","keyword","isProgressMessage","message","FileMatch","results","constructor","TextSearchMatch","webviewIndex","text","ranges","previewOptions","rangesArr","Array","isArray","matchLines","isSingleLineRangeList","shift","lastEnd","leadingChars","Math","floor","charsPerLine","range","previewStart","max","startColumn","previewEnd","elision","slice","push","source","preview","OneLineRange","endColumn","firstMatchLine","startLineNumber","rangeLocs","r","SearchRange","endLineNumber","line","lineNumber","getExcludes","configuration","includeSearchExcludes","fileExcludes","files","exclude","searchExcludes","search","undefined","allExcludes","Object","create","mixin","deepClone","pathIncludedInQuery","queryProps","fsPath","excludePattern","match","includePattern","usingSearchPaths","folderQueries","some","fq","searchPath","folder","isEqualOrParent","relPath","relative","SearchErrorCode","SearchError","Error","code","deserializeSearchError","error","errorMsg","canceled","details","JSON","parse","e","other","serializeSearchError","searchError","stringify","isSerializedSearchComplete","arg","type","isSerializedSearchSuccess","isSerializedFileMatch","path","isFilePatternMatch","candidate","filePatternToUse","fuzzy","pathToMatch","relativePath","SerializableFileMatch","addMatch","serialize","numMatches","resolvePatternsForProvider","globalPattern","folderPattern","merged","keys","filter","key","value","QueryGlobTester","_excludeExpression","_parsedExcludeExpression","_parsedIncludeExpression","config","folderQuery","map","pattern","includeExpression","_evalParsedExcludeExpression","testPath","basename","hasSibling","folderExclude","evaluation","matchesExcludesSync","includedInQuerySync","includedInQuery","isIncluded","Promise","all","excluded","then","hasSiblingExcludeClauses","reduce","prev","curr","hasSiblingClauses","hasSiblingPromiseFn","siblingsFn","siblings","name","resolve","list","listToMap","hasSiblingFn","excludeToGlobPattern","excludesForFolder","flatMap","patterns","baseUri","DEFAULT_TEXT_SEARCH_PREVIEW_OPTIONS"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/search/common/search.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mapArrayOrNot } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport * as glob from '../../../../base/common/glob.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport * as extpath from '../../../../base/common/extpath.js';\nimport { fuzzyContains, getNLines } from '../../../../base/common/strings.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { IFilesConfiguration } from '../../../../platform/files/common/files.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITelemetryData } from '../../../../platform/telemetry/common/telemetry.js';\nimport { Event } from '../../../../base/common/event.js';\nimport * as paths from '../../../../base/common/path.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { AISearchKeyword, GlobPattern, TextSearchCompleteMessageType } from './searchExtTypes.js';\nimport { isThenable } from '../../../../base/common/async.js';\nimport { ResourceSet } from '../../../../base/common/map.js';\n\nexport { TextSearchCompleteMessageType };\n\nexport const VIEWLET_ID = 'workbench.view.search';\nexport const PANEL_ID = 'workbench.panel.search';\nexport const VIEW_ID = 'workbench.view.search';\nexport const SEARCH_RESULT_LANGUAGE_ID = 'search-result';\n\nexport const SEARCH_EXCLUDE_CONFIG = 'search.exclude';\nexport const DEFAULT_MAX_SEARCH_RESULTS = 20000;\n\n// Warning: this pattern is used in the search editor to detect offsets. If you\n// change this, also change the search-result built-in extension\nconst SEARCH_ELIDED_PREFIX = '⟪ ';\nconst SEARCH_ELIDED_SUFFIX = ' characters skipped ⟫';\nconst SEARCH_ELIDED_MIN_LEN = (SEARCH_ELIDED_PREFIX.length + SEARCH_ELIDED_SUFFIX.length + 5) * 2;\n\nexport const ISearchService = createDecorator<ISearchService>('searchService');\n\n/**\n * A service that enables to search for files or with in files.\n */\nexport interface ISearchService {\n\treadonly _serviceBrand: undefined;\n\ttextSearch(query: ITextQuery, token?: CancellationToken, onProgress?: (result: ISearchProgressItem) => void): Promise<ISearchComplete>;\n\taiTextSearch(query: IAITextQuery, token?: CancellationToken, onProgress?: (result: ISearchProgressItem) => void): Promise<ISearchComplete>;\n\tgetAIName(): Promise<string | undefined>;\n\ttextSearchSplitSyncAsync(query: ITextQuery, token?: CancellationToken | undefined, onProgress?: ((result: ISearchProgressItem) => void) | undefined, notebookFilesToIgnore?: ResourceSet, asyncNotebookFilesToIgnore?: Promise<ResourceSet>): { syncResults: ISearchComplete; asyncResults: Promise<ISearchComplete> };\n\tfileSearch(query: IFileQuery, token?: CancellationToken): Promise<ISearchComplete>;\n\tschemeHasFileSearchProvider(scheme: string): boolean;\n\tclearCache(cacheKey: string): Promise<void>;\n\tregisterSearchResultProvider(scheme: string, type: SearchProviderType, provider: ISearchResultProvider): IDisposable;\n}\n\n/**\n * TODO@roblou - split text from file search entirely, or share code in a more natural way.\n */\nexport const enum SearchProviderType {\n\tfile,\n\ttext,\n\taiText\n}\n\nexport interface ISearchResultProvider {\n\tgetAIName(): Promise<string | undefined>;\n\ttextSearch(query: ITextQuery, onProgress?: (p: ISearchProgressItem) => void, token?: CancellationToken): Promise<ISearchComplete>;\n\tfileSearch(query: IFileQuery, token?: CancellationToken): Promise<ISearchComplete>;\n\tclearCache(cacheKey: string): Promise<void>;\n}\n\n\nexport interface ExcludeGlobPattern<U extends UriComponents = URI> {\n\tfolder?: U;\n\tpattern: glob.IExpression;\n}\n\nexport interface IFolderQuery<U extends UriComponents = URI> {\n\tfolder: U;\n\tfolderName?: string;\n\texcludePattern?: ExcludeGlobPattern<U>[];\n\tincludePattern?: glob.IExpression;\n\tfileEncoding?: string;\n\tdisregardIgnoreFiles?: boolean;\n\tdisregardGlobalIgnoreFiles?: boolean;\n\tdisregardParentIgnoreFiles?: boolean;\n\tignoreSymlinks?: boolean;\n}\n\nexport interface ICommonQueryProps<U extends UriComponents> {\n\t/** For telemetry - indicates what is triggering the source */\n\t_reason?: string;\n\n\tfolderQueries: IFolderQuery<U>[];\n\t// The include pattern for files that gets passed into ripgrep.\n\t// Note that this will override any ignore files if applicable.\n\tincludePattern?: glob.IExpression;\n\texcludePattern?: glob.IExpression;\n\textraFileResources?: U[];\n\n\tonlyOpenEditors?: boolean;\n\n\tmaxResults?: number;\n\tusingSearchPaths?: boolean;\n\tonlyFileScheme?: boolean;\n}\n\nexport interface IFileQueryProps<U extends UriComponents> extends ICommonQueryProps<U> {\n\ttype: QueryType.File;\n\tfilePattern?: string;\n\n\t// when walking through the tree to find the result, don't use the filePattern to fuzzy match.\n\t// Instead, should use glob matching.\n\tshouldGlobMatchFilePattern?: boolean;\n\n\t/**\n\t * If true no results will be returned. Instead `limitHit` will indicate if at least one result exists or not.\n\t * Currently does not work with queries including a 'siblings clause'.\n\t */\n\texists?: boolean;\n\tsortByScore?: boolean;\n\tcacheKey?: string;\n}\n\nexport interface ITextQueryProps<U extends UriComponents> extends ICommonQueryProps<U> {\n\ttype: QueryType.Text;\n\tcontentPattern: IPatternInfo;\n\n\tpreviewOptions?: ITextSearchPreviewOptions;\n\tmaxFileSize?: number;\n\tusePCRE2?: boolean;\n\tsurroundingContext?: number;\n\n\tuserDisabledExcludesAndIgnoreFiles?: boolean;\n}\n\nexport interface IAITextQueryProps<U extends UriComponents> extends ICommonQueryProps<U> {\n\ttype: QueryType.aiText;\n\tcontentPattern: string;\n\n\tpreviewOptions?: ITextSearchPreviewOptions;\n\tmaxFileSize?: number;\n\tsurroundingContext?: number;\n\n\tuserDisabledExcludesAndIgnoreFiles?: boolean;\n}\n\nexport type IFileQuery = IFileQueryProps<URI>;\nexport type IRawFileQuery = IFileQueryProps<UriComponents>;\nexport type ITextQuery = ITextQueryProps<URI>;\nexport type IRawTextQuery = ITextQueryProps<UriComponents>;\nexport type IAITextQuery = IAITextQueryProps<URI>;\nexport type IRawAITextQuery = IAITextQueryProps<UriComponents>;\n\nexport type IRawQuery = IRawTextQuery | IRawFileQuery | IRawAITextQuery;\nexport type ISearchQuery = ITextQuery | IFileQuery | IAITextQuery;\nexport type ITextSearchQuery = ITextQuery | IAITextQuery;\n\nexport const enum QueryType {\n\tFile = 1,\n\tText = 2,\n\taiText = 3\n}\n\n/* __GDPR__FRAGMENT__\n\t\"IPatternInfo\" : {\n\t\t\"isRegExp\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\"isWordMatch\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\"wordSeparators\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\"isMultiline\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\"isCaseSensitive\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\n\t\t\"isSmartCase\": { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n\t}\n*/\nexport interface IPatternInfo {\n\tpattern: string;\n\tisRegExp?: boolean;\n\tisWordMatch?: boolean;\n\twordSeparators?: string;\n\tisMultiline?: boolean;\n\tisUnicode?: boolean;\n\tisCaseSensitive?: boolean;\n\tnotebookInfo?: INotebookPatternInfo;\n}\n\nexport interface INotebookPatternInfo {\n\tisInNotebookMarkdownInput?: boolean;\n\tisInNotebookMarkdownPreview?: boolean;\n\tisInNotebookCellInput?: boolean;\n\tisInNotebookCellOutput?: boolean;\n}\n\nexport interface IExtendedExtensionSearchOptions {\n\tusePCRE2?: boolean;\n}\n\nexport interface IFileMatch<U extends UriComponents = URI> {\n\tresource: U;\n\tresults?: ITextSearchResult<U>[];\n}\n\nexport type IRawFileMatch2 = IFileMatch<UriComponents>;\n\nexport interface ITextSearchPreviewOptions {\n\tmatchLines: number;\n\tcharsPerLine: number;\n}\n\nexport interface ISearchRange {\n\treadonly startLineNumber: number;\n\treadonly startColumn: number;\n\treadonly endLineNumber: number;\n\treadonly endColumn: number;\n}\n\nexport interface ITextSearchMatch<U extends UriComponents = URI> {\n\turi?: U;\n\trangeLocations: SearchRangeSetPairing[];\n\tpreviewText: string;\n\twebviewIndex?: number;\n\tcellFragment?: string;\n}\n\nexport interface ITextSearchContext<U extends UriComponents = URI> {\n\turi?: U;\n\ttext: string;\n\tlineNumber: number;\n}\n\nexport type ITextSearchResult<U extends UriComponents = URI> = ITextSearchMatch<U> | ITextSearchContext<U>;\n\nexport function resultIsMatch(result: ITextSearchResult): result is ITextSearchMatch {\n\treturn !!(<ITextSearchMatch>result).rangeLocations && !!(<ITextSearchMatch>result).previewText;\n}\n\nexport interface IProgressMessage {\n\tmessage: string;\n}\n\nexport type ISearchProgressItem = IFileMatch | IProgressMessage | AISearchKeyword;\n\nexport function isFileMatch(p: ISearchProgressItem): p is IFileMatch {\n\treturn !!(<IFileMatch>p).resource;\n}\n\nexport function isAIKeyword(p: ISearchProgressItem): p is AISearchKeyword {\n\treturn !!(<AISearchKeyword>p).keyword;\n}\n\nexport function isProgressMessage(p: ISearchProgressItem | ISerializedSearchProgressItem): p is IProgressMessage {\n\treturn !!(p as IProgressMessage).message;\n}\n\nexport interface ITextSearchCompleteMessage {\n\ttext: string;\n\ttype: TextSearchCompleteMessageType;\n\ttrusted?: boolean;\n}\n\nexport interface ISearchCompleteStats {\n\tlimitHit?: boolean;\n\tmessages: ITextSearchCompleteMessage[];\n\tstats?: IFileSearchStats | ITextSearchStats;\n}\n\nexport interface ISearchComplete extends ISearchCompleteStats {\n\tresults: IFileMatch[];\n\texit?: SearchCompletionExitCode;\n\taiKeywords?: AISearchKeyword[];\n}\n\nexport const enum SearchCompletionExitCode {\n\tNormal,\n\tNewSearchStarted\n}\n\nexport interface ITextSearchStats {\n\ttype: 'textSearchProvider' | 'searchProcess' | 'aiTextSearchProvider';\n}\n\nexport interface IFileSearchStats {\n\tfromCache: boolean;\n\tdetailStats: ISearchEngineStats | ICachedSearchStats | IFileSearchProviderStats;\n\n\tresultCount: number;\n\ttype: 'fileSearchProvider' | 'searchProcess';\n\tsortingTime?: number;\n}\n\nexport interface ICachedSearchStats {\n\tcacheWasResolved: boolean;\n\tcacheLookupTime: number;\n\tcacheFilterTime: number;\n\tcacheEntryCount: number;\n}\n\nexport interface ISearchEngineStats {\n\tfileWalkTime: number;\n\tdirectoriesWalked: number;\n\tfilesWalked: number;\n\tcmdTime: number;\n\tcmdResultCount?: number;\n}\n\nexport interface IFileSearchProviderStats {\n\tproviderTime: number;\n\tpostProcessTime: number;\n}\n\nexport class FileMatch implements IFileMatch {\n\tresults: ITextSearchResult[] = [];\n\tconstructor(public resource: URI) {\n\t\t// empty\n\t}\n}\n\nexport interface SearchRangeSetPairing {\n\tsource: ISearchRange;\n\tpreview: ISearchRange;\n}\n\nexport class TextSearchMatch implements ITextSearchMatch {\n\trangeLocations: SearchRangeSetPairing[] = [];\n\tpreviewText: string;\n\twebviewIndex?: number;\n\n\tconstructor(text: string, ranges: ISearchRange | ISearchRange[], previewOptions?: ITextSearchPreviewOptions, webviewIndex?: number) {\n\t\tthis.webviewIndex = webviewIndex;\n\n\t\t// Trim preview if this is one match and a single-line match with a preview requested.\n\t\t// Otherwise send the full text, like for replace or for showing multiple previews.\n\t\t// TODO this is fishy.\n\t\tconst rangesArr = Array.isArray(ranges) ? ranges : [ranges];\n\n\t\tif (previewOptions && previewOptions.matchLines === 1 && isSingleLineRangeList(rangesArr)) {\n\t\t\t// 1 line preview requested\n\t\t\ttext = getNLines(text, previewOptions.matchLines);\n\n\t\t\tlet result = '';\n\t\t\tlet shift = 0;\n\t\t\tlet lastEnd = 0;\n\t\t\tconst leadingChars = Math.floor(previewOptions.charsPerLine / 5);\n\t\t\tfor (const range of rangesArr) {\n\t\t\t\tconst previewStart = Math.max(range.startColumn - leadingChars, 0);\n\t\t\t\tconst previewEnd = range.startColumn + previewOptions.charsPerLine;\n\t\t\t\tif (previewStart > lastEnd + leadingChars + SEARCH_ELIDED_MIN_LEN) {\n\t\t\t\t\tconst elision = SEARCH_ELIDED_PREFIX + (previewStart - lastEnd) + SEARCH_ELIDED_SUFFIX;\n\t\t\t\t\tresult += elision + text.slice(previewStart, previewEnd);\n\t\t\t\t\tshift += previewStart - (lastEnd + elision.length);\n\t\t\t\t} else {\n\t\t\t\t\tresult += text.slice(lastEnd, previewEnd);\n\t\t\t\t}\n\n\t\t\t\tlastEnd = previewEnd;\n\t\t\t\tthis.rangeLocations.push({\n\t\t\t\t\tsource: range,\n\t\t\t\t\tpreview: new OneLineRange(0, range.startColumn - shift, range.endColumn - shift)\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tthis.previewText = result;\n\t\t} else {\n\t\t\tconst firstMatchLine = Array.isArray(ranges) ? ranges[0].startLineNumber : ranges.startLineNumber;\n\n\t\t\tconst rangeLocs = mapArrayOrNot(ranges, r => ({\n\t\t\t\tpreview: new SearchRange(r.startLineNumber - firstMatchLine, r.startColumn, r.endLineNumber - firstMatchLine, r.endColumn),\n\t\t\t\tsource: r\n\t\t\t}));\n\n\t\t\tthis.rangeLocations = Array.isArray(rangeLocs) ? rangeLocs : [rangeLocs];\n\t\t\tthis.previewText = text;\n\t\t}\n\t}\n}\n\nfunction isSingleLineRangeList(ranges: ISearchRange[]): boolean {\n\tconst line = ranges[0].startLineNumber;\n\tfor (const r of ranges) {\n\t\tif (r.startLineNumber !== line || r.endLineNumber !== line) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport class SearchRange implements ISearchRange {\n\tstartLineNumber: number;\n\tstartColumn: number;\n\tendLineNumber: number;\n\tendColumn: number;\n\n\tconstructor(startLineNumber: number, startColumn: number, endLineNumber: number, endColumn: number) {\n\t\tthis.startLineNumber = startLineNumber;\n\t\tthis.startColumn = startColumn;\n\t\tthis.endLineNumber = endLineNumber;\n\t\tthis.endColumn = endColumn;\n\t}\n}\n\nexport class OneLineRange extends SearchRange {\n\tconstructor(lineNumber: number, startColumn: number, endColumn: number) {\n\t\tsuper(lineNumber, startColumn, lineNumber, endColumn);\n\t}\n}\n\nexport const enum ViewMode {\n\tList = 'list',\n\tTree = 'tree'\n}\n\nexport const enum SearchSortOrder {\n\tDefault = 'default',\n\tFileNames = 'fileNames',\n\tType = 'type',\n\tModified = 'modified',\n\tCountDescending = 'countDescending',\n\tCountAscending = 'countAscending'\n}\n\nexport const enum SemanticSearchBehavior {\n\tAuto = 'auto',\n\tManual = 'manual',\n\tRunOnEmpty = 'runOnEmpty',\n}\n\nexport interface ISearchConfigurationProperties {\n\texclude: glob.IExpression;\n\tuseRipgrep: boolean;\n\t/**\n\t * Use ignore file for file search.\n\t */\n\tuseIgnoreFiles: boolean;\n\tuseGlobalIgnoreFiles: boolean;\n\tuseParentIgnoreFiles: boolean;\n\tfollowSymlinks: boolean;\n\tsmartCase: boolean;\n\tglobalFindClipboard: boolean;\n\tlocation: 'sidebar' | 'panel';\n\tuseReplacePreview: boolean;\n\tshowLineNumbers: boolean;\n\tusePCRE2: boolean;\n\tactionsPosition: 'auto' | 'right';\n\tmaintainFileSearchCache: boolean;\n\tmaxResults: number | null;\n\tcollapseResults: 'auto' | 'alwaysCollapse' | 'alwaysExpand';\n\tsearchOnType: boolean;\n\tseedOnFocus: boolean;\n\tseedWithNearestWord: boolean;\n\tsearchOnTypeDebouncePeriod: number;\n\tmode: 'view' | 'reuseEditor' | 'newEditor';\n\tsearchEditor: {\n\t\tdoubleClickBehaviour: 'selectWord' | 'goToLocation' | 'openLocationToSide';\n\t\tsingleClickBehaviour: 'default' | 'peekDefinition';\n\t\treusePriorSearchConfiguration: boolean;\n\t\tdefaultNumberOfContextLines: number | null;\n\t\tfocusResultsOnSearch: boolean;\n\t\texperimental: {};\n\t};\n\tsortOrder: SearchSortOrder;\n\tdecorations: {\n\t\tcolors: boolean;\n\t\tbadges: boolean;\n\t};\n\tquickAccess: {\n\t\tpreserveInput: boolean;\n\t};\n\tdefaultViewMode: ViewMode;\n\texperimental: {\n\t\tclosedNotebookRichContentResults: boolean;\n\t};\n\tsearchView: {\n\t\tsemanticSearchBehavior: string;\n\t\tkeywordSuggestions: boolean;\n\t};\n}\n\nexport interface ISearchConfiguration extends IFilesConfiguration {\n\tsearch: ISearchConfigurationProperties;\n\teditor: {\n\t\twordSeparators: string;\n\t};\n}\n\nexport function getExcludes(configuration: ISearchConfiguration, includeSearchExcludes = true): glob.IExpression | undefined {\n\tconst fileExcludes = configuration && configuration.files && configuration.files.exclude;\n\tconst searchExcludes = includeSearchExcludes && configuration && configuration.search && configuration.search.exclude;\n\n\tif (!fileExcludes && !searchExcludes) {\n\t\treturn undefined;\n\t}\n\n\tif (!fileExcludes || !searchExcludes) {\n\t\treturn fileExcludes || searchExcludes || undefined;\n\t}\n\n\tlet allExcludes: glob.IExpression = Object.create(null);\n\t// clone the config as it could be frozen\n\tallExcludes = objects.mixin(allExcludes, objects.deepClone(fileExcludes));\n\tallExcludes = objects.mixin(allExcludes, objects.deepClone(searchExcludes), true);\n\n\treturn allExcludes;\n}\n\nexport function pathIncludedInQuery(queryProps: ICommonQueryProps<URI>, fsPath: string): boolean {\n\tif (queryProps.excludePattern && glob.match(queryProps.excludePattern, fsPath)) {\n\t\treturn false;\n\t}\n\n\tif (queryProps.includePattern || queryProps.usingSearchPaths) {\n\t\tif (queryProps.includePattern && glob.match(queryProps.includePattern, fsPath)) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If searchPaths are being used, the extra file must be in a subfolder and match the pattern, if present\n\t\tif (queryProps.usingSearchPaths) {\n\t\t\treturn !!queryProps.folderQueries && queryProps.folderQueries.some(fq => {\n\t\t\t\tconst searchPath = fq.folder.fsPath;\n\t\t\t\tif (extpath.isEqualOrParent(fsPath, searchPath)) {\n\t\t\t\t\tconst relPath = paths.relative(searchPath, fsPath);\n\t\t\t\t\treturn !fq.includePattern || !!glob.match(fq.includePattern, relPath);\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nexport enum SearchErrorCode {\n\tunknownEncoding = 1,\n\tregexParseError,\n\tglobParseError,\n\tinvalidLiteral,\n\trgProcessError,\n\tother,\n\tcanceled\n}\n\nexport class SearchError extends Error {\n\tconstructor(message: string, readonly code?: SearchErrorCode) {\n\t\tsuper(message);\n\t}\n}\n\nexport function deserializeSearchError(error: Error): SearchError {\n\tconst errorMsg = error.message;\n\n\tif (isCancellationError(error)) {\n\t\treturn new SearchError(errorMsg, SearchErrorCode.canceled);\n\t}\n\n\ttry {\n\t\tconst details = JSON.parse(errorMsg);\n\t\treturn new SearchError(details.message, details.code);\n\t} catch (e) {\n\t\treturn new SearchError(errorMsg, SearchErrorCode.other);\n\t}\n}\n\nexport function serializeSearchError(searchError: SearchError): Error {\n\tconst details = { message: searchError.message, code: searchError.code };\n\treturn new Error(JSON.stringify(details));\n}\nexport interface ITelemetryEvent {\n\teventName: string;\n\tdata: ITelemetryData;\n}\n\nexport interface IRawSearchService {\n\tfileSearch(search: IRawFileQuery): Event<ISerializedSearchProgressItem | ISerializedSearchComplete>;\n\ttextSearch(search: IRawTextQuery): Event<ISerializedSearchProgressItem | ISerializedSearchComplete>;\n\tclearCache(cacheKey: string): Promise<void>;\n}\n\nexport interface IRawFileMatch {\n\tbase?: string;\n\t/**\n\t * The path of the file relative to the containing `base` folder.\n\t * This path is exactly as it appears on the filesystem.\n\t */\n\trelativePath: string;\n\t/**\n\t * This path is transformed for search purposes. For example, this could be\n\t * the `relativePath` with the workspace folder name prepended. This way the\n\t * search algorithm would also match against the name of the containing folder.\n\t *\n\t * If not given, the search algorithm should use `relativePath`.\n\t */\n\tsearchPath: string | undefined;\n}\n\nexport interface ISearchEngine<T> {\n\tsearch: (onResult: (matches: T) => void, onProgress: (progress: IProgressMessage) => void, done: (error: Error | null, complete: ISearchEngineSuccess) => void) => void;\n\tcancel: () => void;\n}\n\nexport interface ISerializedSearchSuccess {\n\ttype: 'success';\n\tlimitHit: boolean;\n\tmessages: ITextSearchCompleteMessage[];\n\tstats?: IFileSearchStats | ITextSearchStats;\n}\n\nexport interface ISearchEngineSuccess {\n\tlimitHit: boolean;\n\tmessages: ITextSearchCompleteMessage[];\n\tstats: ISearchEngineStats;\n}\n\nexport interface ISerializedSearchError {\n\ttype: 'error';\n\terror: {\n\t\tmessage: string;\n\t\tstack: string;\n\t};\n}\n\nexport type ISerializedSearchComplete = ISerializedSearchSuccess | ISerializedSearchError;\n\nexport function isSerializedSearchComplete(arg: ISerializedSearchProgressItem | ISerializedSearchComplete): arg is ISerializedSearchComplete {\n\t// eslint-disable-next-line local/code-no-any-casts\n\tif ((arg as any).type === 'error') {\n\t\treturn true;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t} else if ((arg as any).type === 'success') {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nexport function isSerializedSearchSuccess(arg: ISerializedSearchComplete): arg is ISerializedSearchSuccess {\n\treturn arg.type === 'success';\n}\n\nexport function isSerializedFileMatch(arg: ISerializedSearchProgressItem): arg is ISerializedFileMatch {\n\treturn !!(<ISerializedFileMatch>arg).path;\n}\n\nexport function isFilePatternMatch(candidate: IRawFileMatch, filePatternToUse: string, fuzzy = true): boolean {\n\tconst pathToMatch = candidate.searchPath ? candidate.searchPath : candidate.relativePath;\n\treturn fuzzy ?\n\t\tfuzzyContains(pathToMatch, filePatternToUse) :\n\t\tglob.match(filePatternToUse, pathToMatch);\n}\n\nexport interface ISerializedFileMatch {\n\tpath: string;\n\tresults?: ITextSearchResult[];\n\tnumMatches?: number;\n}\n\n// Type of the possible values for progress calls from the engine\nexport type ISerializedSearchProgressItem = ISerializedFileMatch | ISerializedFileMatch[] | IProgressMessage;\nexport type IFileSearchProgressItem = IRawFileMatch | IRawFileMatch[] | IProgressMessage;\n\n\nexport class SerializableFileMatch implements ISerializedFileMatch {\n\tpath: string;\n\tresults: ITextSearchMatch[];\n\n\tconstructor(path: string) {\n\t\tthis.path = path;\n\t\tthis.results = [];\n\t}\n\n\taddMatch(match: ITextSearchMatch): void {\n\t\tthis.results.push(match);\n\t}\n\n\tserialize(): ISerializedFileMatch {\n\t\treturn {\n\t\t\tpath: this.path,\n\t\t\tresults: this.results,\n\t\t\tnumMatches: this.results.length\n\t\t};\n\t}\n}\n\n/**\n *  Computes the patterns that the provider handles. Discards sibling clauses and 'false' patterns\n */\nexport function resolvePatternsForProvider(globalPattern: glob.IExpression | undefined, folderPattern: glob.IExpression | undefined): string[] {\n\tconst merged = {\n\t\t...(globalPattern || {}),\n\t\t...(folderPattern || {})\n\t};\n\n\treturn Object.keys(merged)\n\t\t.filter(key => {\n\t\t\tconst value = merged[key];\n\t\t\treturn typeof value === 'boolean' && value;\n\t\t});\n}\n\nexport class QueryGlobTester {\n\n\tprivate _excludeExpression: glob.IExpression[]; // TODO: evaluate globs based on baseURI of pattern\n\tprivate _parsedExcludeExpression: glob.ParsedExpression[];\n\n\tprivate _parsedIncludeExpression: glob.ParsedExpression | null = null;\n\n\tconstructor(config: ISearchQuery, folderQuery: IFolderQuery) {\n\t\t// todo: try to incorporate folderQuery.excludePattern.folder if available\n\t\tthis._excludeExpression = folderQuery.excludePattern?.map(excludePattern => {\n\t\t\treturn {\n\t\t\t\t...(config.excludePattern || {}),\n\t\t\t\t...(excludePattern.pattern || {})\n\t\t\t} satisfies glob.IExpression;\n\t\t}) ?? [];\n\n\t\tif (this._excludeExpression.length === 0) {\n\t\t\t// even if there are no folderQueries, we want to observe  the global excludes\n\t\t\tthis._excludeExpression = [config.excludePattern || {}];\n\t\t}\n\n\t\tthis._parsedExcludeExpression = this._excludeExpression.map(e => glob.parse(e));\n\n\t\t// Empty includeExpression means include nothing, so no {} shortcuts\n\t\tlet includeExpression: glob.IExpression | undefined = config.includePattern;\n\t\tif (folderQuery.includePattern) {\n\t\t\tif (includeExpression) {\n\t\t\t\tincludeExpression = {\n\t\t\t\t\t...includeExpression,\n\t\t\t\t\t...folderQuery.includePattern\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tincludeExpression = folderQuery.includePattern;\n\t\t\t}\n\t\t}\n\n\t\tif (includeExpression) {\n\t\t\tthis._parsedIncludeExpression = glob.parse(includeExpression);\n\t\t}\n\t}\n\n\tprivate _evalParsedExcludeExpression(testPath: string, basename: string | undefined, hasSibling?: (name: string) => boolean): string | null {\n\t\t// todo: less hacky way of evaluating sync vs async sibling clauses\n\t\tlet result: string | null = null;\n\n\t\tfor (const folderExclude of this._parsedExcludeExpression) {\n\n\t\t\t// find first non-null result\n\t\t\tconst evaluation = folderExclude(testPath, basename, hasSibling);\n\n\t\t\tif (typeof evaluation === 'string') {\n\t\t\t\tresult = evaluation;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\n\tmatchesExcludesSync(testPath: string, basename?: string, hasSibling?: (name: string) => boolean): boolean {\n\t\tif (this._parsedExcludeExpression && this._evalParsedExcludeExpression(testPath, basename, hasSibling)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Guaranteed sync - siblingsFn should not return a promise.\n\t */\n\tincludedInQuerySync(testPath: string, basename?: string, hasSibling?: (name: string) => boolean): boolean {\n\t\tif (this._parsedExcludeExpression && this._evalParsedExcludeExpression(testPath, basename, hasSibling)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this._parsedIncludeExpression && !this._parsedIncludeExpression(testPath, basename, hasSibling)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Evaluating the exclude expression is only async if it includes sibling clauses. As an optimization, avoid doing anything with Promises\n\t * unless the expression is async.\n\t */\n\tincludedInQuery(testPath: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): Promise<boolean> | boolean {\n\n\t\tconst isIncluded = () => {\n\t\t\treturn this._parsedIncludeExpression ?\n\t\t\t\t!!(this._parsedIncludeExpression(testPath, basename, hasSibling)) :\n\t\t\t\ttrue;\n\t\t};\n\n\t\treturn Promise.all(this._parsedExcludeExpression.map(e => {\n\t\t\tconst excluded = e(testPath, basename, hasSibling);\n\t\t\tif (isThenable(excluded)) {\n\t\t\t\treturn excluded.then(excluded => {\n\t\t\t\t\tif (excluded) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn isIncluded();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn isIncluded();\n\n\t\t})).then(e => e.some(e => !!e));\n\n\n\t}\n\n\thasSiblingExcludeClauses(): boolean {\n\t\treturn this._excludeExpression.reduce((prev, curr) => hasSiblingClauses(curr) || prev, false);\n\t}\n}\n\nfunction hasSiblingClauses(pattern: glob.IExpression): boolean {\n\tfor (const key in pattern) {\n\t\tif (typeof pattern[key] !== 'boolean') {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>) {\n\tif (!siblingsFn) {\n\t\treturn undefined;\n\t}\n\n\tlet siblings: Promise<Record<string, true>>;\n\treturn (name: string) => {\n\t\tif (!siblings) {\n\t\t\tsiblings = (siblingsFn() || Promise.resolve([]))\n\t\t\t\t.then(list => list ? listToMap(list) : {});\n\t\t}\n\t\treturn siblings.then(map => !!map[name]);\n\t};\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]) {\n\tif (!siblingsFn) {\n\t\treturn undefined;\n\t}\n\n\tlet siblings: Record<string, true>;\n\treturn (name: string) => {\n\t\tif (!siblings) {\n\t\t\tconst list = siblingsFn();\n\t\t\tsiblings = list ? listToMap(list) : {};\n\t\t}\n\t\treturn !!siblings[name];\n\t};\n}\n\nfunction listToMap(list: string[]) {\n\tconst map: Record<string, true> = {};\n\tfor (const key of list) {\n\t\tmap[key] = true;\n\t}\n\treturn map;\n}\n\nexport function excludeToGlobPattern(excludesForFolder: { baseUri?: URI | undefined; patterns: string[] }[]): GlobPattern[] {\n\treturn excludesForFolder.flatMap(exclude => exclude.patterns.map(pattern => {\n\t\treturn exclude.baseUri ?\n\t\t\t{\n\t\t\t\tbaseUri: exclude.baseUri,\n\t\t\t\tpattern: pattern\n\t\t\t} : pattern;\n\t}));\n}\n\nexport const DEFAULT_TEXT_SEARCH_PREVIEW_OPTIONS = {\n\tmatchLines: 100,\n\tcharsPerLine: 10000\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}