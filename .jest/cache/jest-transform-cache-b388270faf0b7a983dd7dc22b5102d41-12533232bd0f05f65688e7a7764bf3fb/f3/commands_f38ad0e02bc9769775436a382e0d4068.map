{"version":3,"names":["cov_ufb48wpjp","actualCoverage","Emitter","Iterable","markAsSingleton","toDisposable","LinkedList","validateConstraints","createDecorator","ICommandService","s","CommandsRegistry","_commands","Map","_onDidRegisterCommand","onDidRegisterCommand","event","registerCommand","idOrCommand","handler","f","b","Error","id","metadata","Array","isArray","args","constraints","arg","push","constraint","actualHandler","accessor","commands","get","set","removeFn","unshift","ret","command","isEmpty","delete","fire","registerCommandAlias","oldId","newId","executeCommand","getCommand","list","undefined","first","getCommands","result","key","keys"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/commands/common/commands.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { IJSONSchema } from '../../../base/common/jsonSchema.js';\nimport { IDisposable, markAsSingleton, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { TypeConstraint, validateConstraints } from '../../../base/common/types.js';\nimport { ILocalizedString } from '../../action/common/action.js';\nimport { createDecorator, ServicesAccessor } from '../../instantiation/common/instantiation.js';\n\nexport const ICommandService = createDecorator<ICommandService>('commandService');\n\nexport interface ICommandEvent {\n\treadonly commandId: string;\n\treadonly args: unknown[];\n}\n\nexport interface ICommandService {\n\treadonly _serviceBrand: undefined;\n\treadonly onWillExecuteCommand: Event<ICommandEvent>;\n\treadonly onDidExecuteCommand: Event<ICommandEvent>;\n\texecuteCommand<R = unknown>(commandId: string, ...args: unknown[]): Promise<R | undefined>;\n}\n\nexport type ICommandsMap = Map<string, ICommand>;\n\nexport type ICommandHandler<Args extends unknown[] = unknown[], R = void> = (accessor: ServicesAccessor, ...args: Args) => R;\n\nexport interface ICommand<Args extends unknown[] = unknown[], R = void> {\n\tid: string;\n\thandler: ICommandHandler<Args, R>;\n\tmetadata?: ICommandMetadata | null;\n}\n\nexport interface ICommandMetadata {\n\t/**\n\t * NOTE: Please use an ILocalizedString. string is in the type for backcompat for now.\n\t * A short summary of what the command does. This will be used in:\n\t * - API commands\n\t * - when showing keybindings that have no other UX\n\t * - when searching for commands in the Command Palette\n\t */\n\treadonly description: ILocalizedString | string;\n\treadonly args?: ReadonlyArray<{\n\t\treadonly name: string;\n\t\treadonly isOptional?: boolean;\n\t\treadonly description?: string;\n\t\treadonly constraint?: TypeConstraint;\n\t\treadonly schema?: IJSONSchema;\n\t}>;\n\treadonly returns?: string;\n}\n\nexport interface ICommandRegistry {\n\treadonly onDidRegisterCommand: Event<string>;\n\tregisterCommand<Args extends unknown[]>(id: string, command: ICommandHandler<Args>): IDisposable;\n\tregisterCommand<Args extends unknown[]>(command: ICommand<Args>): IDisposable;\n\tregisterCommandAlias(oldId: string, newId: string): IDisposable;\n\tgetCommand(id: string): ICommand | undefined;\n\tgetCommands(): ICommandsMap;\n}\n\nexport const CommandsRegistry: ICommandRegistry = new class implements ICommandRegistry {\n\n\tprivate readonly _commands = new Map<string, LinkedList<ICommand>>();\n\n\tprivate readonly _onDidRegisterCommand = new Emitter<string>();\n\treadonly onDidRegisterCommand: Event<string> = this._onDidRegisterCommand.event;\n\n\tregisterCommand(idOrCommand: string | ICommand, handler?: ICommandHandler): IDisposable {\n\n\t\tif (!idOrCommand) {\n\t\t\tthrow new Error(`invalid command`);\n\t\t}\n\n\t\tif (typeof idOrCommand === 'string') {\n\t\t\tif (!handler) {\n\t\t\t\tthrow new Error(`invalid command`);\n\t\t\t}\n\t\t\treturn this.registerCommand({ id: idOrCommand, handler });\n\t\t}\n\n\t\t// add argument validation if rich command metadata is provided\n\t\tif (idOrCommand.metadata && Array.isArray(idOrCommand.metadata.args)) {\n\t\t\tconst constraints: Array<TypeConstraint | undefined> = [];\n\t\t\tfor (const arg of idOrCommand.metadata.args) {\n\t\t\t\tconstraints.push(arg.constraint);\n\t\t\t}\n\t\t\tconst actualHandler = idOrCommand.handler;\n\t\t\tidOrCommand.handler = function (accessor, ...args: unknown[]) {\n\t\t\t\tvalidateConstraints(args, constraints);\n\t\t\t\treturn actualHandler(accessor, ...args);\n\t\t\t};\n\t\t}\n\n\t\t// find a place to store the command\n\t\tconst { id } = idOrCommand;\n\n\t\tlet commands = this._commands.get(id);\n\t\tif (!commands) {\n\t\t\tcommands = new LinkedList<ICommand>();\n\t\t\tthis._commands.set(id, commands);\n\t\t}\n\n\t\tconst removeFn = commands.unshift(idOrCommand);\n\n\t\tconst ret = toDisposable(() => {\n\t\t\tremoveFn();\n\t\t\tconst command = this._commands.get(id);\n\t\t\tif (command?.isEmpty()) {\n\t\t\t\tthis._commands.delete(id);\n\t\t\t}\n\t\t});\n\n\t\t// tell the world about this command\n\t\tthis._onDidRegisterCommand.fire(id);\n\n\t\treturn markAsSingleton(ret);\n\t}\n\n\tregisterCommandAlias(oldId: string, newId: string): IDisposable {\n\t\treturn CommandsRegistry.registerCommand(oldId, (accessor, ...args) => accessor.get(ICommandService).executeCommand(newId, ...args));\n\t}\n\n\tgetCommand(id: string): ICommand | undefined {\n\t\tconst list = this._commands.get(id);\n\t\tif (!list || list.isEmpty()) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn Iterable.first(list);\n\t}\n\n\tgetCommands(): ICommandsMap {\n\t\tconst result = new Map<string, ICommand>();\n\t\tfor (const key of this._commands.keys()) {\n\t\t\tconst command = this.getCommand(key);\n\t\t\tif (command) {\n\t\t\t\tresult.set(key, command);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n};\n\nCommandsRegistry.registerCommand('noop', () => { });\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAyEC;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAzED;;;;AAKA,SAASE,OAAO,QAAe,+BAA+B;AAC9D,SAASC,QAAQ,QAAQ,kCAAkC;AAE3D,SAAsBC,eAAe,EAAEC,YAAY,QAAQ,mCAAmC;AAC9F,SAASC,UAAU,QAAQ,oCAAoC;AAC/D,SAAyBC,mBAAmB,QAAQ,+BAA+B;AAEnF,SAASC,eAAe,QAA0B,6CAA6C;AAE/F,OAAO,MAAMC,eAAe;AAAA;AAAA,CAAAT,aAAA,GAAAU,CAAA,OAAGF,eAAe,CAAkB,gBAAgB,CAAC;AAoDjF,OAAO,MAAMG,gBAAgB;AAAA;AAAA,CAAAX,aAAA,GAAAU,CAAA,OAAqB,IAAI;EAEpCE,SAAS;EAAA;EAAA,CAAAZ,aAAA,GAAAU,CAAA,OAAG,IAAIG,GAAG,EAAgC;EAEnDC,qBAAqB;EAAA;EAAA,CAAAd,aAAA,GAAAU,CAAA,OAAG,IAAIR,OAAO,EAAU;EACrDa,oBAAoB;EAAA;EAAA,CAAAf,aAAA,GAAAU,CAAA,OAAkB,IAAI,CAACI,qBAAqB,CAACE,KAAK;EAE/EC,eAAeA,CAACC,WAA8B,EAAEC,OAAyB;IAAA;IAAAnB,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAU,CAAA;IAExE,IAAI,CAACQ,WAAW,EAAE;MAAA;MAAAlB,aAAA,GAAAqB,CAAA;MAAArB,aAAA,GAAAU,CAAA;MACjB,MAAM,IAAIY,KAAK,CAAC,iBAAiB,CAAC;IACnC,CAAC;IAAA;IAAA;MAAAtB,aAAA,GAAAqB,CAAA;IAAA;IAAArB,aAAA,GAAAU,CAAA;IAED,IAAI,OAAOQ,WAAW,KAAK,QAAQ,EAAE;MAAA;MAAAlB,aAAA,GAAAqB,CAAA;MAAArB,aAAA,GAAAU,CAAA;MACpC,IAAI,CAACS,OAAO,EAAE;QAAA;QAAAnB,aAAA,GAAAqB,CAAA;QAAArB,aAAA,GAAAU,CAAA;QACb,MAAM,IAAIY,KAAK,CAAC,iBAAiB,CAAC;MACnC,CAAC;MAAA;MAAA;QAAAtB,aAAA,GAAAqB,CAAA;MAAA;MAAArB,aAAA,GAAAU,CAAA;MACD,OAAO,IAAI,CAACO,eAAe,CAAC;QAAEM,EAAE,EAAEL,WAAW;QAAEC;MAAO,CAAE,CAAC;IAC1D,CAAC;IAAA;IAAA;MAAAnB,aAAA,GAAAqB,CAAA;IAAA;IAED;IAAArB,aAAA,GAAAU,CAAA;IACA;IAAI;IAAA,CAAAV,aAAA,GAAAqB,CAAA,UAAAH,WAAW,CAACM,QAAQ;IAAA;IAAA,CAAAxB,aAAA,GAAAqB,CAAA,UAAII,KAAK,CAACC,OAAO,CAACR,WAAW,CAACM,QAAQ,CAACG,IAAI,CAAC,GAAE;MAAA;MAAA3B,aAAA,GAAAqB,CAAA;MACrE,MAAMO,WAAW;MAAA;MAAA,CAAA5B,aAAA,GAAAU,CAAA,QAAsC,EAAE;MAAC;MAAAV,aAAA,GAAAU,CAAA;MAC1D,KAAK,MAAMmB,GAAG,IAAIX,WAAW,CAACM,QAAQ,CAACG,IAAI,EAAE;QAAA;QAAA3B,aAAA,GAAAU,CAAA;QAC5CkB,WAAW,CAACE,IAAI,CAACD,GAAG,CAACE,UAAU,CAAC;MACjC;MACA,MAAMC,aAAa;MAAA;MAAA,CAAAhC,aAAA,GAAAU,CAAA,QAAGQ,WAAW,CAACC,OAAO;MAAC;MAAAnB,aAAA,GAAAU,CAAA;MAC1CQ,WAAW,CAACC,OAAO,GAAG,UAAUc,QAAQ,EAAE,GAAGN,IAAe;QAAA;QAAA3B,aAAA,GAAAoB,CAAA;QAAApB,aAAA,GAAAU,CAAA;QAC3DH,mBAAmB,CAACoB,IAAI,EAAEC,WAAW,CAAC;QAAC;QAAA5B,aAAA,GAAAU,CAAA;QACvC,OAAOsB,aAAa,CAACC,QAAQ,EAAE,GAAGN,IAAI,CAAC;MACxC,CAAC;IACF,CAAC;IAAA;IAAA;MAAA3B,aAAA,GAAAqB,CAAA;IAAA;IAED;IACA,MAAM;MAAEE;IAAE,CAAE;IAAA;IAAA,CAAAvB,aAAA,GAAAU,CAAA,QAAGQ,WAAW;IAE1B,IAAIgB,QAAQ;IAAA;IAAA,CAAAlC,aAAA,GAAAU,CAAA,QAAG,IAAI,CAACE,SAAS,CAACuB,GAAG,CAACZ,EAAE,CAAC;IAAC;IAAAvB,aAAA,GAAAU,CAAA;IACtC,IAAI,CAACwB,QAAQ,EAAE;MAAA;MAAAlC,aAAA,GAAAqB,CAAA;MAAArB,aAAA,GAAAU,CAAA;MACdwB,QAAQ,GAAG,IAAI5B,UAAU,EAAY;MAAC;MAAAN,aAAA,GAAAU,CAAA;MACtC,IAAI,CAACE,SAAS,CAACwB,GAAG,CAACb,EAAE,EAAEW,QAAQ,CAAC;IACjC,CAAC;IAAA;IAAA;MAAAlC,aAAA,GAAAqB,CAAA;IAAA;IAED,MAAMgB,QAAQ;IAAA;IAAA,CAAArC,aAAA,GAAAU,CAAA,QAAGwB,QAAQ,CAACI,OAAO,CAACpB,WAAW,CAAC;IAE9C,MAAMqB,GAAG;IAAA;IAAA,CAAAvC,aAAA,GAAAU,CAAA,QAAGL,YAAY,CAAC,MAAK;MAAA;MAAAL,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAU,CAAA;MAC7B2B,QAAQ,EAAE;MACV,MAAMG,OAAO;MAAA;MAAA,CAAAxC,aAAA,GAAAU,CAAA,QAAG,IAAI,CAACE,SAAS,CAACuB,GAAG,CAACZ,EAAE,CAAC;MAAC;MAAAvB,aAAA,GAAAU,CAAA;MACvC,IAAI8B,OAAO,EAAEC,OAAO,EAAE,EAAE;QAAA;QAAAzC,aAAA,GAAAqB,CAAA;QAAArB,aAAA,GAAAU,CAAA;QACvB,IAAI,CAACE,SAAS,CAAC8B,MAAM,CAACnB,EAAE,CAAC;MAC1B,CAAC;MAAA;MAAA;QAAAvB,aAAA,GAAAqB,CAAA;MAAA;IACF,CAAC,CAAC;IAEF;IAAA;IAAArB,aAAA,GAAAU,CAAA;IACA,IAAI,CAACI,qBAAqB,CAAC6B,IAAI,CAACpB,EAAE,CAAC;IAAC;IAAAvB,aAAA,GAAAU,CAAA;IAEpC,OAAON,eAAe,CAACmC,GAAG,CAAC;EAC5B;EAEAK,oBAAoBA,CAACC,KAAa,EAAEC,KAAa;IAAA;IAAA9C,aAAA,GAAAoB,CAAA;IAAApB,aAAA,GAAAU,CAAA;IAChD,OAAOC,gBAAgB,CAACM,eAAe,CAAC4B,KAAK,EAAE,CAACZ,QAAQ,EAAE,GAAGN,IAAI,KAAK;MAAA;MAAA3B,aAAA,GAAAoB,CAAA;MAAApB,aAAA,GAAAU,CAAA;MAAA,OAAAuB,QAAQ,CAACE,GAAG,CAAC1B,eAAe,CAAC,CAACsC,cAAc,CAACD,KAAK,EAAE,GAAGnB,IAAI,CAAC;IAAD,CAAC,CAAC;EACpI;EAEAqB,UAAUA,CAACzB,EAAU;IAAA;IAAAvB,aAAA,GAAAoB,CAAA;IACpB,MAAM6B,IAAI;IAAA;IAAA,CAAAjD,aAAA,GAAAU,CAAA,QAAG,IAAI,CAACE,SAAS,CAACuB,GAAG,CAACZ,EAAE,CAAC;IAAC;IAAAvB,aAAA,GAAAU,CAAA;IACpC;IAAI;IAAA,CAAAV,aAAA,GAAAqB,CAAA,WAAC4B,IAAI;IAAA;IAAA,CAAAjD,aAAA,GAAAqB,CAAA,UAAI4B,IAAI,CAACR,OAAO,EAAE,GAAE;MAAA;MAAAzC,aAAA,GAAAqB,CAAA;MAAArB,aAAA,GAAAU,CAAA;MAC5B,OAAOwC,SAAS;IACjB,CAAC;IAAA;IAAA;MAAAlD,aAAA,GAAAqB,CAAA;IAAA;IAAArB,aAAA,GAAAU,CAAA;IACD,OAAOP,QAAQ,CAACgD,KAAK,CAACF,IAAI,CAAC;EAC5B;EAEAG,WAAWA,CAAA;IAAA;IAAApD,aAAA,GAAAoB,CAAA;IACV,MAAMiC,MAAM;IAAA;IAAA,CAAArD,aAAA,GAAAU,CAAA,QAAG,IAAIG,GAAG,EAAoB;IAAC;IAAAb,aAAA,GAAAU,CAAA;IAC3C,KAAK,MAAM4C,GAAG,IAAI,IAAI,CAAC1C,SAAS,CAAC2C,IAAI,EAAE,EAAE;MACxC,MAAMf,OAAO;MAAA;MAAA,CAAAxC,aAAA,GAAAU,CAAA,QAAG,IAAI,CAACsC,UAAU,CAACM,GAAG,CAAC;MAAC;MAAAtD,aAAA,GAAAU,CAAA;MACrC,IAAI8B,OAAO,EAAE;QAAA;QAAAxC,aAAA,GAAAqB,CAAA;QAAArB,aAAA,GAAAU,CAAA;QACZ2C,MAAM,CAACjB,GAAG,CAACkB,GAAG,EAAEd,OAAO,CAAC;MACzB,CAAC;MAAA;MAAA;QAAAxC,aAAA,GAAAqB,CAAA;MAAA;IACF;IAAC;IAAArB,aAAA,GAAAU,CAAA;IACD,OAAO2C,MAAM;EACd;CACA,C,CAAA;AAAC;AAAArD,aAAA,GAAAU,CAAA;AAEFC,gBAAgB,CAACM,eAAe,CAAC,MAAM,EAAE,MAAK;EAAA;EAAAjB,aAAA,GAAAoB,CAAA;AAAG,CAAC,CAAC","ignoreList":[]}