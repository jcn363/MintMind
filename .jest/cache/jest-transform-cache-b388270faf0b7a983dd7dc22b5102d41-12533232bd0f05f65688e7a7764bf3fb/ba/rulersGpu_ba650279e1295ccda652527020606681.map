{"version":3,"names":["cov_h6fy2zr0n","actualCoverage","ViewPart","Color","editorRuler","autorun","RulersGpu","_viewGpuContext","_gpuShapes","s","constructor","context","f","_register","reader","_updateEntries","onConfigurationChanged","e","undefined","prepareRender","ctx","render","options","_context","configuration","rulers","get","typicalHalfwidthCharacterWidth","devicePixelRatio","read","i","len","length","ruler","shape","color","b","fromHex","theme","getColor","white","rulerData","column","Math","max","ceil","Number","MAX_SAFE_INTEGER","rgba","r","g","a","rectangleRenderer","register","setRaw","splice","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/browser/viewParts/rulersGpu/rulersGpu.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ViewPart } from '../../view/viewPart.js';\nimport { RenderingContext, RestrictedRenderingContext } from '../../view/renderingContext.js';\nimport { ViewContext } from '../../../common/viewModel/viewContext.js';\nimport * as viewEvents from '../../../common/viewEvents.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport type { ViewGpuContext } from '../../gpu/viewGpuContext.js';\nimport type { IObjectCollectionBufferEntry } from '../../gpu/objectCollectionBuffer.js';\nimport type { RectangleRenderer, RectangleRendererEntrySpec } from '../../gpu/rectangleRenderer.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { editorRuler } from '../../../common/core/editorColorRegistry.js';\nimport { autorun, type IReader } from '../../../../base/common/observable.js';\n\n/**\n * Rulers are vertical lines that appear at certain columns in the editor. There can be >= 0 rulers\n * at a time.\n */\nexport class RulersGpu extends ViewPart {\n\n\tprivate readonly _gpuShapes: IObjectCollectionBufferEntry<RectangleRendererEntrySpec>[] = [];\n\n\tconstructor(\n\t\tcontext: ViewContext,\n\t\tprivate readonly _viewGpuContext: ViewGpuContext\n\t) {\n\t\tsuper(context);\n\t\tthis._register(autorun(reader => this._updateEntries(reader)));\n\t}\n\n\t// --- begin event handlers\n\n\tpublic override onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\t\tthis._updateEntries(undefined);\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\t// Nothing to read\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\t// Rendering is handled by RectangleRenderer\n\t}\n\n\tprivate _updateEntries(reader: IReader | undefined) {\n\t\tconst options = this._context.configuration.options;\n\t\tconst rulers = options.get(EditorOption.rulers);\n\t\tconst typicalHalfwidthCharacterWidth = options.get(EditorOption.fontInfo).typicalHalfwidthCharacterWidth;\n\t\tconst devicePixelRatio = this._viewGpuContext.devicePixelRatio.read(reader);\n\t\tfor (let i = 0, len = rulers.length; i < len; i++) {\n\t\t\tconst ruler = rulers[i];\n\t\t\tconst shape = this._gpuShapes[i];\n\t\t\tconst color = ruler.color ? Color.fromHex(ruler.color) : this._context.theme.getColor(editorRuler) ?? Color.white;\n\t\t\tconst rulerData: Parameters<RectangleRenderer['register']> = [\n\t\t\t\truler.column * typicalHalfwidthCharacterWidth * devicePixelRatio,\n\t\t\t\t0,\n\t\t\t\tMath.max(1, Math.ceil(devicePixelRatio)),\n\t\t\t\tNumber.MAX_SAFE_INTEGER,\n\t\t\t\tcolor.rgba.r / 255,\n\t\t\t\tcolor.rgba.g / 255,\n\t\t\t\tcolor.rgba.b / 255,\n\t\t\t\tcolor.rgba.a,\n\t\t\t];\n\t\t\tif (!shape) {\n\t\t\t\tthis._gpuShapes[i] = this._viewGpuContext.rectangleRenderer.register(...rulerData);\n\t\t\t} else {\n\t\t\t\tshape.setRaw(rulerData);\n\t\t\t}\n\t\t}\n\t\twhile (this._gpuShapes.length > rulers.length) {\n\t\t\tthis._gpuShapes.splice(-1, 1)[0].dispose();\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}