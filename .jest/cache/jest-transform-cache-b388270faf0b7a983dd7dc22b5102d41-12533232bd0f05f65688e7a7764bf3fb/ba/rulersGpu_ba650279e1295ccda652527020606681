aef1f1e553aa8897a12fde7aa295b466
/* istanbul ignore next */
function cov_h6fy2zr0n() {
  var path = "/home/user/Desktop/MintMind/src/vs/editor/browser/viewParts/rulersGpu/rulersGpu.ts";
  var hash = "6f83df40f0d0a96ae1af0f1bcd0b9b4b8838e113";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/user/Desktop/MintMind/src/vs/editor/browser/viewParts/rulersGpu/rulersGpu.ts",
    statementMap: {
      "0": {
        start: {
          line: 15,
          column: 17
        },
        end: {
          line: 15,
          column: 19
        }
      },
      "1": {
        start: {
          line: 17,
          column: 8
        },
        end: {
          line: 17,
          column: 23
        }
      },
      "2": {
        start: {
          line: 18,
          column: 8
        },
        end: {
          line: 18,
          column: 47
        }
      },
      "3": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 71
        }
      },
      "4": {
        start: {
          line: 19,
          column: 41
        },
        end: {
          line: 19,
          column: 68
        }
      },
      "5": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 39
        }
      },
      "6": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 20
        }
      },
      "7": {
        start: {
          line: 34,
          column: 24
        },
        end: {
          line: 34,
          column: 59
        }
      },
      "8": {
        start: {
          line: 35,
          column: 23
        },
        end: {
          line: 35,
          column: 65
        }
      },
      "9": {
        start: {
          line: 36,
          column: 47
        },
        end: {
          line: 36,
          column: 121
        }
      },
      "10": {
        start: {
          line: 37,
          column: 33
        },
        end: {
          line: 37,
          column: 83
        }
      },
      "11": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 58,
          column: 9
        }
      },
      "12": {
        start: {
          line: 38,
          column: 21
        },
        end: {
          line: 38,
          column: 22
        }
      },
      "13": {
        start: {
          line: 38,
          column: 30
        },
        end: {
          line: 38,
          column: 43
        }
      },
      "14": {
        start: {
          line: 39,
          column: 26
        },
        end: {
          line: 39,
          column: 35
        }
      },
      "15": {
        start: {
          line: 40,
          column: 26
        },
        end: {
          line: 40,
          column: 44
        }
      },
      "16": {
        start: {
          line: 41,
          column: 26
        },
        end: {
          line: 41,
          column: 125
        }
      },
      "17": {
        start: {
          line: 42,
          column: 30
        },
        end: {
          line: 51,
          column: 13
        }
      },
      "18": {
        start: {
          line: 52,
          column: 12
        },
        end: {
          line: 57,
          column: 13
        }
      },
      "19": {
        start: {
          line: 53,
          column: 16
        },
        end: {
          line: 53,
          column: 99
        }
      },
      "20": {
        start: {
          line: 56,
          column: 16
        },
        end: {
          line: 56,
          column: 40
        }
      },
      "21": {
        start: {
          line: 59,
          column: 8
        },
        end: {
          line: 61,
          column: 9
        }
      },
      "22": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 60,
          column: 55
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 16,
            column: 4
          },
          end: {
            line: 16,
            column: 5
          }
        },
        loc: {
          start: {
            line: 16,
            column: 42
          },
          end: {
            line: 20,
            column: 5
          }
        },
        line: 16
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 19,
            column: 31
          },
          end: {
            line: 19,
            column: 32
          }
        },
        loc: {
          start: {
            line: 19,
            column: 41
          },
          end: {
            line: 19,
            column: 68
          }
        },
        line: 19
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 22,
            column: 4
          },
          end: {
            line: 22,
            column: 5
          }
        },
        loc: {
          start: {
            line: 22,
            column: 30
          },
          end: {
            line: 25,
            column: 5
          }
        },
        line: 22
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 27,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        loc: {
          start: {
            line: 27,
            column: 23
          },
          end: {
            line: 29,
            column: 5
          }
        },
        line: 27
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 30,
            column: 4
          },
          end: {
            line: 30,
            column: 5
          }
        },
        loc: {
          start: {
            line: 30,
            column: 16
          },
          end: {
            line: 32,
            column: 5
          }
        },
        line: 30
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 33,
            column: 4
          },
          end: {
            line: 33,
            column: 5
          }
        },
        loc: {
          start: {
            line: 33,
            column: 27
          },
          end: {
            line: 62,
            column: 5
          }
        },
        line: 33
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 41,
            column: 26
          },
          end: {
            line: 41,
            column: 125
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 41,
            column: 40
          },
          end: {
            line: 41,
            column: 66
          }
        }, {
          start: {
            line: 41,
            column: 69
          },
          end: {
            line: 41,
            column: 125
          }
        }],
        line: 41
      },
      "1": {
        loc: {
          start: {
            line: 41,
            column: 69
          },
          end: {
            line: 41,
            column: 125
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 41,
            column: 69
          },
          end: {
            line: 41,
            column: 110
          }
        }, {
          start: {
            line: 41,
            column: 114
          },
          end: {
            line: 41,
            column: 125
          }
        }],
        line: 41
      },
      "2": {
        loc: {
          start: {
            line: 52,
            column: 12
          },
          end: {
            line: 57,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 52,
            column: 12
          },
          end: {
            line: 57,
            column: 13
          }
        }, {
          start: {
            line: 55,
            column: 17
          },
          end: {
            line: 57,
            column: 13
          }
        }],
        line: 52
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0]
    },
    inputSourceMap: {
      file: "/home/user/Desktop/MintMind/src/vs/editor/browser/viewParts/rulersGpu/rulersGpu.ts",
      mappings: "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",
      names: [],
      sources: ["/home/user/Desktop/MintMind/src/vs/editor/browser/viewParts/rulersGpu/rulersGpu.ts"],
      sourcesContent: ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ViewPart } from '../../view/viewPart.js';\nimport { RenderingContext, RestrictedRenderingContext } from '../../view/renderingContext.js';\nimport { ViewContext } from '../../../common/viewModel/viewContext.js';\nimport * as viewEvents from '../../../common/viewEvents.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport type { ViewGpuContext } from '../../gpu/viewGpuContext.js';\nimport type { IObjectCollectionBufferEntry } from '../../gpu/objectCollectionBuffer.js';\nimport type { RectangleRenderer, RectangleRendererEntrySpec } from '../../gpu/rectangleRenderer.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { editorRuler } from '../../../common/core/editorColorRegistry.js';\nimport { autorun, type IReader } from '../../../../base/common/observable.js';\n\n/**\n * Rulers are vertical lines that appear at certain columns in the editor. There can be >= 0 rulers\n * at a time.\n */\nexport class RulersGpu extends ViewPart {\n\n\tprivate readonly _gpuShapes: IObjectCollectionBufferEntry<RectangleRendererEntrySpec>[] = [];\n\n\tconstructor(\n\t\tcontext: ViewContext,\n\t\tprivate readonly _viewGpuContext: ViewGpuContext\n\t) {\n\t\tsuper(context);\n\t\tthis._register(autorun(reader => this._updateEntries(reader)));\n\t}\n\n\t// --- begin event handlers\n\n\tpublic override onConfigurationChanged(e: viewEvents.ViewConfigurationChangedEvent): boolean {\n\t\tthis._updateEntries(undefined);\n\t\treturn true;\n\t}\n\n\t// --- end event handlers\n\n\tpublic prepareRender(ctx: RenderingContext): void {\n\t\t// Nothing to read\n\t}\n\n\tpublic render(ctx: RestrictedRenderingContext): void {\n\t\t// Rendering is handled by RectangleRenderer\n\t}\n\n\tprivate _updateEntries(reader: IReader | undefined) {\n\t\tconst options = this._context.configuration.options;\n\t\tconst rulers = options.get(EditorOption.rulers);\n\t\tconst typicalHalfwidthCharacterWidth = options.get(EditorOption.fontInfo).typicalHalfwidthCharacterWidth;\n\t\tconst devicePixelRatio = this._viewGpuContext.devicePixelRatio.read(reader);\n\t\tfor (let i = 0, len = rulers.length; i < len; i++) {\n\t\t\tconst ruler = rulers[i];\n\t\t\tconst shape = this._gpuShapes[i];\n\t\t\tconst color = ruler.color ? Color.fromHex(ruler.color) : this._context.theme.getColor(editorRuler) ?? Color.white;\n\t\t\tconst rulerData: Parameters<RectangleRenderer['register']> = [\n\t\t\t\truler.column * typicalHalfwidthCharacterWidth * devicePixelRatio,\n\t\t\t\t0,\n\t\t\t\tMath.max(1, Math.ceil(devicePixelRatio)),\n\t\t\t\tNumber.MAX_SAFE_INTEGER,\n\t\t\t\tcolor.rgba.r / 255,\n\t\t\t\tcolor.rgba.g / 255,\n\t\t\t\tcolor.rgba.b / 255,\n\t\t\t\tcolor.rgba.a,\n\t\t\t];\n\t\t\tif (!shape) {\n\t\t\t\tthis._gpuShapes[i] = this._viewGpuContext.rectangleRenderer.register(...rulerData);\n\t\t\t} else {\n\t\t\t\tshape.setRaw(rulerData);\n\t\t\t}\n\t\t}\n\t\twhile (this._gpuShapes.length > rulers.length) {\n\t\t\tthis._gpuShapes.splice(-1, 1)[0].dispose();\n\t\t}\n\t}\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "6f83df40f0d0a96ae1af0f1bcd0b9b4b8838e113"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_h6fy2zr0n = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_h6fy2zr0n();
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import { ViewPart } from '../../view/viewPart.js';
import { Color } from '../../../../base/common/color.js';
import { editorRuler } from '../../../common/core/editorColorRegistry.js';
import { autorun } from '../../../../base/common/observable.js';
/**
 * Rulers are vertical lines that appear at certain columns in the editor. There can be >= 0 rulers
 * at a time.
 */
export class RulersGpu extends ViewPart {
  _viewGpuContext;
  _gpuShapes =
  /* istanbul ignore next */
  (cov_h6fy2zr0n().s[0]++, []);
  constructor(context, _viewGpuContext) {
    /* istanbul ignore next */
    cov_h6fy2zr0n().f[0]++;
    cov_h6fy2zr0n().s[1]++;
    super(context);
    /* istanbul ignore next */
    cov_h6fy2zr0n().s[2]++;
    this._viewGpuContext = _viewGpuContext;
    /* istanbul ignore next */
    cov_h6fy2zr0n().s[3]++;
    this._register(autorun(reader => {
      /* istanbul ignore next */
      cov_h6fy2zr0n().f[1]++;
      cov_h6fy2zr0n().s[4]++;
      return this._updateEntries(reader);
    }));
  }
  // --- begin event handlers
  onConfigurationChanged(e) {
    /* istanbul ignore next */
    cov_h6fy2zr0n().f[2]++;
    cov_h6fy2zr0n().s[5]++;
    this._updateEntries(undefined);
    /* istanbul ignore next */
    cov_h6fy2zr0n().s[6]++;
    return true;
  }
  // --- end event handlers
  prepareRender(ctx) {
    /* istanbul ignore next */
    cov_h6fy2zr0n().f[3]++;
  } // Nothing to read
  render(ctx) {
    /* istanbul ignore next */
    cov_h6fy2zr0n().f[4]++;
  } // Rendering is handled by RectangleRenderer
  _updateEntries(reader) {
    /* istanbul ignore next */
    cov_h6fy2zr0n().f[5]++;
    const options =
    /* istanbul ignore next */
    (cov_h6fy2zr0n().s[7]++, this._context.configuration.options);
    const rulers =
    /* istanbul ignore next */
    (cov_h6fy2zr0n().s[8]++, options.get(116 /* EditorOption.rulers */));
    const typicalHalfwidthCharacterWidth =
    /* istanbul ignore next */
    (cov_h6fy2zr0n().s[9]++, options.get(59 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth);
    const devicePixelRatio =
    /* istanbul ignore next */
    (cov_h6fy2zr0n().s[10]++, this._viewGpuContext.devicePixelRatio.read(reader));
    /* istanbul ignore next */
    cov_h6fy2zr0n().s[11]++;
    for (let i =
      /* istanbul ignore next */
      (cov_h6fy2zr0n().s[12]++, 0), len =
      /* istanbul ignore next */
      (cov_h6fy2zr0n().s[13]++, rulers.length); i < len; i++) {
      const ruler =
      /* istanbul ignore next */
      (cov_h6fy2zr0n().s[14]++, rulers[i]);
      const shape =
      /* istanbul ignore next */
      (cov_h6fy2zr0n().s[15]++, this._gpuShapes[i]);
      const color =
      /* istanbul ignore next */
      (cov_h6fy2zr0n().s[16]++, ruler.color ?
      /* istanbul ignore next */
      (cov_h6fy2zr0n().b[0][0]++, Color.fromHex(ruler.color)) :
      /* istanbul ignore next */
      (cov_h6fy2zr0n().b[0][1]++,
      /* istanbul ignore next */
      (cov_h6fy2zr0n().b[1][0]++, this._context.theme.getColor(editorRuler)) ??
      /* istanbul ignore next */
      (cov_h6fy2zr0n().b[1][1]++, Color.white)));
      const rulerData =
      /* istanbul ignore next */
      (cov_h6fy2zr0n().s[17]++, [ruler.column * typicalHalfwidthCharacterWidth * devicePixelRatio, 0, Math.max(1, Math.ceil(devicePixelRatio)), Number.MAX_SAFE_INTEGER, color.rgba.r / 255, color.rgba.g / 255, color.rgba.b / 255, color.rgba.a]);
      /* istanbul ignore next */
      cov_h6fy2zr0n().s[18]++;
      if (!shape) {
        /* istanbul ignore next */
        cov_h6fy2zr0n().b[2][0]++;
        cov_h6fy2zr0n().s[19]++;
        this._gpuShapes[i] = this._viewGpuContext.rectangleRenderer.register(...rulerData);
      } else {
        /* istanbul ignore next */
        cov_h6fy2zr0n().b[2][1]++;
        cov_h6fy2zr0n().s[20]++;
        shape.setRaw(rulerData);
      }
    }
    /* istanbul ignore next */
    cov_h6fy2zr0n().s[21]++;
    while (this._gpuShapes.length > rulers.length) {
      /* istanbul ignore next */
      cov_h6fy2zr0n().s[22]++;
      this._gpuShapes.splice(-1, 1)[0].dispose();
    }
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfaDZmeTJ6cjBuIiwiYWN0dWFsQ292ZXJhZ2UiLCJWaWV3UGFydCIsIkNvbG9yIiwiZWRpdG9yUnVsZXIiLCJhdXRvcnVuIiwiUnVsZXJzR3B1IiwiX3ZpZXdHcHVDb250ZXh0IiwiX2dwdVNoYXBlcyIsInMiLCJjb25zdHJ1Y3RvciIsImNvbnRleHQiLCJmIiwiX3JlZ2lzdGVyIiwicmVhZGVyIiwiX3VwZGF0ZUVudHJpZXMiLCJvbkNvbmZpZ3VyYXRpb25DaGFuZ2VkIiwiZSIsInVuZGVmaW5lZCIsInByZXBhcmVSZW5kZXIiLCJjdHgiLCJyZW5kZXIiLCJvcHRpb25zIiwiX2NvbnRleHQiLCJjb25maWd1cmF0aW9uIiwicnVsZXJzIiwiZ2V0IiwidHlwaWNhbEhhbGZ3aWR0aENoYXJhY3RlcldpZHRoIiwiZGV2aWNlUGl4ZWxSYXRpbyIsInJlYWQiLCJpIiwibGVuIiwibGVuZ3RoIiwicnVsZXIiLCJzaGFwZSIsImNvbG9yIiwiYiIsImZyb21IZXgiLCJ0aGVtZSIsImdldENvbG9yIiwid2hpdGUiLCJydWxlckRhdGEiLCJjb2x1bW4iLCJNYXRoIiwibWF4IiwiY2VpbCIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJyZ2JhIiwiciIsImciLCJhIiwicmVjdGFuZ2xlUmVuZGVyZXIiLCJyZWdpc3RlciIsInNldFJhdyIsInNwbGljZSIsImRpc3Bvc2UiXSwic291cmNlcyI6WyIvaG9tZS91c2VyL0Rlc2t0b3AvTWludE1pbmQvc3JjL3ZzL2VkaXRvci9icm93c2VyL3ZpZXdQYXJ0cy9ydWxlcnNHcHUvcnVsZXJzR3B1LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBWaWV3UGFydCB9IGZyb20gJy4uLy4uL3ZpZXcvdmlld1BhcnQuanMnO1xuaW1wb3J0IHsgUmVuZGVyaW5nQ29udGV4dCwgUmVzdHJpY3RlZFJlbmRlcmluZ0NvbnRleHQgfSBmcm9tICcuLi8uLi92aWV3L3JlbmRlcmluZ0NvbnRleHQuanMnO1xuaW1wb3J0IHsgVmlld0NvbnRleHQgfSBmcm9tICcuLi8uLi8uLi9jb21tb24vdmlld01vZGVsL3ZpZXdDb250ZXh0LmpzJztcbmltcG9ydCAqIGFzIHZpZXdFdmVudHMgZnJvbSAnLi4vLi4vLi4vY29tbW9uL3ZpZXdFdmVudHMuanMnO1xuaW1wb3J0IHsgRWRpdG9yT3B0aW9uIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2NvbmZpZy9lZGl0b3JPcHRpb25zLmpzJztcbmltcG9ydCB0eXBlIHsgVmlld0dwdUNvbnRleHQgfSBmcm9tICcuLi8uLi9ncHUvdmlld0dwdUNvbnRleHQuanMnO1xuaW1wb3J0IHR5cGUgeyBJT2JqZWN0Q29sbGVjdGlvbkJ1ZmZlckVudHJ5IH0gZnJvbSAnLi4vLi4vZ3B1L29iamVjdENvbGxlY3Rpb25CdWZmZXIuanMnO1xuaW1wb3J0IHR5cGUgeyBSZWN0YW5nbGVSZW5kZXJlciwgUmVjdGFuZ2xlUmVuZGVyZXJFbnRyeVNwZWMgfSBmcm9tICcuLi8uLi9ncHUvcmVjdGFuZ2xlUmVuZGVyZXIuanMnO1xuaW1wb3J0IHsgQ29sb3IgfSBmcm9tICcuLi8uLi8uLi8uLi9iYXNlL2NvbW1vbi9jb2xvci5qcyc7XG5pbXBvcnQgeyBlZGl0b3JSdWxlciB9IGZyb20gJy4uLy4uLy4uL2NvbW1vbi9jb3JlL2VkaXRvckNvbG9yUmVnaXN0cnkuanMnO1xuaW1wb3J0IHsgYXV0b3J1biwgdHlwZSBJUmVhZGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vYmFzZS9jb21tb24vb2JzZXJ2YWJsZS5qcyc7XG5cbi8qKlxuICogUnVsZXJzIGFyZSB2ZXJ0aWNhbCBsaW5lcyB0aGF0IGFwcGVhciBhdCBjZXJ0YWluIGNvbHVtbnMgaW4gdGhlIGVkaXRvci4gVGhlcmUgY2FuIGJlID49IDAgcnVsZXJzXG4gKiBhdCBhIHRpbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdWxlcnNHcHUgZXh0ZW5kcyBWaWV3UGFydCB7XG5cblx0cHJpdmF0ZSByZWFkb25seSBfZ3B1U2hhcGVzOiBJT2JqZWN0Q29sbGVjdGlvbkJ1ZmZlckVudHJ5PFJlY3RhbmdsZVJlbmRlcmVyRW50cnlTcGVjPltdID0gW107XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0Y29udGV4dDogVmlld0NvbnRleHQsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBfdmlld0dwdUNvbnRleHQ6IFZpZXdHcHVDb250ZXh0XG5cdCkge1xuXHRcdHN1cGVyKGNvbnRleHQpO1xuXHRcdHRoaXMuX3JlZ2lzdGVyKGF1dG9ydW4ocmVhZGVyID0+IHRoaXMuX3VwZGF0ZUVudHJpZXMocmVhZGVyKSkpO1xuXHR9XG5cblx0Ly8gLS0tIGJlZ2luIGV2ZW50IGhhbmRsZXJzXG5cblx0cHVibGljIG92ZXJyaWRlIG9uQ29uZmlndXJhdGlvbkNoYW5nZWQoZTogdmlld0V2ZW50cy5WaWV3Q29uZmlndXJhdGlvbkNoYW5nZWRFdmVudCk6IGJvb2xlYW4ge1xuXHRcdHRoaXMuX3VwZGF0ZUVudHJpZXModW5kZWZpbmVkKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8vIC0tLSBlbmQgZXZlbnQgaGFuZGxlcnNcblxuXHRwdWJsaWMgcHJlcGFyZVJlbmRlcihjdHg6IFJlbmRlcmluZ0NvbnRleHQpOiB2b2lkIHtcblx0XHQvLyBOb3RoaW5nIHRvIHJlYWRcblx0fVxuXG5cdHB1YmxpYyByZW5kZXIoY3R4OiBSZXN0cmljdGVkUmVuZGVyaW5nQ29udGV4dCk6IHZvaWQge1xuXHRcdC8vIFJlbmRlcmluZyBpcyBoYW5kbGVkIGJ5IFJlY3RhbmdsZVJlbmRlcmVyXG5cdH1cblxuXHRwcml2YXRlIF91cGRhdGVFbnRyaWVzKHJlYWRlcjogSVJlYWRlciB8IHVuZGVmaW5lZCkge1xuXHRcdGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9jb250ZXh0LmNvbmZpZ3VyYXRpb24ub3B0aW9ucztcblx0XHRjb25zdCBydWxlcnMgPSBvcHRpb25zLmdldChFZGl0b3JPcHRpb24ucnVsZXJzKTtcblx0XHRjb25zdCB0eXBpY2FsSGFsZndpZHRoQ2hhcmFjdGVyV2lkdGggPSBvcHRpb25zLmdldChFZGl0b3JPcHRpb24uZm9udEluZm8pLnR5cGljYWxIYWxmd2lkdGhDaGFyYWN0ZXJXaWR0aDtcblx0XHRjb25zdCBkZXZpY2VQaXhlbFJhdGlvID0gdGhpcy5fdmlld0dwdUNvbnRleHQuZGV2aWNlUGl4ZWxSYXRpby5yZWFkKHJlYWRlcik7XG5cdFx0Zm9yIChsZXQgaSA9IDAsIGxlbiA9IHJ1bGVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0Y29uc3QgcnVsZXIgPSBydWxlcnNbaV07XG5cdFx0XHRjb25zdCBzaGFwZSA9IHRoaXMuX2dwdVNoYXBlc1tpXTtcblx0XHRcdGNvbnN0IGNvbG9yID0gcnVsZXIuY29sb3IgPyBDb2xvci5mcm9tSGV4KHJ1bGVyLmNvbG9yKSA6IHRoaXMuX2NvbnRleHQudGhlbWUuZ2V0Q29sb3IoZWRpdG9yUnVsZXIpID8/IENvbG9yLndoaXRlO1xuXHRcdFx0Y29uc3QgcnVsZXJEYXRhOiBQYXJhbWV0ZXJzPFJlY3RhbmdsZVJlbmRlcmVyWydyZWdpc3RlciddPiA9IFtcblx0XHRcdFx0cnVsZXIuY29sdW1uICogdHlwaWNhbEhhbGZ3aWR0aENoYXJhY3RlcldpZHRoICogZGV2aWNlUGl4ZWxSYXRpbyxcblx0XHRcdFx0MCxcblx0XHRcdFx0TWF0aC5tYXgoMSwgTWF0aC5jZWlsKGRldmljZVBpeGVsUmF0aW8pKSxcblx0XHRcdFx0TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG5cdFx0XHRcdGNvbG9yLnJnYmEuciAvIDI1NSxcblx0XHRcdFx0Y29sb3IucmdiYS5nIC8gMjU1LFxuXHRcdFx0XHRjb2xvci5yZ2JhLmIgLyAyNTUsXG5cdFx0XHRcdGNvbG9yLnJnYmEuYSxcblx0XHRcdF07XG5cdFx0XHRpZiAoIXNoYXBlKSB7XG5cdFx0XHRcdHRoaXMuX2dwdVNoYXBlc1tpXSA9IHRoaXMuX3ZpZXdHcHVDb250ZXh0LnJlY3RhbmdsZVJlbmRlcmVyLnJlZ2lzdGVyKC4uLnJ1bGVyRGF0YSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzaGFwZS5zZXRSYXcocnVsZXJEYXRhKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKHRoaXMuX2dwdVNoYXBlcy5sZW5ndGggPiBydWxlcnMubGVuZ3RoKSB7XG5cdFx0XHR0aGlzLl9ncHVTaGFwZXMuc3BsaWNlKC0xLCAxKVswXS5kaXNwb3NlKCk7XG5cdFx0fVxuXHR9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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