{"version":3,"names":["cov_1ari9p2lzy","actualCoverage","TernarySearchTree","UriIterator","ResourceMap","FolderQuerySearchTree","constructor","folderQueries","getFolderQueryInfo","ignorePathCasing","b","f","s","uriIterator","fqBySameBase","forEach","fq","i","uriWithoutQueryOrFragment","folder","with","query","fragment","has","get","push","set","values","key","folderQueriesWithQueries","Map","fqBases","folderQueryInfo","encodeKey","findQueryFragmentAwareSubstr","baseURIResult","findSubstr","undefined","queryAndFragmentKey","forEachFolderQueryInfo","fn","elem","mapElem","str"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/search/common/folderQuerySearchTree.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { URI } from '../../../../base/common/uri.js';\nimport { IFolderQuery } from './search.js';\nimport { TernarySearchTree, UriIterator } from '../../../../base/common/ternarySearchTree.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\n\n/**\n * A ternary search tree that supports URI keys and query/fragment-aware substring matching, specifically for file search.\n * This is because the traditional TST does not support query and fragments https://github.com/microsoft/vscode/issues/227836\n */\nexport class FolderQuerySearchTree<FolderQueryInfo extends { folder: URI }> extends TernarySearchTree<URI, Map<string, FolderQueryInfo>> {\n\tconstructor(folderQueries: IFolderQuery<URI>[],\n\t\tgetFolderQueryInfo: (fq: IFolderQuery, i: number) => FolderQueryInfo,\n\t\tignorePathCasing: (key: URI) => boolean = () => false\n\t) {\n\t\tconst uriIterator = new UriIterator(ignorePathCasing, () => false);\n\t\tsuper(uriIterator);\n\n\t\tconst fqBySameBase = new ResourceMap<{ fq: IFolderQuery<URI>; i: number }[]>();\n\t\tfolderQueries.forEach((fq, i) => {\n\t\t\tconst uriWithoutQueryOrFragment = fq.folder.with({ query: '', fragment: '' });\n\t\t\tif (fqBySameBase.has(uriWithoutQueryOrFragment)) {\n\t\t\t\tfqBySameBase.get(uriWithoutQueryOrFragment)!.push({ fq, i });\n\t\t\t} else {\n\t\t\t\tfqBySameBase.set(uriWithoutQueryOrFragment, [{ fq, i }]);\n\t\t\t}\n\t\t});\n\t\tfqBySameBase.forEach((values, key) => {\n\t\t\tconst folderQueriesWithQueries = new Map<string, FolderQueryInfo>();\n\t\t\tfor (const fqBases of values) {\n\t\t\t\tconst folderQueryInfo = getFolderQueryInfo(fqBases.fq, fqBases.i);\n\t\t\t\tfolderQueriesWithQueries.set(this.encodeKey(fqBases.fq.folder), folderQueryInfo);\n\t\t\t}\n\t\t\tsuper.set(key, folderQueriesWithQueries);\n\t\t});\n\t}\n\n\tfindQueryFragmentAwareSubstr(key: URI): FolderQueryInfo | undefined {\n\n\t\tconst baseURIResult = super.findSubstr(key.with({ query: '', fragment: '' }));\n\t\tif (!baseURIResult) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst queryAndFragmentKey = this.encodeKey(key);\n\t\treturn baseURIResult.get(queryAndFragmentKey);\n\n\t}\n\n\tforEachFolderQueryInfo(fn: (folderQueryInfo: FolderQueryInfo) => void): void {\n\t\treturn this.forEach(elem => elem.forEach(mapElem => fn(mapElem)));\n\t}\n\n\tprivate encodeKey(key: URI): string {\n\t\tlet str = '';\n\t\tif (key.query) {\n\t\t\tstr += key.query;\n\t\t}\n\t\tif (key.fragment) {\n\t\t\tstr += '#' + key.fragment;\n\t\t}\n\t\treturn str;\n\t}\n\n}\n"],"mappings":"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","ignoreList":[]}