{"version":3,"names":["cov_1t80kqgr2d","actualCoverage","fs","top","DeferredPromise","Emitter","Disposable","join","StopWatch","URI","Promises","InMemoryStorageDatabase","Storage","StorageHint","StorageState","SQLiteStorageDatabase","LogLevel","IS_NEW_KEY","currentSessionDateStorageKey","firstSessionDateStorageKey","lastSessionDateStorageKey","isSingleFolderWorkspaceIdentifier","isWorkspaceIdentifier","Schemas","BaseStorageMain","logService","fileService","LOG_SLOW_CLOSE_THRESHOLD","s","_onDidChangeStorage","_register","onDidChangeStorage","event","_onDidCloseStorage","onDidCloseStorage","_storage","hint","STORAGE_IN_MEMORY","storage","f","initializePromise","undefined","whenInitPromise","whenInit","p","state","None","constructor","isInMemory","init","b","doCreate","dispose","e","fire","doInit","isNewStorage","getBoolean","set","error","Initialized","complete","createLoggingOptions","logTrace","getLevel","Trace","msg","trace","logError","items","get","key","fallbackValue","value","delete","optimize","close","watch","doClose","stop","elapsed","logSlowClose","path","largestEntries","Array","from","entries","map","length","entryA","entryB","entry","dbSize","stat","file","size","warn","Closed","BaseProfileAwareStorageMain","profile","options","STORAGE_NAME","useInMemoryStorage","globalStorageHome","with","scheme","fsPath","IN_MEMORY_PATH","logging","ProfileStorageMain","ApplicationStorageMain","userDataProfileService","defaultProfile","updateTelemetryState","firstSessionDate","Date","toUTCString","lastSessionDate","currentSessionDate","WorkspaceStorageMain","workspace","environmentService","WORKSPACE_STORAGE_NAME","WORKSPACE_META_NAME","workspaceStorageHome","id","storageFilePath","wasCreated","prepareWorkspaceStorageFolder","STORAGE_DOES_NOT_EXIST","workspaceStorageFolderPath","workspaceStorageDatabasePath","storageExists","exists","promises","mkdir","recursive","ensureWorkspaceStorageFolderMeta","meta","folder","uri","toString","configPath","workspaceStorageMetaPath","writeFile","JSON","stringify","InMemoryStorageMain"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/storage/electron-main/storageMain.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { top } from '../../../base/common/arrays.js';\nimport { DeferredPromise } from '../../../base/common/async.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable, IDisposable } from '../../../base/common/lifecycle.js';\nimport { join } from '../../../base/common/path.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { Promises } from '../../../base/node/pfs.js';\nimport { InMemoryStorageDatabase, IStorage, Storage, StorageHint, StorageState } from '../../../base/parts/storage/common/storage.js';\nimport { ISQLiteStorageDatabaseLoggingOptions, SQLiteStorageDatabase } from '../../../base/parts/storage/node/storage.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { ILogService, LogLevel } from '../../log/common/log.js';\nimport { IS_NEW_KEY } from '../common/storage.js';\nimport { IUserDataProfile, IUserDataProfilesService } from '../../userDataProfile/common/userDataProfile.js';\nimport { currentSessionDateStorageKey, firstSessionDateStorageKey, lastSessionDateStorageKey } from '../../telemetry/common/telemetry.js';\nimport { isSingleFolderWorkspaceIdentifier, isWorkspaceIdentifier, IAnyWorkspaceIdentifier } from '../../workspace/common/workspace.js';\nimport { Schemas } from '../../../base/common/network.js';\n\nexport interface IStorageMainOptions {\n\n\t/**\n\t * If enabled, storage will not persist to disk\n\t * but into memory.\n\t */\n\treadonly useInMemoryStorage?: boolean;\n}\n\n/**\n * Provides access to application, profile and workspace storage from\n * the electron-main side that is the owner of all storage connections.\n */\nexport interface IStorageMain extends IDisposable {\n\n\t/**\n\t * Emitted whenever data is updated or deleted.\n\t */\n\treadonly onDidChangeStorage: Event<IStorageChangeEvent>;\n\n\t/**\n\t * Emitted when the storage is closed.\n\t */\n\treadonly onDidCloseStorage: Event<void>;\n\n\t/**\n\t * Access to all cached items of this storage service.\n\t */\n\treadonly items: Map<string, string>;\n\n\t/**\n\t * Allows to join on the `init` call having completed\n\t * to be able to safely use the storage.\n\t */\n\treadonly whenInit: Promise<void>;\n\n\t/**\n\t * Provides access to the `IStorage` implementation which will be\n\t * in-memory for as long as the storage has not been initialized.\n\t */\n\treadonly storage: IStorage;\n\n\t/**\n\t * The file path of the underlying storage file if any.\n\t */\n\treadonly path: string | undefined;\n\n\t/**\n\t * Required call to ensure the service can be used.\n\t */\n\tinit(): Promise<void>;\n\n\t/**\n\t * Retrieve an element stored with the given key from storage. Use\n\t * the provided defaultValue if the element is null or undefined.\n\t */\n\tget(key: string, fallbackValue: string): string;\n\tget(key: string, fallbackValue?: string): string | undefined;\n\n\t/**\n\t * Store a string value under the given key to storage. The value will\n\t * be converted to a string.\n\t */\n\tset(key: string, value: string | boolean | number | undefined | null): void;\n\n\t/**\n\t * Delete an element stored under the provided key from storage.\n\t */\n\tdelete(key: string): void;\n\n\t/**\n\t * Whether the storage is using in-memory persistence or not.\n\t */\n\tisInMemory(): boolean;\n\n\t/**\n\t * Attempts to reduce the DB size via optimization commands if supported.\n\t */\n\toptimize(): Promise<void>;\n\n\t/**\n\t * Close the storage connection.\n\t */\n\tclose(): Promise<void>;\n}\n\nexport interface IStorageChangeEvent {\n\treadonly key: string;\n}\n\nabstract class BaseStorageMain extends Disposable implements IStorageMain {\n\n\tprivate static readonly LOG_SLOW_CLOSE_THRESHOLD = 2000;\n\n\tprotected readonly _onDidChangeStorage = this._register(new Emitter<IStorageChangeEvent>());\n\treadonly onDidChangeStorage = this._onDidChangeStorage.event;\n\n\tprivate readonly _onDidCloseStorage = this._register(new Emitter<void>());\n\treadonly onDidCloseStorage = this._onDidCloseStorage.event;\n\n\tprivate _storage = this._register(new Storage(new InMemoryStorageDatabase(), { hint: StorageHint.STORAGE_IN_MEMORY })); // storage is in-memory until initialized\n\tget storage(): IStorage { return this._storage; }\n\n\tabstract get path(): string | undefined;\n\n\tprivate initializePromise: Promise<void> | undefined = undefined;\n\n\tprivate readonly whenInitPromise = new DeferredPromise<void>();\n\treadonly whenInit = this.whenInitPromise.p;\n\n\tprivate state = StorageState.None;\n\n\tconstructor(\n\t\tprotected readonly logService: ILogService,\n\t\tprivate readonly fileService: IFileService\n\t) {\n\t\tsuper();\n\t}\n\n\tisInMemory(): boolean {\n\t\treturn this._storage.isInMemory();\n\t}\n\n\tinit(): Promise<void> {\n\t\tif (!this.initializePromise) {\n\t\t\tthis.initializePromise = (async () => {\n\t\t\t\tif (this.state !== StorageState.None) {\n\t\t\t\t\treturn; // either closed or already initialized\n\t\t\t\t}\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Create storage via subclasses\n\t\t\t\t\tconst storage = this._register(await this.doCreate());\n\n\t\t\t\t\t// Replace our in-memory storage with the real\n\t\t\t\t\t// once as soon as possible without awaiting\n\t\t\t\t\t// the init call.\n\t\t\t\t\tthis._storage.dispose();\n\t\t\t\t\tthis._storage = storage;\n\n\t\t\t\t\t// Re-emit storage changes via event\n\t\t\t\t\tthis._register(storage.onDidChangeStorage(e => this._onDidChangeStorage.fire(e)));\n\n\t\t\t\t\t// Await storage init\n\t\t\t\t\tawait this.doInit(storage);\n\n\t\t\t\t\t// Ensure we track whether storage is new or not\n\t\t\t\t\tconst isNewStorage = storage.getBoolean(IS_NEW_KEY);\n\t\t\t\t\tif (isNewStorage === undefined) {\n\t\t\t\t\t\tstorage.set(IS_NEW_KEY, true);\n\t\t\t\t\t} else if (isNewStorage) {\n\t\t\t\t\t\tstorage.set(IS_NEW_KEY, false);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.logService.error(`[storage main] initialize(): Unable to init storage due to ${error}`);\n\t\t\t\t} finally {\n\n\t\t\t\t\t// Update state\n\t\t\t\t\tthis.state = StorageState.Initialized;\n\n\t\t\t\t\t// Mark init promise as completed\n\t\t\t\t\tthis.whenInitPromise.complete();\n\t\t\t\t}\n\t\t\t})();\n\t\t}\n\n\t\treturn this.initializePromise;\n\t}\n\n\tprotected createLoggingOptions(): ISQLiteStorageDatabaseLoggingOptions {\n\t\treturn {\n\t\t\tlogTrace: (this.logService.getLevel() === LogLevel.Trace) ? msg => this.logService.trace(msg) : undefined,\n\t\t\tlogError: error => this.logService.error(error)\n\t\t};\n\t}\n\n\tprotected doInit(storage: IStorage): Promise<void> {\n\t\treturn storage.init();\n\t}\n\n\tprotected abstract doCreate(): Promise<Storage>;\n\n\tget items(): Map<string, string> { return this._storage.items; }\n\n\tget(key: string, fallbackValue: string): string;\n\tget(key: string, fallbackValue?: string): string | undefined;\n\tget(key: string, fallbackValue?: string): string | undefined {\n\t\treturn this._storage.get(key, fallbackValue);\n\t}\n\n\tset(key: string, value: string | boolean | number | undefined | null): Promise<void> {\n\t\treturn this._storage.set(key, value);\n\t}\n\n\tdelete(key: string): Promise<void> {\n\t\treturn this._storage.delete(key);\n\t}\n\n\toptimize(): Promise<void> {\n\t\treturn this._storage.optimize();\n\t}\n\n\tasync close(): Promise<void> {\n\n\t\t// Measure how long it takes to close storage\n\t\tconst watch = new StopWatch(false);\n\t\tawait this.doClose();\n\t\twatch.stop();\n\n\t\t// If close() is taking a long time, there is\n\t\t// a chance that the underlying DB is large\n\t\t// either on disk or in general. In that case\n\t\t// log some additional info to further diagnose\n\t\tif (watch.elapsed() > BaseStorageMain.LOG_SLOW_CLOSE_THRESHOLD) {\n\t\t\tawait this.logSlowClose(watch);\n\t\t}\n\n\t\t// Signal as event\n\t\tthis._onDidCloseStorage.fire();\n\t}\n\n\tprivate async logSlowClose(watch: StopWatch) {\n\t\tif (!this.path) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst largestEntries = top(Array.from(this._storage.items.entries())\n\t\t\t\t.map(([key, value]) => ({ key, length: value.length })), (entryA, entryB) => entryB.length - entryA.length, 5)\n\t\t\t\t.map(entry => `${entry.key}:${entry.length}`).join(', ');\n\t\t\tconst dbSize = (await this.fileService.stat(URI.file(this.path))).size;\n\n\t\t\tthis.logService.warn(`[storage main] detected slow close() operation: Time: ${watch.elapsed()}ms, DB size: ${dbSize}b, Large Keys: ${largestEntries}`);\n\t\t} catch (error) {\n\t\t\tthis.logService.error('[storage main] figuring out stats for slow DB on close() resulted in an error', error);\n\t\t}\n\t}\n\n\tprivate async doClose(): Promise<void> {\n\n\t\t// Ensure we are not accidentally leaving\n\t\t// a pending initialized storage behind in\n\t\t// case `close()` was called before `init()`\n\t\t// finishes.\n\t\tif (this.initializePromise) {\n\t\t\tawait this.initializePromise;\n\t\t}\n\n\t\t// Update state\n\t\tthis.state = StorageState.Closed;\n\n\t\t// Propagate to storage lib\n\t\tawait this._storage.close();\n\t}\n}\n\nclass BaseProfileAwareStorageMain extends BaseStorageMain {\n\n\tprivate static readonly STORAGE_NAME = 'state.vscdb';\n\n\tget path(): string | undefined {\n\t\tif (!this.options.useInMemoryStorage) {\n\t\t\treturn join(this.profile.globalStorageHome.with({ scheme: Schemas.file }).fsPath, BaseProfileAwareStorageMain.STORAGE_NAME);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tconstructor(\n\t\tprivate readonly profile: IUserDataProfile,\n\t\tprivate readonly options: IStorageMainOptions,\n\t\tlogService: ILogService,\n\t\tfileService: IFileService\n\t) {\n\t\tsuper(logService, fileService);\n\t}\n\n\tprotected async doCreate(): Promise<Storage> {\n\t\treturn new Storage(new SQLiteStorageDatabase(this.path ?? SQLiteStorageDatabase.IN_MEMORY_PATH, {\n\t\t\tlogging: this.createLoggingOptions()\n\t\t}), !this.path ? { hint: StorageHint.STORAGE_IN_MEMORY } : undefined);\n\t}\n}\n\nexport class ProfileStorageMain extends BaseProfileAwareStorageMain {\n\n}\n\nexport class ApplicationStorageMain extends BaseProfileAwareStorageMain {\n\n\tconstructor(\n\t\toptions: IStorageMainOptions,\n\t\tuserDataProfileService: IUserDataProfilesService,\n\t\tlogService: ILogService,\n\t\tfileService: IFileService\n\t) {\n\t\tsuper(userDataProfileService.defaultProfile, options, logService, fileService);\n\t}\n\n\tprotected override async doInit(storage: IStorage): Promise<void> {\n\t\tawait super.doInit(storage);\n\n\t\t// Apply telemetry values as part of the application storage initialization\n\t\tthis.updateTelemetryState(storage);\n\t}\n\n\tprivate updateTelemetryState(storage: IStorage): void {\n\n\t\t// First session date (once)\n\t\tconst firstSessionDate = storage.get(firstSessionDateStorageKey, undefined);\n\t\tif (firstSessionDate === undefined) {\n\t\t\tstorage.set(firstSessionDateStorageKey, new Date().toUTCString());\n\t\t}\n\n\t\t// Last / current session (always)\n\t\t// previous session date was the \"current\" one at that time\n\t\t// current session date is \"now\"\n\t\tconst lastSessionDate = storage.get(currentSessionDateStorageKey, undefined);\n\t\tconst currentSessionDate = new Date().toUTCString();\n\t\tstorage.set(lastSessionDateStorageKey, typeof lastSessionDate === 'undefined' ? null : lastSessionDate);\n\t\tstorage.set(currentSessionDateStorageKey, currentSessionDate);\n\t}\n}\n\nexport class WorkspaceStorageMain extends BaseStorageMain {\n\n\tprivate static readonly WORKSPACE_STORAGE_NAME = 'state.vscdb';\n\tprivate static readonly WORKSPACE_META_NAME = 'workspace.json';\n\n\tget path(): string | undefined {\n\t\tif (!this.options.useInMemoryStorage) {\n\t\t\treturn join(this.environmentService.workspaceStorageHome.with({ scheme: Schemas.file }).fsPath, this.workspace.id, WorkspaceStorageMain.WORKSPACE_STORAGE_NAME);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tconstructor(\n\t\tprivate workspace: IAnyWorkspaceIdentifier,\n\t\tprivate readonly options: IStorageMainOptions,\n\t\tlogService: ILogService,\n\t\tprivate readonly environmentService: IEnvironmentService,\n\t\tfileService: IFileService\n\t) {\n\t\tsuper(logService, fileService);\n\t}\n\n\tprotected async doCreate(): Promise<Storage> {\n\t\tconst { storageFilePath, wasCreated } = await this.prepareWorkspaceStorageFolder();\n\n\t\treturn new Storage(new SQLiteStorageDatabase(storageFilePath, {\n\t\t\tlogging: this.createLoggingOptions()\n\t\t}), { hint: this.options.useInMemoryStorage ? StorageHint.STORAGE_IN_MEMORY : wasCreated ? StorageHint.STORAGE_DOES_NOT_EXIST : undefined });\n\t}\n\n\tprivate async prepareWorkspaceStorageFolder(): Promise<{ storageFilePath: string; wasCreated: boolean }> {\n\n\t\t// Return early if using inMemory storage\n\t\tif (this.options.useInMemoryStorage) {\n\t\t\treturn { storageFilePath: SQLiteStorageDatabase.IN_MEMORY_PATH, wasCreated: true };\n\t\t}\n\n\t\t// Otherwise, ensure the storage folder exists on disk\n\t\tconst workspaceStorageFolderPath = join(this.environmentService.workspaceStorageHome.with({ scheme: Schemas.file }).fsPath, this.workspace.id);\n\t\tconst workspaceStorageDatabasePath = join(workspaceStorageFolderPath, WorkspaceStorageMain.WORKSPACE_STORAGE_NAME);\n\n\t\tconst storageExists = await Promises.exists(workspaceStorageFolderPath);\n\t\tif (storageExists) {\n\t\t\treturn { storageFilePath: workspaceStorageDatabasePath, wasCreated: false };\n\t\t}\n\n\t\t// Ensure storage folder exists\n\t\tawait fs.promises.mkdir(workspaceStorageFolderPath, { recursive: true });\n\n\t\t// Write metadata into folder (but do not await)\n\t\tthis.ensureWorkspaceStorageFolderMeta(workspaceStorageFolderPath);\n\n\t\treturn { storageFilePath: workspaceStorageDatabasePath, wasCreated: true };\n\t}\n\n\tprivate async ensureWorkspaceStorageFolderMeta(workspaceStorageFolderPath: string): Promise<void> {\n\t\tlet meta: object | undefined = undefined;\n\t\tif (isSingleFolderWorkspaceIdentifier(this.workspace)) {\n\t\t\tmeta = { folder: this.workspace.uri.toString() };\n\t\t} else if (isWorkspaceIdentifier(this.workspace)) {\n\t\t\tmeta = { workspace: this.workspace.configPath.toString() };\n\t\t}\n\n\t\tif (meta) {\n\t\t\ttry {\n\t\t\t\tconst workspaceStorageMetaPath = join(workspaceStorageFolderPath, WorkspaceStorageMain.WORKSPACE_META_NAME);\n\t\t\t\tconst storageExists = await Promises.exists(workspaceStorageMetaPath);\n\t\t\t\tif (!storageExists) {\n\t\t\t\t\tawait Promises.writeFile(workspaceStorageMetaPath, JSON.stringify(meta, undefined, 2));\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(`[storage main] ensureWorkspaceStorageFolderMeta(): Unable to create workspace storage metadata due to ${error}`);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class InMemoryStorageMain extends BaseStorageMain {\n\n\tget path(): string | undefined {\n\t\treturn undefined; // in-memory has no path\n\t}\n\n\tprotected async doCreate(): Promise<Storage> {\n\t\treturn new Storage(new InMemoryStorageDatabase(), { hint: StorageHint.STORAGE_IN_MEMORY });\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}