{"version":3,"names":["cov_g2vwfk9eo","actualCoverage","Emitter","MainContext","ExtHostNotebookEditor","ExtHostNotebookRenderers","_extHostNotebook","_rendererMessageEmitters","s","Map","proxy","constructor","mainContext","f","getProxy","MainThreadNotebookRenderers","$postRendererMessage","editorId","rendererId","message","editor","getEditorById","get","fire","apiEditor","createRendererMessaging","manifest","contributes","notebookRenderer","some","r","id","b","Error","messaging","onDidReceiveMessage","listener","thisArg","disposables","getOrCreateEmitterFor","event","postMessage","editorOrAlias","apiEditorsToExtHost","has","extHostEditor","$postMessage","emitter","onDidRemoveLastListener","dispose","delete","set"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostNotebookRenderers.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../base/common/event.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { ExtHostNotebookRenderersShape, IMainContext, MainContext, MainThreadNotebookRenderersShape } from './extHost.protocol.js';\nimport { ExtHostNotebookController } from './extHostNotebook.js';\nimport { ExtHostNotebookEditor } from './extHostNotebookEditor.js';\nimport * as vscode from 'vscode';\n\n\nexport class ExtHostNotebookRenderers implements ExtHostNotebookRenderersShape {\n\tprivate readonly _rendererMessageEmitters = new Map<string /* rendererId */, Emitter<{ editor: vscode.NotebookEditor; message: unknown }>>();\n\tprivate readonly proxy: MainThreadNotebookRenderersShape;\n\n\tconstructor(mainContext: IMainContext, private readonly _extHostNotebook: ExtHostNotebookController) {\n\t\tthis.proxy = mainContext.getProxy(MainContext.MainThreadNotebookRenderers);\n\t}\n\n\tpublic $postRendererMessage(editorId: string, rendererId: string, message: unknown): void {\n\t\tconst editor = this._extHostNotebook.getEditorById(editorId);\n\t\tthis._rendererMessageEmitters.get(rendererId)?.fire({ editor: editor.apiEditor, message });\n\t}\n\n\tpublic createRendererMessaging(manifest: IExtensionDescription, rendererId: string): vscode.NotebookRendererMessaging {\n\t\tif (!manifest.contributes?.notebookRenderer?.some(r => r.id === rendererId)) {\n\t\t\tthrow new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${rendererId})`);\n\t\t}\n\n\t\tconst messaging: vscode.NotebookRendererMessaging = {\n\t\t\tonDidReceiveMessage: (listener, thisArg, disposables) => {\n\t\t\t\treturn this.getOrCreateEmitterFor(rendererId).event(listener, thisArg, disposables);\n\t\t\t},\n\t\t\tpostMessage: (message, editorOrAlias) => {\n\t\t\t\tif (ExtHostNotebookEditor.apiEditorsToExtHost.has(message)) { // back compat for swapped args\n\t\t\t\t\t[message, editorOrAlias] = [editorOrAlias, message];\n\t\t\t\t}\n\n\t\t\t\tconst extHostEditor = editorOrAlias && ExtHostNotebookEditor.apiEditorsToExtHost.get(editorOrAlias);\n\t\t\t\treturn this.proxy.$postMessage(extHostEditor?.id, rendererId, message);\n\t\t\t},\n\t\t};\n\n\t\treturn messaging;\n\t}\n\n\tprivate getOrCreateEmitterFor(rendererId: string) {\n\t\tlet emitter = this._rendererMessageEmitters.get(rendererId);\n\t\tif (emitter) {\n\t\t\treturn emitter;\n\t\t}\n\n\t\temitter = new Emitter({\n\t\t\tonDidRemoveLastListener: () => {\n\t\t\t\temitter?.dispose();\n\t\t\t\tthis._rendererMessageEmitters.delete(rendererId);\n\t\t\t}\n\t\t});\n\n\t\tthis._rendererMessageEmitters.set(rendererId, emitter);\n\n\t\treturn emitter;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}