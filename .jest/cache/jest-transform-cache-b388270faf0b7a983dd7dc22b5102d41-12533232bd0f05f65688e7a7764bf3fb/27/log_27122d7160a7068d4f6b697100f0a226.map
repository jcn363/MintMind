{"version":3,"names":["cov_2apdedo9j1","actualCoverage","mainWindow","relativePath","AdapterLogger","DEFAULT_LOG_LEVEL","LogLevel","getLogs","fileService","environmentService","f","result","s","doGetLogs","logsHome","logs","curFolder","stat","resolve","resource","isDirectory","b","children","contents","readFile","value","toString","path","push","logLevelToString","level","Trace","Debug","Info","Warning","Error","ConsoleLogInAutomationLogger","constructor","logLevel","log","args","consoleLog","type","automatedWindow","codeAutomationLog","err","console","error"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/log/browser/log.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { relativePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { IFileService } from '../../files/common/files.js';\nimport { AdapterLogger, DEFAULT_LOG_LEVEL, ILogger, LogLevel } from '../common/log.js';\n\nexport interface IAutomatedWindow {\n\tcodeAutomationLog(type: string, args: any[]): void;\n\tcodeAutomationExit(code: number, logs: Array<ILogFile>): void;\n}\n\nexport interface ILogFile {\n\treadonly relativePath: string;\n\treadonly contents: string;\n}\n\n/**\n * Only used in browser contexts where the log files are not stored on disk\n * but in IndexedDB. A method to get all logs with their contents so that\n * CI automation can persist them.\n */\nexport async function getLogs(fileService: IFileService, environmentService: IEnvironmentService): Promise<ILogFile[]> {\n\tconst result: ILogFile[] = [];\n\n\tawait doGetLogs(fileService, result, environmentService.logsHome, environmentService.logsHome);\n\n\treturn result;\n}\n\nasync function doGetLogs(fileService: IFileService, logs: ILogFile[], curFolder: URI, logsHome: URI): Promise<void> {\n\tconst stat = await fileService.resolve(curFolder);\n\n\tfor (const { resource, isDirectory } of stat.children || []) {\n\t\tif (isDirectory) {\n\t\t\tawait doGetLogs(fileService, logs, resource, logsHome);\n\t\t} else {\n\t\t\tconst contents = (await fileService.readFile(resource)).value.toString();\n\t\t\tif (contents) {\n\t\t\t\tconst path = relativePath(logsHome, resource);\n\t\t\t\tif (path) {\n\t\t\t\t\tlogs.push({ relativePath: path, contents });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction logLevelToString(level: LogLevel): string {\n\tswitch (level) {\n\t\tcase LogLevel.Trace: return 'trace';\n\t\tcase LogLevel.Debug: return 'debug';\n\t\tcase LogLevel.Info: return 'info';\n\t\tcase LogLevel.Warning: return 'warn';\n\t\tcase LogLevel.Error: return 'error';\n\t}\n\treturn 'info';\n}\n\n/**\n * A logger that is used when VSCode is running in the web with\n * an automation such as playwright. We expect a global codeAutomationLog\n * to be defined that we can use to log to.\n */\nexport class ConsoleLogInAutomationLogger extends AdapterLogger implements ILogger {\n\n\tdeclare codeAutomationLog: any;\n\n\tconstructor(logLevel: LogLevel = DEFAULT_LOG_LEVEL) {\n\t\tsuper({ log: (level, args) => this.consoleLog(logLevelToString(level), args) }, logLevel);\n\t}\n\n\tprivate consoleLog(type: string, args: any[]): void {\n\t\tconst automatedWindow = mainWindow as unknown as IAutomatedWindow;\n\t\tif (typeof automatedWindow.codeAutomationLog === 'function') {\n\t\t\ttry {\n\t\t\t\tautomatedWindow.codeAutomationLog(type, args);\n\t\t\t} catch (err) {\n\t\t\t\t// see https://github.com/microsoft/vscode-test-web/issues/69\n\t\t\t\tconsole.error('Problems writing to codeAutomationLog', err);\n\t\t\t}\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}