{"version":3,"names":["cov_1cszkffvo2","actualCoverage","timeout","Disposable","isWindows","TerminalAutoResponder","_pointer","s","_paused","_throttled","constructor","proc","matchWord","response","logService","f","_register","onProcessData","e","b","data","i","length","_reset","debug","input","then","handleResize","handleInput"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/terminal/node/terminalContrib/autoReplies/terminalAutoResponder.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { timeout } from '../../../../../base/common/async.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { isWindows } from '../../../../../base/common/platform.js';\nimport { ILogService } from '../../../../log/common/log.js';\nimport { ITerminalChildProcess } from '../../../common/terminal.js';\n\n/**\n * Tracks a terminal process's data stream and responds immediately when a matching string is\n * received. This is done in a low overhead way and is ideally run on the same process as the\n * where the process is handled to minimize latency.\n */\nexport class TerminalAutoResponder extends Disposable {\n\tprivate _pointer = 0;\n\tprivate _paused = false;\n\n\t/**\n\t * Each reply is throttled by a second to avoid resource starvation and responding to screen\n\t * reprints on Winodws.\n\t */\n\tprivate _throttled = false;\n\n\tconstructor(\n\t\tproc: ITerminalChildProcess,\n\t\tmatchWord: string,\n\t\tresponse: string,\n\t\tlogService: ILogService\n\t) {\n\t\tsuper();\n\n\t\tthis._register(proc.onProcessData(e => {\n\t\t\tif (this._paused || this._throttled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst data = typeof e === 'string' ? e : e.data;\n\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\tif (data[i] === matchWord[this._pointer]) {\n\t\t\t\t\tthis._pointer++;\n\t\t\t\t} else {\n\t\t\t\t\tthis._reset();\n\t\t\t\t}\n\t\t\t\t// Auto reply and reset\n\t\t\t\tif (this._pointer === matchWord.length) {\n\t\t\t\t\tlogService.debug(`Auto reply match: \"${matchWord}\", response: \"${response}\"`);\n\t\t\t\t\tproc.input(response);\n\t\t\t\t\tthis._throttled = true;\n\t\t\t\t\ttimeout(1000).then(() => this._throttled = false);\n\t\t\t\t\tthis._reset();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _reset() {\n\t\tthis._pointer = 0;\n\t}\n\n\t/**\n\t * No auto response will happen after a resize on Windows in case the resize is a result of\n\t * reprinting the screen.\n\t */\n\thandleResize() {\n\t\tif (isWindows) {\n\t\t\tthis._paused = true;\n\t\t}\n\t}\n\n\thandleInput() {\n\t\tthis._paused = false;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}