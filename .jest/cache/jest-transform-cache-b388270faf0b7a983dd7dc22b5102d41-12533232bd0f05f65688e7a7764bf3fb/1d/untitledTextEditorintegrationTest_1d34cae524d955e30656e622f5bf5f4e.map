{"version":3,"names":["cov_29p4f4ktr7","actualCoverage","assert","workbenchInstantiationService","TestServiceAccessor","UntitledTextEditorInput","CancellationToken","DisposableStore","ensureNoDisposablesAreLeakedInTestSuite","s","suite","f","disposables","instantiationService","accessor","setup","undefined","createInstance","add","untitledTextEditorService","teardown","clear","test","testBackupAndRestore","largeContent","repeat","content","service","originalInput","create","restoredInput","originalModel","resolve","textEditorModel","setValue","backup","None","modelRestoredIdentifier","typeId","resource","workingCopyBackupService","restoredModel","strictEqual","getValue","isDirty"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/untitled/test/browser/untitledTextEditor.integrationTest.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { workbenchInstantiationService, TestServiceAccessor } from '../../../../test/browser/workbenchTestServices.js';\nimport { UntitledTextEditorInput } from '../../common/untitledTextEditorInput.js';\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\nsuite('Untitled text editors', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tlet instantiationService: IInstantiationService;\n\tlet accessor: TestServiceAccessor;\n\n\tsetup(() => {\n\t\tinstantiationService = workbenchInstantiationService(undefined, disposables);\n\t\taccessor = instantiationService.createInstance(TestServiceAccessor);\n\t\tdisposables.add(accessor.untitledTextEditorService);\n\t});\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('backup and restore (simple)', async function () {\n\t\treturn testBackupAndRestore('Some very small file text content.');\n\t});\n\n\ttest('backup and restore (large, #121347)', async function () {\n\t\tconst largeContent = '국어한\\n'.repeat(100000);\n\t\treturn testBackupAndRestore(largeContent);\n\t});\n\n\tasync function testBackupAndRestore(content: string) {\n\t\tconst service = accessor.untitledTextEditorService;\n\t\tconst originalInput = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, service.create()));\n\t\tconst restoredInput = disposables.add(instantiationService.createInstance(UntitledTextEditorInput, service.create()));\n\n\t\tconst originalModel = disposables.add(await originalInput.resolve());\n\t\toriginalModel.textEditorModel?.setValue(content);\n\n\t\tconst backup = await originalModel.backup(CancellationToken.None);\n\t\tconst modelRestoredIdentifier = { typeId: originalModel.typeId, resource: restoredInput.resource };\n\t\tawait accessor.workingCopyBackupService.backup(modelRestoredIdentifier, backup.content);\n\n\t\tconst restoredModel = disposables.add(await restoredInput.resolve());\n\n\t\tassert.strictEqual(restoredModel.textEditorModel?.getValue(), content);\n\t\tassert.strictEqual(restoredModel.isDirty(), true);\n\t}\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"],"mappings":"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","ignoreList":[]}