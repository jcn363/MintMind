{"version":3,"names":["cov_1egltwsr0e","actualCoverage","$","ButtonWithIcon","Codicon","Emitter","Disposable","autorun","observableValue","localize","ChatCollapsibleContentPart","title","context","_domNode","_onDidChangeHeight","s","_register","onDidChangeHeight","event","hasFollowingContent","_isExpanded","_collapseButton","constructor","f","contentIndex","content","length","domNode","init","referencesLabel","buttonElement","undefined","collapseButton","buttonBackground","buttonBorder","buttonForeground","buttonHoverBackground","buttonSecondaryBackground","buttonSecondaryForeground","buttonSecondaryHoverBackground","buttonSeparator","label","onDidClick","value","get","set","r","read","icon","b","chevronDown","chevronRight","classList","toggle","updateAriaLabel","element","isExpanded","isConnected","queueMicrotask","fire","initContent","appendChild","expanded","ariaLabel","addDisposable","disposable","setExpanded","setTitle"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/chatContentParts/chatCollapsibleContentPart.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $ } from '../../../../../base/browser/dom.js';\nimport { ButtonWithIcon } from '../../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable, IDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, IObservable, observableValue } from '../../../../../base/common/observable.js';\nimport { localize } from '../../../../../nls.js';\nimport { IChatRendererContent } from '../../common/chatViewModel.js';\nimport { ChatTreeItem } from '../chat.js';\nimport { IChatContentPart, IChatContentPartRenderContext } from './chatContentParts.js';\n\n\nexport abstract class ChatCollapsibleContentPart extends Disposable implements IChatContentPart {\n\n\tprivate _domNode?: HTMLElement;\n\n\tprotected readonly _onDidChangeHeight = this._register(new Emitter<void>());\n\tpublic readonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tprotected readonly hasFollowingContent: boolean;\n\tprotected _isExpanded = observableValue<boolean>(this, false);\n\tprotected _collapseButton: ButtonWithIcon | undefined;\n\n\tconstructor(\n\t\tprivate title: IMarkdownString | string,\n\t\tprotected readonly context: IChatContentPartRenderContext,\n\t) {\n\t\tsuper();\n\t\tthis.hasFollowingContent = this.context.contentIndex + 1 < this.context.content.length;\n\t}\n\n\tget domNode(): HTMLElement {\n\t\tthis._domNode ??= this.init();\n\t\treturn this._domNode;\n\t}\n\n\tprotected init(): HTMLElement {\n\t\tconst referencesLabel = this.title;\n\n\n\t\tconst buttonElement = $('.chat-used-context-label', undefined);\n\n\t\tconst collapseButton = this._register(new ButtonWithIcon(buttonElement, {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined,\n\t\t\tbuttonSecondaryBackground: undefined,\n\t\t\tbuttonSecondaryForeground: undefined,\n\t\t\tbuttonSecondaryHoverBackground: undefined,\n\t\t\tbuttonSeparator: undefined\n\t\t}));\n\t\tthis._collapseButton = collapseButton;\n\t\tthis._domNode = $('.chat-used-context', undefined, buttonElement);\n\t\tcollapseButton.label = referencesLabel;\n\n\t\tthis._register(collapseButton.onDidClick(() => {\n\t\t\tconst value = this._isExpanded.get();\n\t\t\tthis._isExpanded.set(!value, undefined);\n\t\t}));\n\n\t\tthis._register(autorun(r => {\n\t\t\tconst value = this._isExpanded.read(r);\n\t\t\tcollapseButton.icon = value ? Codicon.chevronDown : Codicon.chevronRight;\n\t\t\tthis._domNode?.classList.toggle('chat-used-context-collapsed', !value);\n\t\t\tthis.updateAriaLabel(collapseButton.element, typeof referencesLabel === 'string' ? referencesLabel : referencesLabel.value, this.isExpanded());\n\n\t\t\tif (this._domNode?.isConnected) {\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t});\n\t\t\t}\n\t\t}));\n\n\t\tconst content = this.initContent();\n\t\tthis._domNode.appendChild(content);\n\t\treturn this._domNode;\n\t}\n\n\tprotected abstract initContent(): HTMLElement;\n\n\tabstract hasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean;\n\n\tprivate updateAriaLabel(element: HTMLElement, label: string, expanded?: boolean): void {\n\t\telement.ariaLabel = expanded ? localize('usedReferencesExpanded', \"{0}, expanded\", label) : localize('usedReferencesCollapsed', \"{0}, collapsed\", label);\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n\n\tget expanded(): IObservable<boolean> {\n\t\treturn this._isExpanded;\n\t}\n\n\tprotected isExpanded(): boolean {\n\t\treturn this._isExpanded.get();\n\t}\n\n\tprotected setExpanded(value: boolean): void {\n\t\tthis._isExpanded.set(value, undefined);\n\t}\n\n\tprotected setTitle(title: string): void {\n\t\tthis.title = title;\n\t\tif (this._collapseButton) {\n\t\t\tthis._collapseButton.label = title;\n\t\t\tthis.updateAriaLabel(this._collapseButton.element, title, this.isExpanded());\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}