{"version":3,"names":["cov_1xd6opdtht","actualCoverage","EditorAction","grammarsExtPoint","IExtensionService","ICommandService","GrammarContributions","_grammars","s","constructor","contributions","f","Object","keys","length","b","fillModeScopeMap","forEach","contribution","value","grammar","language","scopeName","getGrammar","mode","EmmetEditorAction","emmetActionName","opts","actionName","emmetSupportedModes","_lastGrammarContributions","_lastExtensionService","_withGrammarContributions","extensionService","readExtensionPointContributions","then","Promise","resolve","run","accessor","editor","get","commandService","grammarContributions","id","executeCommand","getLanguage","undefined","grammars","model","getModel","selection","getSelection","position","getStartPosition","tokenization","tokenizeIfCheap","lineNumber","languageId","getLanguageIdAtPosition","column","syntax","split","pop","checkParentMode","languageGrammar","languages","i","indexOf","parentMode"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/emmet/browser/emmetActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { EditorAction, ServicesAccessor, IActionOptions } from '../../../../editor/browser/editorExtensions.js';\nimport { grammarsExtPoint, ITMSyntaxExtensionPoint } from '../../../services/textMate/common/TMGrammars.js';\nimport { IExtensionService, ExtensionPointContribution } from '../../../services/extensions/common/extensions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\n\ninterface ModeScopeMap {\n\t[key: string]: string;\n}\n\nexport interface IGrammarContributions {\n\tgetGrammar(mode: string): string;\n}\n\nclass GrammarContributions implements IGrammarContributions {\n\n\tprivate static _grammars: ModeScopeMap = {};\n\n\tconstructor(contributions: ExtensionPointContribution<ITMSyntaxExtensionPoint[]>[]) {\n\t\tif (!Object.keys(GrammarContributions._grammars).length) {\n\t\t\tthis.fillModeScopeMap(contributions);\n\t\t}\n\t}\n\n\tprivate fillModeScopeMap(contributions: ExtensionPointContribution<ITMSyntaxExtensionPoint[]>[]) {\n\t\tcontributions.forEach((contribution) => {\n\t\t\tcontribution.value.forEach((grammar) => {\n\t\t\t\tif (grammar.language && grammar.scopeName) {\n\t\t\t\t\tGrammarContributions._grammars[grammar.language] = grammar.scopeName;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic getGrammar(mode: string): string {\n\t\treturn GrammarContributions._grammars[mode];\n\t}\n}\n\ntype IEmmetActionOptions = IActionOptions & {\n\tactionName: string;\n};\n\nexport abstract class EmmetEditorAction extends EditorAction {\n\n\tprotected emmetActionName: string;\n\n\tconstructor(opts: IEmmetActionOptions) {\n\t\tsuper(opts);\n\t\tthis.emmetActionName = opts.actionName;\n\t}\n\n\tprivate static readonly emmetSupportedModes = ['html', 'css', 'xml', 'xsl', 'haml', 'jade', 'jsx', 'slim', 'scss', 'sass', 'less', 'stylus', 'styl', 'svg'];\n\n\tprivate _lastGrammarContributions: Promise<GrammarContributions> | null = null;\n\tprivate _lastExtensionService: IExtensionService | null = null;\n\tprivate _withGrammarContributions(extensionService: IExtensionService): Promise<GrammarContributions | null> {\n\t\tif (this._lastExtensionService !== extensionService) {\n\t\t\tthis._lastExtensionService = extensionService;\n\t\t\tthis._lastGrammarContributions = extensionService.readExtensionPointContributions(grammarsExtPoint).then((contributions) => {\n\t\t\t\treturn new GrammarContributions(contributions);\n\t\t\t});\n\t\t}\n\t\treturn this._lastGrammarContributions || Promise.resolve(null);\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tconst extensionService = accessor.get(IExtensionService);\n\t\tconst commandService = accessor.get(ICommandService);\n\n\t\treturn this._withGrammarContributions(extensionService).then((grammarContributions) => {\n\n\t\t\tif (this.id === 'editor.emmet.action.expandAbbreviation' && grammarContributions) {\n\t\t\t\treturn commandService.executeCommand<void>('emmet.expandAbbreviation', EmmetEditorAction.getLanguage(editor, grammarContributions));\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\n\t}\n\n\tpublic static getLanguage(editor: ICodeEditor, grammars: IGrammarContributions) {\n\t\tconst model = editor.getModel();\n\t\tconst selection = editor.getSelection();\n\n\t\tif (!model || !selection) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst position = selection.getStartPosition();\n\t\tmodel.tokenization.tokenizeIfCheap(position.lineNumber);\n\t\tconst languageId = model.getLanguageIdAtPosition(position.lineNumber, position.column);\n\t\tconst syntax = languageId.split('.').pop();\n\n\t\tif (!syntax) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst checkParentMode = (): string => {\n\t\t\tconst languageGrammar = grammars.getGrammar(syntax);\n\t\t\tif (!languageGrammar) {\n\t\t\t\treturn syntax;\n\t\t\t}\n\t\t\tconst languages = languageGrammar.split('.');\n\t\t\tif (languages.length < 2) {\n\t\t\t\treturn syntax;\n\t\t\t}\n\t\t\tfor (let i = 1; i < languages.length; i++) {\n\t\t\t\tconst language = languages[languages.length - i];\n\t\t\t\tif (this.emmetSupportedModes.indexOf(language) !== -1) {\n\t\t\t\t\treturn language;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn syntax;\n\t\t};\n\n\t\treturn {\n\t\t\tlanguage: syntax,\n\t\t\tparentMode: checkParentMode()\n\t\t};\n\t}\n\n\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}