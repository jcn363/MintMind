{"version":3,"names":["cov_aa64pqzr3","actualCoverage","CancellationToken","Codicon","MarkdownString","basename","relativePath","ThemeIcon","assertType","URI","isLocation","generateUuid","EditorContextKeys","localize","localize2","Action2","MenuId","registerAction2","ICommandService","IConfigurationService","ContextKeyExpr","IContextKeyService","IDialogService","IInstantiationService","IQuickInputService","ITelemetryService","IWorkspaceContextService","IEditorService","IRemoteCodingAgentsService","IChatAgentService","ChatContextKeys","toChatHistoryContent","IChatModeService","chatVariableLeader","ChatRequestParser","IChatService","IChatSessionsService","isChatRequestFileEntry","ChatAgentLocation","ChatConfiguration","ChatModeKind","ILanguageModelToolsService","IChatWidgetService","showChatWidgetInViewOrEditor","getEditingSessionContext","ACTION_ID_NEW_CHAT","CHAT_CATEGORY","handleCurrentEditingSession","handleModeSwitch","ctxHasEditorModification","chatSessionResourceToId","isITextModel","SubmitAction","run","accessor","args","f","context","s","telemetryService","get","widgetService","widget","b","lastFocusedWidget","viewModel","editing","configurationService","dialogService","chatService","chatModel","getSession","sessionResource","session","editingSession","requestId","id","chatRequests","getRequests","itemIndex","findIndex","request","editsToUndo","length","requestsToRemove","slice","requestIdsToRemove","Set","map","entriesModifiedInRequestsToRemove","entries","filter","entry","has","lastModifyingRequestId","shouldPrompt","getValue","message","modifiedURI","confirmation","confirm","title","primaryButton","checkbox","label","checked","type","confirmed","publicLog2","editRequestType","outcome","editsUndoCount","checkboxChecked","updateValue","snapshotRequestId","restoreSnapshot","undefined","model","checkpoint","setCheckpoint","acceptInput","inputValue","whenNotInProgress","requestInProgress","negate","ChatSubmitAction","ID","constructor","menuCondition","chatModeKind","isEqualTo","Ask","precondition","and","inputHasText","f1","category","icon","send","toggled","condition","lockedToCodingAgent","tooltip","keybinding","when","inChatInput","withinEditSessionDiff","primary","weight","menu","ChatExecute","order","group","alt","plus","ChatEditorInlineExecute","or","ChatDelegateToEditSessionAction","commentDiscussion","instantiationService","inlineWidget","locationData","EditorInline","delegateSessionResource","sessionWidget","getWidgetBySessionResource","invokeFunction","attachmentModel","addContext","kind","modelDescription","name","value","range","wholeRange","uri","document","getInput","noCommandDetection","enableImplicitContext","setInput","close","ToggleAgentModeActionId","ToggleChatModeAction","enabled","commandService","instaService","modeService","chatWidget","arg","at","chatSession","requestCount","switchToMode","findModeById","modeId","getNextMode","currentMode","input","currentModeObs","chatModeCheck","currentModeKind","fromMode","toMode","setChatMode","needToClearSession","executeCommand","modes","getModes","flat","builtin","mode","Edit","Edits2Enabled","custom","curModeIndex","newMode","SwitchToNextModelAction","switchToNextModel","ChatOpenModelPickerActionId","OpenModelPickerAction","ChatInput","equals","location","key","Chat","Notebook","Terminal","openModelPicker","OpenModePickerAction","inQuickChat","openModePicker","ChatSessionPrimaryPickerAction","chatSessionHasModels","openChatSessionPicker","ChangeChatModelActionId","ChangeChatModelAction","modelInfo","vendor","family","widgets","getAllWidgets","switchModel","ChatEditingSessionSubmitAction","notEqualsTo","SubmitWithoutDispatchingAction","hasPromptFile","CreateRemoteAgentJobAction","markdownStringTrustedOptions","isTrusted","enabledCommands","remoteJobCreating","sendToRemoteAgent","sync","hasRemoteCodingAgent","hasCloudButtonV2","pickCodingAgent","quickPickService","options","pick","a","displayName","description","agent","placeHolder","createWithChatSessions","targetAgentId","chatSessionsService","attachedContext","userPrompt","chatSummary","sendRequest","agentIdSilent","asArray","createWithLegacy","remoteCodingAgentService","addedRequest","summary","agents","getAvailableAgents","completeResponse","result","command","_version","acceptResponseProgress","content","clear","extractRelativeFromAttachedContext","workspaceContextService","relativePaths","contextEntry","workspaceFolder","getWorkspaceFolder","fileUri","relativePathResult","push","contextKeyService","remoteJobCreatingKey","bindTo","set","chatAgentService","editorService","getAttachedAndImplicitContext","activeEditor","activeTextEditorControl","getModel","activeEditorUri","selection","getSelection","add","defaultAgent","getDefaultAgent","requestParser","createInstance","contributions","getAllChatSessionContributions","sortedContributions","sort","localeCompare","orderCompare","Error","parsedRequest","parseChatRequest","addRequest","variables","summarizedUserPrompt","generateSummarizedUserPrompt","relativeAttachedContext","file","join","forEach","ctx","isSelection","startLineNumber","endLineNumber","startColumn","endColumn","filePath","generateSummarizedChatHistory","isChatSessionsExperimentEnabled","UseCloudButtonV2","removeRequest","prompt","history","setResponse","e","console","error","historyEntries","req","sessionId","agentId","response","text","slashCommand","variableData","editedFileEvents","getChatTitle","None","getChatSummary","userPromptEntry","ChatSubmitWithCodebaseAction","languageModelToolsService","codebaseTool","getToolByName","fullName","isThemeIcon","SendToNewChatAction","cancelCurrentRequestForSession","waitForReady","CancelChatActionId","CancelAction","stopCircle","win","CancelChatEditId","CancelEdit","x","ChatMessageTitle","isRequest","currentlyEditing","EditRequests","hoverVisible","toNegated","hasNonEmptySelection","hasMultipleSelections","currentlyEditingInput","finishedEditing","registerChatExecuteActions"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/actions/chatExecuteActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { basename, relativePath } from '../../../../../base/common/resources.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { assertType } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { isLocation } from '../../../../../editor/common/languages.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IQuickInputService } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IRemoteCodingAgent, IRemoteCodingAgentsService } from '../../../remoteCodingAgents/common/remoteCodingAgentsService.js';\nimport { IChatAgent, IChatAgentHistoryEntry, IChatAgentService } from '../../common/chatAgents.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IChatModel, IChatRequestModel, toChatHistoryContent } from '../../common/chatModel.js';\nimport { IChatMode, IChatModeService } from '../../common/chatModes.js';\nimport { chatVariableLeader } from '../../common/chatParserTypes.js';\nimport { ChatRequestParser } from '../../common/chatRequestParser.js';\nimport { IChatPullRequestContent, IChatService } from '../../common/chatService.js';\nimport { IChatSessionsExtensionPoint, IChatSessionsService } from '../../common/chatSessionsService.js';\nimport { ChatRequestVariableSet, isChatRequestFileEntry } from '../../common/chatVariableEntries.js';\nimport { ChatAgentLocation, ChatConfiguration, ChatModeKind, } from '../../common/constants.js';\nimport { ILanguageModelChatMetadata } from '../../common/languageModels.js';\nimport { ILanguageModelToolsService } from '../../common/languageModelToolsService.js';\nimport { IChatWidget, IChatWidgetService, showChatWidgetInViewOrEditor } from '../chat.js';\nimport { getEditingSessionContext } from '../chatEditing/chatEditingActions.js';\nimport { ACTION_ID_NEW_CHAT, CHAT_CATEGORY, handleCurrentEditingSession, handleModeSwitch } from './chatActions.js';\nimport { ctxHasEditorModification } from '../chatEditing/chatEditingEditorContextKeys.js';\nimport { chatSessionResourceToId } from '../../common/chatUri.js';\nimport { isITextModel } from '../../../../../editor/common/model.js';\n\nexport interface IVoiceChatExecuteActionContext {\n\treadonly disableTimeout?: boolean;\n}\n\nexport interface IChatExecuteActionContext {\n\twidget?: IChatWidget;\n\tinputValue?: string;\n\tvoice?: IVoiceChatExecuteActionContext;\n}\n\nabstract class SubmitAction extends Action2 {\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (widget?.viewModel?.editing) {\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst chatModel = chatService.getSession(widget.viewModel.sessionResource);\n\t\t\tif (!chatModel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst session = chatModel.editingSession;\n\t\t\tif (!session) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst requestId = widget.viewModel?.editing.id;\n\n\t\t\tif (requestId) {\n\t\t\t\tconst chatRequests = chatModel.getRequests();\n\t\t\t\tconst itemIndex = chatRequests.findIndex(request => request.id === requestId);\n\t\t\t\tconst editsToUndo = chatRequests.length - itemIndex;\n\n\t\t\t\tconst requestsToRemove = chatRequests.slice(itemIndex);\n\t\t\t\tconst requestIdsToRemove = new Set(requestsToRemove.map(request => request.id));\n\t\t\t\tconst entriesModifiedInRequestsToRemove = session.entries.get().filter((entry) => requestIdsToRemove.has(entry.lastModifyingRequestId)) ?? [];\n\t\t\t\tconst shouldPrompt = entriesModifiedInRequestsToRemove.length > 0 && configurationService.getValue('chat.editing.confirmEditRequestRemoval') === true;\n\n\t\t\t\tlet message: string;\n\t\t\t\tif (editsToUndo === 1) {\n\t\t\t\t\tif (entriesModifiedInRequestsToRemove.length === 1) {\n\t\t\t\t\t\tmessage = localize('chat.removeLast.confirmation.message2', \"This will remove your last request and undo the edits made to {0}. Do you want to proceed?\", basename(entriesModifiedInRequestsToRemove[0].modifiedURI));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage = localize('chat.removeLast.confirmation.multipleEdits.message', \"This will remove your last request and undo edits made to {0} files in your working set. Do you want to proceed?\", entriesModifiedInRequestsToRemove.length);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (entriesModifiedInRequestsToRemove.length === 1) {\n\t\t\t\t\t\tmessage = localize('chat.remove.confirmation.message2', \"This will remove all subsequent requests and undo edits made to {0}. Do you want to proceed?\", basename(entriesModifiedInRequestsToRemove[0].modifiedURI));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage = localize('chat.remove.confirmation.multipleEdits.message', \"This will remove all subsequent requests and undo edits made to {0} files in your working set. Do you want to proceed?\", entriesModifiedInRequestsToRemove.length);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst confirmation = shouldPrompt\n\t\t\t\t\t? await dialogService.confirm({\n\t\t\t\t\t\ttitle: editsToUndo === 1\n\t\t\t\t\t\t\t? localize('chat.removeLast.confirmation.title', \"Do you want to undo your last edit?\")\n\t\t\t\t\t\t\t: localize('chat.remove.confirmation.title', \"Do you want to undo {0} edits?\", editsToUndo),\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t\tprimaryButton: localize('chat.remove.confirmation.primaryButton', \"Yes\"),\n\t\t\t\t\t\tcheckbox: { label: localize('chat.remove.confirmation.checkbox', \"Don't ask again\"), checked: false },\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t})\n\t\t\t\t\t: { confirmed: true };\n\n\t\t\t\ttype EditUndoEvent = {\n\t\t\t\t\teditRequestType: string;\n\t\t\t\t\toutcome: 'cancelled' | 'applied';\n\t\t\t\t\teditsUndoCount: number;\n\t\t\t\t};\n\n\t\t\t\ttype EditUndoEventClassification = {\n\t\t\t\t\towner: 'justschen';\n\t\t\t\t\tcomment: 'Event used to gain insights into when there are pending changes to undo, and whether edited requests are applied or cancelled.';\n\t\t\t\t\teditRequestType: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Current entry point for editing a request.' };\n\t\t\t\t\toutcome: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Whether the edit was cancelled or applied.' };\n\t\t\t\t\teditsUndoCount: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of edits that would be undone.'; 'isMeasurement': true };\n\t\t\t\t};\n\n\t\t\t\tif (!confirmation.confirmed) {\n\t\t\t\t\ttelemetryService.publicLog2<EditUndoEvent, EditUndoEventClassification>('chat.undoEditsConfirmation', {\n\t\t\t\t\t\teditRequestType: configurationService.getValue<string>('chat.editRequests'),\n\t\t\t\t\t\toutcome: 'cancelled',\n\t\t\t\t\t\teditsUndoCount: editsToUndo\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t} else if (editsToUndo > 0) {\n\t\t\t\t\ttelemetryService.publicLog2<EditUndoEvent, EditUndoEventClassification>('chat.undoEditsConfirmation', {\n\t\t\t\t\t\teditRequestType: configurationService.getValue<string>('chat.editRequests'),\n\t\t\t\t\t\toutcome: 'applied',\n\t\t\t\t\t\teditsUndoCount: editsToUndo\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (confirmation.checkboxChecked) {\n\t\t\t\t\tawait configurationService.updateValue('chat.editing.confirmEditRequestRemoval', false);\n\t\t\t\t}\n\n\t\t\t\t// Restore the snapshot to what it was before the request(s) that we deleted\n\t\t\t\tconst snapshotRequestId = chatRequests[itemIndex].id;\n\t\t\t\tawait session.restoreSnapshot(snapshotRequestId, undefined);\n\t\t\t}\n\t\t} else if (widget?.viewModel?.model.checkpoint) {\n\t\t\twidget.viewModel.model.setCheckpoint(undefined);\n\t\t}\n\t\twidget?.acceptInput(context?.inputValue);\n\t}\n}\n\nconst whenNotInProgress = ChatContextKeys.requestInProgress.negate();\n\nexport class ChatSubmitAction extends SubmitAction {\n\tstatic readonly ID = 'workbench.action.chat.submit';\n\n\tconstructor() {\n\t\tconst menuCondition = ChatContextKeys.chatModeKind.isEqualTo(ChatModeKind.Ask);\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress,\n\t\t);\n\n\t\tsuper({\n\t\t\tid: ChatSubmitAction.ID,\n\t\t\ttitle: localize2('interactive.submit.label', \"Send\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.send,\n\t\t\tprecondition,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ChatContextKeys.lockedToCodingAgent,\n\t\t\t\ticon: Codicon.send,\n\t\t\t\ttooltip: localize('sendToAgent', \"Send to Agent\"),\n\t\t\t},\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inChatInput,\n\t\t\t\t\tChatContextKeys.withinEditSessionDiff.negate(),\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\twhenNotInProgress,\n\t\t\t\t\t\tmenuCondition,\n\t\t\t\t\t\tChatContextKeys.withinEditSessionDiff.negate(),\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\talt: {\n\t\t\t\t\t\tid: 'workbench.action.chat.sendToNewChat',\n\t\t\t\t\t\ttitle: localize2('chat.newChat.label', \"Send to New Chat\"),\n\t\t\t\t\t\ticon: Codicon.plus\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tContextKeyExpr.or(ctxHasEditorModification.negate(), ChatContextKeys.inputHasText),\n\t\t\t\t\t\twhenNotInProgress,\n\t\t\t\t\t\tChatContextKeys.requestInProgress.negate(),\n\t\t\t\t\t\tmenuCondition\n\t\t\t\t\t),\n\t\t\t\t}]\n\t\t});\n\t}\n}\n\nexport class ChatDelegateToEditSessionAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.delegateToEditSession';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChatDelegateToEditSessionAction.ID,\n\t\t\ttitle: localize2('interactive.submit.panel.label', \"Send to Edit Session\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.commentDiscussion,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inChatInput,\n\t\t\t\t\tChatContextKeys.withinEditSessionDiff,\n\t\t\t\t),\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\twhenNotInProgress,\n\t\t\t\t\t\tChatContextKeys.withinEditSessionDiff,\n\t\t\t\t\t),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst inlineWidget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tconst locationData = inlineWidget?.locationData;\n\n\t\tif (inlineWidget && locationData?.type === ChatAgentLocation.EditorInline && locationData.delegateSessionResource) {\n\t\t\tconst sessionWidget = widgetService.getWidgetBySessionResource(locationData.delegateSessionResource);\n\n\t\t\tif (sessionWidget) {\n\t\t\t\tawait instantiationService.invokeFunction(showChatWidgetInViewOrEditor, sessionWidget);\n\t\t\t\tsessionWidget.attachmentModel.addContext({\n\t\t\t\t\tid: 'vscode.delegate.inline',\n\t\t\t\t\tkind: 'file',\n\t\t\t\t\tmodelDescription: `User's chat context`,\n\t\t\t\t\tname: 'delegate-inline',\n\t\t\t\t\tvalue: { range: locationData.wholeRange, uri: locationData.document },\n\t\t\t\t});\n\t\t\t\tsessionWidget.acceptInput(inlineWidget.getInput(), {\n\t\t\t\t\tnoCommandDetection: true,\n\t\t\t\t\tenableImplicitContext: false,\n\t\t\t\t});\n\n\t\t\t\tinlineWidget.setInput('');\n\t\t\t\tlocationData.close();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport const ToggleAgentModeActionId = 'workbench.action.chat.toggleAgentMode';\n\nexport interface IToggleChatModeArgs {\n\tmodeId: ChatModeKind | string;\n}\n\ntype ChatModeChangeClassification = {\n\towner: 'digitarald';\n\tcomment: 'Reporting when agent is switched between different modes';\n\tfromMode?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The previous agent' };\n\ttoMode?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'The new agent' };\n\trequestCount?: { classification: 'SystemMetaData'; purpose: 'FeatureInsight'; comment: 'Number of requests in the current chat session'; 'isMeasurement': true };\n};\n\ntype ChatModeChangeEvent = {\n\tfromMode: string;\n\ttoMode: string;\n\trequestCount: number;\n};\n\nclass ToggleChatModeAction extends Action2 {\n\n\tstatic readonly ID = ToggleAgentModeActionId;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ToggleChatModeAction.ID,\n\t\t\ttitle: localize2('interactive.toggleAgent.label', \"Switch to Next Agent\"),\n\t\t\tf1: true,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tChatContextKeys.enabled,\n\t\t\t\tChatContextKeys.requestInProgress.negate())\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst commandService = accessor.get(ICommandService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst modeService = accessor.get(IChatModeService);\n\t\tconst telemetryService = accessor.get(ITelemetryService);\n\n\t\tconst context = getEditingSessionContext(accessor, args);\n\t\tif (!context?.chatWidget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst arg = args.at(0) as IToggleChatModeArgs | undefined;\n\t\tconst chatSession = context.chatWidget.viewModel?.model;\n\t\tconst requestCount = chatSession?.getRequests().length ?? 0;\n\t\tconst switchToMode = (arg && modeService.findModeById(arg.modeId)) ?? this.getNextMode(context.chatWidget, requestCount, configurationService, modeService);\n\n\t\tconst currentMode = context.chatWidget.input.currentModeObs.get();\n\t\tif (switchToMode.id === currentMode.id) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatModeCheck = await instaService.invokeFunction(handleModeSwitch, context.chatWidget.input.currentModeKind, switchToMode.kind, requestCount, context.editingSession);\n\t\tif (!chatModeCheck) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Send telemetry for mode change\n\t\ttelemetryService.publicLog2<ChatModeChangeEvent, ChatModeChangeClassification>('chat.modeChange', {\n\t\t\tfromMode: currentMode.id,\n\t\t\ttoMode: switchToMode.id,\n\t\t\trequestCount: requestCount\n\t\t});\n\n\t\tcontext.chatWidget.input.setChatMode(switchToMode.id);\n\n\t\tif (chatModeCheck.needToClearSession) {\n\t\t\tawait commandService.executeCommand(ACTION_ID_NEW_CHAT);\n\t\t}\n\t}\n\n\tprivate getNextMode(chatWidget: IChatWidget, requestCount: number, configurationService: IConfigurationService, modeService: IChatModeService): IChatMode {\n\t\tconst modes = modeService.getModes();\n\t\tconst flat = [\n\t\t\t...modes.builtin.filter(mode => {\n\t\t\t\treturn mode.kind !== ChatModeKind.Edit || configurationService.getValue(ChatConfiguration.Edits2Enabled) || requestCount === 0;\n\t\t\t}),\n\t\t\t...(modes.custom ?? []),\n\t\t];\n\n\t\tconst curModeIndex = flat.findIndex(mode => mode.id === chatWidget.input.currentModeObs.get().id);\n\t\tconst newMode = flat[(curModeIndex + 1) % flat.length];\n\t\treturn newMode;\n\t}\n}\n\nclass SwitchToNextModelAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.switchToNextModel';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: SwitchToNextModelAction.ID,\n\t\t\ttitle: localize2('interactive.switchToNextModel.label', \"Switch to Next Model\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: true,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\twidget?.input.switchToNextModel();\n\t}\n}\n\nexport const ChatOpenModelPickerActionId = 'workbench.action.chat.openModelPicker';\nclass OpenModelPickerAction extends Action2 {\n\tstatic readonly ID = ChatOpenModelPickerActionId;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenModelPickerAction.ID,\n\t\t\ttitle: localize2('interactive.openModelPicker.label', \"Open Model Picker\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Period,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\twhen: ChatContextKeys.inChatInput\n\t\t\t},\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ChatInput,\n\t\t\t\torder: 3,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen:\n\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate(),\n\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.Chat),\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.EditorInline),\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.Notebook),\n\t\t\t\t\t\t\tContextKeyExpr.equals(ChatContextKeys.location.key, ChatAgentLocation.Terminal))\n\t\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.input.openModelPicker();\n\t\t}\n\t}\n}\nexport class OpenModePickerAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.openModePicker';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenModePickerAction.ID,\n\t\t\ttitle: localize2('interactive.openModePicker.label', \"Open Agent Picker\"),\n\t\t\ttooltip: localize('setChatMode', \"Set Agent\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inChatInput,\n\t\t\t\t\tChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat)),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Period,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatInput,\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\t\tChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat),\n\t\t\t\t\t\tChatContextKeys.inQuickChat.negate(),\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate()),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t},\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.input.openModePicker();\n\t\t}\n\t}\n}\n\nexport class ChatSessionPrimaryPickerAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.chatSessionPrimaryPicker';\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChatSessionPrimaryPickerAction.ID,\n\t\t\ttitle: localize2('interactive.openChatSessionPrimaryPicker.label', \"Open Picker\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ChatInput,\n\t\t\t\torder: 4,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen:\n\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent,\n\t\t\t\t\t\tChatContextKeys.chatSessionHasModels\n\t\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = widgetService.lastFocusedWidget;\n\t\tif (widget) {\n\t\t\twidget.input.openChatSessionPicker();\n\t\t}\n\t}\n}\n\nexport const ChangeChatModelActionId = 'workbench.action.chat.changeModel';\nclass ChangeChatModelAction extends Action2 {\n\tstatic readonly ID = ChangeChatModelActionId;\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChangeChatModelAction.ID,\n\t\t\ttitle: localize2('interactive.changeModel.label', \"Change Model\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t});\n\t}\n\n\toverride run(accessor: ServicesAccessor, ...args: unknown[]): void {\n\t\tconst modelInfo = args[0] as Pick<ILanguageModelChatMetadata, 'vendor' | 'id' | 'family'>;\n\t\t// Type check the arg\n\t\tassertType(typeof modelInfo.vendor === 'string' && typeof modelInfo.id === 'string' && typeof modelInfo.family === 'string');\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widgets = widgetService.getAllWidgets();\n\t\tfor (const widget of widgets) {\n\t\t\twidget.input.switchModel(modelInfo);\n\t\t}\n\t}\n}\n\nexport class ChatEditingSessionSubmitAction extends SubmitAction {\n\tstatic readonly ID = 'workbench.action.edits.submit';\n\n\tconstructor() {\n\t\tconst menuCondition = ChatContextKeys.chatModeKind.notEqualsTo(ChatModeKind.Ask);\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress\n\t\t);\n\n\t\tsuper({\n\t\t\tid: ChatEditingSessionSubmitAction.ID,\n\t\t\ttitle: localize2('edits.submit.label', \"Send\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.send,\n\t\t\tprecondition,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tChatContextKeys.requestInProgress.negate(),\n\t\t\t\t\t\tmenuCondition),\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\talt: {\n\t\t\t\t\t\tid: 'workbench.action.chat.sendToNewChat',\n\t\t\t\t\t\ttitle: localize2('chat.newChat.label', \"Send to New Chat\"),\n\t\t\t\t\t\ticon: Codicon.plus\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t});\n\t}\n}\n\nclass SubmitWithoutDispatchingAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.submitWithoutDispatching';\n\n\tconstructor() {\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\t// if the input has prompt instructions attached, allow submitting requests even\n\t\t\t// without text present - having instructions is enough context for a request\n\t\t\tContextKeyExpr.or(ChatContextKeys.inputHasText, ChatContextKeys.hasPromptFile),\n\t\t\twhenNotInProgress,\n\t\t\tChatContextKeys.chatModeKind.isEqualTo(ChatModeKind.Ask),\n\t\t);\n\n\t\tsuper({\n\t\t\tid: SubmitWithoutDispatchingAction.ID,\n\t\t\ttitle: localize2('interactive.submitWithoutDispatch.label', \"Send\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tprecondition,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ChatContextKeys.inChatInput,\n\t\t\t\tprimary: KeyMod.Alt | KeyMod.Shift | KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\twidget?.acceptInput(context?.inputValue, { noCommandDetection: true });\n\t}\n}\nexport class CreateRemoteAgentJobAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.createRemoteAgentJob';\n\n\tstatic readonly markdownStringTrustedOptions = {\n\t\tisTrusted: {\n\t\t\tenabledCommands: [] as string[],\n\t\t},\n\t};\n\n\tconstructor() {\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\tChatContextKeys.inputHasText,\n\t\t\twhenNotInProgress,\n\t\t\tChatContextKeys.remoteJobCreating.negate(),\n\t\t);\n\n\t\tsuper({\n\t\t\tid: CreateRemoteAgentJobAction.ID,\n\t\t\t// TODO(joshspicer): Generalize title/tooltip - pull from contribution\n\t\t\ttitle: localize2('actions.chat.createRemoteJob', \"Delegate to Agent\"),\n\t\t\ticon: Codicon.sendToRemoteAgent,\n\t\t\tprecondition,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ChatContextKeys.remoteJobCreating,\n\t\t\t\ticon: Codicon.sync,\n\t\t\t\ttooltip: localize('remoteJobCreating', \"Delegating to Agent\"),\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 3.4,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\tChatContextKeys.hasRemoteCodingAgent,\n\t\t\t\t\t\t\tChatContextKeys.hasCloudButtonV2\n\t\t\t\t\t\t),\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate(),\n\t\t\t\t\t),\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tprivate async pickCodingAgent<T extends IChatSessionsExtensionPoint | IRemoteCodingAgent>(\n\t\tquickPickService: IQuickInputService,\n\t\toptions: T[]\n\t): Promise<T | undefined> {\n\t\tif (options.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (options.length === 1) {\n\t\t\treturn options[0];\n\t\t}\n\t\tconst pick = await quickPickService.pick(\n\t\t\toptions.map(a => ({\n\t\t\t\tlabel: a.displayName,\n\t\t\t\tdescription: a.description,\n\t\t\t\tagent: a,\n\t\t\t})),\n\t\t\t{\n\t\t\t\tplaceHolder: localize('selectBackgroundAgent', \"Select Agent to delegate the task to\"),\n\t\t\t}\n\t\t);\n\t\tif (!pick) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn pick.agent;\n\t}\n\n\tprivate async createWithChatSessions(\n\t\ttargetAgentId: string,\n\t\tchatSessionsService: IChatSessionsService,\n\t\tchatService: IChatService,\n\t\tquickPickService: IQuickInputService,\n\t\tsessionResource: URI,\n\t\tattachedContext: ChatRequestVariableSet,\n\t\tuserPrompt: string,\n\t\tchatSummary?: {\n\t\t\tprompt?: string;\n\t\t\thistory?: string;\n\t\t}\n\t) {\n\t\tawait chatService.sendRequest(sessionResource, userPrompt, {\n\t\t\tagentIdSilent: targetAgentId,\n\t\t\tattachedContext: attachedContext.asArray(),\n\t\t\tchatSummary,\n\t\t});\n\t}\n\n\tprivate async createWithLegacy(\n\t\tremoteCodingAgentService: IRemoteCodingAgentsService,\n\t\tcommandService: ICommandService,\n\t\tquickPickService: IQuickInputService,\n\t\tchatModel: IChatModel,\n\t\taddedRequest: IChatRequestModel,\n\t\twidget: IChatWidget,\n\t\tuserPrompt: string,\n\t\tsummary?: string,\n\t) {\n\t\tconst agents = remoteCodingAgentService.getAvailableAgents();\n\t\tconst agent = await this.pickCodingAgent(quickPickService, agents);\n\t\tif (!agent) {\n\t\t\tchatModel.completeResponse(addedRequest);\n\t\t\treturn;\n\t\t}\n\n\t\t// Execute the remote command\n\t\tconst result: Omit<IChatPullRequestContent, 'kind'> | string | undefined = await commandService.executeCommand(agent.command, {\n\t\t\tuserPrompt,\n\t\t\tsummary,\n\t\t\t_version: 2, // Signal that we support the new response format\n\t\t});\n\n\t\tif (result && typeof result === 'object') { /* _version === 2 */\n\t\t\tchatModel.acceptResponseProgress(addedRequest, { kind: 'pullRequest', ...result });\n\t\t\tchatModel.acceptResponseProgress(addedRequest, {\n\t\t\t\tkind: 'markdownContent', content: new MarkdownString(\n\t\t\t\t\tlocalize('remoteAgentResponse2', \"Your work will be continued in this pull request.\"),\n\t\t\t\t\tCreateRemoteAgentJobAction.markdownStringTrustedOptions\n\t\t\t\t)\n\t\t\t});\n\t\t} else if (typeof result === 'string') {\n\t\t\tchatModel.acceptResponseProgress(addedRequest, {\n\t\t\t\tkind: 'markdownContent',\n\t\t\t\tcontent: new MarkdownString(\n\t\t\t\t\tlocalize('remoteAgentResponse', \"Coding agent response: {0}\", result),\n\t\t\t\t\tCreateRemoteAgentJobAction.markdownStringTrustedOptions\n\t\t\t\t)\n\t\t\t});\n\t\t\t// Extension will open up the pull request in another view\n\t\t\twidget.clear();\n\t\t} else {\n\t\t\tchatModel.acceptResponseProgress(addedRequest, {\n\t\t\t\tkind: 'markdownContent',\n\t\t\t\tcontent: new MarkdownString(\n\t\t\t\t\tlocalize('remoteAgentError', \"Coding agent session cancelled.\"),\n\t\t\t\t\tCreateRemoteAgentJobAction.markdownStringTrustedOptions\n\t\t\t\t)\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Converts full URIs from the user's systems into workspace-relative paths for coding agent.\n\t */\n\tprivate extractRelativeFromAttachedContext(attachedContext: ChatRequestVariableSet, workspaceContextService: IWorkspaceContextService): string[] {\n\t\tif (!attachedContext) {\n\t\t\treturn [];\n\t\t}\n\t\tconst relativePaths: string[] = [];\n\t\tfor (const contextEntry of attachedContext.asArray()) {\n\t\t\tif (isChatRequestFileEntry(contextEntry)) { // TODO: Extend for more variable types as needed\n\t\t\t\tif (!(contextEntry.value instanceof URI)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst workspaceFolder = workspaceContextService.getWorkspaceFolder(contextEntry.value);\n\t\t\t\tconst fileUri = contextEntry.value;\n\t\t\t\tconst relativePathResult = workspaceFolder ? relativePath(workspaceFolder.uri, fileUri) : undefined;\n\t\t\t\tif (relativePathResult) {\n\t\t\t\t\trelativePaths.push(relativePathResult);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn relativePaths;\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\t\tconst remoteJobCreatingKey = ChatContextKeys.remoteJobCreating.bindTo(contextKeyService);\n\n\t\ttry {\n\t\t\tremoteJobCreatingKey.set(true);\n\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\t\tconst chatAgentService = accessor.get(IChatAgentService);\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst commandService = accessor.get(ICommandService);\n\t\t\tconst quickPickService = accessor.get(IQuickInputService);\n\t\t\tconst remoteCodingAgentService = accessor.get(IRemoteCodingAgentsService);\n\t\t\tconst chatSessionsService = accessor.get(IChatSessionsService);\n\t\t\tconst workspaceContextService = accessor.get(IWorkspaceContextService);\n\t\t\tconst editorService = accessor.get(IEditorService);\n\n\t\t\tconst widget = widgetService.lastFocusedWidget;\n\t\t\tif (!widget) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!widget.viewModel) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst chatModel = widget.viewModel.model;\n\t\t\tif (!chatModel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst sessionResource = widget.viewModel.sessionResource;\n\t\t\tconst chatRequests = chatModel.getRequests();\n\t\t\tlet userPrompt = widget.getInput();\n\t\t\tif (!userPrompt) {\n\t\t\t\tif (!chatRequests.length) {\n\t\t\t\t\t// Nothing to do\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tuserPrompt = 'implement this.';\n\t\t\t}\n\n\t\t\tconst attachedContext = widget.input.getAttachedAndImplicitContext(sessionResource);\n\t\t\twidget.input.acceptInput(true);\n\n\t\t\t// For inline editor mode, add selection or cursor information\n\t\t\tif (widget.location === ChatAgentLocation.EditorInline) {\n\t\t\t\tconst activeEditor = editorService.activeTextEditorControl;\n\t\t\t\tif (activeEditor) {\n\t\t\t\t\tconst model = activeEditor.getModel();\n\t\t\t\t\tlet activeEditorUri: URI | undefined = undefined;\n\t\t\t\t\tif (model && isITextModel(model)) {\n\t\t\t\t\t\tactiveEditorUri = model.uri as URI;\n\t\t\t\t\t}\n\t\t\t\t\tconst selection = activeEditor.getSelection();\n\t\t\t\t\tif (activeEditorUri && selection) {\n\t\t\t\t\t\tattachedContext.add({\n\t\t\t\t\t\t\tkind: 'file',\n\t\t\t\t\t\t\tid: 'vscode.implicit.selection',\n\t\t\t\t\t\t\tname: basename(activeEditorUri),\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\turi: activeEditorUri,\n\t\t\t\t\t\t\t\trange: selection\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst defaultAgent = chatAgentService.getDefaultAgent(ChatAgentLocation.Chat);\n\t\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\t\tconst requestParser = instantiationService.createInstance(ChatRequestParser);\n\n\t\t\tconst contributions = chatSessionsService.getAllChatSessionContributions();\n\n\t\t\t// Sort contributions by order, then alphabetically by display name\n\t\t\tconst sortedContributions = [...contributions].sort((a, b) => {\n\t\t\t\t// Both have no order - sort by display name\n\t\t\t\tif (a.order === undefined && b.order === undefined) {\n\t\t\t\t\treturn a.displayName.localeCompare(b.displayName);\n\t\t\t\t}\n\n\t\t\t\t// Only a has no order - push it to the end\n\t\t\t\tif (a.order === undefined) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\t// Only b has no order - push it to the end\n\t\t\t\tif (b.order === undefined) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\t// Both have orders - compare numerically\n\t\t\t\tconst orderCompare = a.order - b.order;\n\t\t\t\tif (orderCompare !== 0) {\n\t\t\t\t\treturn orderCompare;\n\t\t\t\t}\n\n\t\t\t\t// Same order - sort by display name\n\t\t\t\treturn a.displayName.localeCompare(b.displayName);\n\t\t\t});\n\n\t\t\tconst agent = await this.pickCodingAgent(quickPickService, sortedContributions);\n\t\t\tif (!agent) {\n\t\t\t\twidget.setInput(userPrompt); // Restore prompt\n\t\t\t\tthrow new Error('No coding agent selected');\n\t\t\t}\n\t\t\tconst { type } = agent;\n\n\t\t\t// Add the request to the model first\n\t\t\tconst parsedRequest = requestParser.parseChatRequest(sessionResource, userPrompt, ChatAgentLocation.Chat);\n\t\t\tconst addedRequest = chatModel.addRequest(\n\t\t\t\tparsedRequest,\n\t\t\t\t{ variables: attachedContext.asArray() },\n\t\t\t\t0,\n\t\t\t\tundefined,\n\t\t\t\tdefaultAgent\n\t\t\t);\n\n\t\t\tlet title: string | undefined = undefined;\n\n\t\t\t// -- summarize userPrompt if necessary\n\t\t\tlet summarizedUserPrompt: string | undefined = undefined;\n\t\t\tif (defaultAgent && userPrompt.length > 10_000) {\n\t\t\t\tchatModel.acceptResponseProgress(addedRequest, {\n\t\t\t\t\tkind: 'progressMessage',\n\t\t\t\t\tcontent: new MarkdownString(\n\t\t\t\t\t\tlocalize('summarizeUserPromptCreateRemoteJob', \"Summarizing user prompt\"),\n\t\t\t\t\t\tCreateRemoteAgentJobAction.markdownStringTrustedOptions,\n\t\t\t\t\t)\n\t\t\t\t});\n\n\t\t\t\t({ title, summarizedUserPrompt } = await this.generateSummarizedUserPrompt(sessionResource, userPrompt, attachedContext, title, chatAgentService, defaultAgent, summarizedUserPrompt));\n\t\t\t}\n\n\t\t\tlet summary: string = '';\n\t\t\tconst relativeAttachedContext = this.extractRelativeFromAttachedContext(attachedContext, workspaceContextService);\n\t\t\tif (relativeAttachedContext.length) {\n\t\t\t\tsummary += `\\n\\n${localize('attachedFiles', \"The user has attached the following files from their workspace:\")}\\n${relativeAttachedContext.map(file => `- ${file}`).join('\\n')}\\n\\n`;\n\t\t\t}\n\n\t\t\t// Add selection or cursor information to the summary\n\t\t\tattachedContext.asArray().forEach(ctx => {\n\t\t\t\tif (isChatRequestFileEntry(ctx) && ctx.value && isLocation(ctx.value)) {\n\t\t\t\t\tconst range = ctx.value.range;\n\t\t\t\t\tconst isSelection = range.startLineNumber !== range.endLineNumber || range.startColumn !== range.endColumn;\n\n\t\t\t\t\t// Get relative path for the file\n\t\t\t\t\tlet filePath = ctx.name;\n\t\t\t\t\tconst workspaceFolder = workspaceContextService.getWorkspaceFolder(ctx.value.uri);\n\n\t\t\t\t\tif (workspaceFolder && ctx.value.uri) {\n\t\t\t\t\t\tconst relativePathResult = relativePath(workspaceFolder.uri, ctx.value.uri);\n\t\t\t\t\t\tif (relativePathResult) {\n\t\t\t\t\t\t\tfilePath = relativePathResult;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isSelection) {\n\t\t\t\t\t\tsummary += `User has selected text in file ${filePath} from ${range.startLineNumber}:${range.startColumn} to ${range.endLineNumber}:${range.endColumn}\\n`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsummary += `User is on file ${filePath} at position ${range.startLineNumber}:${range.startColumn}\\n`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// -- summarize context if necessary\n\t\t\tif (defaultAgent && chatRequests.length > 1) {\n\t\t\t\tchatModel.acceptResponseProgress(addedRequest, {\n\t\t\t\t\tkind: 'progressMessage',\n\t\t\t\t\tcontent: new MarkdownString(\n\t\t\t\t\t\tlocalize('analyzingChatHistory', \"Analyzing chat history\"),\n\t\t\t\t\t\tCreateRemoteAgentJobAction.markdownStringTrustedOptions\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t\t({ title, summary } = await this.generateSummarizedChatHistory(chatRequests, sessionResource, title, chatAgentService, defaultAgent, summary));\n\t\t\t}\n\n\t\t\tif (title) {\n\t\t\t\tsummary += `\\nTITLE: ${title}\\n`;\n\t\t\t}\n\n\n\t\t\tconst isChatSessionsExperimentEnabled = configurationService.getValue<boolean>(ChatConfiguration.UseCloudButtonV2);\n\t\t\tif (isChatSessionsExperimentEnabled) {\n\t\t\t\tawait chatService.removeRequest(sessionResource, addedRequest.id);\n\t\t\t\treturn await this.createWithChatSessions(\n\t\t\t\t\ttype,\n\t\t\t\t\tchatSessionsService,\n\t\t\t\t\tchatService,\n\t\t\t\t\tquickPickService,\n\t\t\t\t\tsessionResource,\n\t\t\t\t\tattachedContext,\n\t\t\t\t\tuserPrompt,\n\t\t\t\t\t{\n\t\t\t\t\t\tprompt: summarizedUserPrompt,\n\t\t\t\t\t\thistory: summary,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// -- Below is the legacy implementation\n\n\t\t\tchatModel.acceptResponseProgress(addedRequest, {\n\t\t\t\tkind: 'progressMessage',\n\t\t\t\tcontent: new MarkdownString(\n\t\t\t\t\tlocalize('creatingRemoteJob', \"Delegating to coding agent\"),\n\t\t\t\t\tCreateRemoteAgentJobAction.markdownStringTrustedOptions\n\t\t\t\t)\n\t\t\t});\n\n\t\t\tawait this.createWithLegacy(remoteCodingAgentService, commandService, quickPickService, chatModel, addedRequest, widget, summarizedUserPrompt || userPrompt, summary);\n\t\t\tchatModel.setResponse(addedRequest, {});\n\t\t\tchatModel.completeResponse(addedRequest);\n\t\t} catch (e) {\n\t\t\tconsole.error('Error creating remote coding agent job', e);\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tremoteJobCreatingKey.set(false);\n\t\t}\n\t}\n\n\tprivate async generateSummarizedChatHistory(chatRequests: IChatRequestModel[], sessionResource: URI, title: string | undefined, chatAgentService: IChatAgentService, defaultAgent: IChatAgent, summary: string) {\n\t\tconst historyEntries: IChatAgentHistoryEntry[] = chatRequests\n\t\t\t.map(req => ({\n\t\t\t\trequest: {\n\t\t\t\t\tsessionId: chatSessionResourceToId(sessionResource),\n\t\t\t\t\trequestId: req.id,\n\t\t\t\t\tagentId: req.response?.agent?.id ?? '',\n\t\t\t\t\tmessage: req.message.text,\n\t\t\t\t\tcommand: req.response?.slashCommand?.name,\n\t\t\t\t\tvariables: req.variableData,\n\t\t\t\t\tlocation: ChatAgentLocation.Chat,\n\t\t\t\t\teditedFileEvents: req.editedFileEvents,\n\t\t\t\t},\n\t\t\t\tresponse: toChatHistoryContent(req.response!.response.value),\n\t\t\t\tresult: req.response?.result ?? {}\n\t\t\t}));\n\n\t\t// TODO: Determine a cutoff point where we stop including earlier history\n\t\t//      For example, if the user has already delegated to a coding agent once,\n\t\t// \t\t prefer the conversation afterwards.\n\t\ttitle ??= await chatAgentService.getChatTitle(defaultAgent.id, historyEntries, CancellationToken.None);\n\t\tsummary += await chatAgentService.getChatSummary(defaultAgent.id, historyEntries, CancellationToken.None);\n\t\treturn { title, summary };\n\t}\n\n\tprivate async generateSummarizedUserPrompt(sessionResource: URI, userPrompt: string, attachedContext: ChatRequestVariableSet, title: string | undefined, chatAgentService: IChatAgentService, defaultAgent: IChatAgent, summarizedUserPrompt: string | undefined) {\n\t\tconst userPromptEntry: IChatAgentHistoryEntry = {\n\t\t\trequest: {\n\t\t\t\tsessionId: chatSessionResourceToId(sessionResource),\n\t\t\t\trequestId: generateUuid(),\n\t\t\t\tagentId: '',\n\t\t\t\tmessage: userPrompt,\n\t\t\t\tcommand: undefined,\n\t\t\t\tvariables: { variables: attachedContext.asArray() },\n\t\t\t\tlocation: ChatAgentLocation.Chat,\n\t\t\t\teditedFileEvents: [],\n\t\t\t},\n\t\t\tresponse: [],\n\t\t\tresult: {}\n\t\t};\n\t\tconst historyEntries = [userPromptEntry];\n\t\ttitle = await chatAgentService.getChatTitle(defaultAgent.id, historyEntries, CancellationToken.None);\n\t\tsummarizedUserPrompt = await chatAgentService.getChatSummary(defaultAgent.id, historyEntries, CancellationToken.None);\n\t\treturn { title, summarizedUserPrompt };\n\t}\n}\n\nexport class ChatSubmitWithCodebaseAction extends Action2 {\n\tstatic readonly ID = 'workbench.action.chat.submitWithCodebase';\n\n\tconstructor() {\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\t// if the input has prompt instructions attached, allow submitting requests even\n\t\t\t// without text present - having instructions is enough context for a request\n\t\t\tContextKeyExpr.or(ChatContextKeys.inputHasText, ChatContextKeys.hasPromptFile),\n\t\t\twhenNotInProgress,\n\t\t);\n\n\t\tsuper({\n\t\t\tid: ChatSubmitWithCodebaseAction.ID,\n\t\t\ttitle: localize2('actions.chat.submitWithCodebase', \"Send with {0}\", `${chatVariableLeader}codebase`),\n\t\t\tprecondition,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ChatContextKeys.inChatInput,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst languageModelToolsService = accessor.get(ILanguageModelToolsService);\n\t\tconst codebaseTool = languageModelToolsService.getToolByName('codebase');\n\t\tif (!codebaseTool) {\n\t\t\treturn;\n\t\t}\n\n\t\twidget.input.attachmentModel.addContext({\n\t\t\tid: codebaseTool.id,\n\t\t\tname: codebaseTool.displayName ?? '',\n\t\t\tfullName: codebaseTool.displayName ?? '',\n\t\t\tvalue: undefined,\n\t\t\ticon: ThemeIcon.isThemeIcon(codebaseTool.icon) ? codebaseTool.icon : undefined,\n\t\t\tkind: 'tool'\n\t\t});\n\t\twidget.acceptInput();\n\t}\n}\n\nclass SendToNewChatAction extends Action2 {\n\tconstructor() {\n\t\tconst precondition = ContextKeyExpr.and(\n\t\t\t// if the input has prompt instructions attached, allow submitting requests even\n\t\t\t// without text present - having instructions is enough context for a request\n\t\t\tContextKeyExpr.or(ChatContextKeys.inputHasText, ChatContextKeys.hasPromptFile),\n\t\t);\n\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.sendToNewChat',\n\t\t\ttitle: localize2('chat.newChat.label', \"Send to New Chat\"),\n\t\t\tprecondition,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter,\n\t\t\t\twhen: ChatContextKeys.inChatInput,\n\t\t\t}\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Cancel any in-progress request before clearing\n\t\tif (widget.viewModel) {\n\t\t\tchatService.cancelCurrentRequestForSession(widget.viewModel.sessionResource);\n\t\t}\n\n\t\tconst editingSession = widget.viewModel?.model.editingSession;\n\t\tif (editingSession) {\n\t\t\tif (!(await handleCurrentEditingSession(editingSession, undefined, dialogService))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\twidget.clear();\n\t\tawait widget.waitForReady();\n\t\twidget.acceptInput(context?.inputValue);\n\t}\n}\n\nexport const CancelChatActionId = 'workbench.action.chat.cancel';\nexport class CancelAction extends Action2 {\n\tstatic readonly ID = CancelChatActionId;\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CancelAction.ID,\n\t\t\ttitle: localize2('interactive.cancel.label', \"Cancel\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.stopCircle,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatExecute,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.requestInProgress,\n\t\t\t\t\tChatContextKeys.remoteJobCreating.negate()\n\t\t\t\t),\n\t\t\t\torder: 4,\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.requestInProgress,\n\t\t\t\t\tChatContextKeys.remoteJobCreating.negate()\n\t\t\t\t),\n\t\t\t\torder: 4,\n\t\t\t\tgroup: 'navigation',\n\t\t\t},\n\t\t\t],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Escape,\n\t\t\t\twin: { primary: KeyMod.Alt | KeyCode.Backspace },\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatService = accessor.get(IChatService);\n\t\tif (widget.viewModel) {\n\t\t\tchatService.cancelCurrentRequestForSession(widget.viewModel.sessionResource);\n\t\t}\n\t}\n}\n\nexport const CancelChatEditId = 'workbench.edit.chat.cancel';\nexport class CancelEdit extends Action2 {\n\tstatic readonly ID = CancelChatEditId;\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: CancelEdit.ID,\n\t\t\ttitle: localize2('interactive.cancelEdit.label', \"Cancel Edit\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.x,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatMessageTitle,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.isRequest, ChatContextKeys.currentlyEditing, ContextKeyExpr.equals(`config.${ChatConfiguration.EditRequests}`, 'input'))\n\t\t\t\t}\n\t\t\t],\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inChatInput,\n\t\t\t\t\tEditorContextKeys.hoverVisible.toNegated(),\n\t\t\t\t\tEditorContextKeys.hasNonEmptySelection.toNegated(),\n\t\t\t\t\tEditorContextKeys.hasMultipleSelections.toNegated(),\n\t\t\t\t\tContextKeyExpr.or(ChatContextKeys.currentlyEditing, ChatContextKeys.currentlyEditingInput)),\n\t\t\t\tweight: KeybindingWeight.EditorContrib - 5\n\t\t\t}\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = args[0] as IChatExecuteActionContext | undefined;\n\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\twidget.finishedEditing();\n\t}\n}\n\n\nexport function registerChatExecuteActions() {\n\tregisterAction2(ChatSubmitAction);\n\tregisterAction2(ChatDelegateToEditSessionAction);\n\tregisterAction2(ChatEditingSessionSubmitAction);\n\tregisterAction2(SubmitWithoutDispatchingAction);\n\tregisterAction2(CancelAction);\n\tregisterAction2(SendToNewChatAction);\n\tregisterAction2(ChatSubmitWithCodebaseAction);\n\tregisterAction2(CreateRemoteAgentJobAction);\n\tregisterAction2(ToggleChatModeAction);\n\tregisterAction2(SwitchToNextModelAction);\n\tregisterAction2(OpenModelPickerAction);\n\tregisterAction2(OpenModePickerAction);\n\tregisterAction2(ChatSessionPrimaryPickerAction);\n\tregisterAction2(ChangeChatModelAction);\n\tregisterAction2(CancelEdit);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}