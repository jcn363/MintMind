{"version":3,"names":["cov_opflfggyg","actualCoverage","groupBy","URI","localize","ResourceWithCommentThreads","Disposable","isMarkdownString","threadHasMeaningfulComments","thread","f","s","b","comments","length","some","comment","body","value","CommentsModel","_serviceBrand","_resourceCommentThreads","resourceCommentThreads","commentThreadsMap","constructor","Map","updateResourceCommentThreads","includeLabel","size","values","map","resourceWithCommentThreads","resource","ownerLabel","undefined","flat","setCommentThreads","uniqueOwner","owner","commentThreads","set","groupByResource","deleteCommentsByOwner","existingOwner","get","clear","updateCommentThreads","event","removed","changed","added","threadsForOwner","forEach","matchingResourceIndex","findIndex","resourceData","id","matchingResourceData","index","commentThread","threadId","splice","createCommentNode","parse","push","existingResource","filter","resourceWithThreads","toString","hasCommentThreads","getMessage","commentThreadsByResource","group","_compareURIs","v","i","m","a","resourceA","resourceB"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/comments/browser/commentsModel.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CommentThread } from '../../../../editor/common/languages.js';\nimport { localize } from '../../../../nls.js';\nimport { ResourceWithCommentThreads, ICommentThreadChangedEvent } from '../common/commentModel.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\n\nexport function threadHasMeaningfulComments(thread: CommentThread): boolean {\n\treturn !!thread.comments && !!thread.comments.length && thread.comments.some(comment => isMarkdownString(comment.body) ? comment.body.value.length > 0 : comment.body.length > 0);\n\n}\n\nexport interface ICommentsModel {\n\thasCommentThreads(): boolean;\n\tgetMessage(): string;\n\treadonly resourceCommentThreads: ResourceWithCommentThreads[];\n\treadonly commentThreadsMap: Map<string, { resourceWithCommentThreads: ResourceWithCommentThreads[]; ownerLabel?: string }>;\n}\n\nexport class CommentsModel extends Disposable implements ICommentsModel {\n\treadonly _serviceBrand: undefined;\n\tprivate _resourceCommentThreads: ResourceWithCommentThreads[];\n\tget resourceCommentThreads(): ResourceWithCommentThreads[] { return this._resourceCommentThreads; }\n\treadonly commentThreadsMap: Map<string, { resourceWithCommentThreads: ResourceWithCommentThreads[]; ownerLabel?: string }>;\n\n\tconstructor(\n\t) {\n\t\tsuper();\n\t\tthis._resourceCommentThreads = [];\n\t\tthis.commentThreadsMap = new Map<string, { resourceWithCommentThreads: ResourceWithCommentThreads[]; ownerLabel: string }>();\n\t}\n\n\tprivate updateResourceCommentThreads() {\n\t\tconst includeLabel = this.commentThreadsMap.size > 1;\n\t\tthis._resourceCommentThreads = [...this.commentThreadsMap.values()].map(value => {\n\t\t\treturn value.resourceWithCommentThreads.map(resource => {\n\t\t\t\tresource.ownerLabel = includeLabel ? value.ownerLabel : undefined;\n\t\t\t\treturn resource;\n\t\t\t}).flat();\n\t\t}).flat();\n\t}\n\n\tpublic setCommentThreads(uniqueOwner: string, owner: string, ownerLabel: string, commentThreads: CommentThread[]): void {\n\t\tthis.commentThreadsMap.set(uniqueOwner, { ownerLabel, resourceWithCommentThreads: this.groupByResource(uniqueOwner, owner, commentThreads) });\n\t\tthis.updateResourceCommentThreads();\n\t}\n\n\tpublic deleteCommentsByOwner(uniqueOwner?: string): void {\n\t\tif (uniqueOwner) {\n\t\t\tconst existingOwner = this.commentThreadsMap.get(uniqueOwner);\n\t\t\tthis.commentThreadsMap.set(uniqueOwner, { ownerLabel: existingOwner?.ownerLabel, resourceWithCommentThreads: [] });\n\t\t} else {\n\t\t\tthis.commentThreadsMap.clear();\n\t\t}\n\t\tthis.updateResourceCommentThreads();\n\t}\n\n\tpublic updateCommentThreads(event: ICommentThreadChangedEvent): boolean {\n\t\tconst { uniqueOwner, owner, ownerLabel, removed, changed, added } = event;\n\n\t\tconst threadsForOwner = this.commentThreadsMap.get(uniqueOwner)?.resourceWithCommentThreads || [];\n\n\t\tremoved.forEach(thread => {\n\t\t\t// Find resource that has the comment thread\n\t\t\tconst matchingResourceIndex = threadsForOwner.findIndex((resourceData) => resourceData.id === thread.resource);\n\t\t\tconst matchingResourceData = matchingResourceIndex >= 0 ? threadsForOwner[matchingResourceIndex] : undefined;\n\n\t\t\t// Find comment node on resource that is that thread and remove it\n\t\t\tconst index = matchingResourceData?.commentThreads.findIndex((commentThread) => commentThread.threadId === thread.threadId) ?? 0;\n\t\t\tif (index >= 0) {\n\t\t\t\tmatchingResourceData?.commentThreads.splice(index, 1);\n\t\t\t}\n\n\t\t\t// If the comment thread was the last thread for a resource, remove that resource from the list\n\t\t\tif (matchingResourceData?.commentThreads.length === 0) {\n\t\t\t\tthreadsForOwner.splice(matchingResourceIndex, 1);\n\t\t\t}\n\t\t});\n\n\t\tchanged.forEach(thread => {\n\t\t\t// Find resource that has the comment thread\n\t\t\tconst matchingResourceIndex = threadsForOwner.findIndex((resourceData) => resourceData.id === thread.resource);\n\t\t\tconst matchingResourceData = matchingResourceIndex >= 0 ? threadsForOwner[matchingResourceIndex] : undefined;\n\t\t\tif (!matchingResourceData) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Find comment node on resource that is that thread and replace it\n\t\t\tconst index = matchingResourceData.commentThreads.findIndex((commentThread) => commentThread.threadId === thread.threadId);\n\t\t\tif (index >= 0) {\n\t\t\t\tmatchingResourceData.commentThreads[index] = ResourceWithCommentThreads.createCommentNode(uniqueOwner, owner, URI.parse(matchingResourceData.id), thread);\n\t\t\t} else if (thread.comments && thread.comments.length) {\n\t\t\t\tmatchingResourceData.commentThreads.push(ResourceWithCommentThreads.createCommentNode(uniqueOwner, owner, URI.parse(matchingResourceData.id), thread));\n\t\t\t}\n\t\t});\n\n\t\tadded.forEach(thread => {\n\t\t\tconst existingResource = threadsForOwner.filter(resourceWithThreads => resourceWithThreads.resource.toString() === thread.resource);\n\t\t\tif (existingResource.length) {\n\t\t\t\tconst resource = existingResource[0];\n\t\t\t\tif (thread.comments && thread.comments.length) {\n\t\t\t\t\tresource.commentThreads.push(ResourceWithCommentThreads.createCommentNode(uniqueOwner, owner, resource.resource, thread));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthreadsForOwner.push(new ResourceWithCommentThreads(uniqueOwner, owner, URI.parse(thread.resource!), [thread]));\n\t\t\t}\n\t\t});\n\n\t\tthis.commentThreadsMap.set(uniqueOwner, { ownerLabel, resourceWithCommentThreads: threadsForOwner });\n\t\tthis.updateResourceCommentThreads();\n\n\t\treturn removed.length > 0 || changed.length > 0 || added.length > 0;\n\t}\n\n\tpublic hasCommentThreads(): boolean {\n\t\t// There's a resource with at least one thread\n\t\treturn !!this._resourceCommentThreads.length && this._resourceCommentThreads.some(resource => {\n\t\t\t// At least one of the threads in the resource has comments\n\t\t\treturn (resource.commentThreads.length > 0) && resource.commentThreads.some(thread => {\n\t\t\t\t// At least one of the comments in the thread is not empty\n\t\t\t\treturn threadHasMeaningfulComments(thread.thread);\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic getMessage(): string {\n\t\tif (!this._resourceCommentThreads.length) {\n\t\t\treturn localize('noComments', \"There are no comments in this workspace yet.\");\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tprivate groupByResource(uniqueOwner: string, owner: string, commentThreads: CommentThread[]): ResourceWithCommentThreads[] {\n\t\tconst resourceCommentThreads: ResourceWithCommentThreads[] = [];\n\t\tconst commentThreadsByResource = new Map<string, ResourceWithCommentThreads>();\n\t\tfor (const group of groupBy(commentThreads, CommentsModel._compareURIs)) {\n\t\t\tcommentThreadsByResource.set(group[0].resource!, new ResourceWithCommentThreads(uniqueOwner, owner, URI.parse(group[0].resource!), group));\n\t\t}\n\n\t\tcommentThreadsByResource.forEach((v, i, m) => {\n\t\t\tresourceCommentThreads.push(v);\n\t\t});\n\n\t\treturn resourceCommentThreads;\n\t}\n\n\tprivate static _compareURIs(a: CommentThread, b: CommentThread) {\n\t\tconst resourceA = a.resource!.toString();\n\t\tconst resourceB = b.resource!.toString();\n\t\tif (resourceA < resourceB) {\n\t\t\treturn -1;\n\t\t} else if (resourceA > resourceB) {\n\t\t\treturn 1;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}