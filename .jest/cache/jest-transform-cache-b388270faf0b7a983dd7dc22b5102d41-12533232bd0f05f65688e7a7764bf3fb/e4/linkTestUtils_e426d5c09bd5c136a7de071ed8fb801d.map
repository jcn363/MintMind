{"version":3,"names":["cov_1buswm6ox","actualCoverage","deepStrictEqual","hasKey","assertLinkHelper","text","expected","detector","expectedType","f","s","xterm","reset","Promise","r","write","textSplit","split","lastLineIndex","filter","e","i","length","reduce","p","c","Math","max","ceil","lines","buffer","active","cursorY","push","getLine","actualLinks","detect","map","link","b","uri","toString","type","bufferRange","expectedLinks","start","x","range","y","end"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/links/test/browser/linkTestUtils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { deepStrictEqual } from 'assert';\nimport { ITerminalLinkDetector, TerminalLinkType } from '../../browser/links.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport type { IBufferLine } from '@xterm/xterm';\nimport { hasKey } from '../../../../../../base/common/types.js';\n\nexport async function assertLinkHelper(\n\ttext: string,\n\texpected: ({ uri: URI; range: [number, number][] } | { text: string; range: [number, number][] })[],\n\tdetector: ITerminalLinkDetector,\n\texpectedType: TerminalLinkType\n) {\n\tdetector.xterm.reset();\n\n\t// Write the text and wait for the parser to finish\n\tawait new Promise<void>(r => detector.xterm.write(text, r));\n\tconst textSplit = text.split('\\r\\n');\n\tconst lastLineIndex = textSplit.filter((e, i) => i !== textSplit.length - 1).reduce((p, c) => {\n\t\treturn p + Math.max(Math.ceil(c.length / 80), 1);\n\t}, 0);\n\n\t// Ensure all links are provided\n\tconst lines: IBufferLine[] = [];\n\tfor (let i = 0; i < detector.xterm.buffer.active.cursorY + 1; i++) {\n\t\tlines.push(detector.xterm.buffer.active.getLine(i)!);\n\t}\n\n\t// Detect links always on the last line with content\n\tconst actualLinks = (await detector.detect(lines, lastLineIndex, detector.xterm.buffer.active.cursorY)).map(e => {\n\t\treturn {\n\t\t\tlink: e.uri?.toString() ?? e.text,\n\t\t\ttype: expectedType,\n\t\t\tbufferRange: e.bufferRange\n\t\t};\n\t});\n\tconst expectedLinks = expected.map(e => {\n\t\treturn {\n\t\t\ttype: expectedType,\n\t\t\tlink: hasKey(e, { uri: true }) ? e.uri.toString() : e.text,\n\t\t\tbufferRange: {\n\t\t\t\tstart: { x: e.range[0][0], y: e.range[0][1] },\n\t\t\t\tend: { x: e.range[1][0], y: e.range[1][1] },\n\t\t\t}\n\t\t};\n\t});\n\tdeepStrictEqual(actualLinks, expectedLinks);\n}\n"],"mappings":"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","ignoreList":[]}