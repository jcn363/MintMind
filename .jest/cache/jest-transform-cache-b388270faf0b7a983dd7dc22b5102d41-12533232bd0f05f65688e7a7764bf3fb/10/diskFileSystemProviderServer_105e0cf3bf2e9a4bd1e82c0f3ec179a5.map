{"version":3,"names":["cov_ghd5zenpa","actualCoverage","localize","invoke","isWindows","URI","createFileSystemProviderError","FileSystemProviderErrorCode","basename","normalize","AbstractDiskFileSystemProviderChannel","AbstractSessionFileWatcher","DefaultURITransformer","toErrorMessage","DiskFileSystemProviderChannel","environmentService","constructor","provider","logService","f","s","getUriTransformer","ctx","transformIncoming","uriTransformer","_resource","revive","delete","opts","useTrash","b","resource","filePath","fsPath","path","error","Unknown","createSessionFileWatcher","emitter","SessionFileWatcher","watch","req","recursive","Unavailable"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/files/electron-main/diskFileSystemProviderServer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../nls.js';\nimport { invoke } from '@tauri-apps/api/core';\nimport { isWindows } from '../../../base/common/platform.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IFileDeleteOptions, IFileChange, IWatchOptions, createFileSystemProviderError, FileSystemProviderErrorCode } from '../common/files.js';\nimport { DiskFileSystemProvider } from '../node/diskFileSystemProvider.js';\nimport { basename, normalize } from '../../../base/common/path.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { AbstractDiskFileSystemProviderChannel, AbstractSessionFileWatcher, ISessionFileWatcher } from '../node/diskFileSystemProviderServer.js';\nimport { DefaultURITransformer, IURITransformer } from '../../../base/common/uriIpc.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { toErrorMessage } from '../../../base/common/errorMessage.js';\n\nexport class DiskFileSystemProviderChannel extends AbstractDiskFileSystemProviderChannel<unknown> {\n\n\tconstructor(\n\t\tprovider: DiskFileSystemProvider,\n\t\tlogService: ILogService,\n\t\tprivate readonly environmentService: IEnvironmentService\n\t) {\n\t\tsuper(provider, logService);\n\t}\n\n\tprotected override getUriTransformer(ctx: unknown): IURITransformer {\n\t\treturn DefaultURITransformer;\n\t}\n\n\tprotected override transformIncoming(uriTransformer: IURITransformer, _resource: UriComponents): URI {\n\t\treturn URI.revive(_resource);\n\t}\n\n\t//#region Delete: override to support Electron's trash support\n\n\tprotected override async delete(uriTransformer: IURITransformer, _resource: UriComponents, opts: IFileDeleteOptions): Promise<void> {\n\t\tif (!opts.useTrash) {\n\t\t\treturn super.delete(uriTransformer, _resource, opts);\n\t\t}\n\n\t\tconst resource = this.transformIncoming(uriTransformer, _resource);\n\t\tconst filePath = normalize(resource.fsPath);\n\t\ttry {\n\t\t\tawait invoke('move_item_to_trash', { path: filePath });\n\t\t} catch (error) {\n\t\t\tthrow createFileSystemProviderError(isWindows ? localize('binFailed', \"Failed to move '{0}' to the recycle bin ({1})\", basename(filePath), toErrorMessage(error)) : localize('trashFailed', \"Failed to move '{0}' to the trash ({1})\", basename(filePath), toErrorMessage(error)), FileSystemProviderErrorCode.Unknown);\n\t\t}\n\t}\n\n\t//#endregion\n\n\t//#region File Watching\n\n\tprotected createSessionFileWatcher(uriTransformer: IURITransformer, emitter: Emitter<IFileChange[] | string>): ISessionFileWatcher {\n\t\treturn new SessionFileWatcher(uriTransformer, emitter, this.logService, this.environmentService);\n\t}\n\n\t//#endregion\n\n}\n\nclass SessionFileWatcher extends AbstractSessionFileWatcher {\n\n\toverride watch(req: number, resource: URI, opts: IWatchOptions): IDisposable {\n\t\tif (opts.recursive) {\n\t\t\tthrow createFileSystemProviderError('Recursive file watching is not supported from main process for performance reasons.', FileSystemProviderErrorCode.Unavailable);\n\t\t}\n\n\t\treturn super.watch(req, resource, opts);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}