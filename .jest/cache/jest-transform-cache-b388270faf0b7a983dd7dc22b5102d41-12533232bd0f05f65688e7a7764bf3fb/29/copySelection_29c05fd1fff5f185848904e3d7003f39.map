{"version":3,"names":["cov_gqof0hzb9","actualCoverage","addDisposableListener","DisposableStore","Range","enableCopySelection","options","f","domNode","renderLinesResult","diffEntry","originalModel","clipboardService","s","viewZoneDisposable","add","e","preventDefault","selection","ownerDocument","getSelection","b","rangeCount","domRange","getRangeAt","collapsed","startElement","startContainer","nodeType","Node","TEXT_NODE","parentElement","endElement","endContainer","startPosition","getModelPositionAt","startOffset","endPosition","endOffset","adjustedStart","delta","original","startLineNumber","adjustedEnd","range","isBefore","fromPositions","selectedText","getValueInRange","writeText"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/copySelection.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { addDisposableListener } from '../../../../../../base/browser/dom.js';\nimport { DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { Range } from '../../../../../common/core/range.js';\nimport { DetailedLineRangeMapping } from '../../../../../common/diff/rangeMapping.js';\nimport { ITextModel } from '../../../../../common/model.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { RenderLinesResult } from './renderLines.js';\n\nexport interface IEnableViewZoneCopySelectionOptions {\n\t/** The view zone HTML element that contains the deleted codes. */\n\tdomNode: HTMLElement;\n\n\t/** The diff entry for the current view zone. */\n\tdiffEntry: DetailedLineRangeMapping;\n\n\t/** The original text model, to get the original text based on selection. */\n\toriginalModel: ITextModel;\n\n\t/** The render lines result that can translate DOM positions to model positions. */\n\trenderLinesResult: RenderLinesResult;\n\n\t/** The clipboard service to write the selected text to. */\n\tclipboardService: IClipboardService;\n}\n\nexport function enableCopySelection(options: IEnableViewZoneCopySelectionOptions): DisposableStore {\n\tconst { domNode, renderLinesResult, diffEntry, originalModel, clipboardService } = options;\n\tconst viewZoneDisposable = new DisposableStore();\n\n\tviewZoneDisposable.add(addDisposableListener(domNode, 'copy', (e) => {\n\t\te.preventDefault();\n\t\tconst selection = domNode.ownerDocument.getSelection();\n\t\tif (!selection || selection.rangeCount === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domRange = selection.getRangeAt(0);\n\t\tif (!domRange || domRange.collapsed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst startElement = domRange.startContainer.nodeType === Node.TEXT_NODE\n\t\t\t? domRange.startContainer.parentElement\n\t\t\t: domRange.startContainer as HTMLElement;\n\t\tconst endElement = domRange.endContainer.nodeType === Node.TEXT_NODE\n\t\t\t? domRange.endContainer.parentElement\n\t\t\t: domRange.endContainer as HTMLElement;\n\n\t\tif (!startElement || !endElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst startPosition = renderLinesResult.getModelPositionAt(startElement, domRange.startOffset);\n\t\tconst endPosition = renderLinesResult.getModelPositionAt(endElement, domRange.endOffset);\n\n\t\tif (!startPosition || !endPosition) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst adjustedStart = startPosition.delta(diffEntry.original.startLineNumber - 1);\n\t\tconst adjustedEnd = endPosition.delta(diffEntry.original.startLineNumber - 1);\n\n\t\tconst range = adjustedEnd.isBefore(adjustedStart) ?\n\t\t\tRange.fromPositions(adjustedEnd, adjustedStart) :\n\t\t\tRange.fromPositions(adjustedStart, adjustedEnd);\n\n\t\tconst selectedText = originalModel.getValueInRange(range);\n\t\tclipboardService.writeText(selectedText);\n\t}));\n\n\treturn viewZoneDisposable;\n}\n"],"mappings":"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","ignoreList":[]}