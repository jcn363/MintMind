{"version":3,"names":["cov_1twa0ihce3","actualCoverage","homedir","resolve","isAbsolute","join","cwd","s","b","process","env","getUserDataPath","cliArgs","productName","f","userDataPath","doGetUserDataPath","pathsToResolve","unshift","portablePath","appDataPath","cliPath","platform","userProfile","Error"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/environment/node/userDataPath.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { homedir } from 'os';\nimport { NativeParsedArgs } from '../common/argv.js';\n\n// This file used to be a pure JS file and was always\n// importing `path` from node.js even though we ship\n// our own version of the library and prefer to use\n// that.\n// However, resolution of user-data-path is critical\n// and while our version of `path` is a copy of node.js\n// one, you never know. As such, preserve the use of\n// the built-in `path` lib for the time being.\n// eslint-disable-next-line local/code-import-patterns\nimport { resolve, isAbsolute, join } from 'path';\n\nconst cwd = process.env['MINTMIND_CWD'] || process.cwd();\n\n/**\n * Returns the user data path to use with some rules:\n * - respect portable mode\n * - respect MINTMIND_APPDATA environment variable\n * - respect --user-data-dir CLI argument\n */\nexport function getUserDataPath(cliArgs: NativeParsedArgs, productName: string): string {\n\tconst userDataPath = doGetUserDataPath(cliArgs, productName);\n\tconst pathsToResolve = [userDataPath];\n\n\t// If the user-data-path is not absolute, make\n\t// sure to resolve it against the passed in\n\t// current working directory. We cannot use the\n\t// node.js `path.resolve()` logic because it will\n\t// not pick up our `MINTMIND_CWD` environment variable\n\t// (https://github.com/microsoft/vscode/issues/120269)\n\tif (!isAbsolute(userDataPath)) {\n\t\tpathsToResolve.unshift(cwd);\n\t}\n\n\treturn resolve(...pathsToResolve);\n}\n\nfunction doGetUserDataPath(cliArgs: NativeParsedArgs, productName: string): string {\n\n\t// 0. Running out of sources has a fixed productName\n\tif (process.env['MINTMIND_DEV']) {\n\t\tproductName = 'code-oss-dev';\n\t}\n\n\t// 1. Support portable mode\n\tconst portablePath = process.env['MINTMIND_PORTABLE'];\n\tif (portablePath) {\n\t\treturn join(portablePath, 'user-data');\n\t}\n\n\t// 2. Support global MINTMIND_APPDATA environment variable\n\tlet appDataPath = process.env['MINTMIND_APPDATA'];\n\tif (appDataPath) {\n\t\treturn join(appDataPath, productName);\n\t}\n\n\t// With Electron>=13 --user-data-dir switch will be propagated to\n\t// all processes https://github.com/electron/electron/blob/1897b14af36a02e9aa7e4d814159303441548251/shell/browser/electron_browser_client.cc#L546-L553\n\t// Check MINTMIND_PORTABLE and MINTMIND_APPDATA before this case to get correct values.\n\t// 3. Support explicit --user-data-dir\n\tconst cliPath = cliArgs['user-data-dir'];\n\tif (cliPath) {\n\t\treturn cliPath;\n\t}\n\n\t// 4. Otherwise check per platform\n\tswitch (process.platform) {\n\t\tcase 'win32':\n\t\t\tappDataPath = process.env['APPDATA'];\n\t\t\tif (!appDataPath) {\n\t\t\t\tconst userProfile = process.env['USERPROFILE'];\n\t\t\t\tif (typeof userProfile !== 'string') {\n\t\t\t\t\tthrow new Error('Windows: Unexpected undefined %USERPROFILE% environment variable');\n\t\t\t\t}\n\n\t\t\t\tappDataPath = join(userProfile, 'AppData', 'Roaming');\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'darwin':\n\t\t\tappDataPath = join(homedir(), 'Library', 'Application Support');\n\t\t\tbreak;\n\t\tcase 'linux':\n\t\t\tappDataPath = process.env['XDG_CONFIG_HOME'] || join(homedir(), '.config');\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error('Platform not supported');\n\t}\n\n\treturn join(appDataPath, productName);\n}\n"],"mappings":"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","ignoreList":[]}