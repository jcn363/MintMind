{"version":3,"names":["cov_dzssypbu8","actualCoverage","DisposableStore","strictEquals","DebugLocation","DebugNameData","_setDerivedOpts","Derived","DerivedWithSetter","derived","computeFnOrOwner","computeFn","debugLocation","b","ofCaller","f","s","undefined","derivedWithSetter","owner","setter","derivedOpts","options","debugName","debugReferenceFn","onLastObserverRemoved","equalsFn","derivedHandleChanges","changeTracker","equalityComparer","derivedWithStore","computeFnOrUndefined","store","r","isDisposed","clear","dispose","derivedDisposable","result","add"],"sources":["/home/user/Desktop/MintMind/src/vs/base/common/observableInternal/observables/derived.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IObservable, IReader, ITransaction, ISettableObservable, IObservableWithChange } from '../base.js';\nimport { IChangeTracker } from '../changeTracker.js';\nimport { DisposableStore, EqualityComparer, IDisposable, strictEquals } from '../commonFacade/deps.js';\nimport { DebugLocation } from '../debugLocation.js';\nimport { DebugOwner, DebugNameData, IDebugNameData } from '../debugName.js';\nimport { _setDerivedOpts } from './baseObservable.js';\nimport { IDerivedReader, Derived, DerivedWithSetter } from './derivedImpl.js';\n\n/**\n * Creates an observable that is derived from other observables.\n * The value is only recomputed when absolutely needed.\n *\n * {@link computeFn} should start with a JS Doc using `@description` to name the derived.\n */\nexport function derived<T, TChange = void>(computeFn: (reader: IDerivedReader<TChange>, debugLocation?: DebugLocation) => T): IObservableWithChange<T, TChange>;\nexport function derived<T, TChange = void>(owner: DebugOwner, computeFn: (reader: IDerivedReader<TChange>) => T, debugLocation?: DebugLocation): IObservableWithChange<T, TChange>;\nexport function derived<T, TChange = void>(\n\tcomputeFnOrOwner: ((reader: IDerivedReader<TChange>) => T) | DebugOwner,\n\tcomputeFn?: ((reader: IDerivedReader<TChange>) => T) | undefined,\n\tdebugLocation = DebugLocation.ofCaller()\n): IObservable<T> {\n\tif (computeFn !== undefined) {\n\t\treturn new Derived(\n\t\t\tnew DebugNameData(computeFnOrOwner, undefined, computeFn),\n\t\t\tcomputeFn,\n\t\t\tundefined,\n\t\t\tundefined,\n\t\t\tstrictEquals,\n\t\t\tdebugLocation,\n\t\t);\n\t}\n\treturn new Derived(\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tnew DebugNameData(undefined, undefined, computeFnOrOwner as any),\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tcomputeFnOrOwner as any,\n\t\tundefined,\n\t\tundefined,\n\t\tstrictEquals,\n\t\tdebugLocation,\n\t);\n}\n\nexport function derivedWithSetter<T>(owner: DebugOwner | undefined, computeFn: (reader: IReader) => T, setter: (value: T, transaction: ITransaction | undefined) => void, debugLocation = DebugLocation.ofCaller()): ISettableObservable<T> {\n\treturn new DerivedWithSetter(\n\t\tnew DebugNameData(owner, undefined, computeFn),\n\t\tcomputeFn,\n\t\tundefined,\n\t\tundefined,\n\t\tstrictEquals,\n\t\tsetter,\n\t\tdebugLocation\n\t);\n}\n\nexport function derivedOpts<T>(\n\toptions: IDebugNameData & {\n\t\tequalsFn?: EqualityComparer<T>;\n\t\tonLastObserverRemoved?: (() => void);\n\t},\n\tcomputeFn: (reader: IReader) => T,\n\tdebugLocation = DebugLocation.ofCaller()\n): IObservable<T> {\n\treturn new Derived(\n\t\tnew DebugNameData(options.owner, options.debugName, options.debugReferenceFn),\n\t\tcomputeFn,\n\t\tundefined,\n\t\toptions.onLastObserverRemoved,\n\t\toptions.equalsFn ?? strictEquals,\n\t\tdebugLocation\n\t);\n}\n_setDerivedOpts(derivedOpts);\n\n/**\n * Represents an observable that is derived from other observables.\n * The value is only recomputed when absolutely needed.\n *\n * {@link computeFn} should start with a JS Doc using `@description` to name the derived.\n *\n * Use `createEmptyChangeSummary` to create a \"change summary\" that can collect the changes.\n * Use `handleChange` to add a reported change to the change summary.\n * The compute function is given the last change summary.\n * The change summary is discarded after the compute function was called.\n *\n * @see derived\n */\nexport function derivedHandleChanges<T, TDelta, TChangeSummary>(\n\toptions: IDebugNameData & {\n\t\tchangeTracker: IChangeTracker<TChangeSummary>;\n\t\tequalityComparer?: EqualityComparer<T>;\n\t},\n\tcomputeFn: (reader: IDerivedReader<TDelta>, changeSummary: TChangeSummary) => T,\n\tdebugLocation = DebugLocation.ofCaller()\n): IObservableWithChange<T, TDelta> {\n\treturn new Derived(\n\t\tnew DebugNameData(options.owner, options.debugName, undefined),\n\t\tcomputeFn,\n\t\toptions.changeTracker,\n\t\tundefined,\n\t\toptions.equalityComparer ?? strictEquals,\n\t\tdebugLocation\n\t);\n}\n\n/**\n * @deprecated Use `derived(reader => { reader.store.add(...) })` instead!\n*/\nexport function derivedWithStore<T>(computeFn: (reader: IReader, store: DisposableStore) => T): IObservable<T>;\n\n/**\n * @deprecated Use `derived(reader => { reader.store.add(...) })` instead!\n*/\nexport function derivedWithStore<T>(owner: DebugOwner, computeFn: (reader: IReader, store: DisposableStore) => T): IObservable<T>;\nexport function derivedWithStore<T>(computeFnOrOwner: ((reader: IReader, store: DisposableStore) => T) | DebugOwner, computeFnOrUndefined?: ((reader: IReader, store: DisposableStore) => T), debugLocation = DebugLocation.ofCaller()): IObservable<T> {\n\tlet computeFn: (reader: IReader, store: DisposableStore) => T;\n\tlet owner: DebugOwner;\n\tif (computeFnOrUndefined === undefined) {\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tcomputeFn = computeFnOrOwner as any;\n\t\towner = undefined;\n\t} else {\n\t\towner = computeFnOrOwner;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tcomputeFn = computeFnOrUndefined as any;\n\t}\n\n\t// Intentionally re-assigned in case an inactive observable is re-used later\n\t// eslint-disable-next-line local/code-no-potentially-unsafe-disposables\n\tlet store = new DisposableStore();\n\n\treturn new Derived(\n\t\tnew DebugNameData(owner, undefined, computeFn),\n\t\tr => {\n\t\t\tif (store.isDisposed) {\n\t\t\t\tstore = new DisposableStore();\n\t\t\t} else {\n\t\t\t\tstore.clear();\n\t\t\t}\n\t\t\treturn computeFn(r, store);\n\t\t},\n\t\tundefined,\n\t\t() => store.dispose(),\n\t\tstrictEquals,\n\t\tdebugLocation\n\t);\n}\n\nexport function derivedDisposable<T extends IDisposable | undefined>(computeFn: (reader: IReader) => T): IObservable<T>;\nexport function derivedDisposable<T extends IDisposable | undefined>(owner: DebugOwner, computeFn: (reader: IReader) => T): IObservable<T>;\nexport function derivedDisposable<T extends IDisposable | undefined>(computeFnOrOwner: ((reader: IReader) => T) | DebugOwner, computeFnOrUndefined?: ((reader: IReader) => T), debugLocation = DebugLocation.ofCaller()): IObservable<T> {\n\tlet computeFn: (reader: IReader) => T;\n\tlet owner: DebugOwner;\n\tif (computeFnOrUndefined === undefined) {\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tcomputeFn = computeFnOrOwner as any;\n\t\towner = undefined;\n\t} else {\n\t\towner = computeFnOrOwner;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t\tcomputeFn = computeFnOrUndefined as any;\n\t}\n\n\tlet store: DisposableStore | undefined = undefined;\n\treturn new Derived(\n\t\tnew DebugNameData(owner, undefined, computeFn),\n\t\tr => {\n\t\t\tif (!store) {\n\t\t\t\tstore = new DisposableStore();\n\t\t\t} else {\n\t\t\t\tstore.clear();\n\t\t\t}\n\t\t\tconst result = computeFn(r);\n\t\t\tif (result) {\n\t\t\t\tstore.add(result);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\tundefined,\n\t\t() => {\n\t\t\tif (store) {\n\t\t\t\tstore.dispose();\n\t\t\t\tstore = undefined;\n\t\t\t}\n\t\t},\n\t\tstrictEquals,\n\t\tdebugLocation\n\t);\n}\n"],"mappings":"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","ignoreList":[]}