{"version":3,"names":["cov_1arpcz4ydv","actualCoverage","markedKatexExtension","r","s","String","raw","linkPattern","getNWords","str","numWordsToCount","f","backtick","wordRegExp","RegExp","mathInlineRegExp","source","allWordMatches","Array","from","matchAll","targetWords","slice","endIndex","length","b","at","index","value","substring","returnedWordCount","isFullString","totalWordCount","countWords","result","Number","MAX_SAFE_INTEGER"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/common/chatWordCounter.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as markedKatexExtension from '../../markdown/common/markedKatexExtension.js';\n\nexport interface IWordCountResult {\n\tvalue: string;\n\treturnedWordCount: number;\n\ttotalWordCount: number;\n\tisFullString: boolean;\n}\n\nconst r = String.raw;\n\n/**\n * Matches `[text](link title?)` or `[text](<link> title?)`\n *\n * Taken from vscode-markdown-languageservice\n */\nconst linkPattern =\n\tr`(?<!\\\\)` + // Must not start with escape\n\n\t// text\n\tr`(!?\\[` + // open prefix match -->\n\t/**/r`(?:` +\n\t/*****/r`[^\\[\\]\\\\]|` + // Non-bracket chars, or...\n\t/*****/r`\\\\.|` + // Escaped char, or...\n\t/*****/r`\\[[^\\[\\]]*\\]` + // Matched bracket pair\n\t/**/r`)*` +\n\tr`\\])` + // <-- close prefix match\n\n\t// Destination\n\tr`(\\(\\s*)` + // Pre href\n\t/**/r`(` +\n\t/*****/r`[^\\s\\(\\)<](?:[^\\s\\(\\)]|\\([^\\s\\(\\)]*?\\))*|` + // Link without whitespace, or...\n\t/*****/r`<(?:\\\\[<>]|[^<>])+>` + // In angle brackets\n\t/**/r`)` +\n\n\t// Title\n\t/**/r`\\s*(?:\"[^\"]*\"|'[^']*'|\\([^\\(\\)]*\\))?\\s*` +\n\tr`\\)`;\n\nexport function getNWords(str: string, numWordsToCount: number): IWordCountResult {\n\t// This regex matches each word and skips over whitespace and separators. A word is:\n\t// A markdown link\n\t// Inline math\n\t// One chinese character\n\t// One or more + - =, handled so that code like \"a=1+2-3\" is broken up better\n\t// One or more characters that aren't whitepace or any of the above\n\tconst backtick = '`';\n\n\tconst wordRegExp = new RegExp('(?:' + linkPattern + ')|(?:' + markedKatexExtension.mathInlineRegExp.source + r`)|\\p{sc=Han}|=+|\\++|-+|[^\\s\\|\\p{sc=Han}|=|\\+|\\-|${backtick}]+`, 'gu');\n\tconst allWordMatches = Array.from(str.matchAll(wordRegExp));\n\n\tconst targetWords = allWordMatches.slice(0, numWordsToCount);\n\n\tconst endIndex = numWordsToCount >= allWordMatches.length\n\t\t? str.length // Reached end of string\n\t\t: targetWords.length ? targetWords.at(-1)!.index + targetWords.at(-1)![0].length : 0;\n\n\tconst value = str.substring(0, endIndex);\n\treturn {\n\t\tvalue,\n\t\treturnedWordCount: targetWords.length === 0 ? (value.length ? 1 : 0) : targetWords.length,\n\t\tisFullString: endIndex >= str.length,\n\t\ttotalWordCount: allWordMatches.length\n\t};\n}\n\nexport function countWords(str: string): number {\n\tconst result = getNWords(str, Number.MAX_SAFE_INTEGER);\n\treturn result.returnedWordCount;\n}\n"],"mappings":"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","ignoreList":[]}