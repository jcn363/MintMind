{"version":3,"names":["cov_nmaou8ro7","actualCoverage","mainWindow","Event","generateUuid","ipcMessagePort","ipcRenderer","acquirePort","requestChannel","responseChannel","nonce","b","f","s","acquire","send","onMessageChannelResult","fromDOMEventEmitter","e","data","port","ports","source","toPromise","once","filter"],"sources":["/home/user/Desktop/MintMind/src/vs/base/parts/ipc/electron-browser/ipc.mp.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { mainWindow } from '../../../browser/window.js';\nimport { Event } from '../../../common/event.js';\nimport { generateUuid } from '../../../common/uuid.js';\nimport { ipcMessagePort, ipcRenderer } from '../../sandbox/electron-browser/globals.js';\n\ninterface IMessageChannelResult {\n\tnonce: string;\n\tport: MessagePort;\n\tsource: unknown;\n}\n\nexport async function acquirePort(requestChannel: string | undefined, responseChannel: string, nonce = generateUuid()): Promise<MessagePort> {\n\n\t// Get ready to acquire the message port from the\n\t// provided `responseChannel` via preload helper.\n\tipcMessagePort.acquire(responseChannel, nonce);\n\n\t// If a `requestChannel` is provided, we are in charge\n\t// to trigger acquisition of the message port from main\n\tif (typeof requestChannel === 'string') {\n\t\tipcRenderer.send(requestChannel, nonce);\n\t}\n\n\t// Wait until the main side has returned the `MessagePort`\n\t// We need to filter by the `nonce` to ensure we listen\n\t// to the right response.\n\tconst onMessageChannelResult = Event.fromDOMEventEmitter<IMessageChannelResult>(mainWindow, 'message', (e: MessageEvent) => ({ nonce: e.data, port: e.ports[0], source: e.source }));\n\tconst { port } = await Event.toPromise(Event.once(Event.filter(onMessageChannelResult, e => e.nonce === nonce && e.source === mainWindow)));\n\n\treturn port;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAyBE;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAzBF;;;;AAKA,SAASE,UAAU,QAAQ,4BAA4B;AACvD,SAASC,KAAK,QAAQ,0BAA0B;AAChD,SAASC,YAAY,QAAQ,yBAAyB;AACtD,SAASC,cAAc,EAAEC,WAAW,QAAQ,2CAA2C;AAQvF,OAAO,eAAeC,WAAWA,CAACC,cAAkC,EAAEC,eAAuB,EAAEC,KAAK;AAAA;AAAA,CAAAV,aAAA,GAAAW,CAAA,UAAGP,YAAY,EAAE;EAAA;EAAAJ,aAAA,GAAAY,CAAA;EAAAZ,aAAA,GAAAa,CAAA;EAEpH;EACA;EACAR,cAAc,CAACS,OAAO,CAACL,eAAe,EAAEC,KAAK,CAAC;EAE9C;EACA;EAAA;EAAAV,aAAA,GAAAa,CAAA;EACA,IAAI,OAAOL,cAAc,KAAK,QAAQ,EAAE;IAAA;IAAAR,aAAA,GAAAW,CAAA;IAAAX,aAAA,GAAAa,CAAA;IACvCP,WAAW,CAACS,IAAI,CAACP,cAAc,EAAEE,KAAK,CAAC;EACxC,CAAC;EAAA;EAAA;IAAAV,aAAA,GAAAW,CAAA;EAAA;EAED;EACA;EACA;EACA,MAAMK,sBAAsB;EAAA;EAAA,CAAAhB,aAAA,GAAAa,CAAA,OAAGV,KAAK,CAACc,mBAAmB,CAAwBf,UAAU,EAAE,SAAS,EAAGgB,CAAe,IAAM;IAAA;IAAAlB,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAa,CAAA;IAAA;MAAEH,KAAK,EAAEQ,CAAC,CAACC,IAAI;MAAEC,IAAI,EAAEF,CAAC,CAACG,KAAK,CAAC,CAAC,CAAC;MAAEC,MAAM,EAAEJ,CAAC,CAACI;IAAM,CAAE;EAAF,CAAG,CAAC;EACpL,MAAM;IAAEF;EAAI,CAAE;EAAA;EAAA,CAAApB,aAAA,GAAAa,CAAA,OAAG,MAAMV,KAAK,CAACoB,SAAS,CAACpB,KAAK,CAACqB,IAAI,CAACrB,KAAK,CAACsB,MAAM,CAACT,sBAAsB,EAAEE,CAAC,IAAI;IAAA;IAAAlB,aAAA,GAAAY,CAAA;IAAAZ,aAAA,GAAAa,CAAA;IAAA,kCAAAb,aAAA,GAAAW,CAAA,UAAAO,CAAC,CAACR,KAAK,KAAKA,KAAK;IAAA;IAAA,CAAAV,aAAA,GAAAW,CAAA,UAAIO,CAAC,CAACI,MAAM,KAAKpB,UAAU;EAAV,CAAU,CAAC,CAAC,CAAC;EAAC;EAAAF,aAAA,GAAAa,CAAA;EAE5I,OAAOO,IAAI;AACZ","ignoreList":[]}