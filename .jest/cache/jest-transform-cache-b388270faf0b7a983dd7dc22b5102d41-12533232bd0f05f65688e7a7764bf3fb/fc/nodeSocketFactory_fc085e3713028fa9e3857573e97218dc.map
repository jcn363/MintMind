{"version":3,"names":["net","NodeSocket","makeRawSocketHeaders","nodeSocketFactory","cov_exmqz952u","s","supports","connectTo","f","connect","host","port","path","query","debugLabel","Promise","resolve","reject","socket","createConnection","removeListener","write","onData","data","strData","toString","indexOf","b","off","on","setNoDelay","once"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/remote/node/nodeSocketFactory.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as net from 'net';\nimport { ISocket } from '../../../base/parts/ipc/common/ipc.net.js';\nimport { NodeSocket } from '../../../base/parts/ipc/node/ipc.net.js';\nimport { makeRawSocketHeaders } from '../common/managedSocket.js';\nimport { RemoteConnectionType, WebSocketRemoteConnection } from '../common/remoteAuthorityResolver.js';\nimport { ISocketFactory } from '../common/remoteSocketFactoryService.js';\n\nexport const nodeSocketFactory = new class implements ISocketFactory<RemoteConnectionType.WebSocket> {\n\n\tsupports(connectTo: WebSocketRemoteConnection): boolean {\n\t\treturn true;\n\t}\n\n\tconnect({ host, port }: WebSocketRemoteConnection, path: string, query: string, debugLabel: string): Promise<ISocket> {\n\t\treturn new Promise<ISocket>((resolve, reject) => {\n\t\t\tconst socket = net.createConnection({ host: host, port: port }, () => {\n\t\t\t\tsocket.removeListener('error', reject);\n\n\t\t\t\tsocket.write(makeRawSocketHeaders(path, query, debugLabel));\n\n\t\t\t\tconst onData = (data: Buffer) => {\n\t\t\t\t\tconst strData = data.toString();\n\t\t\t\t\tif (strData.indexOf('\\r\\n\\r\\n') >= 0) {\n\t\t\t\t\t\t// headers received OK\n\t\t\t\t\t\tsocket.off('data', onData);\n\t\t\t\t\t\tresolve(new NodeSocket(socket, debugLabel));\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tsocket.on('data', onData);\n\t\t\t});\n\t\t\t// Disable Nagle's algorithm.\n\t\t\tsocket.setNoDelay(true);\n\t\t\tsocket.once('error', reject);\n\t\t});\n\t}\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAKA,OAAO,KAAKA,GAAG,MAAM,KAAK;AAE1B,SAASC,UAAU,QAAQ,yCAAyC;AACpE,SAASC,oBAAoB,QAAQ,4BAA4B;AAIjE,OAAO,MAAMC,iBAAiB;AAAA;AAAA,CAAAC,aAAA,GAAAC,CAAA,OAAG,IAAI;EAEpCC,QAAQA,CAACC,SAAoC;IAAA;IAAAH,aAAA,GAAAI,CAAA;IAAAJ,aAAA,GAAAC,CAAA;IAC5C,OAAO,IAAI;EACZ;EAEAI,OAAOA,CAAC;IAAEC,IAAI;IAAEC;EAAI,CAA6B,EAAEC,IAAY,EAAEC,KAAa,EAAEC,UAAkB;IAAA;IAAAV,aAAA,GAAAI,CAAA;IAAAJ,aAAA,GAAAC,CAAA;IACjG,OAAO,IAAIU,OAAO,CAAU,CAACC,OAAO,EAAEC,MAAM,KAAI;MAAA;MAAAb,aAAA,GAAAI,CAAA;MAC/C,MAAMU,MAAM;MAAA;MAAA,CAAAd,aAAA,GAAAC,CAAA,OAAGL,GAAG,CAACmB,gBAAgB,CAAC;QAAET,IAAI,EAAEA,IAAI;QAAEC,IAAI,EAAEA;MAAI,CAAE,EAAE,MAAK;QAAA;QAAAP,aAAA,GAAAI,CAAA;QAAAJ,aAAA,GAAAC,CAAA;QACpEa,MAAM,CAACE,cAAc,CAAC,OAAO,EAAEH,MAAM,CAAC;QAAC;QAAAb,aAAA,GAAAC,CAAA;QAEvCa,MAAM,CAACG,KAAK,CAACnB,oBAAoB,CAACU,IAAI,EAAEC,KAAK,EAAEC,UAAU,CAAC,CAAC;QAAC;QAAAV,aAAA,GAAAC,CAAA;QAE5D,MAAMiB,MAAM,GAAIC,IAAY,IAAI;UAAA;UAAAnB,aAAA,GAAAI,CAAA;UAC/B,MAAMgB,OAAO;UAAA;UAAA,CAAApB,aAAA,GAAAC,CAAA,OAAGkB,IAAI,CAACE,QAAQ,EAAE;UAAC;UAAArB,aAAA,GAAAC,CAAA;UAChC,IAAImB,OAAO,CAACE,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YAAA;YAAAtB,aAAA,GAAAuB,CAAA;YAAAvB,aAAA,GAAAC,CAAA;YACrC;YACAa,MAAM,CAACU,GAAG,CAAC,MAAM,EAAEN,MAAM,CAAC;YAAC;YAAAlB,aAAA,GAAAC,CAAA;YAC3BW,OAAO,CAAC,IAAIf,UAAU,CAACiB,MAAM,EAAEJ,UAAU,CAAC,CAAC;UAC5C,CAAC;UAAA;UAAA;YAAAV,aAAA,GAAAuB,CAAA;UAAA;QACF,CAAC;QAAC;QAAAvB,aAAA,GAAAC,CAAA;QACFa,MAAM,CAACW,EAAE,CAAC,MAAM,EAAEP,MAAM,CAAC;MAC1B,CAAC,CAAC;MACF;MAAA;MAAAlB,aAAA,GAAAC,CAAA;MACAa,MAAM,CAACY,UAAU,CAAC,IAAI,CAAC;MAAC;MAAA1B,aAAA,GAAAC,CAAA;MACxBa,MAAM,CAACa,IAAI,CAAC,OAAO,EAAEd,MAAM,CAAC;IAC7B,CAAC,CAAC;EACH;CACA,C,CAAA","ignoreList":[]}