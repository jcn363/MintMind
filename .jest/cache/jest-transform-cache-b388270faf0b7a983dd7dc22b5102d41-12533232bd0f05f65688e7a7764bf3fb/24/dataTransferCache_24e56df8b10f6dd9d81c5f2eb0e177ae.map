{"version":3,"names":["coalesce","VSBuffer","DataTransferFileCache","requestIdPool","cov_138cs3byq","s","dataTransferFiles","Map","add","dataTransfer","f","requestId","set","Array","from","item","asFile","id","dispose","delete","resolveFileData","dataItemId","files","get","b","Error","file","find","wrap","data","clear"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/common/shared/dataTransferCache.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { IDataTransferFile, IReadonlyVSDataTransfer } from '../../../../base/common/dataTransfer.js';\n\nexport class DataTransferFileCache {\n\n\tprivate requestIdPool = 0;\n\tprivate readonly dataTransferFiles = new Map</* requestId */ number, ReadonlyArray<IDataTransferFile>>();\n\n\tpublic add(dataTransfer: IReadonlyVSDataTransfer): { id: number; dispose: () => void } {\n\t\tconst requestId = this.requestIdPool++;\n\t\tthis.dataTransferFiles.set(requestId, coalesce(Array.from(dataTransfer, ([, item]) => item.asFile())));\n\t\treturn {\n\t\t\tid: requestId,\n\t\t\tdispose: () => {\n\t\t\t\tthis.dataTransferFiles.delete(requestId);\n\t\t\t}\n\t\t};\n\t}\n\n\tasync resolveFileData(requestId: number, dataItemId: string): Promise<VSBuffer> {\n\t\tconst files = this.dataTransferFiles.get(requestId);\n\t\tif (!files) {\n\t\t\tthrow new Error('No data transfer found');\n\t\t}\n\n\t\tconst file = files.find(file => file.id === dataItemId);\n\t\tif (!file) {\n\t\t\tthrow new Error('No matching file found in data transfer');\n\t\t}\n\n\t\treturn VSBuffer.wrap(await file.data());\n\t}\n\n\tdispose() {\n\t\tthis.dataTransferFiles.clear();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}