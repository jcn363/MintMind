{"version":3,"names":["cov_2mku5ocddp","actualCoverage","coalesce","AsyncIterableProducer","ContentHoverComputer","_editor","_participants","constructor","f","s","_getLineDecorations","editor","anchor","b","type","supportsMarkerHover","model","getModel","lineNumber","range","startLineNumber","getLineCount","maxColumn","getLineMaxColumn","getLineDecorations","filter","d","options","isWholeLine","startColumn","endColumn","endLineNumber","showIfCollapsed","computeAsync","token","hasModel","EMPTY","lineDecorations","merge","map","participant","source","computeSync","result","concat"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/hover/browser/contentHoverComputer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IActiveCodeEditor, ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { IModelDecoration } from '../../../common/model.js';\nimport { HoverStartSource, IHoverComputer } from './hoverOperation.js';\nimport { HoverAnchor, HoverAnchorType, IEditorHoverParticipant, IHoverPart } from './hoverTypes.js';\nimport { AsyncIterableProducer } from '../../../../base/common/async.js';\n\nexport interface ContentHoverComputerOptions {\n\tshouldFocus: boolean;\n\tanchor: HoverAnchor;\n\tsource: HoverStartSource;\n\tinsistOnKeepingHoverVisible: boolean;\n}\n\nexport class ContentHoverComputer implements IHoverComputer<ContentHoverComputerOptions, IHoverPart> {\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _participants: readonly IEditorHoverParticipant[]\n\t) {\n\t}\n\n\tprivate static _getLineDecorations(editor: IActiveCodeEditor, anchor: HoverAnchor): IModelDecoration[] {\n\t\tif (anchor.type !== HoverAnchorType.Range && !anchor.supportsMarkerHover) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst model = editor.getModel();\n\t\tconst lineNumber = anchor.range.startLineNumber;\n\n\t\tif (lineNumber > model.getLineCount()) {\n\t\t\t// invalid line\n\t\t\treturn [];\n\t\t}\n\n\t\tconst maxColumn = model.getLineMaxColumn(lineNumber);\n\n\t\treturn editor.getLineDecorations(lineNumber).filter((d) => {\n\t\t\tif (d.options.isWholeLine) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\n\t\t\tconst endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\n\n\t\t\tif (d.options.showIfCollapsed) {\n\t\t\t\t// Relax check around `showIfCollapsed` decorations to also include +/- 1 character\n\t\t\t\tif (startColumn > anchor.range.startColumn + 1 || anchor.range.endColumn - 1 > endColumn) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (startColumn > anchor.range.startColumn || anchor.range.endColumn > endColumn) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\tpublic computeAsync(options: ContentHoverComputerOptions, token: CancellationToken): AsyncIterableProducer<IHoverPart> {\n\t\tconst anchor = options.anchor;\n\n\t\tif (!this._editor.hasModel() || !anchor) {\n\t\t\treturn AsyncIterableProducer.EMPTY;\n\t\t}\n\n\t\tconst lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n\n\t\treturn AsyncIterableProducer.merge(\n\t\t\tthis._participants.map((participant) => {\n\t\t\t\tif (!participant.computeAsync) {\n\t\t\t\t\treturn AsyncIterableProducer.EMPTY;\n\t\t\t\t}\n\t\t\t\treturn participant.computeAsync(anchor, lineDecorations, options.source, token);\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic computeSync(options: ContentHoverComputerOptions): IHoverPart[] {\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst anchor = options.anchor;\n\t\tconst lineDecorations = ContentHoverComputer._getLineDecorations(this._editor, anchor);\n\n\t\tlet result: IHoverPart[] = [];\n\t\tfor (const participant of this._participants) {\n\t\t\tresult = result.concat(participant.computeSync(anchor, lineDecorations, options.source));\n\t\t}\n\n\t\treturn coalesce(result);\n\t}\n}\n\n"],"mappings":"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","ignoreList":[]}