{"version":3,"names":["cov_hkb2sfotm","actualCoverage","VSBuffer","joinPath","localize","localize2","Action2","registerAction2","IFileDialogService","IFileService","CHAT_CATEGORY","IChatWidgetService","ChatEditorInput","ChatContextKeys","isExportableSessionData","IChatService","IEditorService","defaultFileName","s","filters","name","extensions","registerChatExportActions","f","ExportChatAction","constructor","id","category","title","precondition","enabled","f1","run","accessor","outputPath","widgetService","get","fileDialogService","fileService","chatService","widget","lastFocusedWidget","b","viewModel","defaultUri","defaultFilePath","result","showSaveDialog","model","getSession","sessionResource","content","fromString","JSON","stringify","toExport","undefined","writeFile","ImportChatAction","args","editorService","showOpenDialog","canSelectFiles","readFile","data","parse","value","toString","Error","options","target","pinned","openEditor","resource","getNewEditorUri","err"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/actions/chatImportExport.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { joinPath } from '../../../../../base/common/resources.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IFileDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { CHAT_CATEGORY } from './chatActions.js';\nimport { IChatWidgetService } from '../chat.js';\nimport { IChatEditorOptions } from '../chatEditor.js';\nimport { ChatEditorInput } from '../chatEditorInput.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { isExportableSessionData } from '../../common/chatModel.js';\nimport { IChatService } from '../../common/chatService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { URI } from '../../../../../base/common/uri.js';\n\nconst defaultFileName = 'chat.json';\nconst filters = [{ name: localize('chat.file.label', \"Chat Session\"), extensions: ['json'] }];\n\nexport function registerChatExportActions() {\n\tregisterAction2(class ExportChatAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.export',\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ttitle: localize2('chat.export.label', \"Export Chat...\"),\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t\tf1: true,\n\t\t\t});\n\t\t}\n\t\tasync run(accessor: ServicesAccessor, outputPath?: URI) {\n\t\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\t\tconst fileDialogService = accessor.get(IFileDialogService);\n\t\t\tconst fileService = accessor.get(IFileService);\n\t\t\tconst chatService = accessor.get(IChatService);\n\n\t\t\tconst widget = widgetService.lastFocusedWidget;\n\t\t\tif (!widget || !widget.viewModel) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!outputPath) {\n\t\t\t\tconst defaultUri = joinPath(await fileDialogService.defaultFilePath(), defaultFileName);\n\t\t\t\tconst result = await fileDialogService.showSaveDialog({\n\t\t\t\t\tdefaultUri,\n\t\t\t\t\tfilters\n\t\t\t\t});\n\t\t\t\tif (!result) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toutputPath = result;\n\t\t\t}\n\n\t\t\tconst model = chatService.getSession(widget.viewModel.sessionResource);\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Using toJSON on the model\n\t\t\tconst content = VSBuffer.fromString(JSON.stringify(model.toExport(), undefined, 2));\n\t\t\tawait fileService.writeFile(outputPath, content);\n\t\t}\n\t});\n\n\tregisterAction2(class ImportChatAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.import',\n\t\t\t\ttitle: localize2('chat.import.label', \"Import Chat...\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\t\tf1: true,\n\t\t\t});\n\t\t}\n\t\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\t\tconst fileDialogService = accessor.get(IFileDialogService);\n\t\t\tconst fileService = accessor.get(IFileService);\n\t\t\tconst editorService = accessor.get(IEditorService);\n\n\t\t\tconst defaultUri = joinPath(await fileDialogService.defaultFilePath(), defaultFileName);\n\t\t\tconst result = await fileDialogService.showOpenDialog({\n\t\t\t\tdefaultUri,\n\t\t\t\tcanSelectFiles: true,\n\t\t\t\tfilters\n\t\t\t});\n\t\t\tif (!result) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst content = await fileService.readFile(result[0]);\n\t\t\ttry {\n\t\t\t\tconst data = JSON.parse(content.value.toString());\n\t\t\t\tif (!isExportableSessionData(data)) {\n\t\t\t\t\tthrow new Error('Invalid chat session data');\n\t\t\t\t}\n\n\t\t\t\tconst options: IChatEditorOptions = { target: { data }, pinned: true };\n\t\t\t\tawait editorService.openEditor({ resource: ChatEditorInput.getNewEditorUri(), options });\n\t\t\t} catch (err) {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t});\n}\n"],"mappings":"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","ignoreList":[]}