{"version":3,"names":["computeLevenshteinDistance","matchCellBasedOnSimilarties","modifiedCells","originalCells","cov_28zmivnze6","f","cache","s","modifiedToOriginal","Map","originalToModified","results","mappedOriginalCellToModifiedCell","mappedModifiedIndexes","Set","originalIndexWithMostEdits","canOriginalIndexBeMappedToModifiedIndex","originalIndex","value","has","b","existingEdits","get","dist","Number","MAX_SAFE_INTEGER","editCount","trackMappedIndexes","modifiedIndex","set","add","i","length","modifiedCell","index","percentage","computeClosestCell","cell","push","modified","original","possibleOriginal","forEach","result","previousMatchedCell","slice","reverse","find","r","undefined","previousMatchedOriginalIndex","previousMatchedModifiedIndex","matchedCell","unavailableIndexes","nextMatchedModifiedIndex","findIndex","item","idx","nextMatchedOriginalIndex","_","remainingModifiedItems","remainingOriginalItems","cellKind","originalValue","matchesForThisOriginalIndex","betterMatch","Array","from","nextOriginalCell","nextOriginalCellValue","getValue","includes","cellIndex","arr","ignoreEmptyCells","min_edits","Infinity","min_index","internalId","internalMetadata","internalIdIndex","str","cacheEntry","computeNumberOfEdits","originalCacheEntry"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/notebook/common/services/notebookCellMatching.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { computeLevenshteinDistance } from '../../../../../base/common/diff/diff.js';\nimport { CellKind } from '../notebookCommon.js';\n\n\ntype EditCount = number;\ntype OriginalIndex = number;\ntype ModifiedIndex = number;\ntype CellEditCountCache = {\n\tmodifiedToOriginal: Map<ModifiedIndex, Map<OriginalIndex, { editCount: EditCount }>>;\n\toriginalToModified: Map<OriginalIndex, Map<ModifiedIndex, { editCount: EditCount }>>;\n};\n\ntype ICell = {\n\tinternalMetadata?: {\n\t\tinternalId?: string;\n\t};\n\tgetValue(): string;\n\tgetLinesContent(): string[];\n\tcellKind: CellKind;\n};\n\n/**\n * Given a set of modified cells and original cells, this function will attempt to match the modified cells with the original cells.\n * E.g. Assume you have (original on left and modified on right):\n * =================\n * Cell A  | Cell a\n * Cell B  | Cell b\n * Cell C  | Cell d\n * Cell D  | Cell e\n * =================\n * Here we know that `Cell C` has been removed and `Cell e` has been added.\n * The mapping from modified to original will be as follows:\n * Cell a => Cell A\n * Cell b => Cell B\n * Cell d => Cell D\n * Cell e => <Does not match anything in original, hence a new Cell>\n * Cell C in original was not matched, hence it was deleted.\n *\n * Thus the return value is as follows:\n * [\n * { modified: 0, original: 0 },\n * { modified: 1, original: 1 },\n * { modified: 2, original: 3 },\n * { modified: 3, original: -1 },\n * ]\n * @returns\n */\nexport function matchCellBasedOnSimilarties(modifiedCells: ICell[], originalCells: ICell[]): { modified: number; original: number; percentage: number }[] {\n\tconst cache: CellEditCountCache = {\n\t\tmodifiedToOriginal: new Map<ModifiedIndex, Map<OriginalIndex, { editCount: EditCount }>>(),\n\t\toriginalToModified: new Map<OriginalIndex, Map<ModifiedIndex, { editCount: EditCount }>>(),\n\t};\n\tconst results: { modified: number; original: number; dist: number; percentage: number; possibleOriginal: number }[] = [];\n\tconst mappedOriginalCellToModifiedCell = new Map<number, number>();\n\tconst mappedModifiedIndexes = new Set<number>();\n\tconst originalIndexWithMostEdits = new Map<number, { dist: number; modifiedIndex: number }>();\n\tconst canOriginalIndexBeMappedToModifiedIndex = (originalIndex: number, value: { editCount: EditCount }) => {\n\t\tif (mappedOriginalCellToModifiedCell.has(originalIndex)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst existingEdits = originalIndexWithMostEdits.get(originalIndex)?.dist ?? Number.MAX_SAFE_INTEGER;\n\t\treturn value.editCount < existingEdits;\n\t};\n\tconst trackMappedIndexes = (modifiedIndex: number, originalIndex: number) => {\n\t\tmappedOriginalCellToModifiedCell.set(originalIndex, modifiedIndex);\n\t\tmappedModifiedIndexes.add(modifiedIndex);\n\t};\n\n\tfor (let i = 0; i < modifiedCells.length; i++) {\n\t\tconst modifiedCell = modifiedCells[i];\n\t\tconst { index, editCount: dist, percentage } = computeClosestCell({ cell: modifiedCell, index: i }, originalCells, true, cache, canOriginalIndexBeMappedToModifiedIndex);\n\t\tif (index >= 0 && dist === 0) {\n\t\t\ttrackMappedIndexes(i, index);\n\t\t\tresults.push({ modified: i, original: index, dist, percentage, possibleOriginal: index });\n\t\t} else {\n\t\t\toriginalIndexWithMostEdits.set(index, { dist: dist, modifiedIndex: i });\n\t\t\tresults.push({ modified: i, original: -1, dist: dist, percentage, possibleOriginal: index });\n\t\t}\n\t}\n\n\tresults.forEach((result, i) => {\n\t\tif (result.original >= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * I.e. Assume you have the following\n\t\t * =================\n\t\t * A a (this has ben matched)\n\t\t * B b <not matched>\n\t\t * C c <not matched>\n\t\t * D d (these two have been matched)\n\t\t * e e\n\t\t * f f\n\t\t * =================\n\t\t * Just match A => a, B => b, C => c\n\t\t */\n\t\t// Find the next cell that has been matched.\n\t\tconst previousMatchedCell = i > 0 ? results.slice(0, i).reverse().find(r => r.original >= 0) : undefined;\n\t\tconst previousMatchedOriginalIndex = previousMatchedCell?.original ?? -1;\n\t\tconst previousMatchedModifiedIndex = previousMatchedCell?.modified ?? -1;\n\t\tconst matchedCell = results.slice(i + 1).find(r => r.original >= 0);\n\t\tconst unavailableIndexes = new Set<number>();\n\t\tconst nextMatchedModifiedIndex = results.findIndex((item, idx) => idx > i && item.original >= 0);\n\t\tconst nextMatchedOriginalIndex = nextMatchedModifiedIndex >= 0 ? results[nextMatchedModifiedIndex].original : -1;\n\t\t// Find the available indexes that we can match with.\n\t\t// We are only interested in b and c (anything after d is of no use).\n\t\toriginalCells.forEach((_, i) => {\n\t\t\tif (mappedOriginalCellToModifiedCell.has(i)) {\n\t\t\t\tunavailableIndexes.add(i);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (matchedCell && i >= matchedCell.original) {\n\t\t\t\tunavailableIndexes.add(i);\n\t\t\t}\n\t\t\tif (nextMatchedOriginalIndex >= 0 && i > nextMatchedOriginalIndex) {\n\t\t\t\tunavailableIndexes.add(i);\n\t\t\t}\n\t\t});\n\n\n\t\tconst modifiedCell = modifiedCells[i];\n\t\t/**\n\t\t * I.e. Assume you have the following\n\t\t * =================\n\t\t * A a (this has ben matched)\n\t\t * B b <not matched because the % of change is too high, but we do have a probable match>\n\t\t * C c <not matched>\n\t\t * D d (these two have been matched)\n\t\t * e e\n\t\t * f f\n\t\t * =================\n\t\t * Given that we have a probable match for B => b, we can match it.\n\t\t */\n\t\tif (result.original === -1 && result.possibleOriginal >= 0 && !unavailableIndexes.has(result.possibleOriginal) && canOriginalIndexBeMappedToModifiedIndex(result.possibleOriginal, { editCount: result.dist })) {\n\t\t\ttrackMappedIndexes(i, result.possibleOriginal);\n\t\t\tresult.original = result.possibleOriginal;\n\t\t\treturn;\n\t\t}\n\n\n\t\t/**\n\t\t * I.e. Assume you have the following\n\t\t * =================\n\t\t * A a (this has ben matched)\n\t\t * B b <not matched>\n\t\t * C c <not matched>\n\t\t * D d (these two have been matched)\n\t\t * =================\n\t\t * Its possible that B matches better with c and C matches better with b.\n\t\t * However given the fact that we have matched A => a and D => d.\n\t\t * & if the indexes are an exact match.\n\t\t * I.e. index of D in Modified === index of d in Original, and index of A in Modified === index of a in Original.\n\t\t * Then this means there are absolutely no modifications.\n\t\t * Hence we can just assign the indexes as is.\n\t\t *\n\t\t * NOTE: For this, we must ensure we have exactly the same number of items on either side.\n\t\t * I.e. we have B, C remaining in Modified, and b, c remaining in Original.\n\t\t * Thats 2 Modified items === 2 Original Items.\n\t\t * If its not the same, then this means something has been deleted/inserted, and we cannot blindly map the indexes.\n\t\t*/\n\t\tif (previousMatchedOriginalIndex > 0 && previousMatchedModifiedIndex > 0 && previousMatchedOriginalIndex === previousMatchedModifiedIndex) {\n\t\t\tif ((nextMatchedModifiedIndex >= 0 ? nextMatchedModifiedIndex : modifiedCells.length - 1) === (nextMatchedOriginalIndex >= 0 ? nextMatchedOriginalIndex : originalCells.length - 1) && !unavailableIndexes.has(i) && i < originalCells.length) {\n\t\t\t\tconst remainingModifiedItems = (nextMatchedModifiedIndex >= 0 ? nextMatchedModifiedIndex : modifiedCells.length) - previousMatchedModifiedIndex;\n\t\t\t\tconst remainingOriginalItems = (nextMatchedOriginalIndex >= 0 ? nextMatchedOriginalIndex : originalCells.length) - previousMatchedOriginalIndex;\n\t\t\t\tif (remainingModifiedItems === remainingOriginalItems && modifiedCell.cellKind === originalCells[i].cellKind) {\n\t\t\t\t\ttrackMappedIndexes(i, i);\n\t\t\t\t\tresult.original = i;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * I.e. Assume you have the following\n\t\t * =================\n\t\t * A a (this has ben matched)\n\t\t * B b <not matched>\n\t\t * C c <not matched>\n\t\t * D d (these two have been matched)\n\t\t * e e\n\t\t * f f\n\t\t * =================\n\t\t * We can now try to match B with b and c and figure out which is best.\n\t\t * RULE 1. Its possible that B will match best with c, howevber C matches better with c, meaning we should match B with b.\n\t\t * To do this, we need to see if c has a better match with something else.\n\t\t*/\n\t\t// RULE 1\n\t\t// Try to find the next best match, but exclucde items that have a better match.\n\t\tconst { index, percentage } = computeClosestCell({ cell: modifiedCell, index: i }, originalCells, false, cache, (originalIndex: number, originalValue: { editCount: EditCount }) => {\n\t\t\tif (unavailableIndexes.has(originalIndex)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (nextMatchedModifiedIndex > 0 || previousMatchedOriginalIndex > 0) {\n\t\t\t\t// See if we have a beter match for this.\n\t\t\t\tconst matchesForThisOriginalIndex = cache.originalToModified.get(originalIndex);\n\t\t\t\tif (matchesForThisOriginalIndex && previousMatchedOriginalIndex < originalIndex) {\n\t\t\t\t\tconst betterMatch = Array.from(matchesForThisOriginalIndex).find(([modifiedIndex, value]) => {\n\t\t\t\t\t\tif (modifiedIndex === i) {\n\t\t\t\t\t\t\t// This is the same modifeid entry.\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (modifiedIndex >= nextMatchedModifiedIndex) {\n\t\t\t\t\t\t\t// We're only interested in matches that are before the next matched index.\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (mappedModifiedIndexes.has(i)) {\n\t\t\t\t\t\t\t// This has already been matched.\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn value.editCount < originalValue.editCount;\n\t\t\t\t\t});\n\t\t\t\t\tif (betterMatch) {\n\t\t\t\t\t\t// We do have a better match for this, hence do not use this.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !unavailableIndexes.has(originalIndex);\n\t\t});\n\n\t\t/**\n\t\t * I.e. Assume you have the following\n\t\t * =================\n\t\t * A a (this has ben matched)\n\t\t * B bbbbbbbbbbbbbb <not matched>\n\t\t * C cccccccccccccc <not matched>\n\t\t * D d (these two have been matched)\n\t\t * e e\n\t\t * f f\n\t\t * =================\n\t\t * RULE 1 . Now when attempting to match `bbbbbbbbbbbb` with B, the number of edits is very high and the percentage is also very high.\n\t\t * Basically majority of the text needs to be changed.\n\t\t * However if the indexes line up perfectly well, and this is the best match, then use it.\n\t\t*\n\t\t * Similarly its possible we're trying to match b with `BBBBBBBBBBBB` and the number of edits is very high, but the indexes line up perfectly well.\n\t\t*\n\t\t* RULE 2. However it is also possible that there's a better match with another cell\n\t\t* Assume we have\n\t\t * =================\n\t\t * AAAA     a (this has been matched)\n\t\t * bbbbbbbb b <not matched>\n\t\t * bbbb     c <not matched>\n\t\t * dddd     d (these two have been matched)\n\t\t * =================\n\t\t * In this case if we use the algorithm of (1) above, we'll end up matching bbbb with b, and bbbbbbbb with c.\n\t\t * But we're not really sure if this is the best match.\n\t\t * In such cases try to match with the same cell index.\n\t\t *\n\t\t*/\n\t\t// RULE 1 (got a match and the indexes line up perfectly well, use it regardless of the number of edits).\n\t\tif (index >= 0 && i > 0 && results[i - 1].original === index - 1) {\n\t\t\ttrackMappedIndexes(i, index);\n\t\t\tresults[i].original = index;\n\t\t\treturn;\n\t\t}\n\n\t\t// RULE 2\n\t\t// Here we know that `AAAA => a`\n\t\t// Check if the previous cell has been matched.\n\t\t// And if the next modified and next original cells are a match.\n\t\tconst nextOriginalCell = (i > 0 && originalCells.length > results[i - 1].original) ? results[i - 1].original + 1 : -1;\n\t\tconst nextOriginalCellValue = i > 0 && nextOriginalCell >= 0 && nextOriginalCell < originalCells.length ? originalCells[nextOriginalCell].getValue() : undefined;\n\t\tif (index >= 0 && i > 0 && typeof nextOriginalCellValue === 'string' && !mappedOriginalCellToModifiedCell.has(nextOriginalCell)) {\n\t\t\tif (modifiedCell.getValue().includes(nextOriginalCellValue) || nextOriginalCellValue.includes(modifiedCell.getValue())) {\n\t\t\t\ttrackMappedIndexes(i, nextOriginalCell);\n\t\t\t\tresults[i].original = nextOriginalCell;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (percentage < 90 || (i === 0 && results.length === 1)) {\n\t\t\ttrackMappedIndexes(i, index);\n\t\t\tresults[i].original = index;\n\t\t\treturn;\n\t\t}\n\t});\n\n\treturn results;\n}\n\nfunction computeClosestCell({ cell, index: cellIndex }: { cell: ICell; index: number }, arr: readonly ICell[], ignoreEmptyCells: boolean, cache: CellEditCountCache, canOriginalIndexBeMappedToModifiedIndex: (originalIndex: number, value: { editCount: EditCount }) => boolean): { index: number; editCount: number; percentage: number } {\n\tlet min_edits = Infinity;\n\tlet min_index = -1;\n\n\t// Always give preference to internal Cell Id if found.\n\tconst internalId = cell.internalMetadata?.internalId;\n\tif (internalId) {\n\t\tconst internalIdIndex = arr.findIndex(cell => cell.internalMetadata?.internalId === internalId);\n\t\tif (internalIdIndex >= 0) {\n\t\t\treturn { index: internalIdIndex, editCount: 0, percentage: Number.MAX_SAFE_INTEGER };\n\t\t}\n\t}\n\n\tfor (let i = 0; i < arr.length; i++) {\n\t\t// Skip cells that are not of the same kind.\n\t\tif (arr[i].cellKind !== cell.cellKind) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst str = arr[i].getValue();\n\t\tconst cacheEntry = cache.modifiedToOriginal.get(cellIndex) ?? new Map<OriginalIndex, { editCount: EditCount }>();\n\t\tconst value = cacheEntry.get(i) ?? { editCount: computeNumberOfEdits(cell, arr[i]), };\n\t\tcacheEntry.set(i, value);\n\t\tcache.modifiedToOriginal.set(cellIndex, cacheEntry);\n\n\t\tconst originalCacheEntry = cache.originalToModified.get(i) ?? new Map<ModifiedIndex, { editCount: EditCount }>();\n\t\toriginalCacheEntry.set(cellIndex, value);\n\t\tcache.originalToModified.set(i, originalCacheEntry);\n\n\t\tif (!canOriginalIndexBeMappedToModifiedIndex(i, value)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (str.length === 0 && ignoreEmptyCells) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (str === cell.getValue() && cell.getValue().length > 0) {\n\t\t\treturn { index: i, editCount: 0, percentage: 0 };\n\t\t}\n\n\t\tif (value.editCount < min_edits) {\n\t\t\tmin_edits = value.editCount;\n\t\t\tmin_index = i;\n\t\t}\n\t}\n\n\tif (min_index === -1) {\n\t\treturn { index: -1, editCount: Number.MAX_SAFE_INTEGER, percentage: Number.MAX_SAFE_INTEGER };\n\t}\n\tconst percentage = !cell.getValue().length && !arr[min_index].getValue().length ? 0 : (cell.getValue().length ? (min_edits * 100 / cell.getValue().length) : Number.MAX_SAFE_INTEGER);\n\treturn { index: min_index, editCount: min_edits, percentage };\n}\n\nfunction computeNumberOfEdits(modified: ICell, original: ICell) {\n\tif (modified.getValue() === original.getValue()) {\n\t\treturn 0;\n\t}\n\n\treturn computeLevenshteinDistance(modified.getValue(), original.getValue());\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}