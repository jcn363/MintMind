{"version":3,"names":["cov_29lemtqtqm","actualCoverage","Emitter","getCompressedContent","Disposable","toDisposable","platform","Extensions","s","JSONContribution","normalizeId","id","f","b","length","charAt","substring","JSONContributionRegistry","schemasById","schemaAssociations","_onDidChangeSchema","_register","onDidChangeSchema","event","_onDidChangeSchemaAssociations","onDidChangeSchemaAssociations","registerSchema","uri","unresolvedSchemaContent","store","normalizedUri","fire","add","registerSchemaAssociation","glob","includes","push","associations","index","indexOf","splice","notifySchemaChanged","getSchemaContributions","schemas","getSchemaContent","schema","undefined","hasSchemaContent","getSchemaAssociations","jsonContributionRegistry","Registry"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/jsonschemas/common/jsonContributionRegistry.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { getCompressedContent, IJSONSchema } from '../../../base/common/jsonSchema.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../registry/common/platform.js';\n\nexport const Extensions = {\n\tJSONContribution: 'base.contributions.json'\n};\n\nexport interface ISchemaContributions {\n\tschemas: { [id: string]: IJSONSchema };\n}\n\nexport interface IJSONContributionRegistry {\n\n\treadonly onDidChangeSchema: Event<string>;\n\treadonly onDidChangeSchemaAssociations: Event<void>;\n\n\t/**\n\t * Register a schema to the registry.\n\t */\n\tregisterSchema(uri: string, unresolvedSchemaContent: IJSONSchema, store?: DisposableStore): void;\n\n\tregisterSchemaAssociation(uri: string, glob: string): IDisposable;\n\n\t/**\n\t * Notifies all listeners that the content of the given schema has changed.\n\t * @param uri The id of the schema\n\t */\n\tnotifySchemaChanged(uri: string): void;\n\n\t/**\n\t * Get all schemas\n\t */\n\tgetSchemaContributions(): ISchemaContributions;\n\n\tgetSchemaAssociations(): { [uri: string]: string[] };\n\n\t/**\n\t * Gets the (compressed) content of the schema with the given schema ID (if any)\n\t * @param uri The id of the schema\n\t */\n\tgetSchemaContent(uri: string): string | undefined;\n\n\t/**\n\t * Returns true if there's a schema that matches the given schema ID\n\t * @param uri The id of the schema\n\t */\n\thasSchemaContent(uri: string): boolean;\n}\n\n\n\nfunction normalizeId(id: string) {\n\tif (id.length > 0 && id.charAt(id.length - 1) === '#') {\n\t\treturn id.substring(0, id.length - 1);\n\t}\n\treturn id;\n}\n\n\n\nclass JSONContributionRegistry extends Disposable implements IJSONContributionRegistry {\n\n\tprivate readonly schemasById: { [id: string]: IJSONSchema } = {};\n\tprivate readonly schemaAssociations: { [uri: string]: string[] } = {};\n\n\tprivate readonly _onDidChangeSchema = this._register(new Emitter<string>());\n\treadonly onDidChangeSchema: Event<string> = this._onDidChangeSchema.event;\n\n\tprivate readonly _onDidChangeSchemaAssociations = this._register(new Emitter<void>());\n\treadonly onDidChangeSchemaAssociations: Event<void> = this._onDidChangeSchemaAssociations.event;\n\n\tpublic registerSchema(uri: string, unresolvedSchemaContent: IJSONSchema, store?: DisposableStore): void {\n\t\tconst normalizedUri = normalizeId(uri);\n\t\tthis.schemasById[normalizedUri] = unresolvedSchemaContent;\n\t\tthis._onDidChangeSchema.fire(uri);\n\n\t\tif (store) {\n\t\t\tstore.add(toDisposable(() => {\n\t\t\t\tdelete this.schemasById[normalizedUri];\n\t\t\t\tthis._onDidChangeSchema.fire(uri);\n\t\t\t}));\n\t\t}\n\t}\n\n\tpublic registerSchemaAssociation(uri: string, glob: string): IDisposable {\n\t\tconst normalizedUri = normalizeId(uri);\n\t\tif (!this.schemaAssociations[normalizedUri]) {\n\t\t\tthis.schemaAssociations[normalizedUri] = [];\n\t\t}\n\t\tif (!this.schemaAssociations[normalizedUri].includes(glob)) {\n\t\t\tthis.schemaAssociations[normalizedUri].push(glob);\n\t\t\tthis._onDidChangeSchemaAssociations.fire();\n\t\t}\n\n\t\treturn toDisposable(() => {\n\t\t\tconst associations = this.schemaAssociations[normalizedUri];\n\t\t\tif (associations) {\n\t\t\t\tconst index = associations.indexOf(glob);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tassociations.splice(index, 1);\n\t\t\t\t\tif (associations.length === 0) {\n\t\t\t\t\t\tdelete this.schemaAssociations[normalizedUri];\n\t\t\t\t\t}\n\t\t\t\t\tthis._onDidChangeSchemaAssociations.fire();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic notifySchemaChanged(uri: string): void {\n\t\tthis._onDidChangeSchema.fire(uri);\n\t}\n\n\tpublic getSchemaContributions(): ISchemaContributions {\n\t\treturn {\n\t\t\tschemas: this.schemasById,\n\t\t};\n\t}\n\n\tpublic getSchemaContent(uri: string): string | undefined {\n\t\tconst schema = this.schemasById[uri];\n\t\treturn schema ? getCompressedContent(schema) : undefined;\n\t}\n\n\tpublic hasSchemaContent(uri: string): boolean {\n\t\treturn !!this.schemasById[uri];\n\t}\n\n\tpublic getSchemaAssociations(): { [uri: string]: string[] } {\n\t\treturn this.schemaAssociations;\n\t}\n\n}\n\nconst jsonContributionRegistry = new JSONContributionRegistry();\nplatform.Registry.add(Extensions.JSONContribution, jsonContributionRegistry);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA8DQ;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AA9DR;;;;AAKA,SAASE,OAAO,QAAe,+BAA+B;AAC9D,SAASC,oBAAoB,QAAqB,oCAAoC;AACtF,SAASC,UAAU,EAAgCC,YAAY,QAAQ,mCAAmC;AAC1G,OAAO,KAAKC,QAAQ,MAAM,mCAAmC;AAE7D,OAAO,MAAMC,UAAU;AAAA;AAAA,CAAAP,cAAA,GAAAQ,CAAA,OAAG;EACzBC,gBAAgB,EAAE;CAClB;AA8CD,SAASC,WAAWA,CAACC,EAAU;EAAA;EAAAX,cAAA,GAAAY,CAAA;EAAAZ,cAAA,GAAAQ,CAAA;EAC9B;EAAI;EAAA,CAAAR,cAAA,GAAAa,CAAA,UAAAF,EAAE,CAACG,MAAM,GAAG,CAAC;EAAA;EAAA,CAAAd,cAAA,GAAAa,CAAA,UAAIF,EAAE,CAACI,MAAM,CAACJ,EAAE,CAACG,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,GAAE;IAAA;IAAAd,cAAA,GAAAa,CAAA;IAAAb,cAAA,GAAAQ,CAAA;IACtD,OAAOG,EAAE,CAACK,SAAS,CAAC,CAAC,EAAEL,EAAE,CAACG,MAAM,GAAG,CAAC,CAAC;EACtC,CAAC;EAAA;EAAA;IAAAd,cAAA,GAAAa,CAAA;EAAA;EAAAb,cAAA,GAAAQ,CAAA;EACD,OAAOG,EAAE;AACV;AAIA,MAAMM,wBAAyB,SAAQb,UAAU;EAE/Bc,WAAW;EAAA;EAAA,CAAAlB,cAAA,GAAAQ,CAAA,OAAkC,EAAE;EAC/CW,kBAAkB;EAAA;EAAA,CAAAnB,cAAA,GAAAQ,CAAA,OAAgC,EAAE;EAEpDY,kBAAkB;EAAA;EAAA,CAAApB,cAAA,GAAAQ,CAAA,OAAG,IAAI,CAACa,SAAS,CAAC,IAAInB,OAAO,EAAU,CAAC;EAClEoB,iBAAiB;EAAA;EAAA,CAAAtB,cAAA,GAAAQ,CAAA,OAAkB,IAAI,CAACY,kBAAkB,CAACG,KAAK;EAExDC,8BAA8B;EAAA;EAAA,CAAAxB,cAAA,GAAAQ,CAAA,OAAG,IAAI,CAACa,SAAS,CAAC,IAAInB,OAAO,EAAQ,CAAC;EAC5EuB,6BAA6B;EAAA;EAAA,CAAAzB,cAAA,GAAAQ,CAAA,OAAgB,IAAI,CAACgB,8BAA8B,CAACD,KAAK;EAExFG,cAAcA,CAACC,GAAW,EAAEC,uBAAoC,EAAEC,KAAuB;IAAA;IAAA7B,cAAA,GAAAY,CAAA;IAC/F,MAAMkB,aAAa;IAAA;IAAA,CAAA9B,cAAA,GAAAQ,CAAA,QAAGE,WAAW,CAACiB,GAAG,CAAC;IAAC;IAAA3B,cAAA,GAAAQ,CAAA;IACvC,IAAI,CAACU,WAAW,CAACY,aAAa,CAAC,GAAGF,uBAAuB;IAAC;IAAA5B,cAAA,GAAAQ,CAAA;IAC1D,IAAI,CAACY,kBAAkB,CAACW,IAAI,CAACJ,GAAG,CAAC;IAAC;IAAA3B,cAAA,GAAAQ,CAAA;IAElC,IAAIqB,KAAK,EAAE;MAAA;MAAA7B,cAAA,GAAAa,CAAA;MAAAb,cAAA,GAAAQ,CAAA;MACVqB,KAAK,CAACG,GAAG,CAAC3B,YAAY,CAAC,MAAK;QAAA;QAAAL,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAQ,CAAA;QAC3B,OAAO,IAAI,CAACU,WAAW,CAACY,aAAa,CAAC;QAAC;QAAA9B,cAAA,GAAAQ,CAAA;QACvC,IAAI,CAACY,kBAAkB,CAACW,IAAI,CAACJ,GAAG,CAAC;MAClC,CAAC,CAAC,CAAC;IACJ,CAAC;IAAA;IAAA;MAAA3B,cAAA,GAAAa,CAAA;IAAA;EACF;EAEOoB,yBAAyBA,CAACN,GAAW,EAAEO,IAAY;IAAA;IAAAlC,cAAA,GAAAY,CAAA;IACzD,MAAMkB,aAAa;IAAA;IAAA,CAAA9B,cAAA,GAAAQ,CAAA,QAAGE,WAAW,CAACiB,GAAG,CAAC;IAAC;IAAA3B,cAAA,GAAAQ,CAAA;IACvC,IAAI,CAAC,IAAI,CAACW,kBAAkB,CAACW,aAAa,CAAC,EAAE;MAAA;MAAA9B,cAAA,GAAAa,CAAA;MAAAb,cAAA,GAAAQ,CAAA;MAC5C,IAAI,CAACW,kBAAkB,CAACW,aAAa,CAAC,GAAG,EAAE;IAC5C,CAAC;IAAA;IAAA;MAAA9B,cAAA,GAAAa,CAAA;IAAA;IAAAb,cAAA,GAAAQ,CAAA;IACD,IAAI,CAAC,IAAI,CAACW,kBAAkB,CAACW,aAAa,CAAC,CAACK,QAAQ,CAACD,IAAI,CAAC,EAAE;MAAA;MAAAlC,cAAA,GAAAa,CAAA;MAAAb,cAAA,GAAAQ,CAAA;MAC3D,IAAI,CAACW,kBAAkB,CAACW,aAAa,CAAC,CAACM,IAAI,CAACF,IAAI,CAAC;MAAC;MAAAlC,cAAA,GAAAQ,CAAA;MAClD,IAAI,CAACgB,8BAA8B,CAACO,IAAI,EAAE;IAC3C,CAAC;IAAA;IAAA;MAAA/B,cAAA,GAAAa,CAAA;IAAA;IAAAb,cAAA,GAAAQ,CAAA;IAED,OAAOH,YAAY,CAAC,MAAK;MAAA;MAAAL,cAAA,GAAAY,CAAA;MACxB,MAAMyB,YAAY;MAAA;MAAA,CAAArC,cAAA,GAAAQ,CAAA,QAAG,IAAI,CAACW,kBAAkB,CAACW,aAAa,CAAC;MAAC;MAAA9B,cAAA,GAAAQ,CAAA;MAC5D,IAAI6B,YAAY,EAAE;QAAA;QAAArC,cAAA,GAAAa,CAAA;QACjB,MAAMyB,KAAK;QAAA;QAAA,CAAAtC,cAAA,GAAAQ,CAAA,QAAG6B,YAAY,CAACE,OAAO,CAACL,IAAI,CAAC;QAAC;QAAAlC,cAAA,GAAAQ,CAAA;QACzC,IAAI8B,KAAK,KAAK,CAAC,CAAC,EAAE;UAAA;UAAAtC,cAAA,GAAAa,CAAA;UAAAb,cAAA,GAAAQ,CAAA;UACjB6B,YAAY,CAACG,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;UAAC;UAAAtC,cAAA,GAAAQ,CAAA;UAC9B,IAAI6B,YAAY,CAACvB,MAAM,KAAK,CAAC,EAAE;YAAA;YAAAd,cAAA,GAAAa,CAAA;YAAAb,cAAA,GAAAQ,CAAA;YAC9B,OAAO,IAAI,CAACW,kBAAkB,CAACW,aAAa,CAAC;UAC9C,CAAC;UAAA;UAAA;YAAA9B,cAAA,GAAAa,CAAA;UAAA;UAAAb,cAAA,GAAAQ,CAAA;UACD,IAAI,CAACgB,8BAA8B,CAACO,IAAI,EAAE;QAC3C,CAAC;QAAA;QAAA;UAAA/B,cAAA,GAAAa,CAAA;QAAA;MACF,CAAC;MAAA;MAAA;QAAAb,cAAA,GAAAa,CAAA;MAAA;IACF,CAAC,CAAC;EACH;EAEO4B,mBAAmBA,CAACd,GAAW;IAAA;IAAA3B,cAAA,GAAAY,CAAA;IAAAZ,cAAA,GAAAQ,CAAA;IACrC,IAAI,CAACY,kBAAkB,CAACW,IAAI,CAACJ,GAAG,CAAC;EAClC;EAEOe,sBAAsBA,CAAA;IAAA;IAAA1C,cAAA,GAAAY,CAAA;IAAAZ,cAAA,GAAAQ,CAAA;IAC5B,OAAO;MACNmC,OAAO,EAAE,IAAI,CAACzB;KACd;EACF;EAEO0B,gBAAgBA,CAACjB,GAAW;IAAA;IAAA3B,cAAA,GAAAY,CAAA;IAClC,MAAMiC,MAAM;IAAA;IAAA,CAAA7C,cAAA,GAAAQ,CAAA,QAAG,IAAI,CAACU,WAAW,CAACS,GAAG,CAAC;IAAC;IAAA3B,cAAA,GAAAQ,CAAA;IACrC,OAAOqC,MAAM;IAAA;IAAA,CAAA7C,cAAA,GAAAa,CAAA,UAAGV,oBAAoB,CAAC0C,MAAM,CAAC;IAAA;IAAA,CAAA7C,cAAA,GAAAa,CAAA,UAAGiC,SAAS;EACzD;EAEOC,gBAAgBA,CAACpB,GAAW;IAAA;IAAA3B,cAAA,GAAAY,CAAA;IAAAZ,cAAA,GAAAQ,CAAA;IAClC,OAAO,CAAC,CAAC,IAAI,CAACU,WAAW,CAACS,GAAG,CAAC;EAC/B;EAEOqB,qBAAqBA,CAAA;IAAA;IAAAhD,cAAA,GAAAY,CAAA;IAAAZ,cAAA,GAAAQ,CAAA;IAC3B,OAAO,IAAI,CAACW,kBAAkB;EAC/B;;AAID,MAAM8B,wBAAwB;AAAA;AAAA,CAAAjD,cAAA,GAAAQ,CAAA,QAAG,IAAIS,wBAAwB,EAAE;AAAC;AAAAjB,cAAA,GAAAQ,CAAA;AAChEF,QAAQ,CAAC4C,QAAQ,CAAClB,GAAG,CAACzB,UAAU,CAACE,gBAAgB,EAAEwC,wBAAwB,CAAC","ignoreList":[]}