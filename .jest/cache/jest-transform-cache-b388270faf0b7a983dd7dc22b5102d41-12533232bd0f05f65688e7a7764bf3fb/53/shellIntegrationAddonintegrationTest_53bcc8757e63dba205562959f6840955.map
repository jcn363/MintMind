{"version":3,"names":["cov_2qujilgww9","actualCoverage","deepStrictEqual","fail","strictEqual","importAMDNodeModule","getActiveDocument","timeout","ensureNoDisposablesAreLeakedInTestSuite","TestConfigurationService","NullLogService","ShellIntegrationAddon","workbenchInstantiationService","ITerminalConfigurationService","NullTelemetryService","events","rich_windows11_pwsh7_echo_3_times","rich_windows11_pwsh7_ls_one_time","rich_windows11_pwsh7_type_foo","rich_windows11_pwsh7_type_foo_left_twice","rich_macos_zsh_omz_echo_3_times","rich_macos_zsh_omz_ls_one_time","basic_macos_zsh_p10k_ls_one_time","recordedTestCases","s","name","finalAssertions","commandDetection","f","assertCommandDetectionState","commands","map","e","command","promptInput","b","promptInputModel","getCombinedString","suite","store","xterm","capabilities","setup","terminalConfig","integrated","instantiationService","configurationService","files","autoSave","terminal","editor","fontSize","fontFamily","lineHeight","fontWeight","terminalConfigurationService","get","setConfig","shellIntegrationAddon","add","undefined","TerminalCtor","Terminal","allowProposedApi","testContainer","document","createElement","body","append","open","loadAddon","focus","testCase","test","i","event","entries","type","resize","cols","rows","promises","data","includes","push","Promise","r","d","onCommandStarted","dispose","write","all","input","length","race","then","Error","onDidChangeInput"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminal/test/browser/xterm/shellIntegrationAddon.integrationTest.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Terminal } from '@xterm/xterm';\nimport { deepStrictEqual, fail, strictEqual } from 'assert';\nimport { importAMDNodeModule } from '../../../../../../amdX.js';\nimport { getActiveDocument } from '../../../../../../base/browser/dom.js';\nimport { timeout } from '../../../../../../base/common/async.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../../base/test/common/utils.js';\nimport { TestConfigurationService } from '../../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { NullLogService } from '../../../../../../platform/log/common/log.js';\nimport { TerminalCapability, type ICommandDetectionCapability } from '../../../../../../platform/terminal/common/capabilities/capabilities.js';\nimport type { TerminalCapabilityStore } from '../../../../../../platform/terminal/common/capabilities/terminalCapabilityStore.js';\nimport { ShellIntegrationAddon } from '../../../../../../platform/terminal/common/xterm/shellIntegrationAddon.js';\nimport { workbenchInstantiationService, type TestTerminalConfigurationService } from '../../../../../test/browser/workbenchTestServices.js';\nimport { ITerminalConfigurationService } from '../../../../terminal/browser/terminal.js';\n\nimport { NullTelemetryService } from '../../../../../../platform/telemetry/common/telemetryUtils.js';\nimport { events as rich_windows11_pwsh7_echo_3_times } from './recordings/rich/windows11_pwsh7_echo_3_times.js';\nimport { events as rich_windows11_pwsh7_ls_one_time } from './recordings/rich/windows11_pwsh7_ls_one_time.js';\nimport { events as rich_windows11_pwsh7_type_foo } from './recordings/rich/windows11_pwsh7_type_foo.js';\nimport { events as rich_windows11_pwsh7_type_foo_left_twice } from './recordings/rich/windows11_pwsh7_type_foo_left_twice.js';\nimport { events as rich_macos_zsh_omz_echo_3_times } from './recordings/rich/macos_zsh_omz_echo_3_times.js';\nimport { events as rich_macos_zsh_omz_ls_one_time } from './recordings/rich/macos_zsh_omz_ls_one_time.js';\nimport { events as basic_macos_zsh_p10k_ls_one_time } from './recordings/basic/macos_zsh_p10k_ls_one_time.js';\nimport type { ITerminalConfiguration } from '../../../common/terminal.js';\n\n// These are test cases recorded with the `Developer: Record Terminal Session` command. Once that is\n// run, a terminal is created and the test case is manually executed. After nothing happens for a\n// few seconds the test case will be put into the clipboard.\n//\n// They aim to guarantee the complex interactions within command detection result in a particular\n// outcome.\n//\n// Some things to be aware of when recording tests:\n// - Pwsh on non-Windows can add a bunch of spammy cursor reports (`CSI x;y R`)\n// - It's best to record pwsh on Windows\n// - It's best to record other shells on non-Windows\n// - Turn off builtinCompletions to simplify the recording\n// - Capitalization matters in the recorded events\ntype RecordedTestCase = {\n\t/**\n\t * The test case name.\n\t */\n\tname: string;\n\t/**\n\t * A set of events that will play or be awaited for in order.\n\t */\n\tevents: RecordedSessionEvent[];\n\t/**\n\t * Any assertions to perform after the events have been played and validated.\n\t */\n\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => void;\n};\nconst recordedTestCases: RecordedTestCase[] = [\n\t{\n\t\tname: 'rich_windows11_pwsh7_echo_3_times',\n\t\tevents: rich_windows11_pwsh7_echo_3_times as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tassertCommandDetectionState(commandDetection, ['echo a', 'echo b', 'echo c'], '|');\n\t\t}\n\t},\n\t{\n\t\tname: 'rich_windows11_pwsh7_ls_one_time',\n\t\tevents: rich_windows11_pwsh7_ls_one_time as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tassertCommandDetectionState(commandDetection, ['ls'], '|');\n\t\t}\n\t},\n\t{\n\t\tname: 'rich_windows11_pwsh7_type_foo',\n\t\tevents: rich_windows11_pwsh7_type_foo as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tassertCommandDetectionState(commandDetection, [], 'foo|');\n\t\t}\n\t},\n\t{\n\t\tname: 'rich_windows11_pwsh7_type_foo_left_twice',\n\t\tevents: rich_windows11_pwsh7_type_foo_left_twice as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tassertCommandDetectionState(commandDetection, [], 'f|oo');\n\t\t}\n\t},\n\t{\n\t\tname: 'rich_macos_zsh_omz_echo_3_times',\n\t\tevents: rich_macos_zsh_omz_echo_3_times as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tassertCommandDetectionState(commandDetection, ['echo a', 'echo b', 'echo c'], '|');\n\t\t}\n\t},\n\t{\n\t\tname: 'rich_macos_zsh_omz_ls_one_time',\n\t\tevents: rich_macos_zsh_omz_ls_one_time as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\tassertCommandDetectionState(commandDetection, ['ls'], '|');\n\t\t}\n\t},\n\t{\n\t\tname: 'basic_macos_zsh_p10k_ls_one_time',\n\t\tevents: basic_macos_zsh_p10k_ls_one_time as unknown as RecordedSessionEvent[],\n\t\tfinalAssertions: (commandDetection: ICommandDetectionCapability | undefined) => {\n\t\t\t// Prompt input model doesn't work for p10k yet\n\t\t\t// Assert a single command has completed\n\t\t\tdeepStrictEqual(commandDetection!.commands.map(e => e.command), ['']);\n\t\t}\n\t},\n];\nfunction assertCommandDetectionState(commandDetection: ICommandDetectionCapability | undefined, commands: string[], promptInput: string) {\n\tif (!commandDetection) {\n\t\tfail('Command detection must be set');\n\t}\n\tdeepStrictEqual(commandDetection!.commands.map(e => e.command), commands);\n\tstrictEqual(commandDetection!.promptInputModel.getCombinedString(), promptInput);\n}\n\ntype RecordedSessionEvent = (\n\tIRecordedSessionTerminalEvent |\n\tIRecordedSessionCommandEvent |\n\tIRecordedSessionResizeEvent\n);\n\ninterface IRecordedSessionTerminalEvent {\n\ttype: 'output' | 'input' | 'sendText' | 'promptInputChange';\n\tdata: string;\n}\n\ninterface IRecordedSessionCommandEvent {\n\ttype: 'command';\n\tid: string;\n}\n\ninterface IRecordedSessionResizeEvent {\n\ttype: 'resize';\n\tcols: number;\n\trows: number;\n}\n\nsuite('Terminal Contrib Shell Integration Recordings', () => {\n\tconst store = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tlet xterm: Terminal;\n\tlet capabilities: TerminalCapabilityStore;\n\n\tsetup(async () => {\n\t\tconst terminalConfig = {\n\t\t\tintegrated: {\n\t\t\t}\n\t\t};\n\t\tconst instantiationService = workbenchInstantiationService({\n\t\t\tconfigurationService: () => new TestConfigurationService({\n\t\t\t\tfiles: { autoSave: false },\n\t\t\t\tterminal: terminalConfig,\n\t\t\t\teditor: { fontSize: 14, fontFamily: 'Arial', lineHeight: 12, fontWeight: 'bold' }\n\t\t\t})\n\t\t}, store);\n\t\tconst terminalConfigurationService = instantiationService.get(ITerminalConfigurationService) as TestTerminalConfigurationService;\n\t\tterminalConfigurationService.setConfig(terminalConfig as unknown as Partial<ITerminalConfiguration>);\n\t\tconst shellIntegrationAddon = store.add(new ShellIntegrationAddon('', true, undefined, NullTelemetryService, new NullLogService));\n\t\tconst TerminalCtor = (await importAMDNodeModule<typeof import('@xterm/xterm')>('@xterm/xterm', 'lib/xterm.js')).Terminal;\n\t\txterm = store.add(new TerminalCtor({ allowProposedApi: true }));\n\t\tcapabilities = shellIntegrationAddon.capabilities;\n\t\tconst testContainer = document.createElement('div');\n\t\tgetActiveDocument().body.append(testContainer);\n\n\t\txterm.open(testContainer);\n\t\txterm.loadAddon(shellIntegrationAddon);\n\t\txterm.focus();\n\t});\n\n\tfor (const testCase of recordedTestCases) {\n\t\ttest(testCase.name, async () => {\n\t\t\tfor (const [i, event] of testCase.events.entries()) {\n\t\t\t\t// DEBUG: Uncomment to see the events as they are played\n\t\t\t\t// console.log(\n\t\t\t\t// \tevent.type,\n\t\t\t\t// \tevent.type === 'command'\n\t\t\t\t// \t\t? event.id\n\t\t\t\t// \t\t: event.type === 'resize'\n\t\t\t\t// \t\t\t? `${event.cols}x${event.rows}`\n\t\t\t\t// \t\t\t: (event.data.length > 50 ? event.data.slice(0, 50) + '...' : event.data).replaceAll('\\x1b', '\\\\x1b').replace(/(\\n|\\r).+$/, '...')\n\t\t\t\t// );\n\t\t\t\t// console.log('promptInputModel', capabilities.get(TerminalCapability.CommandDetection)?.promptInputModel.getCombinedString());\n\t\t\t\tswitch (event.type) {\n\t\t\t\t\tcase 'resize': {\n\t\t\t\t\t\txterm.resize(event.cols, event.rows);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'output': {\n\t\t\t\t\t\tconst promises: Promise<unknown>[] = [];\n\t\t\t\t\t\tif (event.data.includes('\\x1b]633;B')) {\n\t\t\t\t\t\t\t// If the output contains the command start sequence, allow time for the prompt to get\n\t\t\t\t\t\t\t// adjusted.\n\t\t\t\t\t\t\tpromises.push(new Promise<void>(r => {\n\t\t\t\t\t\t\t\tconst commandDetection = capabilities.get(TerminalCapability.CommandDetection)!;\n\t\t\t\t\t\t\t\tif (commandDetection) {\n\t\t\t\t\t\t\t\t\tconst d = commandDetection.onCommandStarted(() => {\n\t\t\t\t\t\t\t\t\t\td.dispose();\n\t\t\t\t\t\t\t\t\t\tr();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpromises.push(new Promise<void>(r => xterm.write(event.data, () => r())));\n\t\t\t\t\t\tawait Promise.all(promises);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'input': {\n\t\t\t\t\t\txterm.input(event.data, true);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase 'promptInputChange': {\n\t\t\t\t\t\t// Ignore this event if it's followed by another promptInputChange as that\n\t\t\t\t\t\t// means this one isn't important and could cause a race condition in the\n\t\t\t\t\t\t// test\n\t\t\t\t\t\tif (testCase.events.length > i + 1 && testCase.events[i + 1].type === 'promptInputChange') {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst promptInputModel = capabilities.get(TerminalCapability.CommandDetection)?.promptInputModel;\n\t\t\t\t\t\tif (promptInputModel && promptInputModel.getCombinedString() !== event.data) {\n\t\t\t\t\t\t\tawait Promise.race([\n\t\t\t\t\t\t\t\tawait timeout(1000).then(() => { throw new Error(`Prompt input change timed out current=\"${promptInputModel.getCombinedString()}\", expected=\"${event.data}\"`); }),\n\t\t\t\t\t\t\t\tawait new Promise<void>(r => {\n\t\t\t\t\t\t\t\t\tconst d = promptInputModel.onDidChangeInput(() => {\n\t\t\t\t\t\t\t\t\t\tif (promptInputModel.getCombinedString() === event.data) {\n\t\t\t\t\t\t\t\t\t\t\td.dispose();\n\t\t\t\t\t\t\t\t\t\t\tr();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\ttestCase.finalAssertions(capabilities.get(TerminalCapability.CommandDetection));\n\t\t});\n\t}\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}