{"version":3,"names":["cov_1ham89bnl3","actualCoverage","isLinux","sanitizeProcessEnvironment","env","preserve","f","set","s","reduce","key","keysToRemove","envKeys","Object","keys","filter","forEach","envKey","i","length","search","b","removeDangerousEnvVariables"],"sources":["/home/user/Desktop/MintMind/src/vs/base/common/processes.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IProcessEnvironment, isLinux } from './platform.js';\n\n/**\n * Options to be passed to the external program or shell.\n */\nexport interface CommandOptions {\n\t/**\n\t * The current working directory of the executed program or shell.\n\t * If omitted VSCode's current workspace root is used.\n\t */\n\tcwd?: string;\n\n\t/**\n\t * The environment of the executed program or shell. If omitted\n\t * the parent process' environment is used.\n\t */\n\tenv?: { [key: string]: string };\n}\n\nexport interface Executable {\n\t/**\n\t * The command to be executed. Can be an external program or a shell\n\t * command.\n\t */\n\tcommand: string;\n\n\t/**\n\t * Specifies whether the command is a shell command and therefore must\n\t * be executed in a shell interpreter (e.g. cmd.exe, bash, ...).\n\t */\n\tisShellCommand: boolean;\n\n\t/**\n\t * The arguments passed to the command.\n\t */\n\targs: string[];\n\n\t/**\n\t * The command options used when the command is executed. Can be omitted.\n\t */\n\toptions?: CommandOptions;\n}\n\nexport interface ForkOptions extends CommandOptions {\n\texecArgv?: string[];\n}\n\nexport const enum Source {\n\tstdout,\n\tstderr\n}\n\n/**\n * The data send via a success callback\n */\nexport interface SuccessData {\n\terror?: Error;\n\tcmdCode?: number;\n\tterminated?: boolean;\n}\n\n/**\n * The data send via a error callback\n */\nexport interface ErrorData {\n\terror?: Error;\n\tterminated?: boolean;\n\tstdout?: string;\n\tstderr?: string;\n}\n\nexport interface TerminateResponse {\n\tsuccess: boolean;\n\tcode?: TerminateResponseCode;\n\terror?: any;\n}\n\nexport const enum TerminateResponseCode {\n\tSuccess = 0,\n\tUnknown = 1,\n\tAccessDenied = 2,\n\tProcessNotFound = 3,\n}\n\nexport interface ProcessItem {\n\tname: string;\n\tcmd: string;\n\tpid: number;\n\tppid: number;\n\tload: number;\n\tmem: number;\n\n\tchildren?: ProcessItem[];\n}\n\n/**\n * Sanitizes a VS Code process environment by removing all Electron/VS Code-related values.\n */\nexport function sanitizeProcessEnvironment(env: IProcessEnvironment, ...preserve: string[]): void {\n\tconst set = preserve.reduce<Record<string, boolean>>((set, key) => {\n\t\tset[key] = true;\n\t\treturn set;\n\t}, {});\n\tconst keysToRemove = [\n\t\t/^ELECTRON_.+$/,\n\t\t/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,\n\t\t/^SNAP(|_.*)$/,\n\t\t/^GDK_PIXBUF_.+$/,\n\t];\n\tconst envKeys = Object.keys(env);\n\tenvKeys\n\t\t.filter(key => !set[key])\n\t\t.forEach(envKey => {\n\t\t\tfor (let i = 0; i < keysToRemove.length; i++) {\n\t\t\t\tif (envKey.search(keysToRemove[i]) !== -1) {\n\t\t\t\t\tdelete env[envKey];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n}\n\n/**\n * Remove dangerous environment variables that have caused crashes\n * in forked processes (i.e. in ELECTRON_RUN_AS_NODE processes)\n *\n * @param env The env object to change\n */\nexport function removeDangerousEnvVariables(env: IProcessEnvironment | undefined): void {\n\tif (!env) {\n\t\treturn;\n\t}\n\n\t// Unset `DEBUG`, as an invalid value might lead to process crashes\n\t// See https://github.com/microsoft/vscode/issues/130072\n\tdelete env['DEBUG'];\n\n\tif (isLinux) {\n\t\t// Unset `LD_PRELOAD`, as it might lead to process crashes\n\t\t// See https://github.com/microsoft/vscode/issues/134177\n\t\tdelete env['LD_PRELOAD'];\n\t}\n}\n"],"mappings":"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","ignoreList":[]}