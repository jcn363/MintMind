{"version":3,"names":["cov_s9kkn4ni5","actualCoverage","getWindowId","onDidUnregisterWindow","Emitter","Event","Disposable","markAsSingleton","DevicePixelRatioMonitor","_onDidChange","s","_register","onDidChange","event","_listener","_mediaQueryList","constructor","targetWindow","f","_handleChange","fireEvent","removeEventListener","matchMedia","devicePixelRatio","addEventListener","b","fire","PixelRatioMonitorImpl","_value","value","_getPixelRatio","dprMonitor","ctx","document","createElement","getContext","dpr","bsr","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","PixelRatioMonitorFacade","mapWindowIdToPixelRatioMonitor","Map","_getOrCreatePixelRatioMonitor","targetWindowId","pixelRatioMonitor","get","set","once","vscodeWindowId","dispose","delete","getInstance","PixelRatio"],"sources":["/home/user/Desktop/MintMind/src/vs/base/browser/pixelRatio.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getWindowId, onDidUnregisterWindow } from './dom.js';\nimport { Emitter, Event } from '../common/event.js';\nimport { Disposable, markAsSingleton } from '../common/lifecycle.js';\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio#monitoring_screen_resolution_or_zoom_level_changes\n */\nclass DevicePixelRatioMonitor extends Disposable {\n\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate readonly _listener: () => void;\n\tprivate _mediaQueryList: MediaQueryList | null;\n\n\tconstructor(targetWindow: Window) {\n\t\tsuper();\n\n\t\tthis._listener = () => this._handleChange(targetWindow, true);\n\t\tthis._mediaQueryList = null;\n\t\tthis._handleChange(targetWindow, false);\n\t}\n\n\tprivate _handleChange(targetWindow: Window, fireEvent: boolean): void {\n\t\tthis._mediaQueryList?.removeEventListener('change', this._listener);\n\n\t\tthis._mediaQueryList = targetWindow.matchMedia(`(resolution: ${targetWindow.devicePixelRatio}dppx)`);\n\t\tthis._mediaQueryList.addEventListener('change', this._listener);\n\n\t\tif (fireEvent) {\n\t\t\tthis._onDidChange.fire();\n\t\t}\n\t}\n}\n\nexport interface IPixelRatioMonitor {\n\treadonly value: number;\n\treadonly onDidChange: Event<number>;\n}\n\nclass PixelRatioMonitorImpl extends Disposable implements IPixelRatioMonitor {\n\n\tprivate readonly _onDidChange = this._register(new Emitter<number>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate _value: number;\n\n\tget value(): number {\n\t\treturn this._value;\n\t}\n\n\tconstructor(targetWindow: Window) {\n\t\tsuper();\n\n\t\tthis._value = this._getPixelRatio(targetWindow);\n\n\t\tconst dprMonitor = this._register(new DevicePixelRatioMonitor(targetWindow));\n\t\tthis._register(dprMonitor.onDidChange(() => {\n\t\t\tthis._value = this._getPixelRatio(targetWindow);\n\t\t\tthis._onDidChange.fire(this._value);\n\t\t}));\n\t}\n\n\tprivate _getPixelRatio(targetWindow: Window): number {\n\t\tconst ctx: any = document.createElement('canvas').getContext('2d');\n\t\tconst dpr = targetWindow.devicePixelRatio || 1;\n\t\tconst bsr = ctx.webkitBackingStorePixelRatio ||\n\t\t\tctx.mozBackingStorePixelRatio ||\n\t\t\tctx.msBackingStorePixelRatio ||\n\t\t\tctx.oBackingStorePixelRatio ||\n\t\t\tctx.backingStorePixelRatio || 1;\n\t\treturn dpr / bsr;\n\t}\n}\n\nclass PixelRatioMonitorFacade {\n\n\tprivate readonly mapWindowIdToPixelRatioMonitor = new Map<number, PixelRatioMonitorImpl>();\n\n\tprivate _getOrCreatePixelRatioMonitor(targetWindow: Window): PixelRatioMonitorImpl {\n\t\tconst targetWindowId = getWindowId(targetWindow);\n\t\tlet pixelRatioMonitor = this.mapWindowIdToPixelRatioMonitor.get(targetWindowId);\n\t\tif (!pixelRatioMonitor) {\n\t\t\tpixelRatioMonitor = markAsSingleton(new PixelRatioMonitorImpl(targetWindow));\n\t\t\tthis.mapWindowIdToPixelRatioMonitor.set(targetWindowId, pixelRatioMonitor);\n\n\t\t\tmarkAsSingleton(Event.once(onDidUnregisterWindow)(({ vscodeWindowId }) => {\n\t\t\t\tif (vscodeWindowId === targetWindowId) {\n\t\t\t\t\tpixelRatioMonitor?.dispose();\n\t\t\t\t\tthis.mapWindowIdToPixelRatioMonitor.delete(targetWindowId);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\treturn pixelRatioMonitor;\n\t}\n\n\tgetInstance(targetWindow: Window): IPixelRatioMonitor {\n\t\treturn this._getOrCreatePixelRatioMonitor(targetWindow);\n\t}\n}\n\n/**\n * Returns the pixel ratio.\n *\n * This is useful for rendering <canvas> elements at native screen resolution or for being used as\n * a cache key when storing font measurements. Fonts might render differently depending on resolution\n * and any measurements need to be discarded for example when a window is moved from a monitor to another.\n */\nexport const PixelRatio = new PixelRatioMonitorFacade();\n"],"mappings":"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","ignoreList":[]}