{"version":3,"names":["cov_19td36z9sm","actualCoverage","localize","getPromptFileExtension","PromptsType","IQuickInputService","URI","IFileService","Severity","isValidBasename","askForPromptFileName","accessor","type","selectedFolder","existingFileName","f","quickInputService","s","get","fileService","sanitizeInput","input","trimmedName","trim","b","undefined","fileExtension","endsWith","validateInput","value","fileName","content","severity","Warning","Error","fileUri","joinPath","exists","placeHolder","getPlaceholderStringForRename","getPlaceholderStringForNew","result","instructions","prompt","agent"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/promptSyntax/pickers/askForPromptName.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../../../nls.js';\nimport { getPromptFileExtension } from '../../../common/promptSyntax/config/promptFileLocations.js';\nimport { PromptsType } from '../../../common/promptSyntax/promptTypes.js';\nimport { IQuickInputService } from '../../../../../../platform/quickinput/common/quickInput.js';\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { IFileService } from '../../../../../../platform/files/common/files.js';\nimport Severity from '../../../../../../base/common/severity.js';\nimport { isValidBasename } from '../../../../../../base/common/extpath.js';\nimport { ServicesAccessor } from '../../../../../../editor/browser/editorExtensions.js';\n\n/**\n * Asks the user for a file name.\n */\nexport async function askForPromptFileName(\n\taccessor: ServicesAccessor,\n\ttype: PromptsType,\n\tselectedFolder: URI,\n\texistingFileName?: string\n): Promise<string | undefined> {\n\tconst quickInputService = accessor.get(IQuickInputService);\n\tconst fileService = accessor.get(IFileService);\n\n\tconst sanitizeInput = (input: string) => {\n\t\tconst trimmedName = input.trim();\n\t\tif (!trimmedName) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst fileExtension = getPromptFileExtension(type);\n\t\treturn (trimmedName.endsWith(fileExtension))\n\t\t\t? trimmedName\n\t\t\t: `${trimmedName}${fileExtension}`;\n\t};\n\n\tconst validateInput = async (value: string) => {\n\t\tconst fileName = sanitizeInput(value);\n\t\tif (!fileName) {\n\t\t\treturn {\n\t\t\t\tcontent: localize('askForPromptFileName.error.empty', \"Please enter a name.\"),\n\t\t\t\tseverity: Severity.Warning\n\t\t\t};\n\t\t}\n\n\t\tif (!isValidBasename(fileName)) {\n\t\t\treturn {\n\t\t\t\tcontent: localize('askForPromptFileName.error.invalid', \"The name contains invalid characters.\"),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\n\t\tconst fileUri = URI.joinPath(selectedFolder, fileName);\n\t\tif (await fileService.exists(fileUri)) {\n\t\t\treturn {\n\t\t\t\tcontent: localize('askForPromptFileName.error.exists', \"A file for the given name already exists.\"),\n\t\t\t\tseverity: Severity.Error\n\t\t\t};\n\t\t}\n\n\t\treturn undefined;\n\t};\n\tconst placeHolder = existingFileName ? getPlaceholderStringForRename(type) : getPlaceholderStringForNew(type);\n\tconst result = await quickInputService.input({ placeHolder, validateInput, value: existingFileName });\n\tif (!result) {\n\t\treturn undefined;\n\t}\n\n\treturn sanitizeInput(result);\n}\n\nfunction getPlaceholderStringForNew(type: PromptsType): string {\n\tswitch (type) {\n\t\tcase PromptsType.instructions:\n\t\t\treturn localize('askForInstructionsFileName.placeholder', \"Enter the name of the instructions file\");\n\t\tcase PromptsType.prompt:\n\t\t\treturn localize('askForPromptFileName.placeholder', \"Enter the name of the prompt file\");\n\t\tcase PromptsType.agent:\n\t\t\treturn localize('askForAgentFileName.placeholder', \"Enter the name of the agent file\");\n\t\tdefault:\n\t\t\tthrow new Error('Unknown prompt type');\n\t}\n}\n\nfunction getPlaceholderStringForRename(type: PromptsType): string {\n\tswitch (type) {\n\t\tcase PromptsType.instructions:\n\t\t\treturn localize('askForRenamedInstructionsFileName.placeholder', \"Enter a new name of the instructions file\");\n\t\tcase PromptsType.prompt:\n\t\t\treturn localize('askForRenamedPromptFileName.placeholder', \"Enter a new name of the prompt file\");\n\t\tcase PromptsType.agent:\n\t\t\treturn localize('askForRenamedAgentFileName.placeholder', \"Enter a new name of the agent file\");\n\t\tdefault:\n\t\t\tthrow new Error('Unknown prompt type');\n\t}\n}\n"],"mappings":"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","ignoreList":[]}