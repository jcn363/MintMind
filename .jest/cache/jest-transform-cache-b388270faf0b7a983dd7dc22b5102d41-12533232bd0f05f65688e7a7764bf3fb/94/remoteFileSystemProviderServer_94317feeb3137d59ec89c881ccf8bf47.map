{"version":3,"names":["cov_2hktm9ytyt","actualCoverage","URI","createURITransformer","DiskFileSystemProvider","posix","delimiter","AbstractDiskFileSystemProviderChannel","AbstractSessionFileWatcher","RemoteAgentFileSystemProviderChannel","environmentService","configurationService","uriTransformerCache","s","Map","constructor","logService","f","_register","provider","getUriTransformer","ctx","transformer","get","remoteAuthority","b","set","transformIncoming","uriTransformer","_resource","supportVSCodeResource","path","query","requestResourcePath","JSON","parse","from","scheme","revive","createSessionFileWatcher","emitter","SessionFileWatcher","sessionEmitter","getRecursiveWatcherOptions","fileWatcherPolling","args","segments","split","pollingInterval","Number","usePolling","length","slice","undefined","getExtraExcludes","extensionsPath","join"],"sources":["/home/user/Desktop/MintMind/src/vs/server/node/remoteFileSystemProviderServer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../base/common/event.js';\nimport { URI, UriComponents } from '../../base/common/uri.js';\nimport { IURITransformer } from '../../base/common/uriIpc.js';\nimport { IFileChange } from '../../platform/files/common/files.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nimport { createURITransformer } from '../../base/common/uriTransformer.js';\nimport { RemoteAgentConnectionContext } from '../../platform/remote/common/remoteAgentEnvironment.js';\nimport { DiskFileSystemProvider } from '../../platform/files/node/diskFileSystemProvider.js';\nimport { posix, delimiter } from '../../base/common/path.js';\nimport { IServerEnvironmentService } from './serverEnvironmentService.js';\nimport { AbstractDiskFileSystemProviderChannel, AbstractSessionFileWatcher, ISessionFileWatcher } from '../../platform/files/node/diskFileSystemProviderServer.js';\nimport { IRecursiveWatcherOptions } from '../../platform/files/common/watcher.js';\nimport { IConfigurationService } from '../../platform/configuration/common/configuration.js';\n\nexport class RemoteAgentFileSystemProviderChannel extends AbstractDiskFileSystemProviderChannel<RemoteAgentConnectionContext> {\n\n\tprivate readonly uriTransformerCache = new Map<string, IURITransformer>();\n\n\tconstructor(\n\t\tlogService: ILogService,\n\t\tprivate readonly environmentService: IServerEnvironmentService,\n\t\tprivate readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper(new DiskFileSystemProvider(logService), logService);\n\n\t\tthis._register(this.provider);\n\t}\n\n\tprotected override getUriTransformer(ctx: RemoteAgentConnectionContext): IURITransformer {\n\t\tlet transformer = this.uriTransformerCache.get(ctx.remoteAuthority);\n\t\tif (!transformer) {\n\t\t\ttransformer = createURITransformer(ctx.remoteAuthority);\n\t\t\tthis.uriTransformerCache.set(ctx.remoteAuthority, transformer);\n\t\t}\n\n\t\treturn transformer;\n\t}\n\n\tprotected override transformIncoming(uriTransformer: IURITransformer, _resource: UriComponents, supportVSCodeResource = false): URI {\n\t\tif (supportVSCodeResource && _resource.path === '/vscode-resource' && _resource.query) {\n\t\t\tconst requestResourcePath = JSON.parse(_resource.query).requestResourcePath;\n\n\t\t\treturn URI.from({ scheme: 'file', path: requestResourcePath });\n\t\t}\n\n\t\treturn URI.revive(uriTransformer.transformIncoming(_resource));\n\t}\n\n\t//#region File Watching\n\n\tprotected createSessionFileWatcher(uriTransformer: IURITransformer, emitter: Emitter<IFileChange[] | string>): ISessionFileWatcher {\n\t\treturn new SessionFileWatcher(uriTransformer, emitter, this.logService, this.environmentService, this.configurationService);\n\t}\n\n\t//#endregion\n}\n\nclass SessionFileWatcher extends AbstractSessionFileWatcher {\n\n\tconstructor(\n\t\turiTransformer: IURITransformer,\n\t\tsessionEmitter: Emitter<IFileChange[] | string>,\n\t\tlogService: ILogService,\n\t\tenvironmentService: IServerEnvironmentService,\n\t\tconfigurationService: IConfigurationService\n\t) {\n\t\tsuper(uriTransformer, sessionEmitter, logService, environmentService);\n\t}\n\n\tprotected override getRecursiveWatcherOptions(environmentService: IServerEnvironmentService): IRecursiveWatcherOptions | undefined {\n\t\tconst fileWatcherPolling = environmentService.args['file-watcher-polling'];\n\t\tif (fileWatcherPolling) {\n\t\t\tconst segments = fileWatcherPolling.split(delimiter);\n\t\t\tconst pollingInterval = Number(segments[0]);\n\t\t\tif (pollingInterval > 0) {\n\t\t\t\tconst usePolling = segments.length > 1 ? segments.slice(1) : true;\n\t\t\t\treturn { usePolling, pollingInterval };\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprotected override getExtraExcludes(environmentService: IServerEnvironmentService): string[] | undefined {\n\t\tif (environmentService.extensionsPath) {\n\t\t\t// when opening the $HOME folder, we end up watching the extension folder\n\t\t\t// so simply exclude watching the extensions folder\n\t\t\treturn [posix.join(environmentService.extensionsPath, '**')];\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}