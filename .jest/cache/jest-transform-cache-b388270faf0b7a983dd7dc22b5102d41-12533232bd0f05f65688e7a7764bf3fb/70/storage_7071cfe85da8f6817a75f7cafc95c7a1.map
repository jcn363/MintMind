{"version":3,"names":["cov_1fvlzzul17","actualCoverage","ThrottledDelayer","Event","PauseableEmitter","Disposable","parse","stringify","isObject","isUndefinedOrNull","StorageHint","s","f","b","isStorageItemsChangeEvent","thing","candidate","changed","Map","deleted","Set","StorageState","Storage","database","options","DEFAULT_FLUSH_DELAY","_onDidChangeStorage","_register","onDidChangeStorage","event","state","None","cache","flushDelayer","pendingDeletes","pendingInserts","pendingClose","undefined","whenFlushedCallbacks","constructor","Object","create","registerListeners","onDidChangeItemsExternal","e","pause","forEach","value","key","acceptExternal","resume","Closed","delete","currentValue","get","set","fire","external","items","size","init","Initialized","hint","STORAGE_DOES_NOT_EXIST","getItems","fallbackValue","getBoolean","getNumber","parseInt","getObject","valueStr","Array","isArray","String","doFlush","wasDeleted","has","add","optimize","flush","close","doClose","hasPending","flushPending","updateRequest","insert","updateItems","finally","length","pop","delay","STORAGE_IN_MEMORY","trigger","whenFlushed","Promise","resolve","push","isInMemory","InMemoryStorageDatabase","request"],"sources":["/home/user/Desktop/MintMind/src/vs/base/parts/storage/common/storage.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ThrottledDelayer } from '../../../common/async.js';\nimport { Event, PauseableEmitter } from '../../../common/event.js';\nimport { Disposable, IDisposable } from '../../../common/lifecycle.js';\nimport { parse, stringify } from '../../../common/marshalling.js';\nimport { isObject, isUndefinedOrNull } from '../../../common/types.js';\n\nexport enum StorageHint {\n\n\t// A hint to the storage that the storage\n\t// does not exist on disk yet. This allows\n\t// the storage library to improve startup\n\t// time by not checking the storage for data.\n\tSTORAGE_DOES_NOT_EXIST,\n\n\t// A hint to the storage that the storage\n\t// is backed by an in-memory storage.\n\tSTORAGE_IN_MEMORY\n}\n\nexport interface IStorageOptions {\n\treadonly hint?: StorageHint;\n}\n\nexport interface IUpdateRequest {\n\treadonly insert?: Map<string, string>;\n\treadonly delete?: Set<string>;\n}\n\nexport interface IStorageItemsChangeEvent {\n\treadonly changed?: Map<string, string>;\n\treadonly deleted?: Set<string>;\n}\n\nexport function isStorageItemsChangeEvent(thing: unknown): thing is IStorageItemsChangeEvent {\n\tconst candidate = thing as IStorageItemsChangeEvent | undefined;\n\n\treturn candidate?.changed instanceof Map || candidate?.deleted instanceof Set;\n}\n\nexport interface IStorageDatabase {\n\n\treadonly onDidChangeItemsExternal: Event<IStorageItemsChangeEvent>;\n\n\tgetItems(): Promise<Map<string, string>>;\n\tupdateItems(request: IUpdateRequest): Promise<void>;\n\n\toptimize(): Promise<void>;\n\n\tclose(recovery?: () => Map<string, string>): Promise<void>;\n}\n\nexport interface IStorageChangeEvent {\n\n\t/**\n\t * The `key` of the storage entry that was changed\n\t * or was removed.\n\t */\n\treadonly key: string;\n\n\t/**\n\t * A hint how the storage change event was triggered. If\n\t * `true`, the storage change was triggered by an external\n\t * source, such as:\n\t * - another process (for example another window)\n\t * - operations such as settings sync or profiles change\n\t */\n\treadonly external?: boolean;\n}\n\nexport type StorageValue = string | boolean | number | undefined | null | object;\n\nexport interface IStorage extends IDisposable {\n\n\treadonly onDidChangeStorage: Event<IStorageChangeEvent>;\n\n\treadonly items: Map<string, string>;\n\treadonly size: number;\n\n\tinit(): Promise<void>;\n\n\tget(key: string, fallbackValue: string): string;\n\tget(key: string, fallbackValue?: string): string | undefined;\n\n\tgetBoolean(key: string, fallbackValue: boolean): boolean;\n\tgetBoolean(key: string, fallbackValue?: boolean): boolean | undefined;\n\n\tgetNumber(key: string, fallbackValue: number): number;\n\tgetNumber(key: string, fallbackValue?: number): number | undefined;\n\n\tgetObject<T extends object>(key: string, fallbackValue: T): T;\n\tgetObject<T extends object>(key: string, fallbackValue?: T): T | undefined;\n\n\tset(key: string, value: StorageValue, external?: boolean): Promise<void>;\n\tdelete(key: string, external?: boolean): Promise<void>;\n\n\tflush(delay?: number): Promise<void>;\n\twhenFlushed(): Promise<void>;\n\n\toptimize(): Promise<void>;\n\n\tclose(): Promise<void>;\n}\n\nexport enum StorageState {\n\tNone,\n\tInitialized,\n\tClosed\n}\n\nexport class Storage extends Disposable implements IStorage {\n\n\tprivate static readonly DEFAULT_FLUSH_DELAY = 100;\n\n\tprivate readonly _onDidChangeStorage = this._register(new PauseableEmitter<IStorageChangeEvent>());\n\treadonly onDidChangeStorage = this._onDidChangeStorage.event;\n\n\tprivate state = StorageState.None;\n\n\tprivate cache = new Map<string, string>();\n\n\tprivate readonly flushDelayer = this._register(new ThrottledDelayer<void>(Storage.DEFAULT_FLUSH_DELAY));\n\n\tprivate pendingDeletes = new Set<string>();\n\tprivate pendingInserts = new Map<string, string>();\n\n\tprivate pendingClose: Promise<void> | undefined = undefined;\n\n\tprivate readonly whenFlushedCallbacks: Function[] = [];\n\n\tconstructor(\n\t\tprotected readonly database: IStorageDatabase,\n\t\tprivate readonly options: IStorageOptions = Object.create(null)\n\t) {\n\t\tsuper();\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(this.database.onDidChangeItemsExternal(e => this.onDidChangeItemsExternal(e)));\n\t}\n\n\tprivate onDidChangeItemsExternal(e: IStorageItemsChangeEvent): void {\n\t\tthis._onDidChangeStorage.pause();\n\n\t\ttry {\n\t\t\t// items that change external require us to update our\n\t\t\t// caches with the values. we just accept the value and\n\t\t\t// emit an event if there is a change.\n\n\t\t\te.changed?.forEach((value, key) => this.acceptExternal(key, value));\n\t\t\te.deleted?.forEach(key => this.acceptExternal(key, undefined));\n\n\t\t} finally {\n\t\t\tthis._onDidChangeStorage.resume();\n\t\t}\n\t}\n\n\tprivate acceptExternal(key: string, value: string | undefined): void {\n\t\tif (this.state === StorageState.Closed) {\n\t\t\treturn; // Return early if we are already closed\n\t\t}\n\n\t\tlet changed = false;\n\n\t\t// Item got removed, check for deletion\n\t\tif (isUndefinedOrNull(value)) {\n\t\t\tchanged = this.cache.delete(key);\n\t\t}\n\n\t\t// Item got updated, check for change\n\t\telse {\n\t\t\tconst currentValue = this.cache.get(key);\n\t\t\tif (currentValue !== value) {\n\t\t\t\tthis.cache.set(key, value);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}\n\n\t\t// Signal to outside listeners\n\t\tif (changed) {\n\t\t\tthis._onDidChangeStorage.fire({ key, external: true });\n\t\t}\n\t}\n\n\tget items(): Map<string, string> {\n\t\treturn this.cache;\n\t}\n\n\tget size(): number {\n\t\treturn this.cache.size;\n\t}\n\n\tasync init(): Promise<void> {\n\t\tif (this.state !== StorageState.None) {\n\t\t\treturn; // either closed or already initialized\n\t\t}\n\n\t\tthis.state = StorageState.Initialized;\n\n\t\tif (this.options.hint === StorageHint.STORAGE_DOES_NOT_EXIST) {\n\t\t\t// return early if we know the storage file does not exist. this is a performance\n\t\t\t// optimization to not load all items of the underlying storage if we know that\n\t\t\t// there can be no items because the storage does not exist.\n\t\t\treturn;\n\t\t}\n\n\t\tthis.cache = await this.database.getItems();\n\t}\n\n\tget(key: string, fallbackValue: string): string;\n\tget(key: string, fallbackValue?: string): string | undefined;\n\tget(key: string, fallbackValue?: string): string | undefined {\n\t\tconst value = this.cache.get(key);\n\n\t\tif (isUndefinedOrNull(value)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tgetBoolean(key: string, fallbackValue: boolean): boolean;\n\tgetBoolean(key: string, fallbackValue?: boolean): boolean | undefined;\n\tgetBoolean(key: string, fallbackValue?: boolean): boolean | undefined {\n\t\tconst value = this.get(key);\n\n\t\tif (isUndefinedOrNull(value)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\treturn value === 'true';\n\t}\n\n\tgetNumber(key: string, fallbackValue: number): number;\n\tgetNumber(key: string, fallbackValue?: number): number | undefined;\n\tgetNumber(key: string, fallbackValue?: number): number | undefined {\n\t\tconst value = this.get(key);\n\n\t\tif (isUndefinedOrNull(value)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\treturn parseInt(value, 10);\n\t}\n\n\tgetObject(key: string, fallbackValue: object): object;\n\tgetObject(key: string, fallbackValue?: object | undefined): object | undefined;\n\tgetObject(key: string, fallbackValue?: object): object | undefined {\n\t\tconst value = this.get(key);\n\n\t\tif (isUndefinedOrNull(value)) {\n\t\t\treturn fallbackValue;\n\t\t}\n\n\t\treturn parse(value);\n\t}\n\n\tasync set(key: string, value: string | boolean | number | null | undefined | object, external = false): Promise<void> {\n\t\tif (this.state === StorageState.Closed) {\n\t\t\treturn; // Return early if we are already closed\n\t\t}\n\n\t\t// We remove the key for undefined/null values\n\t\tif (isUndefinedOrNull(value)) {\n\t\t\treturn this.delete(key, external);\n\t\t}\n\n\t\t// Otherwise, convert to String and store\n\t\tconst valueStr = isObject(value) || Array.isArray(value) ? stringify(value) : String(value);\n\n\t\t// Return early if value already set\n\t\tconst currentValue = this.cache.get(key);\n\t\tif (currentValue === valueStr) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Update in cache and pending\n\t\tthis.cache.set(key, valueStr);\n\t\tthis.pendingInserts.set(key, valueStr);\n\t\tthis.pendingDeletes.delete(key);\n\n\t\t// Event\n\t\tthis._onDidChangeStorage.fire({ key, external });\n\n\t\t// Accumulate work by scheduling after timeout\n\t\treturn this.doFlush();\n\t}\n\n\tasync delete(key: string, external = false): Promise<void> {\n\t\tif (this.state === StorageState.Closed) {\n\t\t\treturn; // Return early if we are already closed\n\t\t}\n\n\t\t// Remove from cache and add to pending\n\t\tconst wasDeleted = this.cache.delete(key);\n\t\tif (!wasDeleted) {\n\t\t\treturn; // Return early if value already deleted\n\t\t}\n\n\t\tif (!this.pendingDeletes.has(key)) {\n\t\t\tthis.pendingDeletes.add(key);\n\t\t}\n\n\t\tthis.pendingInserts.delete(key);\n\n\t\t// Event\n\t\tthis._onDidChangeStorage.fire({ key, external });\n\n\t\t// Accumulate work by scheduling after timeout\n\t\treturn this.doFlush();\n\t}\n\n\tasync optimize(): Promise<void> {\n\t\tif (this.state === StorageState.Closed) {\n\t\t\treturn; // Return early if we are already closed\n\t\t}\n\n\t\t// Await pending data to be flushed to the DB\n\t\t// before attempting to optimize the DB\n\t\tawait this.flush(0);\n\n\t\treturn this.database.optimize();\n\t}\n\n\tasync close(): Promise<void> {\n\t\tif (!this.pendingClose) {\n\t\t\tthis.pendingClose = this.doClose();\n\t\t}\n\n\t\treturn this.pendingClose;\n\t}\n\n\tprivate async doClose(): Promise<void> {\n\n\t\t// Update state\n\t\tthis.state = StorageState.Closed;\n\n\t\t// Trigger new flush to ensure data is persisted and then close\n\t\t// even if there is an error flushing. We must always ensure\n\t\t// the DB is closed to avoid corruption.\n\t\t//\n\t\t// Recovery: we pass our cache over as recovery option in case\n\t\t// the DB is not healthy.\n\t\ttry {\n\t\t\tawait this.doFlush(0 /* as soon as possible */);\n\t\t} catch {\n\t\t\t// Ignore\n\t\t}\n\n\t\tawait this.database.close(() => this.cache);\n\t}\n\n\tprivate get hasPending() {\n\t\treturn this.pendingInserts.size > 0 || this.pendingDeletes.size > 0;\n\t}\n\n\tprivate async flushPending(): Promise<void> {\n\t\tif (!this.hasPending) {\n\t\t\treturn; // return early if nothing to do\n\t\t}\n\n\t\t// Get pending data\n\t\tconst updateRequest: IUpdateRequest = { insert: this.pendingInserts, delete: this.pendingDeletes };\n\n\t\t// Reset pending data for next run\n\t\tthis.pendingDeletes = new Set<string>();\n\t\tthis.pendingInserts = new Map<string, string>();\n\n\t\t// Update in storage and release any\n\t\t// waiters we have once done\n\t\treturn this.database.updateItems(updateRequest).finally(() => {\n\t\t\tif (!this.hasPending) {\n\t\t\t\twhile (this.whenFlushedCallbacks.length) {\n\t\t\t\t\tthis.whenFlushedCallbacks.pop()?.();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tasync flush(delay?: number): Promise<void> {\n\t\tif (\n\t\t\tthis.state === StorageState.Closed || \t// Return early if we are already closed\n\t\t\tthis.pendingClose \t\t\t\t\t\t// return early if nothing to do\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.doFlush(delay);\n\t}\n\n\tprivate async doFlush(delay?: number): Promise<void> {\n\t\tif (this.options.hint === StorageHint.STORAGE_IN_MEMORY) {\n\t\t\treturn this.flushPending(); // return early if in-memory\n\t\t}\n\n\t\treturn this.flushDelayer.trigger(() => this.flushPending(), delay);\n\t}\n\n\tasync whenFlushed(): Promise<void> {\n\t\tif (!this.hasPending) {\n\t\t\treturn; // return early if nothing to do\n\t\t}\n\n\t\treturn new Promise(resolve => this.whenFlushedCallbacks.push(resolve));\n\t}\n\n\tisInMemory(): boolean {\n\t\treturn this.options.hint === StorageHint.STORAGE_IN_MEMORY;\n\t}\n}\n\nexport class InMemoryStorageDatabase implements IStorageDatabase {\n\n\treadonly onDidChangeItemsExternal = Event.None;\n\n\tprivate readonly items = new Map<string, string>();\n\n\tasync getItems(): Promise<Map<string, string>> {\n\t\treturn this.items;\n\t}\n\n\tasync updateItems(request: IUpdateRequest): Promise<void> {\n\t\trequest.insert?.forEach((value, key) => this.items.set(key, value));\n\n\t\trequest.delete?.forEach(key => this.items.delete(key));\n\t}\n\n\tasync optimize(): Promise<void> { }\n\tasync close(): Promise<void> { }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}