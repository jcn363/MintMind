{"version":3,"names":["cov_gko4wdidu","actualCoverage","Platform","uuid","cleanRemoteAuthority","mixin","firstSessionDateStorageKey","lastSessionDateStorageKey","machineIdKey","Gesture","cleanUserAgent","userAgent","f","s","replace","resolveWorkbenchCommonProperties","storageService","commit","version","isInternalTelemetry","remoteAuthority","productIdentifier","removeMachineId","resolveAdditionalProperties","result","Object","create","firstSessionDate","get","lastSessionDate","machineId","b","generateUuid","store","Date","now","PlatformToString","platform","undefined","String","isTouchDevice","seq","startTime","defineProperties","enumerable"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/telemetry/browser/workbenchCommonProperties.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport * as Platform from '../../../../base/common/platform.js';\nimport * as uuid from '../../../../base/common/uuid.js';\nimport { cleanRemoteAuthority } from '../../../../platform/telemetry/common/telemetryUtils.js';\nimport { mixin } from '../../../../base/common/objects.js';\nimport { ICommonProperties, firstSessionDateStorageKey, lastSessionDateStorageKey, machineIdKey } from '../../../../platform/telemetry/common/telemetry.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\n\n/**\n * General function to help reduce the individuality of user agents\n * @param userAgent userAgent from browser window\n * @returns A simplified user agent with less detail\n */\nfunction cleanUserAgent(userAgent: string): string {\n\treturn userAgent.replace(/(\\d+\\.\\d+)(\\.\\d+)+/g, '$1');\n}\n\nexport function resolveWorkbenchCommonProperties(\n\tstorageService: IStorageService,\n\tcommit: string | undefined,\n\tversion: string | undefined,\n\tisInternalTelemetry: boolean,\n\tremoteAuthority?: string,\n\tproductIdentifier?: string,\n\tremoveMachineId?: boolean,\n\tresolveAdditionalProperties?: () => { [key: string]: unknown }\n): ICommonProperties {\n\tconst result: ICommonProperties = Object.create(null);\n\tconst firstSessionDate = storageService.get(firstSessionDateStorageKey, StorageScope.APPLICATION)!;\n\tconst lastSessionDate = storageService.get(lastSessionDateStorageKey, StorageScope.APPLICATION)!;\n\n\tlet machineId: string | undefined;\n\tif (!removeMachineId) {\n\t\tmachineId = storageService.get(machineIdKey, StorageScope.APPLICATION);\n\t\tif (!machineId) {\n\t\t\tmachineId = uuid.generateUuid();\n\t\t\tstorageService.store(machineIdKey, machineId, StorageScope.APPLICATION, StorageTarget.MACHINE);\n\t\t}\n\t} else {\n\t\tmachineId = `Redacted-${productIdentifier ?? 'web'}`;\n\t}\n\n\n\t/**\n\t * Note: In the web, session date information is fetched from browser storage, so these dates are tied to a specific\n\t * browser and not the machine overall.\n\t */\n\t// __GDPR__COMMON__ \"common.firstSessionDate\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.firstSessionDate'] = firstSessionDate;\n\t// __GDPR__COMMON__ \"common.lastSessionDate\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.lastSessionDate'] = lastSessionDate || '';\n\t// __GDPR__COMMON__ \"common.isNewSession\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.isNewSession'] = !lastSessionDate ? '1' : '0';\n\t// __GDPR__COMMON__ \"common.remoteAuthority\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\tresult['common.remoteAuthority'] = cleanRemoteAuthority(remoteAuthority);\n\n\t// __GDPR__COMMON__ \"common.machineId\" : { \"endPoint\": \"MacAddressHash\", \"classification\": \"EndUserPseudonymizedInformation\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.machineId'] = machineId;\n\t// __GDPR__COMMON__ \"sessionID\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['sessionID'] = uuid.generateUuid() + Date.now();\n\t// __GDPR__COMMON__ \"commitHash\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\tresult['commitHash'] = commit;\n\t// __GDPR__COMMON__ \"version\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['version'] = version;\n\t// __GDPR__COMMON__ \"common.platform\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.platform'] = Platform.PlatformToString(Platform.platform);\n\t// __GDPR__COMMON__ \"common.product\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"PerformanceAndHealth\" }\n\tresult['common.product'] = productIdentifier ?? 'web';\n\t// __GDPR__COMMON__ \"common.userAgent\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.userAgent'] = Platform.userAgent ? cleanUserAgent(Platform.userAgent) : undefined;\n\t// __GDPR__COMMON__ \"common.isTouchDevice\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\tresult['common.isTouchDevice'] = String(Gesture.isTouchDevice());\n\n\tif (isInternalTelemetry) {\n\t\t// __GDPR__COMMON__ \"common.msftInternal\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n\t\tresult['common.msftInternal'] = isInternalTelemetry;\n\t}\n\n\t// dynamic properties which value differs on each call\n\tlet seq = 0;\n\tconst startTime = Date.now();\n\tObject.defineProperties(result, {\n\t\t// __GDPR__COMMON__ \"timestamp\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" }\n\t\t'timestamp': {\n\t\t\tget: () => new Date(),\n\t\t\tenumerable: true\n\t\t},\n\t\t// __GDPR__COMMON__ \"common.timesincesessionstart\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n\t\t'common.timesincesessionstart': {\n\t\t\tget: () => Date.now() - startTime,\n\t\t\tenumerable: true\n\t\t},\n\t\t// __GDPR__COMMON__ \"common.sequence\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true }\n\t\t'common.sequence': {\n\t\t\tget: () => seq++,\n\t\t\tenumerable: true\n\t\t}\n\t});\n\n\tif (resolveAdditionalProperties) {\n\t\tmixin(result, resolveAdditionalProperties());\n\t}\n\n\treturn result;\n}\n\n"],"mappings":"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","ignoreList":[]}