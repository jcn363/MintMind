72632a63ea26cdb100e1c07f52354ad8
/* istanbul ignore next */
function cov_2h0xj4ybne() {
  var path = "/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostDocumentContentProviders.ts";
  var hash = "a7c290dfd06f5bc2f392a523ca735f4233e5d094";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostDocumentContentProviders.ts",
    statementMap: {
      "0": {
        start: {
          line: 15,
          column: 25
        },
        end: {
          line: 15,
          column: 26
        }
      },
      "1": {
        start: {
          line: 16,
          column: 32
        },
        end: {
          line: 16,
          column: 41
        }
      },
      "2": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 57
        }
      },
      "3": {
        start: {
          line: 20,
          column: 8
        },
        end: {
          line: 20,
          column: 39
        }
      },
      "4": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 91
        }
      },
      "5": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 28,
          column: 9
        }
      },
      "6": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 27,
          column: 69
        }
      },
      "7": {
        start: {
          line: 29,
          column: 23
        },
        end: {
          line: 29,
          column: 67
        }
      },
      "8": {
        start: {
          line: 30,
          column: 8
        },
        end: {
          line: 30,
          column: 61
        }
      },
      "9": {
        start: {
          line: 31,
          column: 8
        },
        end: {
          line: 31,
          column: 65
        }
      },
      "10": {
        start: {
          line: 33,
          column: 8
        },
        end: {
          line: 72,
          column: 9
        }
      },
      "11": {
        start: {
          line: 35,
          column: 12
        },
        end: {
          line: 71,
          column: 15
        }
      },
      "12": {
        start: {
          line: 36,
          column: 16
        },
        end: {
          line: 39,
          column: 17
        }
      },
      "13": {
        start: {
          line: 37,
          column: 20
        },
        end: {
          line: 37,
          column: 142
        }
      },
      "14": {
        start: {
          line: 38,
          column: 20
        },
        end: {
          line: 38,
          column: 27
        }
      },
      "15": {
        start: {
          line: 40,
          column: 16
        },
        end: {
          line: 43,
          column: 17
        }
      },
      "16": {
        start: {
          line: 42,
          column: 20
        },
        end: {
          line: 42,
          column: 27
        }
      },
      "17": {
        start: {
          line: 44,
          column: 16
        },
        end: {
          line: 46,
          column: 17
        }
      },
      "18": {
        start: {
          line: 45,
          column: 20
        },
        end: {
          line: 45,
          column: 36
        }
      },
      "19": {
        start: {
          line: 47,
          column: 34
        },
        end: {
          line: 69,
          column: 18
        }
      },
      "20": {
        start: {
          line: 49,
          column: 20
        },
        end: {
          line: 51,
          column: 21
        }
      },
      "21": {
        start: {
          line: 50,
          column: 24
        },
        end: {
          line: 50,
          column: 31
        }
      },
      "22": {
        start: {
          line: 52,
          column: 37
        },
        end: {
          line: 52,
          column: 79
        }
      },
      "23": {
        start: {
          line: 53,
          column: 20
        },
        end: {
          line: 56,
          column: 21
        }
      },
      "24": {
        start: {
          line: 55,
          column: 24
        },
        end: {
          line: 55,
          column: 31
        }
      },
      "25": {
        start: {
          line: 58,
          column: 34
        },
        end: {
          line: 58,
          column: 51
        }
      },
      "26": {
        start: {
          line: 60,
          column: 20
        },
        end: {
          line: 62,
          column: 21
        }
      },
      "27": {
        start: {
          line: 61,
          column: 24
        },
        end: {
          line: 61,
          column: 80
        }
      },
      "28": {
        start: {
          line: 66,
          column: 20
        },
        end: {
          line: 68,
          column: 21
        }
      },
      "29": {
        start: {
          line: 67,
          column: 24
        },
        end: {
          line: 67,
          column: 46
        }
      },
      "30": {
        start: {
          line: 70,
          column: 16
        },
        end: {
          line: 70,
          column: 38
        }
      },
      "31": {
        start: {
          line: 73,
          column: 8
        },
        end: {
          line: 81,
          column: 11
        }
      },
      "32": {
        start: {
          line: 74,
          column: 12
        },
        end: {
          line: 76,
          column: 13
        }
      },
      "33": {
        start: {
          line: 75,
          column: 16
        },
        end: {
          line: 75,
          column: 67
        }
      },
      "34": {
        start: {
          line: 77,
          column: 12
        },
        end: {
          line: 80,
          column: 13
        }
      },
      "35": {
        start: {
          line: 78,
          column: 16
        },
        end: {
          line: 78,
          column: 39
        }
      },
      "36": {
        start: {
          line: 79,
          column: 16
        },
        end: {
          line: 79,
          column: 41
        }
      },
      "37": {
        start: {
          line: 84,
          column: 25
        },
        end: {
          line: 84,
          column: 67
        }
      },
      "38": {
        start: {
          line: 85,
          column: 8
        },
        end: {
          line: 87,
          column: 9
        }
      },
      "39": {
        start: {
          line: 86,
          column: 12
        },
        end: {
          line: 86,
          column: 86
        }
      },
      "40": {
        start: {
          line: 88,
          column: 8
        },
        end: {
          line: 88,
          column: 109
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 18,
            column: 5
          }
        },
        loc: {
          start: {
            line: 18,
            column: 64
          },
          end: {
            line: 22,
            column: 5
          }
        },
        line: 18
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 23,
            column: 5
          }
        },
        loc: {
          start: {
            line: 23,
            column: 58
          },
          end: {
            line: 82,
            column: 5
          }
        },
        line: 23
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 35,
            column: 48
          },
          end: {
            line: 35,
            column: 49
          }
        },
        loc: {
          start: {
            line: 35,
            column: 63
          },
          end: {
            line: 71,
            column: 13
          }
        },
        line: 35
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 48,
            column: 26
          },
          end: {
            line: 48,
            column: 27
          }
        },
        loc: {
          start: {
            line: 48,
            column: 43
          },
          end: {
            line: 63,
            column: 17
          }
        },
        line: 48
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 65,
            column: 29
          },
          end: {
            line: 65,
            column: 30
          }
        },
        loc: {
          start: {
            line: 65,
            column: 35
          },
          end: {
            line: 69,
            column: 17
          }
        },
        line: 65
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 73,
            column: 30
          },
          end: {
            line: 73,
            column: 31
          }
        },
        loc: {
          start: {
            line: 73,
            column: 36
          },
          end: {
            line: 81,
            column: 9
          }
        },
        line: 73
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 83,
            column: 4
          },
          end: {
            line: 83,
            column: 5
          }
        },
        loc: {
          start: {
            line: 83,
            column: 45
          },
          end: {
            line: 89,
            column: 5
          }
        },
        line: 83
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 26,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 26,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 26
      },
      "1": {
        loc: {
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 72,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 33,
            column: 8
          },
          end: {
            line: 72,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 33
      },
      "2": {
        loc: {
          start: {
            line: 36,
            column: 16
          },
          end: {
            line: 39,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 36,
            column: 16
          },
          end: {
            line: 39,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 36
      },
      "3": {
        loc: {
          start: {
            line: 40,
            column: 16
          },
          end: {
            line: 43,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 40,
            column: 16
          },
          end: {
            line: 43,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 40
      },
      "4": {
        loc: {
          start: {
            line: 44,
            column: 16
          },
          end: {
            line: 46,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 44,
            column: 16
          },
          end: {
            line: 46,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 44
      },
      "5": {
        loc: {
          start: {
            line: 49,
            column: 20
          },
          end: {
            line: 51,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 49,
            column: 20
          },
          end: {
            line: 51,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 49
      },
      "6": {
        loc: {
          start: {
            line: 49,
            column: 24
          },
          end: {
            line: 49,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 49,
            column: 24
          },
          end: {
            line: 49,
            column: 30
          }
        }, {
          start: {
            line: 49,
            column: 34
          },
          end: {
            line: 49,
            column: 59
          }
        }],
        line: 49
      },
      "7": {
        loc: {
          start: {
            line: 53,
            column: 20
          },
          end: {
            line: 56,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 20
          },
          end: {
            line: 56,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "8": {
        loc: {
          start: {
            line: 60,
            column: 20
          },
          end: {
            line: 62,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 60,
            column: 20
          },
          end: {
            line: 62,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 60
      },
      "9": {
        loc: {
          start: {
            line: 66,
            column: 20
          },
          end: {
            line: 68,
            column: 21
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 66,
            column: 20
          },
          end: {
            line: 68,
            column: 21
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 66
      },
      "10": {
        loc: {
          start: {
            line: 74,
            column: 12
          },
          end: {
            line: 76,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 74,
            column: 12
          },
          end: {
            line: 76,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 74
      },
      "11": {
        loc: {
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 77,
            column: 12
          },
          end: {
            line: 80,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 77
      },
      "12": {
        loc: {
          start: {
            line: 85,
            column: 8
          },
          end: {
            line: 87,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 85,
            column: 8
          },
          end: {
            line: 87,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 85
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0]
    },
    inputSourceMap: {
      file: "/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostDocumentContentProviders.ts",
      mappings: "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",
      names: [],
      sources: ["/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostDocumentContentProviders.ts"],
      sourcesContent: ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { URI, UriComponents } from '../../../base/common/uri.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { Disposable } from './extHostTypes.js';\nimport type * as vscode from 'vscode';\nimport { MainContext, ExtHostDocumentContentProvidersShape, MainThreadDocumentContentProvidersShape, IMainContext } from './extHost.protocol.js';\nimport { ExtHostDocumentsAndEditors } from './extHostDocumentsAndEditors.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { splitLines } from '../../../base/common/strings.js';\n\nexport class ExtHostDocumentContentProvider implements ExtHostDocumentContentProvidersShape {\n\n\tprivate static _handlePool = 0;\n\n\tprivate readonly _documentContentProviders = new Map<number, vscode.TextDocumentContentProvider>();\n\tprivate readonly _proxy: MainThreadDocumentContentProvidersShape;\n\n\tconstructor(\n\t\tmainContext: IMainContext,\n\t\tprivate readonly _documentsAndEditors: ExtHostDocumentsAndEditors,\n\t\tprivate readonly _logService: ILogService,\n\t) {\n\t\tthis._proxy = mainContext.getProxy(MainContext.MainThreadDocumentContentProviders);\n\t}\n\n\tregisterTextDocumentContentProvider(scheme: string, provider: vscode.TextDocumentContentProvider): vscode.Disposable {\n\t\t// todo@remote\n\t\t// check with scheme from fs-providers!\n\t\tif (Object.keys(Schemas).indexOf(scheme) >= 0) {\n\t\t\tthrow new Error(`scheme '${scheme}' already registered`);\n\t\t}\n\n\t\tconst handle = ExtHostDocumentContentProvider._handlePool++;\n\n\t\tthis._documentContentProviders.set(handle, provider);\n\t\tthis._proxy.$registerTextContentProvider(handle, scheme);\n\n\t\tlet subscription: IDisposable | undefined;\n\t\tif (typeof provider.onDidChange === 'function') {\n\n\t\t\tlet lastEvent: Promise<void> | undefined;\n\n\t\t\tsubscription = provider.onDidChange(async uri => {\n\t\t\t\tif (uri.scheme !== scheme) {\n\t\t\t\t\tthis._logService.warn(`Provider for scheme '${scheme}' is firing event for schema '${uri.scheme}' which will be IGNORED`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this._documentsAndEditors.getDocument(uri)) {\n\t\t\t\t\t// ignore event if document isn't open\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (lastEvent) {\n\t\t\t\t\tawait lastEvent;\n\t\t\t\t}\n\n\t\t\t\tconst thisEvent = this.$provideTextDocumentContent(handle, uri)\n\t\t\t\t\t.then(async value => {\n\t\t\t\t\t\tif (!value && typeof value !== 'string') {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst document = this._documentsAndEditors.getDocument(uri);\n\t\t\t\t\t\tif (!document) {\n\t\t\t\t\t\t\t// disposed in the meantime\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// create lines and compare\n\t\t\t\t\t\tconst lines = splitLines(value);\n\n\t\t\t\t\t\t// broadcast event when content changed\n\t\t\t\t\t\tif (!document.equalLines(lines)) {\n\t\t\t\t\t\t\treturn this._proxy.$onVirtualDocumentChange(uri, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(onUnexpectedError)\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tif (lastEvent === thisEvent) {\n\t\t\t\t\t\t\tlastEvent = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tlastEvent = thisEvent;\n\t\t\t});\n\t\t}\n\t\treturn new Disposable(() => {\n\t\t\tif (this._documentContentProviders.delete(handle)) {\n\t\t\t\tthis._proxy.$unregisterTextContentProvider(handle);\n\t\t\t}\n\t\t\tif (subscription) {\n\t\t\t\tsubscription.dispose();\n\t\t\t\tsubscription = undefined;\n\t\t\t}\n\t\t});\n\t}\n\n\t$provideTextDocumentContent(handle: number, uri: UriComponents): Promise<string | null | undefined> {\n\t\tconst provider = this._documentContentProviders.get(handle);\n\t\tif (!provider) {\n\t\t\treturn Promise.reject(new Error(`unsupported uri-scheme: ${uri.scheme}`));\n\t\t}\n\t\treturn Promise.resolve(provider.provideTextDocumentContent(URI.revive(uri), CancellationToken.None));\n\t}\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "a7c290dfd06f5bc2f392a523ca735f4233e5d094"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2h0xj4ybne = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2h0xj4ybne();
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import { onUnexpectedError } from '../../../base/common/errors.js';
import { URI } from '../../../base/common/uri.js';
import { Disposable } from './extHostTypes.js';
import { MainContext } from './extHost.protocol.js';
import { Schemas } from '../../../base/common/network.js';
import { CancellationToken } from '../../../base/common/cancellation.js';
import { splitLines } from '../../../base/common/strings.js';
export class ExtHostDocumentContentProvider {
  _documentsAndEditors;
  _logService;
  static _handlePool =
  /* istanbul ignore next */
  (cov_2h0xj4ybne().s[0]++, 0);
  _documentContentProviders =
  /* istanbul ignore next */
  (cov_2h0xj4ybne().s[1]++, new Map());
  _proxy;
  constructor(mainContext, _documentsAndEditors, _logService) {
    /* istanbul ignore next */
    cov_2h0xj4ybne().f[0]++;
    cov_2h0xj4ybne().s[2]++;
    this._documentsAndEditors = _documentsAndEditors;
    /* istanbul ignore next */
    cov_2h0xj4ybne().s[3]++;
    this._logService = _logService;
    /* istanbul ignore next */
    cov_2h0xj4ybne().s[4]++;
    this._proxy = mainContext.getProxy(MainContext.MainThreadDocumentContentProviders);
  }
  registerTextDocumentContentProvider(scheme, provider) {
    /* istanbul ignore next */
    cov_2h0xj4ybne().f[1]++;
    cov_2h0xj4ybne().s[5]++;
    // todo@remote
    // check with scheme from fs-providers!
    if (Object.keys(Schemas).indexOf(scheme) >= 0) {
      /* istanbul ignore next */
      cov_2h0xj4ybne().b[0][0]++;
      cov_2h0xj4ybne().s[6]++;
      throw new Error(`scheme '${scheme}' already registered`);
    } else
    /* istanbul ignore next */
    {
      cov_2h0xj4ybne().b[0][1]++;
    }
    const handle =
    /* istanbul ignore next */
    (cov_2h0xj4ybne().s[7]++, ExtHostDocumentContentProvider._handlePool++);
    /* istanbul ignore next */
    cov_2h0xj4ybne().s[8]++;
    this._documentContentProviders.set(handle, provider);
    /* istanbul ignore next */
    cov_2h0xj4ybne().s[9]++;
    this._proxy.$registerTextContentProvider(handle, scheme);
    let subscription;
    /* istanbul ignore next */
    cov_2h0xj4ybne().s[10]++;
    if (typeof provider.onDidChange === 'function') {
      /* istanbul ignore next */
      cov_2h0xj4ybne().b[1][0]++;
      let lastEvent;
      /* istanbul ignore next */
      cov_2h0xj4ybne().s[11]++;
      subscription = provider.onDidChange(async uri => {
        /* istanbul ignore next */
        cov_2h0xj4ybne().f[2]++;
        cov_2h0xj4ybne().s[12]++;
        if (uri.scheme !== scheme) {
          /* istanbul ignore next */
          cov_2h0xj4ybne().b[2][0]++;
          cov_2h0xj4ybne().s[13]++;
          this._logService.warn(`Provider for scheme '${scheme}' is firing event for schema '${uri.scheme}' which will be IGNORED`);
          /* istanbul ignore next */
          cov_2h0xj4ybne().s[14]++;
          return;
        } else
        /* istanbul ignore next */
        {
          cov_2h0xj4ybne().b[2][1]++;
        }
        cov_2h0xj4ybne().s[15]++;
        if (!this._documentsAndEditors.getDocument(uri)) {
          /* istanbul ignore next */
          cov_2h0xj4ybne().b[3][0]++;
          cov_2h0xj4ybne().s[16]++;
          // ignore event if document isn't open
          return;
        } else
        /* istanbul ignore next */
        {
          cov_2h0xj4ybne().b[3][1]++;
        }
        cov_2h0xj4ybne().s[17]++;
        if (lastEvent) {
          /* istanbul ignore next */
          cov_2h0xj4ybne().b[4][0]++;
          cov_2h0xj4ybne().s[18]++;
          await lastEvent;
        } else
        /* istanbul ignore next */
        {
          cov_2h0xj4ybne().b[4][1]++;
        }
        const thisEvent =
        /* istanbul ignore next */
        (cov_2h0xj4ybne().s[19]++, this.$provideTextDocumentContent(handle, uri).then(async value => {
          /* istanbul ignore next */
          cov_2h0xj4ybne().f[3]++;
          cov_2h0xj4ybne().s[20]++;
          if (
          /* istanbul ignore next */
          (cov_2h0xj4ybne().b[6][0]++, !value) &&
          /* istanbul ignore next */
          (cov_2h0xj4ybne().b[6][1]++, typeof value !== 'string')) {
            /* istanbul ignore next */
            cov_2h0xj4ybne().b[5][0]++;
            cov_2h0xj4ybne().s[21]++;
            return;
          } else
          /* istanbul ignore next */
          {
            cov_2h0xj4ybne().b[5][1]++;
          }
          const document =
          /* istanbul ignore next */
          (cov_2h0xj4ybne().s[22]++, this._documentsAndEditors.getDocument(uri));
          /* istanbul ignore next */
          cov_2h0xj4ybne().s[23]++;
          if (!document) {
            /* istanbul ignore next */
            cov_2h0xj4ybne().b[7][0]++;
            cov_2h0xj4ybne().s[24]++;
            // disposed in the meantime
            return;
          } else
          /* istanbul ignore next */
          {
            cov_2h0xj4ybne().b[7][1]++;
          }
          // create lines and compare
          const lines =
          /* istanbul ignore next */
          (cov_2h0xj4ybne().s[25]++, splitLines(value));
          // broadcast event when content changed
          /* istanbul ignore next */
          cov_2h0xj4ybne().s[26]++;
          if (!document.equalLines(lines)) {
            /* istanbul ignore next */
            cov_2h0xj4ybne().b[8][0]++;
            cov_2h0xj4ybne().s[27]++;
            return this._proxy.$onVirtualDocumentChange(uri, value);
          } else
          /* istanbul ignore next */
          {
            cov_2h0xj4ybne().b[8][1]++;
          }
        }).catch(onUnexpectedError).finally(() => {
          /* istanbul ignore next */
          cov_2h0xj4ybne().f[4]++;
          cov_2h0xj4ybne().s[28]++;
          if (lastEvent === thisEvent) {
            /* istanbul ignore next */
            cov_2h0xj4ybne().b[9][0]++;
            cov_2h0xj4ybne().s[29]++;
            lastEvent = undefined;
          } else
          /* istanbul ignore next */
          {
            cov_2h0xj4ybne().b[9][1]++;
          }
        }));
        /* istanbul ignore next */
        cov_2h0xj4ybne().s[30]++;
        lastEvent = thisEvent;
      });
    } else
    /* istanbul ignore next */
    {
      cov_2h0xj4ybne().b[1][1]++;
    }
    cov_2h0xj4ybne().s[31]++;
    return new Disposable(() => {
      /* istanbul ignore next */
      cov_2h0xj4ybne().f[5]++;
      cov_2h0xj4ybne().s[32]++;
      if (this._documentContentProviders.delete(handle)) {
        /* istanbul ignore next */
        cov_2h0xj4ybne().b[10][0]++;
        cov_2h0xj4ybne().s[33]++;
        this._proxy.$unregisterTextContentProvider(handle);
      } else
      /* istanbul ignore next */
      {
        cov_2h0xj4ybne().b[10][1]++;
      }
      cov_2h0xj4ybne().s[34]++;
      if (subscription) {
        /* istanbul ignore next */
        cov_2h0xj4ybne().b[11][0]++;
        cov_2h0xj4ybne().s[35]++;
        subscription.dispose();
        /* istanbul ignore next */
        cov_2h0xj4ybne().s[36]++;
        subscription = undefined;
      } else
      /* istanbul ignore next */
      {
        cov_2h0xj4ybne().b[11][1]++;
      }
    });
  }
  $provideTextDocumentContent(handle, uri) {
    /* istanbul ignore next */
    cov_2h0xj4ybne().f[6]++;
    const provider =
    /* istanbul ignore next */
    (cov_2h0xj4ybne().s[37]++, this._documentContentProviders.get(handle));
    /* istanbul ignore next */
    cov_2h0xj4ybne().s[38]++;
    if (!provider) {
      /* istanbul ignore next */
      cov_2h0xj4ybne().b[12][0]++;
      cov_2h0xj4ybne().s[39]++;
      return Promise.reject(new Error(`unsupported uri-scheme: ${uri.scheme}`));
    } else
    /* istanbul ignore next */
    {
      cov_2h0xj4ybne().b[12][1]++;
    }
    cov_2h0xj4ybne().s[40]++;
    return Promise.resolve(provider.provideTextDocumentContent(URI.revive(uri), CancellationToken.None));
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmgweGo0eWJuZSIsImFjdHVhbENvdmVyYWdlIiwib25VbmV4cGVjdGVkRXJyb3IiLCJVUkkiLCJEaXNwb3NhYmxlIiwiTWFpbkNvbnRleHQiLCJTY2hlbWFzIiwiQ2FuY2VsbGF0aW9uVG9rZW4iLCJzcGxpdExpbmVzIiwiRXh0SG9zdERvY3VtZW50Q29udGVudFByb3ZpZGVyIiwiX2RvY3VtZW50c0FuZEVkaXRvcnMiLCJfbG9nU2VydmljZSIsIl9oYW5kbGVQb29sIiwicyIsIl9kb2N1bWVudENvbnRlbnRQcm92aWRlcnMiLCJNYXAiLCJfcHJveHkiLCJjb25zdHJ1Y3RvciIsIm1haW5Db250ZXh0IiwiZiIsImdldFByb3h5IiwiTWFpblRocmVhZERvY3VtZW50Q29udGVudFByb3ZpZGVycyIsInJlZ2lzdGVyVGV4dERvY3VtZW50Q29udGVudFByb3ZpZGVyIiwic2NoZW1lIiwicHJvdmlkZXIiLCJPYmplY3QiLCJrZXlzIiwiaW5kZXhPZiIsImIiLCJFcnJvciIsImhhbmRsZSIsInNldCIsIiRyZWdpc3RlclRleHRDb250ZW50UHJvdmlkZXIiLCJzdWJzY3JpcHRpb24iLCJvbkRpZENoYW5nZSIsImxhc3RFdmVudCIsInVyaSIsIndhcm4iLCJnZXREb2N1bWVudCIsInRoaXNFdmVudCIsIiRwcm92aWRlVGV4dERvY3VtZW50Q29udGVudCIsInRoZW4iLCJ2YWx1ZSIsImRvY3VtZW50IiwibGluZXMiLCJlcXVhbExpbmVzIiwiJG9uVmlydHVhbERvY3VtZW50Q2hhbmdlIiwiY2F0Y2giLCJmaW5hbGx5IiwidW5kZWZpbmVkIiwiZGVsZXRlIiwiJHVucmVnaXN0ZXJUZXh0Q29udGVudFByb3ZpZGVyIiwiZGlzcG9zZSIsImdldCIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvdmlkZVRleHREb2N1bWVudENvbnRlbnQiLCJyZXZpdmUiLCJOb25lIl0sInNvdXJjZXMiOlsiL2hvbWUvdXNlci9EZXNrdG9wL01pbnRNaW5kL3NyYy92cy93b3JrYmVuY2gvYXBpL2NvbW1vbi9leHRIb3N0RG9jdW1lbnRDb250ZW50UHJvdmlkZXJzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5pbXBvcnQgeyBvblVuZXhwZWN0ZWRFcnJvciB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL2Vycm9ycy5qcyc7XG5pbXBvcnQgeyBVUkksIFVyaUNvbXBvbmVudHMgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi91cmkuanMnO1xuaW1wb3J0IHsgSURpc3Bvc2FibGUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZSB9IGZyb20gJy4vZXh0SG9zdFR5cGVzLmpzJztcbmltcG9ydCB0eXBlICogYXMgdnNjb2RlIGZyb20gJ3ZzY29kZSc7XG5pbXBvcnQgeyBNYWluQ29udGV4dCwgRXh0SG9zdERvY3VtZW50Q29udGVudFByb3ZpZGVyc1NoYXBlLCBNYWluVGhyZWFkRG9jdW1lbnRDb250ZW50UHJvdmlkZXJzU2hhcGUsIElNYWluQ29udGV4dCB9IGZyb20gJy4vZXh0SG9zdC5wcm90b2NvbC5qcyc7XG5pbXBvcnQgeyBFeHRIb3N0RG9jdW1lbnRzQW5kRWRpdG9ycyB9IGZyb20gJy4vZXh0SG9zdERvY3VtZW50c0FuZEVkaXRvcnMuanMnO1xuaW1wb3J0IHsgU2NoZW1hcyB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL25ldHdvcmsuanMnO1xuaW1wb3J0IHsgSUxvZ1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9sb2cvY29tbW9uL2xvZy5qcyc7XG5pbXBvcnQgeyBDYW5jZWxsYXRpb25Ub2tlbiB9IGZyb20gJy4uLy4uLy4uL2Jhc2UvY29tbW9uL2NhbmNlbGxhdGlvbi5qcyc7XG5pbXBvcnQgeyBzcGxpdExpbmVzIH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9jb21tb24vc3RyaW5ncy5qcyc7XG5cbmV4cG9ydCBjbGFzcyBFeHRIb3N0RG9jdW1lbnRDb250ZW50UHJvdmlkZXIgaW1wbGVtZW50cyBFeHRIb3N0RG9jdW1lbnRDb250ZW50UHJvdmlkZXJzU2hhcGUge1xuXG5cdHByaXZhdGUgc3RhdGljIF9oYW5kbGVQb29sID0gMDtcblxuXHRwcml2YXRlIHJlYWRvbmx5IF9kb2N1bWVudENvbnRlbnRQcm92aWRlcnMgPSBuZXcgTWFwPG51bWJlciwgdnNjb2RlLlRleHREb2N1bWVudENvbnRlbnRQcm92aWRlcj4oKTtcblx0cHJpdmF0ZSByZWFkb25seSBfcHJveHk6IE1haW5UaHJlYWREb2N1bWVudENvbnRlbnRQcm92aWRlcnNTaGFwZTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRtYWluQ29udGV4dDogSU1haW5Db250ZXh0LFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgX2RvY3VtZW50c0FuZEVkaXRvcnM6IEV4dEhvc3REb2N1bWVudHNBbmRFZGl0b3JzLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgX2xvZ1NlcnZpY2U6IElMb2dTZXJ2aWNlLFxuXHQpIHtcblx0XHR0aGlzLl9wcm94eSA9IG1haW5Db250ZXh0LmdldFByb3h5KE1haW5Db250ZXh0Lk1haW5UaHJlYWREb2N1bWVudENvbnRlbnRQcm92aWRlcnMpO1xuXHR9XG5cblx0cmVnaXN0ZXJUZXh0RG9jdW1lbnRDb250ZW50UHJvdmlkZXIoc2NoZW1lOiBzdHJpbmcsIHByb3ZpZGVyOiB2c2NvZGUuVGV4dERvY3VtZW50Q29udGVudFByb3ZpZGVyKTogdnNjb2RlLkRpc3Bvc2FibGUge1xuXHRcdC8vIHRvZG9AcmVtb3RlXG5cdFx0Ly8gY2hlY2sgd2l0aCBzY2hlbWUgZnJvbSBmcy1wcm92aWRlcnMhXG5cdFx0aWYgKE9iamVjdC5rZXlzKFNjaGVtYXMpLmluZGV4T2Yoc2NoZW1lKSA+PSAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoYHNjaGVtZSAnJHtzY2hlbWV9JyBhbHJlYWR5IHJlZ2lzdGVyZWRgKTtcblx0XHR9XG5cblx0XHRjb25zdCBoYW5kbGUgPSBFeHRIb3N0RG9jdW1lbnRDb250ZW50UHJvdmlkZXIuX2hhbmRsZVBvb2wrKztcblxuXHRcdHRoaXMuX2RvY3VtZW50Q29udGVudFByb3ZpZGVycy5zZXQoaGFuZGxlLCBwcm92aWRlcik7XG5cdFx0dGhpcy5fcHJveHkuJHJlZ2lzdGVyVGV4dENvbnRlbnRQcm92aWRlcihoYW5kbGUsIHNjaGVtZSk7XG5cblx0XHRsZXQgc3Vic2NyaXB0aW9uOiBJRGlzcG9zYWJsZSB8IHVuZGVmaW5lZDtcblx0XHRpZiAodHlwZW9mIHByb3ZpZGVyLm9uRGlkQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG5cblx0XHRcdGxldCBsYXN0RXZlbnQ6IFByb21pc2U8dm9pZD4gfCB1bmRlZmluZWQ7XG5cblx0XHRcdHN1YnNjcmlwdGlvbiA9IHByb3ZpZGVyLm9uRGlkQ2hhbmdlKGFzeW5jIHVyaSA9PiB7XG5cdFx0XHRcdGlmICh1cmkuc2NoZW1lICE9PSBzY2hlbWUpIHtcblx0XHRcdFx0XHR0aGlzLl9sb2dTZXJ2aWNlLndhcm4oYFByb3ZpZGVyIGZvciBzY2hlbWUgJyR7c2NoZW1lfScgaXMgZmlyaW5nIGV2ZW50IGZvciBzY2hlbWEgJyR7dXJpLnNjaGVtZX0nIHdoaWNoIHdpbGwgYmUgSUdOT1JFRGApO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIXRoaXMuX2RvY3VtZW50c0FuZEVkaXRvcnMuZ2V0RG9jdW1lbnQodXJpKSkge1xuXHRcdFx0XHRcdC8vIGlnbm9yZSBldmVudCBpZiBkb2N1bWVudCBpc24ndCBvcGVuXG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGxhc3RFdmVudCkge1xuXHRcdFx0XHRcdGF3YWl0IGxhc3RFdmVudDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHRoaXNFdmVudCA9IHRoaXMuJHByb3ZpZGVUZXh0RG9jdW1lbnRDb250ZW50KGhhbmRsZSwgdXJpKVxuXHRcdFx0XHRcdC50aGVuKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHRcdGlmICghdmFsdWUgJiYgdHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGNvbnN0IGRvY3VtZW50ID0gdGhpcy5fZG9jdW1lbnRzQW5kRWRpdG9ycy5nZXREb2N1bWVudCh1cmkpO1xuXHRcdFx0XHRcdFx0aWYgKCFkb2N1bWVudCkge1xuXHRcdFx0XHRcdFx0XHQvLyBkaXNwb3NlZCBpbiB0aGUgbWVhbnRpbWVcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBjcmVhdGUgbGluZXMgYW5kIGNvbXBhcmVcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmVzID0gc3BsaXRMaW5lcyh2YWx1ZSk7XG5cblx0XHRcdFx0XHRcdC8vIGJyb2FkY2FzdCBldmVudCB3aGVuIGNvbnRlbnQgY2hhbmdlZFxuXHRcdFx0XHRcdFx0aWYgKCFkb2N1bWVudC5lcXVhbExpbmVzKGxpbmVzKSkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdGhpcy5fcHJveHkuJG9uVmlydHVhbERvY3VtZW50Q2hhbmdlKHVyaSwgdmFsdWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0LmNhdGNoKG9uVW5leHBlY3RlZEVycm9yKVxuXHRcdFx0XHRcdC5maW5hbGx5KCgpID0+IHtcblx0XHRcdFx0XHRcdGlmIChsYXN0RXZlbnQgPT09IHRoaXNFdmVudCkge1xuXHRcdFx0XHRcdFx0XHRsYXN0RXZlbnQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0bGFzdEV2ZW50ID0gdGhpc0V2ZW50O1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiBuZXcgRGlzcG9zYWJsZSgoKSA9PiB7XG5cdFx0XHRpZiAodGhpcy5fZG9jdW1lbnRDb250ZW50UHJvdmlkZXJzLmRlbGV0ZShoYW5kbGUpKSB7XG5cdFx0XHRcdHRoaXMuX3Byb3h5LiR1bnJlZ2lzdGVyVGV4dENvbnRlbnRQcm92aWRlcihoYW5kbGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHN1YnNjcmlwdGlvbikge1xuXHRcdFx0XHRzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuXHRcdFx0XHRzdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQkcHJvdmlkZVRleHREb2N1bWVudENvbnRlbnQoaGFuZGxlOiBudW1iZXIsIHVyaTogVXJpQ29tcG9uZW50cyk6IFByb21pc2U8c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD4ge1xuXHRcdGNvbnN0IHByb3ZpZGVyID0gdGhpcy5fZG9jdW1lbnRDb250ZW50UHJvdmlkZXJzLmdldChoYW5kbGUpO1xuXHRcdGlmICghcHJvdmlkZXIpIHtcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIHVyaS1zY2hlbWU6ICR7dXJpLnNjaGVtZX1gKSk7XG5cdFx0fVxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvdmlkZXIucHJvdmlkZVRleHREb2N1bWVudENvbnRlbnQoVVJJLnJldml2ZSh1cmkpLCBDYW5jZWxsYXRpb25Ub2tlbi5Ob25lKSk7XG5cdH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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