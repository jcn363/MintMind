bb37f599853c56f660aaae648cbc8e72
/* istanbul ignore next */
function cov_1w7yj6b73l() {
  var path = "/home/user/Desktop/MintMind/src/vs/editor/test/browser/testCommand.ts";
  var hash = "debc53bb18861b1bb85826f3ea8db74a1eb3d26a";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/user/Desktop/MintMind/src/vs/editor/test/browser/testCommand.ts",
    statementMap: {
      "0": {
        start: {
          line: 10,
          column: 24
        },
        end: {
          line: 10,
          column: 45
        }
      },
      "1": {
        start: {
          line: 11,
          column: 33
        },
        end: {
          line: 11,
          column: 70
        }
      },
      "2": {
        start: {
          line: 12,
          column: 4
        },
        end: {
          line: 14,
          column: 5
        }
      },
      "3": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 66
        }
      },
      "4": {
        start: {
          line: 15,
          column: 18
        },
        end: {
          line: 15,
          column: 107
        }
      },
      "5": {
        start: {
          line: 16,
          column: 19
        },
        end: {
          line: 16,
          column: 90
        }
      },
      "6": {
        start: {
          line: 17,
          column: 22
        },
        end: {
          line: 17,
          column: 43
        }
      },
      "7": {
        start: {
          line: 18,
          column: 4
        },
        end: {
          line: 20,
          column: 5
        }
      },
      "8": {
        start: {
          line: 19,
          column: 8
        },
        end: {
          line: 19,
          column: 67
        }
      },
      "9": {
        start: {
          line: 21,
          column: 4
        },
        end: {
          line: 21,
          column: 50
        }
      },
      "10": {
        start: {
          line: 22,
          column: 20
        },
        end: {
          line: 22,
          column: 121
        }
      },
      "11": {
        start: {
          line: 22,
          column: 70
        },
        end: {
          line: 22,
          column: 120
        }
      },
      "12": {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 23,
          column: 47
        }
      },
      "13": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 24,
          column: 67
        }
      },
      "14": {
        start: {
          line: 25,
          column: 28
        },
        end: {
          line: 25,
          column: 52
        }
      },
      "15": {
        start: {
          line: 26,
          column: 4
        },
        end: {
          line: 26,
          column: 85
        }
      },
      "16": {
        start: {
          line: 27,
          column: 4
        },
        end: {
          line: 27,
          column: 26
        }
      },
      "17": {
        start: {
          line: 33,
          column: 23
        },
        end: {
          line: 33,
          column: 25
        }
      },
      "18": {
        start: {
          line: 34,
          column: 33
        },
        end: {
          line: 52,
          column: 5
        }
      },
      "19": {
        start: {
          line: 36,
          column: 12
        },
        end: {
          line: 40,
          column: 15
        }
      },
      "20": {
        start: {
          line: 43,
          column: 12
        },
        end: {
          line: 47,
          column: 15
        }
      },
      "21": {
        start: {
          line: 50,
          column: 12
        },
        end: {
          line: 50,
          column: 22
        }
      },
      "22": {
        start: {
          line: 53,
          column: 4
        },
        end: {
          line: 53,
          column: 59
        }
      },
      "23": {
        start: {
          line: 54,
          column: 4
        },
        end: {
          line: 54,
          column: 22
        }
      }
    },
    fnMap: {
      "0": {
        name: "testCommand",
        decl: {
          start: {
            line: 9,
            column: 16
          },
          end: {
            line: 9,
            column: 27
          }
        },
        loc: {
          start: {
            line: 9,
            column: 136
          },
          end: {
            line: 28,
            column: 1
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 22,
            column: 56
          },
          end: {
            line: 22,
            column: 57
          }
        },
        loc: {
          start: {
            line: 22,
            column: 70
          },
          end: {
            line: 22,
            column: 120
          }
        },
        line: 22
      },
      "2": {
        name: "getEditOperation",
        decl: {
          start: {
            line: 32,
            column: 16
          },
          end: {
            line: 32,
            column: 32
          }
        },
        loc: {
          start: {
            line: 32,
            column: 49
          },
          end: {
            line: 55,
            column: 1
          }
        },
        line: 32
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 35,
            column: 26
          },
          end: {
            line: 35,
            column: 27
          }
        },
        loc: {
          start: {
            line: 35,
            column: 69
          },
          end: {
            line: 41,
            column: 9
          }
        },
        line: 35
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 42,
            column: 33
          },
          end: {
            line: 42,
            column: 34
          }
        },
        loc: {
          start: {
            line: 42,
            column: 76
          },
          end: {
            line: 48,
            column: 9
          }
        },
        line: 42
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 49,
            column: 24
          },
          end: {
            line: 49,
            column: 25
          }
        },
        loc: {
          start: {
            line: 49,
            column: 39
          },
          end: {
            line: 51,
            column: 9
          }
        },
        line: 49
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 14,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 14,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 12
      },
      "1": {
        loc: {
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 18,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 18
      },
      "2": {
        loc: {
          start: {
            line: 35,
            column: 40
          },
          end: {
            line: 35,
            column: 64
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 35,
            column: 59
          },
          end: {
            line: 35,
            column: 64
          }
        }],
        line: 35
      },
      "3": {
        loc: {
          start: {
            line: 42,
            column: 47
          },
          end: {
            line: 42,
            column: 71
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 42,
            column: 66
          },
          end: {
            line: 42,
            column: 71
          }
        }],
        line: 42
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0],
      "3": [0]
    },
    inputSourceMap: {
      file: "/home/user/Desktop/MintMind/src/vs/editor/test/browser/testCommand.ts",
      mappings: "AAAA;;;gGAGgG;AAEhG,OAAO,MAAM,MAAM,QAAQ,CAAC;AAK5B,OAAO,EAAE,yBAAyB,EAAE,wBAAwB,EAAE,MAAM,qBAAqB,CAAC;AAC1F,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAElE,OAAO,EAAE,eAAe,EAAE,MAAM,mCAAmC,CAAC;AAGpE,MAAM,UAAU,WAAW,CAC1B,KAAe,EACf,UAAyB,EACzB,SAAoB,EACpB,cAA8E,EAC9E,aAAuB,EACvB,iBAA4B,EAC5B,iBAA2B,EAC3B,OAA4E;IAE5E,MAAM,WAAW,GAAG,IAAI,eAAe,EAAE,CAAC;IAC1C,MAAM,oBAAoB,GAAG,wBAAwB,CAAC,WAAW,CAAC,CAAC;IACnE,IAAI,OAAO,EAAE,CAAC;QACb,oBAAoB,CAAC,cAAc,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;IAC3D,CAAC;IACD,MAAM,KAAK,GAAG,WAAW,CAAC,GAAG,CAAC,oBAAoB,CAAC,oBAAoB,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC;IACxG,MAAM,MAAM,GAAG,WAAW,CAAC,GAAG,CAAC,yBAAyB,CAAC,oBAAoB,EAAE,KAAK,CAAC,CAAC,CAAC;IACvF,MAAM,SAAS,GAAG,MAAM,CAAC,YAAY,EAAG,CAAC;IAEzC,IAAI,iBAAiB,EAAE,CAAC;QACvB,KAAK,CAAC,YAAY,CAAC,iBAAiB,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC,CAAC;IAC5D,CAAC;IAED,SAAS,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAE9C,MAAM,OAAO,GAAG,oBAAoB,CAAC,cAAc,CAAC,CAAC,QAAQ,EAAE,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,SAAS,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;IACtH,SAAS,CAAC,cAAc,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAE3C,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,eAAe,EAAE,EAAE,aAAa,CAAC,CAAC;IAE/D,MAAM,eAAe,GAAG,SAAS,CAAC,YAAY,EAAE,CAAC;IACjD,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ,EAAE,EAAE,iBAAiB,CAAC,QAAQ,EAAE,CAAC,CAAC;IAEjF,WAAW,CAAC,OAAO,EAAE,CAAC;AACvB,CAAC;AAED;;GAEG;AACH,MAAM,UAAU,gBAAgB,CAAC,KAAiB,EAAE,OAAiB;IACpE,MAAM,UAAU,GAA2B,EAAE,CAAC;IAC9C,MAAM,oBAAoB,GAA0B;QACnD,gBAAgB,EAAE,CAAC,KAAa,EAAE,IAAY,EAAE,mBAA4B,KAAK,EAAE,EAAE;YACpF,UAAU,CAAC,IAAI,CAAC;gBACf,KAAK,EAAE,KAAK;gBACZ,IAAI,EAAE,IAAI;gBACV,gBAAgB,EAAE,gBAAgB;aAClC,CAAC,CAAC;QACJ,CAAC;QAED,uBAAuB,EAAE,CAAC,KAAa,EAAE,IAAY,EAAE,mBAA4B,KAAK,EAAE,EAAE;YAC3F,UAAU,CAAC,IAAI,CAAC;gBACf,KAAK,EAAE,KAAK;gBACZ,IAAI,EAAE,IAAI;gBACV,gBAAgB,EAAE,gBAAgB;aAClC,CAAC,CAAC;QACJ,CAAC;QAGD,cAAc,EAAE,CAAC,SAAqB,EAAE,EAAE;YACzC,OAAO,EAAE,CAAC;QACX,CAAC;KACD,CAAC;IACF,OAAO,CAAC,iBAAiB,CAAC,KAAK,EAAE,oBAAoB,CAAC,CAAC;IACvD,OAAO,UAAU,CAAC;AACnB,CAAC",
      names: [],
      sources: ["/home/user/Desktop/MintMind/src/vs/editor/test/browser/testCommand.ts"],
      sourcesContent: ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { IRange } from '../../common/core/range.js';\nimport { Selection, ISelection } from '../../common/core/selection.js';\nimport { ICommand, IEditOperationBuilder } from '../../common/editorCommon.js';\nimport { ITextModel } from '../../common/model.js';\nimport { instantiateTestCodeEditor, createCodeEditorServices } from './testCodeEditor.js';\nimport { instantiateTextModel } from '../common/testTextModel.js';\nimport { ServicesAccessor } from '../../../platform/instantiation/common/instantiation.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ISingleEditOperation } from '../../common/core/editOperation.js';\n\nexport function testCommand(\n\tlines: string[],\n\tlanguageId: string | null,\n\tselection: Selection,\n\tcommandFactory: (accessor: ServicesAccessor, selection: Selection) => ICommand,\n\texpectedLines: string[],\n\texpectedSelection: Selection,\n\tforceTokenization?: boolean,\n\tprepare?: (accessor: ServicesAccessor, disposables: DisposableStore) => void\n): void {\n\tconst disposables = new DisposableStore();\n\tconst instantiationService = createCodeEditorServices(disposables);\n\tif (prepare) {\n\t\tinstantiationService.invokeFunction(prepare, disposables);\n\t}\n\tconst model = disposables.add(instantiateTextModel(instantiationService, lines.join('\\n'), languageId));\n\tconst editor = disposables.add(instantiateTestCodeEditor(instantiationService, model));\n\tconst viewModel = editor.getViewModel()!;\n\n\tif (forceTokenization) {\n\t\tmodel.tokenization.forceTokenization(model.getLineCount());\n\t}\n\n\tviewModel.setSelections('tests', [selection]);\n\n\tconst command = instantiationService.invokeFunction((accessor) => commandFactory(accessor, viewModel.getSelection()));\n\tviewModel.executeCommand(command, 'tests');\n\n\tassert.deepStrictEqual(model.getLinesContent(), expectedLines);\n\n\tconst actualSelection = viewModel.getSelection();\n\tassert.deepStrictEqual(actualSelection.toString(), expectedSelection.toString());\n\n\tdisposables.dispose();\n}\n\n/**\n * Extract edit operations if command `command` were to execute on model `model`\n */\nexport function getEditOperation(model: ITextModel, command: ICommand): ISingleEditOperation[] {\n\tconst operations: ISingleEditOperation[] = [];\n\tconst editOperationBuilder: IEditOperationBuilder = {\n\t\taddEditOperation: (range: IRange, text: string, forceMoveMarkers: boolean = false) => {\n\t\t\toperations.push({\n\t\t\t\trange: range,\n\t\t\t\ttext: text,\n\t\t\t\tforceMoveMarkers: forceMoveMarkers\n\t\t\t});\n\t\t},\n\n\t\taddTrackedEditOperation: (range: IRange, text: string, forceMoveMarkers: boolean = false) => {\n\t\t\toperations.push({\n\t\t\t\trange: range,\n\t\t\t\ttext: text,\n\t\t\t\tforceMoveMarkers: forceMoveMarkers\n\t\t\t});\n\t\t},\n\n\n\t\ttrackSelection: (selection: ISelection) => {\n\t\t\treturn '';\n\t\t}\n\t};\n\tcommand.getEditOperations(model, editOperationBuilder);\n\treturn operations;\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "debc53bb18861b1bb85826f3ea8db74a1eb3d26a"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1w7yj6b73l = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1w7yj6b73l();
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import assert from 'assert';
import { instantiateTestCodeEditor, createCodeEditorServices } from './testCodeEditor.js';
import { instantiateTextModel } from '../common/testTextModel.js';
import { DisposableStore } from '../../../base/common/lifecycle.js';
export function testCommand(lines, languageId, selection, commandFactory, expectedLines, expectedSelection, forceTokenization, prepare) {
  /* istanbul ignore next */
  cov_1w7yj6b73l().f[0]++;
  const disposables =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[0]++, new DisposableStore());
  const instantiationService =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[1]++, createCodeEditorServices(disposables));
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[2]++;
  if (prepare) {
    /* istanbul ignore next */
    cov_1w7yj6b73l().b[0][0]++;
    cov_1w7yj6b73l().s[3]++;
    instantiationService.invokeFunction(prepare, disposables);
  } else
  /* istanbul ignore next */
  {
    cov_1w7yj6b73l().b[0][1]++;
  }
  const model =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[4]++, disposables.add(instantiateTextModel(instantiationService, lines.join('\n'), languageId)));
  const editor =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[5]++, disposables.add(instantiateTestCodeEditor(instantiationService, model)));
  const viewModel =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[6]++, editor.getViewModel());
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[7]++;
  if (forceTokenization) {
    /* istanbul ignore next */
    cov_1w7yj6b73l().b[1][0]++;
    cov_1w7yj6b73l().s[8]++;
    model.tokenization.forceTokenization(model.getLineCount());
  } else
  /* istanbul ignore next */
  {
    cov_1w7yj6b73l().b[1][1]++;
  }
  cov_1w7yj6b73l().s[9]++;
  viewModel.setSelections('tests', [selection]);
  const command =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[10]++, instantiationService.invokeFunction(accessor => {
    /* istanbul ignore next */
    cov_1w7yj6b73l().f[1]++;
    cov_1w7yj6b73l().s[11]++;
    return commandFactory(accessor, viewModel.getSelection());
  }));
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[12]++;
  viewModel.executeCommand(command, 'tests');
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[13]++;
  assert.deepStrictEqual(model.getLinesContent(), expectedLines);
  const actualSelection =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[14]++, viewModel.getSelection());
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[15]++;
  assert.deepStrictEqual(actualSelection.toString(), expectedSelection.toString());
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[16]++;
  disposables.dispose();
}
/**
 * Extract edit operations if command `command` were to execute on model `model`
 */
export function getEditOperation(model, command) {
  /* istanbul ignore next */
  cov_1w7yj6b73l().f[2]++;
  const operations =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[17]++, []);
  const editOperationBuilder =
  /* istanbul ignore next */
  (cov_1w7yj6b73l().s[18]++, {
    addEditOperation: (range, text, forceMoveMarkers =
    /* istanbul ignore next */
    (cov_1w7yj6b73l().b[2][0]++, false)) => {
      /* istanbul ignore next */
      cov_1w7yj6b73l().f[3]++;
      cov_1w7yj6b73l().s[19]++;
      operations.push({
        range: range,
        text: text,
        forceMoveMarkers: forceMoveMarkers
      });
    },
    addTrackedEditOperation: (range, text, forceMoveMarkers =
    /* istanbul ignore next */
    (cov_1w7yj6b73l().b[3][0]++, false)) => {
      /* istanbul ignore next */
      cov_1w7yj6b73l().f[4]++;
      cov_1w7yj6b73l().s[20]++;
      operations.push({
        range: range,
        text: text,
        forceMoveMarkers: forceMoveMarkers
      });
    },
    trackSelection: selection => {
      /* istanbul ignore next */
      cov_1w7yj6b73l().f[5]++;
      cov_1w7yj6b73l().s[21]++;
      return '';
    }
  });
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[22]++;
  command.getEditOperations(model, editOperationBuilder);
  /* istanbul ignore next */
  cov_1w7yj6b73l().s[23]++;
  return operations;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXc3eWo2YjczbCIsImFjdHVhbENvdmVyYWdlIiwiYXNzZXJ0IiwiaW5zdGFudGlhdGVUZXN0Q29kZUVkaXRvciIsImNyZWF0ZUNvZGVFZGl0b3JTZXJ2aWNlcyIsImluc3RhbnRpYXRlVGV4dE1vZGVsIiwiRGlzcG9zYWJsZVN0b3JlIiwidGVzdENvbW1hbmQiLCJsaW5lcyIsImxhbmd1YWdlSWQiLCJzZWxlY3Rpb24iLCJjb21tYW5kRmFjdG9yeSIsImV4cGVjdGVkTGluZXMiLCJleHBlY3RlZFNlbGVjdGlvbiIsImZvcmNlVG9rZW5pemF0aW9uIiwicHJlcGFyZSIsImYiLCJkaXNwb3NhYmxlcyIsInMiLCJpbnN0YW50aWF0aW9uU2VydmljZSIsImIiLCJpbnZva2VGdW5jdGlvbiIsIm1vZGVsIiwiYWRkIiwiam9pbiIsImVkaXRvciIsInZpZXdNb2RlbCIsImdldFZpZXdNb2RlbCIsInRva2VuaXphdGlvbiIsImdldExpbmVDb3VudCIsInNldFNlbGVjdGlvbnMiLCJjb21tYW5kIiwiYWNjZXNzb3IiLCJnZXRTZWxlY3Rpb24iLCJleGVjdXRlQ29tbWFuZCIsImRlZXBTdHJpY3RFcXVhbCIsImdldExpbmVzQ29udGVudCIsImFjdHVhbFNlbGVjdGlvbiIsInRvU3RyaW5nIiwiZGlzcG9zZSIsImdldEVkaXRPcGVyYXRpb24iLCJvcGVyYXRpb25zIiwiZWRpdE9wZXJhdGlvbkJ1aWxkZXIiLCJhZGRFZGl0T3BlcmF0aW9uIiwicmFuZ2UiLCJ0ZXh0IiwiZm9yY2VNb3ZlTWFya2VycyIsInB1c2giLCJhZGRUcmFja2VkRWRpdE9wZXJhdGlvbiIsInRyYWNrU2VsZWN0aW9uIiwiZ2V0RWRpdE9wZXJhdGlvbnMiXSwic291cmNlcyI6WyIvaG9tZS91c2VyL0Rlc2t0b3AvTWludE1pbmQvc3JjL3ZzL2VkaXRvci90ZXN0L2Jyb3dzZXIvdGVzdENvbW1hbmQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmltcG9ydCBhc3NlcnQgZnJvbSAnYXNzZXJ0JztcbmltcG9ydCB7IElSYW5nZSB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb3JlL3JhbmdlLmpzJztcbmltcG9ydCB7IFNlbGVjdGlvbiwgSVNlbGVjdGlvbiB9IGZyb20gJy4uLy4uL2NvbW1vbi9jb3JlL3NlbGVjdGlvbi5qcyc7XG5pbXBvcnQgeyBJQ29tbWFuZCwgSUVkaXRPcGVyYXRpb25CdWlsZGVyIH0gZnJvbSAnLi4vLi4vY29tbW9uL2VkaXRvckNvbW1vbi5qcyc7XG5pbXBvcnQgeyBJVGV4dE1vZGVsIH0gZnJvbSAnLi4vLi4vY29tbW9uL21vZGVsLmpzJztcbmltcG9ydCB7IGluc3RhbnRpYXRlVGVzdENvZGVFZGl0b3IsIGNyZWF0ZUNvZGVFZGl0b3JTZXJ2aWNlcyB9IGZyb20gJy4vdGVzdENvZGVFZGl0b3IuanMnO1xuaW1wb3J0IHsgaW5zdGFudGlhdGVUZXh0TW9kZWwgfSBmcm9tICcuLi9jb21tb24vdGVzdFRleHRNb2RlbC5qcyc7XG5pbXBvcnQgeyBTZXJ2aWNlc0FjY2Vzc29yIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vaW5zdGFudGlhdGlvbi9jb21tb24vaW5zdGFudGlhdGlvbi5qcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlU3RvcmUgfSBmcm9tICcuLi8uLi8uLi9iYXNlL2NvbW1vbi9saWZlY3ljbGUuanMnO1xuaW1wb3J0IHsgSVNpbmdsZUVkaXRPcGVyYXRpb24gfSBmcm9tICcuLi8uLi9jb21tb24vY29yZS9lZGl0T3BlcmF0aW9uLmpzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHRlc3RDb21tYW5kKFxuXHRsaW5lczogc3RyaW5nW10sXG5cdGxhbmd1YWdlSWQ6IHN0cmluZyB8IG51bGwsXG5cdHNlbGVjdGlvbjogU2VsZWN0aW9uLFxuXHRjb21tYW5kRmFjdG9yeTogKGFjY2Vzc29yOiBTZXJ2aWNlc0FjY2Vzc29yLCBzZWxlY3Rpb246IFNlbGVjdGlvbikgPT4gSUNvbW1hbmQsXG5cdGV4cGVjdGVkTGluZXM6IHN0cmluZ1tdLFxuXHRleHBlY3RlZFNlbGVjdGlvbjogU2VsZWN0aW9uLFxuXHRmb3JjZVRva2VuaXphdGlvbj86IGJvb2xlYW4sXG5cdHByZXBhcmU/OiAoYWNjZXNzb3I6IFNlcnZpY2VzQWNjZXNzb3IsIGRpc3Bvc2FibGVzOiBEaXNwb3NhYmxlU3RvcmUpID0+IHZvaWRcbik6IHZvaWQge1xuXHRjb25zdCBkaXNwb3NhYmxlcyA9IG5ldyBEaXNwb3NhYmxlU3RvcmUoKTtcblx0Y29uc3QgaW5zdGFudGlhdGlvblNlcnZpY2UgPSBjcmVhdGVDb2RlRWRpdG9yU2VydmljZXMoZGlzcG9zYWJsZXMpO1xuXHRpZiAocHJlcGFyZSkge1xuXHRcdGluc3RhbnRpYXRpb25TZXJ2aWNlLmludm9rZUZ1bmN0aW9uKHByZXBhcmUsIGRpc3Bvc2FibGVzKTtcblx0fVxuXHRjb25zdCBtb2RlbCA9IGRpc3Bvc2FibGVzLmFkZChpbnN0YW50aWF0ZVRleHRNb2RlbChpbnN0YW50aWF0aW9uU2VydmljZSwgbGluZXMuam9pbignXFxuJyksIGxhbmd1YWdlSWQpKTtcblx0Y29uc3QgZWRpdG9yID0gZGlzcG9zYWJsZXMuYWRkKGluc3RhbnRpYXRlVGVzdENvZGVFZGl0b3IoaW5zdGFudGlhdGlvblNlcnZpY2UsIG1vZGVsKSk7XG5cdGNvbnN0IHZpZXdNb2RlbCA9IGVkaXRvci5nZXRWaWV3TW9kZWwoKSE7XG5cblx0aWYgKGZvcmNlVG9rZW5pemF0aW9uKSB7XG5cdFx0bW9kZWwudG9rZW5pemF0aW9uLmZvcmNlVG9rZW5pemF0aW9uKG1vZGVsLmdldExpbmVDb3VudCgpKTtcblx0fVxuXG5cdHZpZXdNb2RlbC5zZXRTZWxlY3Rpb25zKCd0ZXN0cycsIFtzZWxlY3Rpb25dKTtcblxuXHRjb25zdCBjb21tYW5kID0gaW5zdGFudGlhdGlvblNlcnZpY2UuaW52b2tlRnVuY3Rpb24oKGFjY2Vzc29yKSA9PiBjb21tYW5kRmFjdG9yeShhY2Nlc3Nvciwgdmlld01vZGVsLmdldFNlbGVjdGlvbigpKSk7XG5cdHZpZXdNb2RlbC5leGVjdXRlQ29tbWFuZChjb21tYW5kLCAndGVzdHMnKTtcblxuXHRhc3NlcnQuZGVlcFN0cmljdEVxdWFsKG1vZGVsLmdldExpbmVzQ29udGVudCgpLCBleHBlY3RlZExpbmVzKTtcblxuXHRjb25zdCBhY3R1YWxTZWxlY3Rpb24gPSB2aWV3TW9kZWwuZ2V0U2VsZWN0aW9uKCk7XG5cdGFzc2VydC5kZWVwU3RyaWN0RXF1YWwoYWN0dWFsU2VsZWN0aW9uLnRvU3RyaW5nKCksIGV4cGVjdGVkU2VsZWN0aW9uLnRvU3RyaW5nKCkpO1xuXG5cdGRpc3Bvc2FibGVzLmRpc3Bvc2UoKTtcbn1cblxuLyoqXG4gKiBFeHRyYWN0IGVkaXQgb3BlcmF0aW9ucyBpZiBjb21tYW5kIGBjb21tYW5kYCB3ZXJlIHRvIGV4ZWN1dGUgb24gbW9kZWwgYG1vZGVsYFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RWRpdE9wZXJhdGlvbihtb2RlbDogSVRleHRNb2RlbCwgY29tbWFuZDogSUNvbW1hbmQpOiBJU2luZ2xlRWRpdE9wZXJhdGlvbltdIHtcblx0Y29uc3Qgb3BlcmF0aW9uczogSVNpbmdsZUVkaXRPcGVyYXRpb25bXSA9IFtdO1xuXHRjb25zdCBlZGl0T3BlcmF0aW9uQnVpbGRlcjogSUVkaXRPcGVyYXRpb25CdWlsZGVyID0ge1xuXHRcdGFkZEVkaXRPcGVyYXRpb246IChyYW5nZTogSVJhbmdlLCB0ZXh0OiBzdHJpbmcsIGZvcmNlTW92ZU1hcmtlcnM6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuXHRcdFx0b3BlcmF0aW9ucy5wdXNoKHtcblx0XHRcdFx0cmFuZ2U6IHJhbmdlLFxuXHRcdFx0XHR0ZXh0OiB0ZXh0LFxuXHRcdFx0XHRmb3JjZU1vdmVNYXJrZXJzOiBmb3JjZU1vdmVNYXJrZXJzXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0YWRkVHJhY2tlZEVkaXRPcGVyYXRpb246IChyYW5nZTogSVJhbmdlLCB0ZXh0OiBzdHJpbmcsIGZvcmNlTW92ZU1hcmtlcnM6IGJvb2xlYW4gPSBmYWxzZSkgPT4ge1xuXHRcdFx0b3BlcmF0aW9ucy5wdXNoKHtcblx0XHRcdFx0cmFuZ2U6IHJhbmdlLFxuXHRcdFx0XHR0ZXh0OiB0ZXh0LFxuXHRcdFx0XHRmb3JjZU1vdmVNYXJrZXJzOiBmb3JjZU1vdmVNYXJrZXJzXG5cdFx0XHR9KTtcblx0XHR9LFxuXG5cblx0XHR0cmFja1NlbGVjdGlvbjogKHNlbGVjdGlvbjogSVNlbGVjdGlvbikgPT4ge1xuXHRcdFx0cmV0dXJuICcnO1xuXHRcdH1cblx0fTtcblx0Y29tbWFuZC5nZXRFZGl0T3BlcmF0aW9ucyhtb2RlbCwgZWRpdE9wZXJhdGlvbkJ1aWxkZXIpO1xuXHRyZXR1cm4gb3BlcmF0aW9ucztcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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