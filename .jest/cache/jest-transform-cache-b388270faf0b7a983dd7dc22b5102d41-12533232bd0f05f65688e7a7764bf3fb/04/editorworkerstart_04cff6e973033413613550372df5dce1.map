{"version":3,"names":["cov_2lkw762nk4","actualCoverage","initialize","EditorWorker","EditorWorkerHost","start","createClient","f","client","webWorkerServer","s","workerServer","editorWorkerHost","getChannel","host","Proxy","get","target","prop","receiver","b","undefined","Error","args","$fhr","ctx","getMirrorModels","requestHandler","getModels"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/editor.worker.start.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { initialize } from '../base/common/worker/webWorkerBootstrap.js';\nimport { EditorWorker, IWorkerContext } from './common/services/editorWebWorker.js';\nimport { EditorWorkerHost } from './common/services/editorWorkerHost.js';\n\n/**\n * Used by `monaco-editor` to hook up web worker rpc.\n * @skipMangle\n * @internal\n */\nexport function start<THost extends object, TClient extends object>(createClient: (ctx: IWorkerContext<THost>) => TClient): TClient {\n\tlet client: TClient | undefined;\n\tconst webWorkerServer = initialize((workerServer) => {\n\t\tconst editorWorkerHost = EditorWorkerHost.getChannel(workerServer);\n\n\t\tconst host = new Proxy({}, {\n\t\t\tget(target, prop, receiver) {\n\t\t\t\tif (prop === 'then') {\n\t\t\t\t\t// Don't forward the call when the proxy is returned in an async function and the runtime tries to .then it.\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\tif (typeof prop !== 'string') {\n\t\t\t\t\tthrow new Error(`Not supported`);\n\t\t\t\t}\n\t\t\t\treturn (...args: unknown[]) => {\n\t\t\t\t\treturn editorWorkerHost.$fhr(prop, args);\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tconst ctx: IWorkerContext<THost> = {\n\t\t\thost: host as THost,\n\t\t\tgetMirrorModels: () => {\n\t\t\t\treturn webWorkerServer.requestHandler.getModels();\n\t\t\t}\n\t\t};\n\n\t\tclient = createClient(ctx);\n\n\t\treturn new EditorWorker(client);\n\t});\n\n\treturn client!;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAiBE;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAjBF;;;;AAKA,SAASE,UAAU,QAAQ,6CAA6C;AACxE,SAASC,YAAY,QAAwB,sCAAsC;AACnF,SAASC,gBAAgB,QAAQ,uCAAuC;AAExE;;;;;AAKA,OAAM,SAAUC,KAAKA,CAA+CC,YAAqD;EAAA;EAAAN,cAAA,GAAAO,CAAA;EACxH,IAAIC,MAA2B;EAC/B,MAAMC,eAAe;EAAA;EAAA,CAAAT,cAAA,GAAAU,CAAA,OAAGR,UAAU,CAAES,YAAY,IAAI;IAAA;IAAAX,cAAA,GAAAO,CAAA;IACnD,MAAMK,gBAAgB;IAAA;IAAA,CAAAZ,cAAA,GAAAU,CAAA,OAAGN,gBAAgB,CAACS,UAAU,CAACF,YAAY,CAAC;IAElE,MAAMG,IAAI;IAAA;IAAA,CAAAd,cAAA,GAAAU,CAAA,OAAG,IAAIK,KAAK,CAAC,EAAE,EAAE;MAC1BC,GAAGA,CAACC,MAAM,EAAEC,IAAI,EAAEC,QAAQ;QAAA;QAAAnB,cAAA,GAAAO,CAAA;QAAAP,cAAA,GAAAU,CAAA;QACzB,IAAIQ,IAAI,KAAK,MAAM,EAAE;UAAA;UAAAlB,cAAA,GAAAoB,CAAA;UAAApB,cAAA,GAAAU,CAAA;UACpB;UACA,OAAOW,SAAS;QACjB,CAAC;QAAA;QAAA;UAAArB,cAAA,GAAAoB,CAAA;QAAA;QAAApB,cAAA,GAAAU,CAAA;QACD,IAAI,OAAOQ,IAAI,KAAK,QAAQ,EAAE;UAAA;UAAAlB,cAAA,GAAAoB,CAAA;UAAApB,cAAA,GAAAU,CAAA;UAC7B,MAAM,IAAIY,KAAK,CAAC,eAAe,CAAC;QACjC,CAAC;QAAA;QAAA;UAAAtB,cAAA,GAAAoB,CAAA;QAAA;QAAApB,cAAA,GAAAU,CAAA;QACD,OAAO,CAAC,GAAGa,IAAe,KAAI;UAAA;UAAAvB,cAAA,GAAAO,CAAA;UAAAP,cAAA,GAAAU,CAAA;UAC7B,OAAOE,gBAAgB,CAACY,IAAI,CAACN,IAAI,EAAEK,IAAI,CAAC;QACzC,CAAC;MACF;KACA,CAAC;IAEF,MAAME,GAAG;IAAA;IAAA,CAAAzB,cAAA,GAAAU,CAAA,OAA0B;MAClCI,IAAI,EAAEA,IAAa;MACnBY,eAAe,EAAEA,CAAA,KAAK;QAAA;QAAA1B,cAAA,GAAAO,CAAA;QAAAP,cAAA,GAAAU,CAAA;QACrB,OAAOD,eAAe,CAACkB,cAAc,CAACC,SAAS,EAAE;MAClD;KACA;IAAC;IAAA5B,cAAA,GAAAU,CAAA;IAEFF,MAAM,GAAGF,YAAY,CAACmB,GAAG,CAAC;IAAC;IAAAzB,cAAA,GAAAU,CAAA;IAE3B,OAAO,IAAIP,YAAY,CAACK,MAAM,CAAC;EAChC,CAAC,CAAC;EAAC;EAAAR,cAAA,GAAAU,CAAA;EAEH,OAAOF,MAAO;AACf","ignoreList":[]}