{"version":3,"names":["cov_59gpygwje","actualCoverage","isHTMLElement","isManagedHoverTooltipMarkdownString","CancellationTokenSource","isMarkdownString","isFunction","isString","localize","ManagedHoverWidget","hoverDelegate","target","fadeInAnimation","_hoverWidget","_cancellationTokenSource","constructor","f","s","onDidHide","b","dispose","undefined","update","content","focus","options","isDisposed","resolvedContent","token","managedContent","markdown","then","markdownNotSupportedFallback","element","Promise","show","isCancellationRequested","oldHoverWidget","hasContent","hoverOptions","actions","linkHandler","trapFocus","appearance","showPointer","placement","skipFadeInAnimation","showHoverHint","position","hoverPosition","showHover","value"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/hover/browser/updatableHoverWidget.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isHTMLElement } from '../../../base/browser/dom.js';\nimport { isManagedHoverTooltipMarkdownString, type IHoverWidget, type IManagedHoverContent, type IManagedHoverOptions } from '../../../base/browser/ui/hover/hover.js';\nimport type { IHoverDelegate, IHoverDelegateOptions, IHoverDelegateTarget } from '../../../base/browser/ui/hover/hoverDelegate.js';\nimport { HoverPosition } from '../../../base/browser/ui/hover/hoverWidget.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { isMarkdownString, type IMarkdownString } from '../../../base/common/htmlContent.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { isFunction, isString } from '../../../base/common/types.js';\nimport { localize } from '../../../nls.js';\n\ntype IManagedHoverResolvedContent = IMarkdownString | string | HTMLElement | undefined;\n\nexport class ManagedHoverWidget implements IDisposable {\n\n\tprivate _hoverWidget: IHoverWidget | undefined;\n\tprivate _cancellationTokenSource: CancellationTokenSource | undefined;\n\n\tconstructor(private hoverDelegate: IHoverDelegate, private target: IHoverDelegateTarget | HTMLElement, private fadeInAnimation: boolean) { }\n\n\tonDidHide() {\n\t\tif (this._cancellationTokenSource) {\n\t\t\t// there's an computation ongoing, cancel it\n\t\t\tthis._cancellationTokenSource.dispose(true);\n\t\t\tthis._cancellationTokenSource = undefined;\n\t\t}\n\t}\n\n\tasync update(content: IManagedHoverContent, focus?: boolean, options?: IManagedHoverOptions): Promise<void> {\n\t\tif (this._cancellationTokenSource) {\n\t\t\t// there's an computation ongoing, cancel it\n\t\t\tthis._cancellationTokenSource.dispose(true);\n\t\t\tthis._cancellationTokenSource = undefined;\n\t\t}\n\t\tif (this.isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet resolvedContent: string | HTMLElement | IMarkdownString | undefined;\n\t\tif (isString(content) || isHTMLElement(content) || content === undefined) {\n\t\t\tresolvedContent = content;\n\t\t} else {\n\t\t\t// compute the content, potentially long-running\n\n\t\t\tthis._cancellationTokenSource = new CancellationTokenSource();\n\t\t\tconst token = this._cancellationTokenSource.token;\n\n\t\t\tlet managedContent;\n\t\t\tif (isManagedHoverTooltipMarkdownString(content)) {\n\t\t\t\tif (isFunction(content.markdown)) {\n\t\t\t\t\tmanagedContent = content.markdown(token).then(resolvedContent => resolvedContent ?? content.markdownNotSupportedFallback);\n\t\t\t\t} else {\n\t\t\t\t\tmanagedContent = content.markdown ?? content.markdownNotSupportedFallback;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmanagedContent = content.element(token);\n\t\t\t}\n\n\t\t\t// compute the content\n\t\t\tif (managedContent instanceof Promise) {\n\n\t\t\t\t// show 'Loading' if no hover is up yet\n\t\t\t\tif (!this._hoverWidget) {\n\t\t\t\t\tthis.show(localize('iconLabel.loading', \"Loading...\"), focus, options);\n\t\t\t\t}\n\n\t\t\t\tresolvedContent = await managedContent;\n\t\t\t} else {\n\t\t\t\tresolvedContent = managedContent;\n\t\t\t}\n\n\t\t\tif (this.isDisposed || token.isCancellationRequested) {\n\t\t\t\t// either the widget has been closed in the meantime\n\t\t\t\t// or there has been a new call to `update`\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.show(resolvedContent, focus, options);\n\t}\n\n\tprivate show(content: IManagedHoverResolvedContent, focus?: boolean, options?: IManagedHoverOptions): void {\n\t\tconst oldHoverWidget = this._hoverWidget;\n\n\t\tif (this.hasContent(content)) {\n\t\t\tconst hoverOptions: IHoverDelegateOptions = {\n\t\t\t\tcontent,\n\t\t\t\ttarget: this.target,\n\t\t\t\tactions: options?.actions,\n\t\t\t\tlinkHandler: options?.linkHandler,\n\t\t\t\ttrapFocus: options?.trapFocus,\n\t\t\t\tappearance: {\n\t\t\t\t\tshowPointer: this.hoverDelegate.placement === 'element',\n\t\t\t\t\tskipFadeInAnimation: !this.fadeInAnimation || !!oldHoverWidget, // do not fade in if the hover is already showing\n\t\t\t\t\tshowHoverHint: options?.appearance?.showHoverHint,\n\t\t\t\t},\n\t\t\t\tposition: {\n\t\t\t\t\thoverPosition: HoverPosition.BELOW,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tthis._hoverWidget = this.hoverDelegate.showHover(hoverOptions, focus);\n\t\t}\n\t\toldHoverWidget?.dispose();\n\t}\n\n\tprivate hasContent(content: IManagedHoverResolvedContent): content is NonNullable<IManagedHoverResolvedContent> {\n\t\tif (!content) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isMarkdownString(content)) {\n\t\t\treturn !!content.value;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tget isDisposed() {\n\t\treturn this._hoverWidget?.isDisposed;\n\t}\n\n\tdispose(): void {\n\t\tthis._hoverWidget?.dispose();\n\t\tthis._cancellationTokenSource?.dispose(true);\n\t\tthis._cancellationTokenSource = undefined;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}