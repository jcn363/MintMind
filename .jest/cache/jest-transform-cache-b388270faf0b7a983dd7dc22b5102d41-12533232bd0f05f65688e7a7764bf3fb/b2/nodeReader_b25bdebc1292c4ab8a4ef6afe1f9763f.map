{"version":3,"names":["cov_plj19plrf","actualCoverage","lengthAdd","lengthZero","lengthLessThan","NodeReader","nextNodes","offsets","idxs","lastOffset","s","constructor","node","f","readLongestNodeAt","offset","predicate","b","Error","curNode","lastOrUndefined","undefined","curNodeOffset","length","nextNodeAfterCurrent","nextChildIdx","getNextChildIdx","push","getChild","currentOffset","currentNode","pop","parent","curIdx","childrenLength","arr"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/nodeReader.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AstNode } from './ast.js';\nimport { lengthAdd, lengthZero, Length, lengthLessThan } from './length.js';\n\n/**\n * Allows to efficiently find a longest child at a given offset in a fixed node.\n * The requested offsets must increase monotonously.\n*/\nexport class NodeReader {\n\tprivate readonly nextNodes: AstNode[];\n\tprivate readonly offsets: Length[];\n\tprivate readonly idxs: number[];\n\tprivate lastOffset: Length = lengthZero;\n\n\tconstructor(node: AstNode) {\n\t\tthis.nextNodes = [node];\n\t\tthis.offsets = [lengthZero];\n\t\tthis.idxs = [];\n\t}\n\n\t/**\n\t * Returns the longest node at `offset` that satisfies the predicate.\n\t * @param offset must be greater than or equal to the last offset this method has been called with!\n\t*/\n\treadLongestNodeAt(offset: Length, predicate: (node: AstNode) => boolean): AstNode | undefined {\n\t\tif (lengthLessThan(offset, this.lastOffset)) {\n\t\t\tthrow new Error('Invalid offset');\n\t\t}\n\t\tthis.lastOffset = offset;\n\n\t\t// Find the longest node of all those that are closest to the current offset.\n\t\twhile (true) {\n\t\t\tconst curNode = lastOrUndefined(this.nextNodes);\n\n\t\t\tif (!curNode) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst curNodeOffset = lastOrUndefined(this.offsets)!;\n\n\t\t\tif (lengthLessThan(offset, curNodeOffset)) {\n\t\t\t\t// The next best node is not here yet.\n\t\t\t\t// The reader must advance before a cached node is hit.\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tif (lengthLessThan(curNodeOffset, offset)) {\n\t\t\t\t// The reader is ahead of the current node.\n\t\t\t\tif (lengthAdd(curNodeOffset, curNode.length) <= offset) {\n\t\t\t\t\t// The reader is after the end of the current node.\n\t\t\t\t\tthis.nextNodeAfterCurrent();\n\t\t\t\t} else {\n\t\t\t\t\t// The reader is somewhere in the current node.\n\t\t\t\t\tconst nextChildIdx = getNextChildIdx(curNode);\n\t\t\t\t\tif (nextChildIdx !== -1) {\n\t\t\t\t\t\t// Go to the first child and repeat.\n\t\t\t\t\t\tthis.nextNodes.push(curNode.getChild(nextChildIdx)!);\n\t\t\t\t\t\tthis.offsets.push(curNodeOffset);\n\t\t\t\t\t\tthis.idxs.push(nextChildIdx);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We don't have children\n\t\t\t\t\t\tthis.nextNodeAfterCurrent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// readerOffsetBeforeChange === curNodeOffset\n\t\t\t\tif (predicate(curNode)) {\n\t\t\t\t\tthis.nextNodeAfterCurrent();\n\t\t\t\t\treturn curNode;\n\t\t\t\t} else {\n\t\t\t\t\tconst nextChildIdx = getNextChildIdx(curNode);\n\t\t\t\t\t// look for shorter node\n\t\t\t\t\tif (nextChildIdx === -1) {\n\t\t\t\t\t\t// There is no shorter node.\n\t\t\t\t\t\tthis.nextNodeAfterCurrent();\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Descend into first child & repeat.\n\t\t\t\t\t\tthis.nextNodes.push(curNode.getChild(nextChildIdx)!);\n\t\t\t\t\t\tthis.offsets.push(curNodeOffset);\n\t\t\t\t\t\tthis.idxs.push(nextChildIdx);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Navigates to the longest node that continues after the current node.\n\tprivate nextNodeAfterCurrent(): void {\n\t\twhile (true) {\n\t\t\tconst currentOffset = lastOrUndefined(this.offsets);\n\t\t\tconst currentNode = lastOrUndefined(this.nextNodes);\n\t\t\tthis.nextNodes.pop();\n\t\t\tthis.offsets.pop();\n\n\t\t\tif (this.idxs.length === 0) {\n\t\t\t\t// We just popped the root node, there is no next node.\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Parent is not undefined, because idxs is not empty\n\t\t\tconst parent = lastOrUndefined(this.nextNodes)!;\n\t\t\tconst nextChildIdx = getNextChildIdx(parent, this.idxs[this.idxs.length - 1]);\n\n\t\t\tif (nextChildIdx !== -1) {\n\t\t\t\tthis.nextNodes.push(parent.getChild(nextChildIdx)!);\n\t\t\t\tthis.offsets.push(lengthAdd(currentOffset!, currentNode!.length));\n\t\t\t\tthis.idxs[this.idxs.length - 1] = nextChildIdx;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tthis.idxs.pop();\n\t\t\t}\n\t\t\t// We fully consumed the parent.\n\t\t\t// Current node is now parent, so call nextNodeAfterCurrent again\n\t\t}\n\t}\n}\n\nfunction getNextChildIdx(node: AstNode, curIdx: number = -1): number | -1 {\n\twhile (true) {\n\t\tcurIdx++;\n\t\tif (curIdx >= node.childrenLength) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (node.getChild(curIdx)) {\n\t\t\treturn curIdx;\n\t\t}\n\t}\n}\n\nfunction lastOrUndefined<T>(arr: readonly T[]): T | undefined {\n\treturn arr.length > 0 ? arr[arr.length - 1] : undefined;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}