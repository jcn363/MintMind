{"version":3,"names":["cov_12aecel3gi","actualCoverage","DeferredPromise","RunOnceScheduler","DisposableStore","waitForIdle","onData","idleDurationMs","f","store","s","deferred","scheduler","add","complete","schedule","p","finally","dispose","detectsCommonPromptPattern","cursorLine","trim","length","b","detected","reason","test","PS_CONFIRM_RE","YN_PAIRED_RE","YN_AFTER_PUNCT_RE","CONFIRM_Y_RE","LINE_ENDS_WITH_COLON_RE","END","detectsInputRequiredPattern","waitForIdleWithPromptHeuristics","instance","idlePollIntervalMs","extendedTimeoutMs","xterm","xtermReadyPromise","startTime","Date","now","content","buffer","raw","active","line","getLine","baseY","cursorY","translateToString","promptResult","error","Math","min","trackIdleOnPrompt","idleOnPrompt","state","e","matches","matchAll","match","groups","type","cancel"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/chatAgentTools/browser/executeStrategy/executeStrategy.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DeferredPromise, RunOnceScheduler } from '../../../../../../base/common/async.js';\nimport type { CancellationToken } from '../../../../../../base/common/cancellation.js';\nimport type { Event } from '../../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport type { ITerminalInstance } from '../../../../terminal/browser/terminal.js';\nimport type { IMarker as IXtermMarker } from '@xterm/xterm';\n\nexport interface ITerminalExecuteStrategy {\n\treadonly type: 'rich' | 'basic' | 'none';\n\t/**\n\t * Executes a command line and gets a result designed to be passed directly to an LLM. The\n\t * result will include information about the exit code.\n\t * @param commandLine The command line to execute\n\t * @param token Cancellation token\n\t * @param commandId Optional predefined command ID to link the command\n\t */\n\texecute(commandLine: string, token: CancellationToken, commandId?: string): Promise<ITerminalExecuteStrategyResult>;\n\n\treadonly onDidCreateStartMarker: Event<IXtermMarker | undefined>;\n}\n\nexport interface ITerminalExecuteStrategyResult {\n\toutput: string | undefined;\n\tadditionalInformation?: string;\n\texitCode?: number;\n\terror?: string;\n}\n\nexport async function waitForIdle(onData: Event<unknown>, idleDurationMs: number): Promise<void> {\n\t// This is basically Event.debounce but with an initial event to trigger the debounce\n\t// immediately\n\tconst store = new DisposableStore();\n\tconst deferred = new DeferredPromise<void>();\n\tconst scheduler = store.add(new RunOnceScheduler(() => deferred.complete(), idleDurationMs));\n\tstore.add(onData(() => scheduler.schedule()));\n\tscheduler.schedule();\n\treturn deferred.p.finally(() => store.dispose());\n}\n\nexport interface IPromptDetectionResult {\n\t/**\n\t * Whether a prompt was detected.\n\t */\n\tdetected: boolean;\n\t/**\n\t * The reason for logging.\n\t */\n\treason?: string;\n}\n\n/**\n * Detects if the given text content appears to end with a common prompt pattern.\n */\nexport function detectsCommonPromptPattern(cursorLine: string): IPromptDetectionResult {\n\tif (cursorLine.trim().length === 0) {\n\t\treturn { detected: false, reason: 'Content is empty or contains only whitespace' };\n\t}\n\n\t// PowerShell prompt: PS C:\\> or similar patterns\n\tif (/PS\\s+[A-Z]:\\\\.*>\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `PowerShell prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\t// Command Prompt: C:\\path>\n\tif (/^[A-Z]:\\\\.*>\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `Command Prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\t// Bash-style prompts ending with $\n\tif (/\\$\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `Bash-style prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\t// Root prompts ending with #\n\tif (/#\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `Root prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\t// Python REPL prompt\n\tif (/^>>>\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `Python REPL prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\t// Custom prompts ending with the starship character (\\u276f)\n\tif (/\\u276f\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `Starship prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\t// Generic prompts ending with common prompt characters\n\tif (/[>%]\\s*$/.test(cursorLine)) {\n\t\treturn { detected: true, reason: `Generic prompt pattern detected: \"${cursorLine}\"` };\n\t}\n\n\treturn { detected: false, reason: `No common prompt pattern found in last line: \"${cursorLine}\"` };\n}\n\n\n// PowerShell-style multi-option line (supports [?] Help and optional default suffix) ending in whitespace\nconst PS_CONFIRM_RE = /\\s*(?:\\[[^\\]]\\]\\s+[^\\[]+\\s*)+(?:\\(default is\\s+\"[^\"]+\"\\):)?\\s+$/;\n\n// Bracketed/parenthesized yes/no pairs at end of line: (y/n), [Y/n], (yes/no), [no/yes]\nconst YN_PAIRED_RE = /(?:\\(|\\[)\\s*(?:y(?:es)?\\s*\\/\\s*n(?:o)?|n(?:o)?\\s*\\/\\s*y(?:es)?)\\s*(?:\\]|\\))\\s+$/i;\n\n// Same as YN_PAIRED_RE but allows a preceding '?' or ':' and optional wrappers e.g. \"Continue? (y/n)\" or \"Overwrite: [yes/no]\"\nconst YN_AFTER_PUNCT_RE = /[?:]\\s*(?:\\(|\\[)?\\s*y(?:es)?\\s*\\/\\s*n(?:o)?\\s*(?:\\]|\\))?\\s+$/i;\n\n// Confirmation prompts ending with (y) e.g. \"Ok to proceed? (y)\"\nconst CONFIRM_Y_RE = /\\(y\\)\\s*$/i;\n\nconst LINE_ENDS_WITH_COLON_RE = /:\\s*$/;\n\nconst END = /\\(END\\)$/;\n\nexport function detectsInputRequiredPattern(cursorLine: string): boolean {\n\treturn PS_CONFIRM_RE.test(cursorLine) || YN_PAIRED_RE.test(cursorLine) || YN_AFTER_PUNCT_RE.test(cursorLine) || CONFIRM_Y_RE.test(cursorLine) || LINE_ENDS_WITH_COLON_RE.test(cursorLine.trim()) || END.test(cursorLine);\n}\n\n\n/**\n * Enhanced version of {@link waitForIdle} that uses prompt detection heuristics. After the terminal\n * idles for the specified period, checks if the terminal's cursor line looks like a common prompt.\n * If not, extends the timeout to give the command more time to complete.\n */\nexport async function waitForIdleWithPromptHeuristics(\n\tonData: Event<unknown>,\n\tinstance: ITerminalInstance,\n\tidlePollIntervalMs: number,\n\textendedTimeoutMs: number,\n): Promise<IPromptDetectionResult> {\n\tawait waitForIdle(onData, idlePollIntervalMs);\n\n\tconst xterm = await instance.xtermReadyPromise;\n\tif (!xterm) {\n\t\treturn { detected: false, reason: `Xterm not available, using ${idlePollIntervalMs}ms timeout` };\n\t}\n\tconst startTime = Date.now();\n\n\t// Attempt to detect a prompt pattern after idle\n\twhile (Date.now() - startTime < extendedTimeoutMs) {\n\t\ttry {\n\t\t\tlet content = '';\n\t\t\tconst buffer = xterm.raw.buffer.active;\n\t\t\tconst line = buffer.getLine(buffer.baseY + buffer.cursorY);\n\t\t\tif (line) {\n\t\t\t\tcontent = line.translateToString(true);\n\t\t\t}\n\t\t\tconst promptResult = detectsCommonPromptPattern(content);\n\t\t\tif (promptResult.detected) {\n\t\t\t\treturn promptResult;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\t// Continue polling even if there's an error reading terminal content\n\t\t}\n\t\tawait waitForIdle(onData, Math.min(idlePollIntervalMs, extendedTimeoutMs - (Date.now() - startTime)));\n\t}\n\n\t// Extended timeout reached without detecting a prompt\n\ttry {\n\t\tlet content = '';\n\t\tconst buffer = xterm.raw.buffer.active;\n\t\tconst line = buffer.getLine(buffer.baseY + buffer.cursorY);\n\t\tif (line) {\n\t\t\tcontent = line.translateToString(true) + '\\n';\n\t\t}\n\t\treturn { detected: false, reason: `Extended timeout reached without prompt detection. Last line: \"${content.trim()}\"` };\n\t} catch (error) {\n\t\treturn { detected: false, reason: `Extended timeout reached. Error reading terminal content: ${error}` };\n\t}\n}\n\n/**\n * Tracks the terminal for being idle on a prompt input. This must be called before `executeCommand`\n * is called.\n */\nexport async function trackIdleOnPrompt(\n\tinstance: ITerminalInstance,\n\tidleDurationMs: number,\n\tstore: DisposableStore,\n): Promise<void> {\n\tconst idleOnPrompt = new DeferredPromise<void>();\n\tconst onData = instance.onData;\n\tconst scheduler = store.add(new RunOnceScheduler(() => {\n\t\tidleOnPrompt.complete();\n\t}, idleDurationMs));\n\t// Only schedule when a prompt sequence (A) is seen after an execute sequence (C). This prevents\n\t// cases where the command is executed before the prompt is written. While not perfect, sitting\n\t// on an A without a C following shortly after is a very good indicator that the command is done\n\t// and the terminal is idle. Note that D is treated as a signal for executed since shell\n\t// integration sometimes lacks the C sequence either due to limitations in the integation or the\n\t// required hooks aren't available.\n\tconst enum TerminalState {\n\t\tInitial,\n\t\tPrompt,\n\t\tExecuting,\n\t\tPromptAfterExecuting,\n\t}\n\tlet state: TerminalState = TerminalState.Initial;\n\tstore.add(onData(e => {\n\t\t// Update state\n\t\t// p10k fires C as `133;C;`\n\t\tconst matches = e.matchAll(/(?:\\x1b\\]|\\x9d)[16]33;(?<type>[ACD])(?:;.*)?(?:\\x1b\\\\|\\x07|\\x9c)/g);\n\t\tfor (const match of matches) {\n\t\t\tif (match.groups?.type === 'A') {\n\t\t\t\tif (state === TerminalState.Initial) {\n\t\t\t\t\tstate = TerminalState.Prompt;\n\t\t\t\t} else if (state === TerminalState.Executing) {\n\t\t\t\t\tstate = TerminalState.PromptAfterExecuting;\n\t\t\t\t}\n\t\t\t} else if (match.groups?.type === 'C' || match.groups?.type === 'D') {\n\t\t\t\tstate = TerminalState.Executing;\n\t\t\t}\n\t\t}\n\t\t// Re-schedule on every data event as we're tracking data idle\n\t\tif (state === TerminalState.PromptAfterExecuting) {\n\t\t\tscheduler.schedule();\n\t\t} else {\n\t\t\tscheduler.cancel();\n\t\t}\n\t}));\n\treturn idleOnPrompt.p;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}