{"version":3,"names":["cov_1plhxsgcej","actualCoverage","OffsetRange","LineTokens","TokenWithTextArray","_tokenInfo","fromLineTokens","lineTokens","f","tokenInfo","s","i","getCount","push","TokenWithTextInfo","getTokenText","getMetadata","create","constructor","toLineTokens","decoder","createFromTextAndMetadata","map","_r","t","text","metadata","forEach","cb","lengthSum","range","length","result","slice","tokenStart","tokenEndEx","start","b","endExclusive","deltaBefore","Math","max","deltaAfter","append","other","concat","TokenWithTextArrayBuilder","_tokens","add","build"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/tokens/tokenWithTextArray.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { OffsetRange } from '../core/ranges/offsetRange.js';\nimport { ILanguageIdCodec } from '../languages.js';\nimport { LineTokens } from './lineTokens.js';\n\n/**\n * This class represents a sequence of tokens.\n * Conceptually, each token has a length and a metadata number.\n * A token array might be used to annotate a string with metadata.\n * Use {@link TokenWithTextArrayBuilder} to efficiently create a token array.\n *\n * TODO: Make this class more efficient (e.g. by using a Int32Array).\n*/\nexport class TokenWithTextArray {\n\tpublic static fromLineTokens(lineTokens: LineTokens): TokenWithTextArray {\n\t\tconst tokenInfo: TokenWithTextInfo[] = [];\n\t\tfor (let i = 0; i < lineTokens.getCount(); i++) {\n\t\t\ttokenInfo.push(new TokenWithTextInfo(lineTokens.getTokenText(i), lineTokens.getMetadata(i)));\n\t\t}\n\t\treturn TokenWithTextArray.create(tokenInfo);\n\t}\n\n\tpublic static create(tokenInfo: TokenWithTextInfo[]): TokenWithTextArray {\n\t\treturn new TokenWithTextArray(tokenInfo);\n\t}\n\n\tprivate constructor(\n\t\tprivate readonly _tokenInfo: TokenWithTextInfo[],\n\t) { }\n\n\tpublic toLineTokens(decoder: ILanguageIdCodec): LineTokens {\n\t\treturn LineTokens.createFromTextAndMetadata(this.map((_r, t) => ({ text: t.text, metadata: t.metadata })), decoder);\n\t}\n\n\tpublic forEach(cb: (range: OffsetRange, tokenInfo: TokenWithTextInfo) => void): void {\n\t\tlet lengthSum = 0;\n\t\tfor (const tokenInfo of this._tokenInfo) {\n\t\t\tconst range = new OffsetRange(lengthSum, lengthSum + tokenInfo.text.length);\n\t\t\tcb(range, tokenInfo);\n\t\t\tlengthSum += tokenInfo.text.length;\n\t\t}\n\t}\n\n\tpublic map<T>(cb: (range: OffsetRange, tokenInfo: TokenWithTextInfo) => T): T[] {\n\t\tconst result: T[] = [];\n\t\tlet lengthSum = 0;\n\t\tfor (const tokenInfo of this._tokenInfo) {\n\t\t\tconst range = new OffsetRange(lengthSum, lengthSum + tokenInfo.text.length);\n\t\t\tresult.push(cb(range, tokenInfo));\n\t\t\tlengthSum += tokenInfo.text.length;\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic slice(range: OffsetRange): TokenWithTextArray {\n\t\tconst result: TokenWithTextInfo[] = [];\n\t\tlet lengthSum = 0;\n\t\tfor (const tokenInfo of this._tokenInfo) {\n\t\t\tconst tokenStart = lengthSum;\n\t\t\tconst tokenEndEx = tokenStart + tokenInfo.text.length;\n\t\t\tif (tokenEndEx > range.start) {\n\t\t\t\tif (tokenStart >= range.endExclusive) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tconst deltaBefore = Math.max(0, range.start - tokenStart);\n\t\t\t\tconst deltaAfter = Math.max(0, tokenEndEx - range.endExclusive);\n\n\t\t\t\tresult.push(new TokenWithTextInfo(tokenInfo.text.slice(deltaBefore, tokenInfo.text.length - deltaAfter), tokenInfo.metadata));\n\t\t\t}\n\n\t\t\tlengthSum += tokenInfo.text.length;\n\t\t}\n\t\treturn TokenWithTextArray.create(result);\n\t}\n\n\tpublic append(other: TokenWithTextArray): TokenWithTextArray {\n\t\tconst result: TokenWithTextInfo[] = this._tokenInfo.concat(other._tokenInfo);\n\t\treturn TokenWithTextArray.create(result);\n\t}\n}\n\nexport type TokenMetadata = number;\n\nexport class TokenWithTextInfo {\n\tconstructor(\n\t\tpublic readonly text: string,\n\t\tpublic readonly metadata: TokenMetadata,\n\t) { }\n}\n\n/**\n * TODO: Make this class more efficient (e.g. by using a Int32Array).\n*/\nexport class TokenWithTextArrayBuilder {\n\tprivate readonly _tokens: TokenWithTextInfo[] = [];\n\n\tpublic add(text: string, metadata: TokenMetadata): void {\n\t\tthis._tokens.push(new TokenWithTextInfo(text, metadata));\n\t}\n\n\tpublic build(): TokenWithTextArray {\n\t\treturn TokenWithTextArray.create(this._tokens);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}