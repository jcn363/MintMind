{"version":3,"names":["cov_2ehv8oq15f","actualCoverage","promiseWithResolvers","CancellationToken","Emitter","Disposable","toDisposable","createDecorator","IWebviewViewService","s","WebviewViewService","_serviceBrand","_resolvers","Map","_awaitingRevival","_onNewResolverRegistered","_register","onNewResolverRegistered","event","register","viewType","resolver","f","has","b","Error","set","fire","pending","get","resolve","webview","None","then","delete","cancellation","promise"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/webviewView/browser/webviewViewService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { promiseWithResolvers } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IViewBadge } from '../../../common/views.js';\nimport { IOverlayWebview } from '../../webview/browser/webview.js';\n\n/**\n * A webview shown in a view pane.\n */\nexport interface WebviewView {\n\t/**\n\t * The text displayed in the view's title.\n\t */\n\ttitle?: string;\n\n\t/**\n\t * Additional text shown for this view.\n\t */\n\tdescription?: string;\n\n\t/**\n\t * The badge shown for this view.\n\t */\n\tbadge?: IViewBadge;\n\n\t/**\n\t * The webview associated with this webview view.\n\t */\n\treadonly webview: IOverlayWebview;\n\n\t/**\n\t * Fired when the visibility of the webview view changes.\n\t *\n\t * This can happen when the view itself is hidden, when the view is collapsed, or when the user switches away from\n\t * the view.\n\t */\n\treadonly onDidChangeVisibility: Event<boolean>;\n\n\t/**\n\t * Fired when the webview view has been disposed of.\n\t */\n\treadonly onDispose: Event<void>;\n\n\t/**\n\t * Dispose of the webview view and clean up any associated resources.\n\t */\n\tdispose(): void;\n\n\t/**\n\t * Force the webview view to show.\n\t */\n\tshow(preserveFocus: boolean): void;\n}\n\n/**\n * Fill in the contents of a newly created webview view.\n */\ninterface IWebviewViewResolver {\n\t/**\n\t * Fill in the contents of a webview view.\n\t */\n\tresolve(webviewView: WebviewView, cancellation: CancellationToken): Promise<void>;\n}\n\nexport const IWebviewViewService = createDecorator<IWebviewViewService>('webviewViewService');\n\nexport interface IWebviewViewService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Fired when a resolver has been registered\n\t */\n\treadonly onNewResolverRegistered: Event<{ readonly viewType: string }>;\n\n\t/**\n\t * Register a new {@link IWebviewViewResolver webview view resolver}.\n\t */\n\tregister(viewType: string, resolver: IWebviewViewResolver): IDisposable;\n\n\t/**\n\t * Try to resolve a webview view. The promise will not resolve until a resolver for the webview has been registered\n\t * and run\n\t */\n\tresolve(viewType: string, webview: WebviewView, cancellation: CancellationToken): Promise<void>;\n}\n\nexport class WebviewViewService extends Disposable implements IWebviewViewService {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate readonly _resolvers = new Map<string, IWebviewViewResolver>();\n\n\tprivate readonly _awaitingRevival = new Map<string, { readonly webview: WebviewView; readonly resolve: () => void }>();\n\n\tprivate readonly _onNewResolverRegistered = this._register(new Emitter<{ readonly viewType: string }>());\n\tpublic readonly onNewResolverRegistered = this._onNewResolverRegistered.event;\n\n\tregister(viewType: string, resolver: IWebviewViewResolver): IDisposable {\n\t\tif (this._resolvers.has(viewType)) {\n\t\t\tthrow new Error(`View resolver already registered for ${viewType}`);\n\t\t}\n\n\t\tthis._resolvers.set(viewType, resolver);\n\t\tthis._onNewResolverRegistered.fire({ viewType: viewType });\n\n\t\tconst pending = this._awaitingRevival.get(viewType);\n\t\tif (pending) {\n\t\t\tresolver.resolve(pending.webview, CancellationToken.None).then(() => {\n\t\t\t\tthis._awaitingRevival.delete(viewType);\n\t\t\t\tpending.resolve();\n\t\t\t});\n\t\t}\n\n\t\treturn toDisposable(() => {\n\t\t\tthis._resolvers.delete(viewType);\n\t\t});\n\t}\n\n\tresolve(viewType: string, webview: WebviewView, cancellation: CancellationToken): Promise<void> {\n\t\tconst resolver = this._resolvers.get(viewType);\n\t\tif (!resolver) {\n\t\t\tif (this._awaitingRevival.has(viewType)) {\n\t\t\t\tthrow new Error('View already awaiting revival');\n\t\t\t}\n\n\t\t\tconst { promise, resolve } = promiseWithResolvers<void>();\n\t\t\tthis._awaitingRevival.set(viewType, { webview, resolve });\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn resolver.resolve(webview, cancellation);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}