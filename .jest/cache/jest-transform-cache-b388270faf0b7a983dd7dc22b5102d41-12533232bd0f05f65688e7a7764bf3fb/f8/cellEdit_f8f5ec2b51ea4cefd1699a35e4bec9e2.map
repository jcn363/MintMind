{"version":3,"names":["cov_1ji1s8tbd2","actualCoverage","MoveCellEdit","resource","fromIndex","length","toIndex","editingDelegate","beforedSelections","endSelections","type","s","label","f","b","code","constructor","undo","moveCell","Error","redo","SpliceCellsEdit","diffs","beforeHandles","endHandles","replaceCell","forEach","diff","reverse","CellMetadataEdit","index","oldMetadata","newMetadata","updateCellMetadata"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/notebook/common/model/cellEdit.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceUndoRedoElement, UndoRedoElementType } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { NotebookCellTextModel } from './notebookCellTextModel.js';\nimport { ISelectionState, NotebookCellMetadata } from '../notebookCommon.js';\n\n/**\n * It should not modify Undo/Redo stack\n */\nexport interface ITextCellEditingDelegate {\n\tinsertCell?(index: number, cell: NotebookCellTextModel, endSelections?: ISelectionState): void;\n\tdeleteCell?(index: number, endSelections?: ISelectionState): void;\n\treplaceCell?(index: number, count: number, cells: NotebookCellTextModel[], endSelections?: ISelectionState): void;\n\tmoveCell?(fromIndex: number, length: number, toIndex: number, beforeSelections: ISelectionState | undefined, endSelections?: ISelectionState): void;\n\tupdateCellMetadata?(index: number, newMetadata: NotebookCellMetadata): void;\n}\n\nexport class MoveCellEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tget label() {\n\t\treturn this.length === 1 ? 'Move Cell' : 'Move Cells';\n\t}\n\tcode: string = 'undoredo.textBufferEdit';\n\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate fromIndex: number,\n\t\tprivate length: number,\n\t\tprivate toIndex: number,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforedSelections: ISelectionState | undefined,\n\t\tprivate endSelections: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.toIndex, this.length, this.fromIndex, this.endSelections, this.beforedSelections);\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.moveCell) {\n\t\t\tthrow new Error('Notebook Move Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.editingDelegate.moveCell(this.fromIndex, this.length, this.toIndex, this.beforedSelections, this.endSelections);\n\t}\n}\n\nexport class SpliceCellsEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tget label() {\n\t\t// Compute the most appropriate labels\n\t\tif (this.diffs.length === 1 && this.diffs[0][1].length === 0) {\n\t\t\treturn this.diffs[0][2].length > 1 ? 'Insert Cells' : 'Insert Cell';\n\t\t}\n\t\tif (this.diffs.length === 1 && this.diffs[0][2].length === 0) {\n\t\t\treturn this.diffs[0][1].length > 1 ? 'Delete Cells' : 'Delete Cell';\n\t\t}\n\t\t// Default to Insert Cell\n\t\treturn 'Insert Cell';\n\t}\n\tcode: string = 'undoredo.textBufferEdit';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\tprivate diffs: [number, NotebookCellTextModel[], NotebookCellTextModel[]][],\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t\tprivate beforeHandles: ISelectionState | undefined,\n\t\tprivate endHandles: ISelectionState | undefined\n\t) {\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[2].length, diff[1], this.beforeHandles);\n\t\t});\n\t}\n\n\tredo(): void {\n\t\tif (!this.editingDelegate.replaceCell) {\n\t\t\tthrow new Error('Notebook Replace Cell not implemented for Undo/Redo');\n\t\t}\n\n\t\tthis.diffs.reverse().forEach(diff => {\n\t\t\tthis.editingDelegate.replaceCell!(diff[0], diff[1].length, diff[2], this.endHandles);\n\t\t});\n\t}\n}\n\nexport class CellMetadataEdit implements IResourceUndoRedoElement {\n\ttype: UndoRedoElementType.Resource = UndoRedoElementType.Resource;\n\tlabel: string = 'Update Cell Metadata';\n\tcode: string = 'undoredo.textBufferEdit';\n\tconstructor(\n\t\tpublic resource: URI,\n\t\treadonly index: number,\n\t\treadonly oldMetadata: NotebookCellMetadata,\n\t\treadonly newMetadata: NotebookCellMetadata,\n\t\tprivate editingDelegate: ITextCellEditingDelegate,\n\t) {\n\n\t}\n\n\tundo(): void {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.oldMetadata);\n\t}\n\n\tredo(): void | Promise<void> {\n\t\tif (!this.editingDelegate.updateCellMetadata) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editingDelegate.updateCellMetadata(this.index, this.newMetadata);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}