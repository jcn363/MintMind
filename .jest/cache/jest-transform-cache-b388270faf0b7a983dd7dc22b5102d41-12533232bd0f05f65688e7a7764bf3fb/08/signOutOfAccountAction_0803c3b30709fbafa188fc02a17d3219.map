{"version":3,"names":["cov_24pt47pmy8","actualCoverage","Severity","localize","Action2","IDialogService","IAuthenticationAccessService","IAuthenticationUsageService","IAuthenticationService","SignOutOfAccountAction","constructor","f","s","id","title","f1","run","accessor","providerId","accountLabel","authenticationService","get","authenticationUsageService","authenticationAccessService","dialogService","b","Error","allSessions","getSessions","sessions","filter","account","label","accountUsages","readAccountUsages","confirmed","confirm","type","Info","message","length","map","usage","extensionName","join","primaryButton","key","comment","removeSessionPromises","session","removeSession","Promise","all","removeAccountUsage","removeAllowedExtensions"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/authentication/browser/actions/signOutOfAccountAction.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport Severity from '../../../../../base/common/severity.js';\nimport { localize } from '../../../../../nls.js';\nimport { Action2 } from '../../../../../platform/actions/common/actions.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IAuthenticationAccessService } from '../../../../services/authentication/browser/authenticationAccessService.js';\nimport { IAuthenticationUsageService } from '../../../../services/authentication/browser/authenticationUsageService.js';\nimport { IAuthenticationService } from '../../../../services/authentication/common/authentication.js';\n\nexport class SignOutOfAccountAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: '_signOutOfAccount',\n\t\t\ttitle: localize('signOutOfAccount', \"Sign out of account\"),\n\t\t\tf1: false\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, { providerId, accountLabel }: { providerId: string; accountLabel: string }): Promise<void> {\n\t\tconst authenticationService = accessor.get(IAuthenticationService);\n\t\tconst authenticationUsageService = accessor.get(IAuthenticationUsageService);\n\t\tconst authenticationAccessService = accessor.get(IAuthenticationAccessService);\n\t\tconst dialogService = accessor.get(IDialogService);\n\n\t\tif (!providerId || !accountLabel) {\n\t\t\tthrow new Error('Invalid arguments. Expected: { providerId: string; accountLabel: string }');\n\t\t}\n\n\t\tconst allSessions = await authenticationService.getSessions(providerId);\n\t\tconst sessions = allSessions.filter(s => s.account.label === accountLabel);\n\n\t\tconst accountUsages = authenticationUsageService.readAccountUsages(providerId, accountLabel);\n\n\t\tconst { confirmed } = await dialogService.confirm({\n\t\t\ttype: Severity.Info,\n\t\t\tmessage: accountUsages.length\n\t\t\t\t? localize('signOutMessage', \"The account '{0}' has been used by: \\n\\n{1}\\n\\n Sign out from these extensions?\", accountLabel, accountUsages.map(usage => usage.extensionName).join('\\n'))\n\t\t\t\t: localize('signOutMessageSimple', \"Sign out of '{0}'?\", accountLabel),\n\t\t\tprimaryButton: localize({ key: 'signOut', comment: ['&& denotes a mnemonic'] }, \"&&Sign Out\")\n\t\t});\n\n\t\tif (confirmed) {\n\t\t\tconst removeSessionPromises = sessions.map(session => authenticationService.removeSession(providerId, session.id));\n\t\t\tawait Promise.all(removeSessionPromises);\n\t\t\tauthenticationUsageService.removeAccountUsage(providerId, accountLabel);\n\t\t\tauthenticationAccessService.removeAllowedExtensions(providerId, accountLabel);\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}