{"version":3,"names":["cov_25w551lbek","actualCoverage","Iterable","Disposable","toDisposable","Schemas","derived","ObservableSet","URI","localize","ByteSize","createDecorator","stringifyPromptElementJSON","ToolDataSource","s","f","Internal","type","label","External","toKey","source","b","extensionId","value","collectionId","definitionId","file","toString","equals","a","classify","ordinal","isToolInvocationContext","obj","sessionId","isToolResultInputOutputDetails","input","output","Array","isArray","isToolResultOutputDetails","mimeType","toolContentToA11yString","part","map","p","kind","stringifyPromptTsxPart","formatSize","data","byteLength","join","toolResultHasBuffers","result","content","some","ToolInvocationPresentation","ToolSet","id","referenceName","icon","description","_tools","_toolSets","isHomogenous","constructor","r","observable","read","tool","toolSet","addTool","tx","add","delete","addToolSet","None","getTools","concat","ILanguageModelToolsService","createToolInputUri","toolCallId","from","scheme","inMemory","path","createToolSchemaUri","toolOrId","vscode","authority","GithubCopilotToolReference","shell","edit","search","customAgent","VSCodeToolReference","runCommands","runSubagent"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/common/languageModelToolsService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Separator } from '../../../../base/common/actions.js';\nimport { VSBuffer } from '../../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IJSONSchema } from '../../../../base/common/jsonSchema.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { derived, IObservable, IReader, ITransaction, ObservableSet } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Location } from '../../../../editor/common/languages.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpression } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\nimport { ByteSize } from '../../../../platform/files/common/files.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IProgress } from '../../../../platform/progress/common/progress.js';\nimport { UserSelectedTools } from './chatAgents.js';\nimport { IVariableReference } from './chatModes.js';\nimport { IChatExtensionsContent, IChatTodoListContent, IChatToolInputInvocationData, type IChatTerminalToolInvocationData } from './chatService.js';\nimport { ChatRequestToolReferenceEntry } from './chatVariableEntries.js';\nimport { LanguageModelPartAudience } from './languageModels.js';\nimport { PromptElementJSON, stringifyPromptElementJSON } from './tools/promptTsxTypes.js';\n\nexport interface IToolData {\n\tid: string;\n\tsource: ToolDataSource;\n\ttoolReferenceName?: string;\n\ticon?: { dark: URI; light?: URI } | ThemeIcon;\n\twhen?: ContextKeyExpression;\n\ttags?: string[];\n\tdisplayName: string;\n\tuserDescription?: string;\n\tmodelDescription: string;\n\tinputSchema?: IJSONSchema;\n\tcanBeReferencedInPrompt?: boolean;\n\t/**\n\t * True if the tool runs in the (possibly remote) workspace, false if it runs\n\t * on the host, undefined if known.\n\t */\n\trunsInWorkspace?: boolean;\n\talwaysDisplayInputOutput?: boolean;\n\t/** True if this tool might ask for pre-approval */\n\tcanRequestPreApproval?: boolean;\n\t/** True if this tool might ask for post-approval */\n\tcanRequestPostApproval?: boolean;\n}\n\nexport interface IToolProgressStep {\n\treadonly message: string | IMarkdownString | undefined;\n\t/** 0-1 progress of the tool call */\n\treadonly progress?: number;\n}\n\nexport type ToolProgress = IProgress<IToolProgressStep>;\n\nexport type ToolDataSource =\n\t| {\n\t\ttype: 'extension';\n\t\tlabel: string;\n\t\textensionId: ExtensionIdentifier;\n\t}\n\t| {\n\t\ttype: 'mcp';\n\t\tlabel: string;\n\t\tserverLabel: string | undefined;\n\t\tinstructions: string | undefined;\n\t\tcollectionId: string;\n\t\tdefinitionId: string;\n\t}\n\t| {\n\t\ttype: 'user';\n\t\tlabel: string;\n\t\tfile: URI;\n\t}\n\t| {\n\t\ttype: 'internal';\n\t\tlabel: string;\n\t} | {\n\t\ttype: 'external';\n\t\tlabel: string;\n\t};\n\nexport namespace ToolDataSource {\n\n\texport const Internal: ToolDataSource = { type: 'internal', label: 'Built-In' };\n\n\t/** External tools may not be contributed or invoked, but may be invoked externally and described in an IChatToolInvocationSerialized */\n\texport const External: ToolDataSource = { type: 'external', label: 'External' };\n\n\texport function toKey(source: ToolDataSource): string {\n\t\tswitch (source.type) {\n\t\t\tcase 'extension': return `extension:${source.extensionId.value}`;\n\t\t\tcase 'mcp': return `mcp:${source.collectionId}:${source.definitionId}`;\n\t\t\tcase 'user': return `user:${source.file.toString()}`;\n\t\t\tcase 'internal': return 'internal';\n\t\t\tcase 'external': return 'external';\n\t\t}\n\t}\n\n\texport function equals(a: ToolDataSource, b: ToolDataSource): boolean {\n\t\treturn toKey(a) === toKey(b);\n\t}\n\n\texport function classify(source: ToolDataSource): { readonly ordinal: number; readonly label: string } {\n\t\tif (source.type === 'internal') {\n\t\t\treturn { ordinal: 1, label: localize('builtin', 'Built-In') };\n\t\t} else if (source.type === 'mcp') {\n\t\t\treturn { ordinal: 2, label: source.label };\n\t\t} else if (source.type === 'user') {\n\t\t\treturn { ordinal: 0, label: localize('user', 'User Defined') };\n\t\t} else {\n\t\t\treturn { ordinal: 3, label: source.label };\n\t\t}\n\t}\n}\n\nexport interface IToolInvocation {\n\tcallId: string;\n\ttoolId: string;\n\tparameters: Object;\n\ttokenBudget?: number;\n\tcontext: IToolInvocationContext | undefined;\n\tchatRequestId?: string;\n\tchatInteractionId?: string;\n\t/**\n\t * Lets us add some nicer UI to toolcalls that came from a sub-agent, but in the long run, this should probably just be rendered in a similar way to thinking text + tool call groups\n\t */\n\tfromSubAgent?: boolean;\n\ttoolSpecificData?: IChatTerminalToolInvocationData | IChatToolInputInvocationData | IChatExtensionsContent | IChatTodoListContent;\n\tmodelId?: string;\n\tuserSelectedTools?: UserSelectedTools;\n}\n\nexport interface IToolInvocationContext {\n\tsessionId: string;\n}\n\nexport function isToolInvocationContext(obj: any): obj is IToolInvocationContext {\n\treturn typeof obj === 'object' && typeof obj.sessionId === 'string';\n}\n\nexport interface IToolInvocationPreparationContext {\n\tparameters: any;\n\tchatRequestId?: string;\n\tchatSessionId?: string;\n\tchatInteractionId?: string;\n}\n\nexport type ToolInputOutputBase = {\n\t/** Mimetype of the value, optional */\n\tmimeType?: string;\n\t/** URI of the resource on the MCP server. */\n\turi?: URI;\n\t/** If true, this part came in as a resource reference rather than direct data. */\n\tasResource?: boolean;\n\t/** Audience of the data part */\n\taudience?: LanguageModelPartAudience[];\n};\n\nexport type ToolInputOutputEmbedded = ToolInputOutputBase & {\n\ttype: 'embed';\n\tvalue: string;\n\t/** If true, value is text. If false or not given, value is base64 */\n\tisText?: boolean;\n};\n\nexport type ToolInputOutputReference = ToolInputOutputBase & { type: 'ref'; uri: URI };\n\nexport interface IToolResultInputOutputDetails {\n\treadonly input: string;\n\treadonly output: (ToolInputOutputEmbedded | ToolInputOutputReference)[];\n\treadonly isError?: boolean;\n}\n\nexport interface IToolResultOutputDetails {\n\treadonly output: { type: 'data'; mimeType: string; value: VSBuffer };\n}\n\nexport function isToolResultInputOutputDetails(obj: any): obj is IToolResultInputOutputDetails {\n\treturn typeof obj === 'object' && typeof obj?.input === 'string' && (typeof obj?.output === 'string' || Array.isArray(obj?.output));\n}\n\nexport function isToolResultOutputDetails(obj: any): obj is IToolResultOutputDetails {\n\treturn typeof obj === 'object' && typeof obj?.output === 'object' && typeof obj?.output?.mimeType === 'string' && obj?.output?.type === 'data';\n}\n\nexport interface IToolResult {\n\tcontent: (IToolResultPromptTsxPart | IToolResultTextPart | IToolResultDataPart)[];\n\ttoolResultMessage?: string | IMarkdownString;\n\ttoolResultDetails?: Array<URI | Location> | IToolResultInputOutputDetails | IToolResultOutputDetails;\n\ttoolResultError?: string;\n\ttoolMetadata?: unknown;\n\t/** Whether to ask the user to confirm these tool results. Overrides {@link IToolConfirmationMessages.confirmResults}. */\n\tconfirmResults?: boolean;\n}\n\nexport function toolContentToA11yString(part: IToolResult['content']) {\n\treturn part.map(p => {\n\t\tswitch (p.kind) {\n\t\t\tcase 'promptTsx':\n\t\t\t\treturn stringifyPromptTsxPart(p);\n\t\t\tcase 'text':\n\t\t\t\treturn p.value;\n\t\t\tcase 'data':\n\t\t\t\treturn localize('toolResultDataPartA11y', \"{0} of {1} binary data\", ByteSize.formatSize(p.value.data.byteLength), p.value.mimeType || 'unknown');\n\t\t}\n\t}).join(', ');\n}\n\nexport function toolResultHasBuffers(result: IToolResult): boolean {\n\treturn result.content.some(part => part.kind === 'data');\n}\n\nexport interface IToolResultPromptTsxPart {\n\tkind: 'promptTsx';\n\tvalue: unknown;\n}\n\nexport function stringifyPromptTsxPart(part: IToolResultPromptTsxPart): string {\n\treturn stringifyPromptElementJSON(part.value as PromptElementJSON);\n}\n\nexport interface IToolResultTextPart {\n\tkind: 'text';\n\tvalue: string;\n\taudience?: LanguageModelPartAudience[];\n}\n\nexport interface IToolResultDataPart {\n\tkind: 'data';\n\tvalue: {\n\t\tmimeType: string;\n\t\tdata: VSBuffer;\n\t};\n\taudience?: LanguageModelPartAudience[];\n}\n\nexport interface IToolConfirmationMessages {\n\t/** Title for the confirmation. If set, the user will be asked to confirm execution of the tool */\n\ttitle?: string | IMarkdownString;\n\t/** MUST be set if `title` is also set */\n\tmessage?: string | IMarkdownString;\n\tdisclaimer?: string | IMarkdownString;\n\tallowAutoConfirm?: boolean;\n\tterminalCustomActions?: ToolConfirmationAction[];\n\t/** If true, confirmation will be requested after the tool executes and before results are sent to the model */\n\tconfirmResults?: boolean;\n}\n\nexport interface IToolConfirmationAction {\n\tlabel: string;\n\tdisabled?: boolean;\n\ttooltip?: string;\n\tdata: any;\n}\n\nexport type ToolConfirmationAction = IToolConfirmationAction | Separator;\n\nexport enum ToolInvocationPresentation {\n\tHidden = 'hidden',\n\tHiddenAfterComplete = 'hiddenAfterComplete'\n}\n\nexport interface IPreparedToolInvocation {\n\tinvocationMessage?: string | IMarkdownString;\n\tpastTenseMessage?: string | IMarkdownString;\n\toriginMessage?: string | IMarkdownString;\n\tconfirmationMessages?: IToolConfirmationMessages;\n\tpresentation?: ToolInvocationPresentation;\n\ttoolSpecificData?: IChatTerminalToolInvocationData | IChatToolInputInvocationData | IChatExtensionsContent | IChatTodoListContent;\n}\n\nexport interface IToolImpl {\n\tinvoke(invocation: IToolInvocation, countTokens: CountTokensCallback, progress: ToolProgress, token: CancellationToken): Promise<IToolResult>;\n\tprepareToolInvocation?(context: IToolInvocationPreparationContext, token: CancellationToken): Promise<IPreparedToolInvocation | undefined>;\n}\n\nexport type IToolAndToolSetEnablementMap = ReadonlyMap<IToolData | ToolSet, boolean>;\n\nexport class ToolSet {\n\n\tprotected readonly _tools = new ObservableSet<IToolData>();\n\n\tprotected readonly _toolSets = new ObservableSet<ToolSet>();\n\n\t/**\n\t * A homogenous tool set only contains tools from the same source as the tool set itself\n\t */\n\treadonly isHomogenous: IObservable<boolean>;\n\n\tconstructor(\n\t\treadonly id: string,\n\t\treadonly referenceName: string,\n\t\treadonly icon: ThemeIcon,\n\t\treadonly source: ToolDataSource,\n\t\treadonly description?: string,\n\t) {\n\n\t\tthis.isHomogenous = derived(r => {\n\t\t\treturn !Iterable.some(this._tools.observable.read(r), tool => !ToolDataSource.equals(tool.source, this.source))\n\t\t\t\t&& !Iterable.some(this._toolSets.observable.read(r), toolSet => !ToolDataSource.equals(toolSet.source, this.source));\n\t\t});\n\t}\n\n\taddTool(data: IToolData, tx?: ITransaction): IDisposable {\n\t\tthis._tools.add(data, tx);\n\t\treturn toDisposable(() => {\n\t\t\tthis._tools.delete(data);\n\t\t});\n\t}\n\n\taddToolSet(toolSet: ToolSet, tx?: ITransaction): IDisposable {\n\t\tif (toolSet === this) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tthis._toolSets.add(toolSet, tx);\n\t\treturn toDisposable(() => {\n\t\t\tthis._toolSets.delete(toolSet);\n\t\t});\n\t}\n\n\tgetTools(r?: IReader): Iterable<IToolData> {\n\t\treturn Iterable.concat(\n\t\t\tthis._tools.observable.read(r),\n\t\t\t...Iterable.map(this._toolSets.observable.read(r), toolSet => toolSet.getTools(r))\n\t\t);\n\t}\n}\n\n\nexport const ILanguageModelToolsService = createDecorator<ILanguageModelToolsService>('ILanguageModelToolsService');\n\nexport type CountTokensCallback = (input: string, token: CancellationToken) => Promise<number>;\n\nexport interface ILanguageModelToolsService {\n\t_serviceBrand: undefined;\n\treadonly onDidChangeTools: Event<void>;\n\treadonly onDidPrepareToolCallBecomeUnresponsive: Event<{ readonly sessionId: string; readonly toolData: IToolData }>;\n\tregisterToolData(toolData: IToolData): IDisposable;\n\tregisterToolImplementation(id: string, tool: IToolImpl): IDisposable;\n\tregisterTool(toolData: IToolData, tool: IToolImpl): IDisposable;\n\tgetTools(): Iterable<Readonly<IToolData>>;\n\tgetTool(id: string): IToolData | undefined;\n\tgetToolByName(name: string, includeDisabled?: boolean): IToolData | undefined;\n\tinvokeTool(invocation: IToolInvocation, countTokens: CountTokensCallback, token: CancellationToken): Promise<IToolResult>;\n\tcancelToolCallsForRequest(requestId: string): void;\n\t/** Flush any pending tool updates to the extension hosts. */\n\tflushToolUpdates(): void;\n\n\treadonly toolSets: IObservable<Iterable<ToolSet>>;\n\tgetToolSet(id: string): ToolSet | undefined;\n\tgetToolSetByName(name: string): ToolSet | undefined;\n\tcreateToolSet(source: ToolDataSource, id: string, referenceName: string, options?: { icon?: ThemeIcon; description?: string }): ToolSet & IDisposable;\n\n\t// tool names in prompt files handling ('qualified names')\n\n\tgetQualifiedToolNames(): Iterable<string>;\n\tgetToolByQualifiedName(qualifiedName: string): IToolData | ToolSet | undefined;\n\tgetQualifiedToolName(tool: IToolData, toolSet?: ToolSet): string;\n\tgetDeprecatedQualifiedToolNames(): Map<string, string>;\n\tmapGithubToolName(githubToolName: string): string;\n\n\ttoToolAndToolSetEnablementMap(qualifiedToolOrToolSetNames: readonly string[], target: string | undefined): IToolAndToolSetEnablementMap;\n\ttoQualifiedToolNames(map: IToolAndToolSetEnablementMap): string[];\n\ttoToolReferences(variableReferences: readonly IVariableReference[]): ChatRequestToolReferenceEntry[];\n}\n\nexport function createToolInputUri(toolCallId: string): URI {\n\treturn URI.from({ scheme: Schemas.inMemory, path: `/lm/tool/${toolCallId}/tool_input.json` });\n}\n\nexport function createToolSchemaUri(toolOrId: IToolData | string): URI {\n\tif (typeof toolOrId !== 'string') {\n\t\ttoolOrId = toolOrId.id;\n\t}\n\treturn URI.from({ scheme: Schemas.vscode, authority: 'schemas', path: `/lm/tool/${toolOrId}` });\n}\n\nexport namespace GithubCopilotToolReference {\n\texport const shell = 'shell';\n\texport const edit = 'edit';\n\texport const search = 'search';\n\texport const customAgent = 'custom-agent';\n}\n\nexport namespace VSCodeToolReference {\n\texport const runCommands = 'runCommands';\n\texport const runSubagent = 'runSubagent';\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}