{"version":3,"names":["cov_1vakba3wdh","actualCoverage","Disposable","Range","PieceTreeTextBufferBuilder","SearchParams","CellSearchModel","_source","_inputTextBuffer","_outputs","_outputTextBuffers","s","undefined","constructor","f","_getFullModelRange","buffer","lineCount","getLineCount","_getLineMaxColumn","lineNumber","b","Error","getLineLength","inputTextBuffer","builder","acceptChunk","bufferFactory","finish","textBuffer","disposable","create","_register","outputTextBuffers","map","output","findInInputs","target","searchParams","searchData","parseSearchRequest","fullInputRange","findMatchesLineByLine","findInOutputs","matches","length","filter","item"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/search/common/cellSearchModel.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { DefaultEndOfLine, FindMatch, IReadonlyTextBuffer } from '../../../../editor/common/model.js';\nimport { PieceTreeTextBufferBuilder } from '../../../../editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder.js';\nimport { SearchParams } from '../../../../editor/common/model/textModelSearch.js';\n\ninterface RawOutputFindMatch {\n\ttextBuffer: IReadonlyTextBuffer;\n\tmatches: FindMatch[];\n}\n\nexport class CellSearchModel extends Disposable {\n\tprivate _outputTextBuffers: IReadonlyTextBuffer[] | undefined = undefined;\n\tconstructor(readonly _source: string, private _inputTextBuffer: IReadonlyTextBuffer | undefined, private _outputs: string[]) {\n\t\tsuper();\n\t}\n\n\tprivate _getFullModelRange(buffer: IReadonlyTextBuffer): Range {\n\t\tconst lineCount = buffer.getLineCount();\n\t\treturn new Range(1, 1, lineCount, this._getLineMaxColumn(buffer, lineCount));\n\t}\n\n\tprivate _getLineMaxColumn(buffer: IReadonlyTextBuffer, lineNumber: number): number {\n\t\tif (lineNumber < 1 || lineNumber > buffer.getLineCount()) {\n\t\t\tthrow new Error('Illegal value for lineNumber');\n\t\t}\n\t\treturn buffer.getLineLength(lineNumber) + 1;\n\t}\n\n\tget inputTextBuffer(): IReadonlyTextBuffer {\n\t\tif (!this._inputTextBuffer) {\n\t\t\tconst builder = new PieceTreeTextBufferBuilder();\n\t\t\tbuilder.acceptChunk(this._source);\n\t\t\tconst bufferFactory = builder.finish(true);\n\t\t\tconst { textBuffer, disposable } = bufferFactory.create(DefaultEndOfLine.LF);\n\t\t\tthis._inputTextBuffer = textBuffer;\n\t\t\tthis._register(disposable);\n\t\t}\n\n\t\treturn this._inputTextBuffer;\n\t}\n\n\tget outputTextBuffers(): IReadonlyTextBuffer[] {\n\t\tif (!this._outputTextBuffers) {\n\t\t\tthis._outputTextBuffers = this._outputs.map((output) => {\n\t\t\t\tconst builder = new PieceTreeTextBufferBuilder();\n\t\t\t\tbuilder.acceptChunk(output);\n\t\t\t\tconst bufferFactory = builder.finish(true);\n\t\t\t\tconst { textBuffer, disposable } = bufferFactory.create(DefaultEndOfLine.LF);\n\t\t\t\tthis._register(disposable);\n\t\t\t\treturn textBuffer;\n\t\t\t});\n\t\t}\n\t\treturn this._outputTextBuffers;\n\t}\n\n\tfindInInputs(target: string): FindMatch[] {\n\t\tconst searchParams = new SearchParams(target, false, false, null);\n\t\tconst searchData = searchParams.parseSearchRequest();\n\t\tif (!searchData) {\n\t\t\treturn [];\n\t\t}\n\t\tconst fullInputRange = this._getFullModelRange(this.inputTextBuffer);\n\t\treturn this.inputTextBuffer.findMatchesLineByLine(fullInputRange, searchData, true, 5000);\n\t}\n\n\tfindInOutputs(target: string): RawOutputFindMatch[] {\n\t\tconst searchParams = new SearchParams(target, false, false, null);\n\t\tconst searchData = searchParams.parseSearchRequest();\n\t\tif (!searchData) {\n\t\t\treturn [];\n\t\t}\n\t\treturn this.outputTextBuffers.map(buffer => {\n\t\t\tconst matches = buffer.findMatchesLineByLine(\n\t\t\t\tthis._getFullModelRange(buffer),\n\t\t\t\tsearchData,\n\t\t\t\ttrue,\n\t\t\t\t5000\n\t\t\t);\n\t\t\tif (matches.length === 0) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttextBuffer: buffer,\n\t\t\t\tmatches\n\t\t\t};\n\t\t}).filter((item): item is RawOutputFindMatch => !!item);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}