{"version":3,"names":["cov_lblaczx02","actualCoverage","createCancelablePromise","Event","Disposable","DisposableStore","ActiveWindowManager","disposables","s","_register","firstActiveWindowIdPromise","activeWindowId","constructor","onDidOpenMainWindow","onDidFocusMainWindow","getActiveWindowId","f","onActiveWindowChange","latch","any","setActiveWindow","windowId","b","error","undefined","cancel","getActiveClientId","id"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/windows/node/windowTracker.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancelablePromise, createCancelablePromise } from '../../../base/common/async.js';\nimport { Event } from '../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\n\nexport class ActiveWindowManager extends Disposable {\n\n\tprivate readonly disposables = this._register(new DisposableStore());\n\tprivate firstActiveWindowIdPromise: CancelablePromise<number | undefined> | undefined;\n\n\tprivate activeWindowId: number | undefined;\n\n\tconstructor({ onDidOpenMainWindow, onDidFocusMainWindow, getActiveWindowId }: {\n\t\treadonly onDidOpenMainWindow: Event<number>;\n\t\treadonly onDidFocusMainWindow: Event<number>;\n\t\tgetActiveWindowId(): Promise<number | undefined>;\n\t}) {\n\t\tsuper();\n\n\t\t// remember last active window id upon events\n\t\tconst onActiveWindowChange = Event.latch(Event.any(onDidOpenMainWindow, onDidFocusMainWindow));\n\t\tonActiveWindowChange(this.setActiveWindow, this, this.disposables);\n\n\t\t// resolve current active window\n\t\tthis.firstActiveWindowIdPromise = createCancelablePromise(() => getActiveWindowId());\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tconst windowId = await this.firstActiveWindowIdPromise;\n\t\t\t\tthis.activeWindowId = (typeof this.activeWindowId === 'number') ? this.activeWindowId : windowId;\n\t\t\t} catch (error) {\n\t\t\t\t// ignore\n\t\t\t} finally {\n\t\t\t\tthis.firstActiveWindowIdPromise = undefined;\n\t\t\t}\n\t\t})();\n\t}\n\n\tprivate setActiveWindow(windowId: number | undefined) {\n\t\tif (this.firstActiveWindowIdPromise) {\n\t\t\tthis.firstActiveWindowIdPromise.cancel();\n\t\t\tthis.firstActiveWindowIdPromise = undefined;\n\t\t}\n\n\t\tthis.activeWindowId = windowId;\n\t}\n\n\tasync getActiveClientId(): Promise<string | undefined> {\n\t\tconst id = this.firstActiveWindowIdPromise ? (await this.firstActiveWindowIdPromise) : this.activeWindowId;\n\n\t\treturn `window:${id}`;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}