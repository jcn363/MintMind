{"version":3,"names":["cov_f0uuphtjy","actualCoverage","MonotonousIndexTransformer","transformation","fromMany","transformations","f","transformers","s","map","t","CombinedIndexTransformer","idx","offset","constructor","transform","index","nextChange","replacements","at","b","replaceRange","endExclusive","getLengthDelta","start","undefined","transformer","result"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/textMate/browser/indexTransformer.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AnyEdit } from '../../../../editor/common/core/edits/edit.js';\n\nexport interface IIndexTransformer {\n\ttransform(index: number): number | undefined;\n}\n\n/**\n * Can only be called with increasing values of `index`.\n*/\nexport class MonotonousIndexTransformer implements IIndexTransformer {\n\tpublic static fromMany(transformations: AnyEdit[]): IIndexTransformer {\n\t\t// TODO improve performance by combining transformations first\n\t\tconst transformers = transformations.map(t => new MonotonousIndexTransformer(t));\n\t\treturn new CombinedIndexTransformer(transformers);\n\t}\n\n\tprivate idx = 0;\n\tprivate offset = 0;\n\n\tconstructor(private readonly transformation: AnyEdit) {\n\t}\n\n\t/**\n\t * Precondition: index >= previous-value-of(index).\n\t */\n\ttransform(index: number): number | undefined {\n\t\tlet nextChange = this.transformation.replacements.at(this.idx);\n\t\twhile (nextChange && nextChange.replaceRange.endExclusive <= index) {\n\t\t\tthis.offset += nextChange.getLengthDelta();\n\t\t\tthis.idx++;\n\t\t\tnextChange = this.transformation.replacements.at(this.idx);\n\t\t}\n\t\t// assert nextChange === undefined || index < nextChange.offset + nextChange.length\n\n\t\tif (nextChange && nextChange.replaceRange.start <= index) {\n\t\t\t// Offset is touched by the change\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn index + this.offset;\n\t}\n}\n\nexport class CombinedIndexTransformer implements IIndexTransformer {\n\tconstructor(\n\t\tprivate readonly transformers: IIndexTransformer[]\n\t) { }\n\n\ttransform(index: number): number | undefined {\n\t\tfor (const transformer of this.transformers) {\n\t\t\tconst result = transformer.transform(index);\n\t\t\tif (result === undefined) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tindex = result;\n\t\t}\n\t\treturn index;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}