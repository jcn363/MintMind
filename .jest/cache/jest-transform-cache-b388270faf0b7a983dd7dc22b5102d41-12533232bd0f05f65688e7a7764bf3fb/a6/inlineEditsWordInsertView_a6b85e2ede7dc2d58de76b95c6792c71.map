{"version":3,"names":["cov_nhncdk42y","actualCoverage","n","Emitter","Disposable","constObservable","derived","asCssVariable","Point","Rect","OffsetRange","getModifiedBorderColor","mapOutFalsy","rectToProps","InlineEditsWordInsertView","_editor","_edit","_tabAction","_onDidClick","onDidClick","_start","_layout","_div","isHovered","constructor","f","s","_register","event","observePosition","range","getStartPosition","_store","reader","start","read","b","undefined","contentLeft","layoutInfoContentLeft","lineHeight","observeLineHeightForPosition","w","getOption","typicalHalfwidthCharacterWidth","width","text","length","center","x","scrollLeft","y","modified","fromLeftTopWidthHeight","background","hull","fromPoint","withMargin","lowerBackground","intersectVertical","top","Number","MAX_SAFE_INTEGER","div","class","layout","modifiedBorderColor","style","position","borderRadius","padding","textAlign","fontFamily","fontSize","fontWeight","border","svg","viewBox","height","fill","left","transform","svgElem","d","keepUpdated","createOverlayWidget","domNode","element","minContentWidthInPx","preference","allowEditorOverflow"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/inlineCompletions/browser/view/inlineEdits/inlineEditsViews/inlineEditsWordInsertView.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { n } from '../../../../../../../base/browser/dom.js';\nimport { IMouseEvent } from '../../../../../../../base/browser/mouseEvent.js';\nimport { Emitter } from '../../../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../../../base/common/lifecycle.js';\nimport { constObservable, derived, IObservable } from '../../../../../../../base/common/observable.js';\nimport { asCssVariable } from '../../../../../../../platform/theme/common/colorUtils.js';\nimport { ObservableCodeEditor } from '../../../../../../browser/observableCodeEditor.js';\nimport { Point } from '../../../../../../common/core/2d/point.js';\nimport { Rect } from '../../../../../../common/core/2d/rect.js';\nimport { EditorOption } from '../../../../../../common/config/editorOptions.js';\nimport { OffsetRange } from '../../../../../../common/core/ranges/offsetRange.js';\nimport { TextReplacement } from '../../../../../../common/core/edits/textEdit.js';\nimport { IInlineEditsView, InlineEditTabAction } from '../inlineEditsViewInterface.js';\nimport { getModifiedBorderColor } from '../theme.js';\nimport { mapOutFalsy, rectToProps } from '../utils/utils.js';\n\nexport class InlineEditsWordInsertView extends Disposable implements IInlineEditsView {\n\n\tprivate readonly _onDidClick;\n\treadonly onDidClick;\n\n\tprivate readonly _start;\n\n\tprivate readonly _layout;\n\n\tprivate readonly _div;\n\n\treadonly isHovered;\n\n\tconstructor(\n\t\tprivate readonly _editor: ObservableCodeEditor,\n\t\t/** Must be single-line in both sides */\n\t\tprivate readonly _edit: TextReplacement,\n\t\tprivate readonly _tabAction: IObservable<InlineEditTabAction>\n\t) {\n\t\tsuper();\n\t\tthis._onDidClick = this._register(new Emitter<IMouseEvent>());\n\t\tthis.onDidClick = this._onDidClick.event;\n\t\tthis._start = this._editor.observePosition(constObservable(this._edit.range.getStartPosition()), this._store);\n\t\tthis._layout = derived(this, reader => {\n\t\t\tconst start = this._start.read(reader);\n\t\t\tif (!start) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst contentLeft = this._editor.layoutInfoContentLeft.read(reader);\n\t\t\tconst lineHeight = this._editor.observeLineHeightForPosition(this._edit.range.getStartPosition()).read(reader);\n\n\t\t\tconst w = this._editor.getOption(EditorOption.fontInfo).read(reader).typicalHalfwidthCharacterWidth;\n\t\t\tconst width = this._edit.text.length * w + 5;\n\n\t\t\tconst center = new Point(contentLeft + start.x + w / 2 - this._editor.scrollLeft.read(reader), start.y);\n\n\t\t\tconst modified = Rect.fromLeftTopWidthHeight(center.x - width / 2, center.y + lineHeight + 5, width, lineHeight);\n\t\t\tconst background = Rect.hull([Rect.fromPoint(center), modified]).withMargin(4);\n\n\t\t\treturn {\n\t\t\t\tmodified,\n\t\t\t\tcenter,\n\t\t\t\tbackground,\n\t\t\t\tlowerBackground: background.intersectVertical(new OffsetRange(modified.top - 2, Number.MAX_SAFE_INTEGER)),\n\t\t\t};\n\t\t});\n\t\tthis._div = n.div({\n\t\t\tclass: 'word-insert',\n\t\t}, [\n\t\t\tderived(this, reader => {\n\t\t\t\tconst layout = mapOutFalsy(this._layout).read(reader);\n\t\t\t\tif (!layout) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\tconst modifiedBorderColor = asCssVariable(getModifiedBorderColor(this._tabAction).read(reader));\n\n\t\t\t\treturn [\n\t\t\t\t\tn.div({\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t...rectToProps(reader => layout.read(reader).lowerBackground),\n\t\t\t\t\t\t\tborderRadius: '4px',\n\t\t\t\t\t\t\tbackground: 'var(--vscode-editor-background)'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, []),\n\t\t\t\t\tn.div({\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t...rectToProps(reader => layout.read(reader).modified),\n\t\t\t\t\t\t\tborderRadius: '4px',\n\t\t\t\t\t\t\tpadding: '0px',\n\t\t\t\t\t\t\ttextAlign: 'center',\n\t\t\t\t\t\t\tbackground: 'var(--vscode-inlineEdit-modifiedChangedTextBackground)',\n\t\t\t\t\t\t\tfontFamily: this._editor.getOption(EditorOption.fontFamily),\n\t\t\t\t\t\t\tfontSize: this._editor.getOption(EditorOption.fontSize),\n\t\t\t\t\t\t\tfontWeight: this._editor.getOption(EditorOption.fontWeight),\n\t\t\t\t\t\t}\n\t\t\t\t\t}, [\n\t\t\t\t\t\tthis._edit.text,\n\t\t\t\t\t]),\n\t\t\t\t\tn.div({\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t...rectToProps(reader => layout.read(reader).background),\n\t\t\t\t\t\t\tborderRadius: '4px',\n\t\t\t\t\t\t\tborder: `1px solid ${modifiedBorderColor}`,\n\t\t\t\t\t\t\t//background: 'rgba(122, 122, 122, 0.12)', looks better\n\t\t\t\t\t\t\tbackground: 'var(--vscode-inlineEdit-wordReplacementView-background)',\n\t\t\t\t\t\t}\n\t\t\t\t\t}, []),\n\t\t\t\t\tn.svg({\n\t\t\t\t\t\tviewBox: '0 0 12 18',\n\t\t\t\t\t\twidth: 12,\n\t\t\t\t\t\theight: 18,\n\t\t\t\t\t\tfill: 'none',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\tleft: derived(this, reader => layout.read(reader).center.x - 9),\n\t\t\t\t\t\t\ttop: derived(this, reader => layout.read(reader).center.y + 4),\n\t\t\t\t\t\t\ttransform: 'scale(1.4, 1.4)',\n\t\t\t\t\t\t}\n\t\t\t\t\t}, [\n\t\t\t\t\t\tn.svgElem('path', {\n\t\t\t\t\t\t\td: 'M5.06445 0H7.35759C7.35759 0 7.35759 8.47059 7.35759 11.1176C7.35759 13.7647 9.4552 18 13.4674 18C17.4795 18 -2.58445 18 0.281373 18C3.14719 18 5.06477 14.2941 5.06477 11.1176C5.06477 7.94118 5.06445 0 5.06445 0Z',\n\t\t\t\t\t\t\tfill: 'var(--vscode-inlineEdit-modifiedChangedTextBackground)',\n\t\t\t\t\t\t})\n\t\t\t\t\t])\n\t\t\t\t];\n\t\t\t})\n\t\t]).keepUpdated(this._store);\n\t\tthis.isHovered = constObservable(false);\n\n\t\tthis._register(this._editor.createOverlayWidget({\n\t\t\tdomNode: this._div.element,\n\t\t\tminContentWidthInPx: constObservable(0),\n\t\t\tposition: constObservable({ preference: { top: 0, left: 0 } }),\n\t\t\tallowEditorOverflow: false,\n\t\t}));\n\t}\n}\n"],"mappings":"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","ignoreList":[]}