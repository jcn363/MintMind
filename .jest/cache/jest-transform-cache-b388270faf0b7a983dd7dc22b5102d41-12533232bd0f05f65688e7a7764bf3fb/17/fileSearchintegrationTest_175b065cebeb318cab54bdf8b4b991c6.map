{"version":3,"names":["cov_2a17vy07uh","actualCoverage","assert","FileAccess","path","URI","flakySuite","isProgressMessage","SearchService","TEST_FIXTURES","s","normalize","asFileUri","fsPath","TEST_FIXTURES2","EXAMPLES_FIXTURES","join","MORE_FIXTURES","TEST_ROOT_FOLDER","folder","file","ROOT_FOLDER_QUERY","MULTIROOT_QUERIES","folderName","numThreads","undefined","doSearchTest","query","expectedResultCount","f","svc","results","doFileSearch","e","b","Array","isArray","push","strictEqual","length","test","config","type","folderQueries","filePattern","excludePattern","when"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/search/test/node/fileSearch.integrationTest.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { FileAccess } from '../../../../../base/common/network.js';\nimport * as path from '../../../../../base/common/path.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { flakySuite } from '../../../../../base/test/node/testUtils.js';\nimport { IFileQuery, IFolderQuery, ISerializedSearchProgressItem, isProgressMessage, QueryType } from '../../common/search.js';\nimport { SearchService } from '../../node/rawSearchService.js';\n\nconst TEST_FIXTURES = path.normalize(FileAccess.asFileUri('vs/workbench/services/search/test/node/fixtures').fsPath);\nconst TEST_FIXTURES2 = path.normalize(FileAccess.asFileUri('vs/workbench/services/search/test/node/fixtures2').fsPath);\nconst EXAMPLES_FIXTURES = path.join(TEST_FIXTURES, 'examples');\nconst MORE_FIXTURES = path.join(TEST_FIXTURES, 'more');\nconst TEST_ROOT_FOLDER: IFolderQuery = { folder: URI.file(TEST_FIXTURES) };\nconst ROOT_FOLDER_QUERY: IFolderQuery[] = [\n\tTEST_ROOT_FOLDER\n];\n\nconst MULTIROOT_QUERIES: IFolderQuery[] = [\n\t{ folder: URI.file(EXAMPLES_FIXTURES), folderName: 'examples_folder' },\n\t{ folder: URI.file(MORE_FIXTURES) }\n];\n\nconst numThreads = undefined;\n\nasync function doSearchTest(query: IFileQuery, expectedResultCount: number | Function): Promise<void> {\n\tconst svc = new SearchService();\n\n\tconst results: ISerializedSearchProgressItem[] = [];\n\tawait svc.doFileSearch(query, numThreads, e => {\n\t\tif (!isProgressMessage(e)) {\n\t\t\tif (Array.isArray(e)) {\n\t\t\t\tresults.push(...e);\n\t\t\t} else {\n\t\t\t\tresults.push(e);\n\t\t\t}\n\t\t}\n\t});\n\n\tassert.strictEqual(results.length, expectedResultCount, `rg ${results.length} !== ${expectedResultCount}`);\n}\n\nflakySuite('FileSearch-integration', function () {\n\n\ttest('File - simple', () => {\n\t\tconst config: IFileQuery = {\n\t\t\ttype: QueryType.File,\n\t\t\tfolderQueries: ROOT_FOLDER_QUERY\n\t\t};\n\n\t\treturn doSearchTest(config, 14);\n\t});\n\n\ttest('File - filepattern', () => {\n\t\tconst config: IFileQuery = {\n\t\t\ttype: QueryType.File,\n\t\t\tfolderQueries: ROOT_FOLDER_QUERY,\n\t\t\tfilePattern: 'anotherfile'\n\t\t};\n\n\t\treturn doSearchTest(config, 1);\n\t});\n\n\ttest('File - exclude', () => {\n\t\tconst config: IFileQuery = {\n\t\t\ttype: QueryType.File,\n\t\t\tfolderQueries: ROOT_FOLDER_QUERY,\n\t\t\tfilePattern: 'file',\n\t\t\texcludePattern: { '**/anotherfolder/**': true }\n\t\t};\n\n\t\treturn doSearchTest(config, 2);\n\t});\n\n\ttest('File - multiroot', () => {\n\t\tconst config: IFileQuery = {\n\t\t\ttype: QueryType.File,\n\t\t\tfolderQueries: MULTIROOT_QUERIES,\n\t\t\tfilePattern: 'file',\n\t\t\texcludePattern: { '**/anotherfolder/**': true }\n\t\t};\n\n\t\treturn doSearchTest(config, 2);\n\t});\n\n\ttest('File - multiroot with folder name', () => {\n\t\tconst config: IFileQuery = {\n\t\t\ttype: QueryType.File,\n\t\t\tfolderQueries: MULTIROOT_QUERIES,\n\t\t\tfilePattern: 'examples_folder anotherfile'\n\t\t};\n\n\t\treturn doSearchTest(config, 1);\n\t});\n\n\ttest('File - multiroot with folder name and sibling exclude', () => {\n\t\tconst config: IFileQuery = {\n\t\t\ttype: QueryType.File,\n\t\t\tfolderQueries: [\n\t\t\t\t{ folder: URI.file(TEST_FIXTURES), folderName: 'folder1' },\n\t\t\t\t{ folder: URI.file(TEST_FIXTURES2) }\n\t\t\t],\n\t\t\tfilePattern: 'folder1 site',\n\t\t\texcludePattern: { '*.css': { when: '$(basename).less' } }\n\t\t};\n\n\t\treturn doSearchTest(config, 1);\n\t});\n});\n"],"mappings":"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","ignoreList":[]}