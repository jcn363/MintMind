{"version":3,"names":["cov_1g2j2ueq51","actualCoverage","CommentNode","uniqueOwner","owner","resource","comment","thread","isRoot","s","replies","threadId","range","threadState","threadRelevance","contextValue","controllerHandle","threadHandle","constructor","f","state","applicability","commentThreadHandle","hasReply","b","length","_lastUpdatedAt","lastUpdatedAt","undefined","updatedAt","timestamp","reply","replyUpdatedAt","ResourceWithCommentThreads","id","ownerLabel","commentThreads","toString","filter","comments","map","createCommentNode","commentThread","commentNodes","slice","threadUpdatedAt"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/comments/common/commentModel.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { Comment, CommentThread, CommentThreadChangedEvent, CommentThreadApplicability, CommentThreadState } from '../../../../editor/common/languages.js';\n\nexport interface ICommentThreadChangedEvent extends CommentThreadChangedEvent<IRange> {\n\tuniqueOwner: string;\n\towner: string;\n\townerLabel: string;\n}\n\nexport class CommentNode {\n\tisRoot: boolean = false;\n\treplies: CommentNode[] = [];\n\tpublic readonly threadId: string;\n\tpublic readonly range: IRange | undefined;\n\tpublic readonly threadState: CommentThreadState | undefined;\n\tpublic readonly threadRelevance: CommentThreadApplicability | undefined;\n\tpublic readonly contextValue: string | undefined;\n\tpublic readonly controllerHandle: number;\n\tpublic readonly threadHandle: number;\n\n\tconstructor(\n\t\tpublic readonly uniqueOwner: string,\n\t\tpublic readonly owner: string,\n\t\tpublic readonly resource: URI,\n\t\tpublic readonly comment: Comment,\n\t\tpublic readonly thread: CommentThread) {\n\t\tthis.threadId = thread.threadId;\n\t\tthis.range = thread.range;\n\t\tthis.threadState = thread.state;\n\t\tthis.threadRelevance = thread.applicability;\n\t\tthis.contextValue = thread.contextValue;\n\t\tthis.controllerHandle = thread.controllerHandle;\n\t\tthis.threadHandle = thread.commentThreadHandle;\n\t}\n\n\thasReply(): boolean {\n\t\treturn this.replies && this.replies.length !== 0;\n\t}\n\n\tprivate _lastUpdatedAt: string | undefined;\n\n\tget lastUpdatedAt(): string {\n\t\tif (this._lastUpdatedAt === undefined) {\n\t\t\tlet updatedAt = this.comment.timestamp || '';\n\t\t\tif (this.replies.length) {\n\t\t\t\tconst reply = this.replies[this.replies.length - 1];\n\t\t\t\tconst replyUpdatedAt = reply.lastUpdatedAt;\n\t\t\t\tif (replyUpdatedAt > updatedAt) {\n\t\t\t\t\tupdatedAt = replyUpdatedAt;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastUpdatedAt = updatedAt;\n\t\t}\n\t\treturn this._lastUpdatedAt;\n\t}\n}\n\nexport class ResourceWithCommentThreads {\n\tid: string;\n\tuniqueOwner: string;\n\towner: string;\n\townerLabel: string | undefined;\n\tcommentThreads: CommentNode[]; // The top level comments on the file. Replys are nested under each node.\n\tresource: URI;\n\n\tconstructor(uniqueOwner: string, owner: string, resource: URI, commentThreads: CommentThread[]) {\n\t\tthis.uniqueOwner = uniqueOwner;\n\t\tthis.owner = owner;\n\t\tthis.id = resource.toString();\n\t\tthis.resource = resource;\n\t\tthis.commentThreads = commentThreads.filter(thread => thread.comments && thread.comments.length).map(thread => ResourceWithCommentThreads.createCommentNode(uniqueOwner, owner, resource, thread));\n\t}\n\n\tpublic static createCommentNode(uniqueOwner: string, owner: string, resource: URI, commentThread: CommentThread): CommentNode {\n\t\tconst { comments } = commentThread;\n\t\tconst commentNodes: CommentNode[] = comments!.map(comment => new CommentNode(uniqueOwner, owner, resource, comment, commentThread));\n\t\tif (commentNodes.length > 1) {\n\t\t\tcommentNodes[0].replies = commentNodes.slice(1, commentNodes.length);\n\t\t}\n\n\t\tcommentNodes[0].isRoot = true;\n\n\t\treturn commentNodes[0];\n\t}\n\n\tprivate _lastUpdatedAt: string | undefined;\n\n\tget lastUpdatedAt() {\n\t\tif (this._lastUpdatedAt === undefined) {\n\t\t\tlet updatedAt = '';\n\t\t\t// Return result without cahcing as we expect data to arrive later\n\t\t\tif (!this.commentThreads.length) {\n\t\t\t\treturn updatedAt;\n\t\t\t}\n\t\t\tfor (const thread of this.commentThreads) {\n\t\t\t\tconst threadUpdatedAt = thread.lastUpdatedAt;\n\t\t\t\tif (threadUpdatedAt && threadUpdatedAt > updatedAt) {\n\t\t\t\t\tupdatedAt = threadUpdatedAt;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._lastUpdatedAt = updatedAt;\n\t\t}\n\t\treturn this._lastUpdatedAt;\n\t}\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAqBiB;IAAAA,cAAA,YAAAA,CAAA;MAAA,OA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","ignoreList":[]}