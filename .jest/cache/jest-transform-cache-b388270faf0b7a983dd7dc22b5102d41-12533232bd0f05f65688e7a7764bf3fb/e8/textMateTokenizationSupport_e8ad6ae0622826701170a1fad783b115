22055c8a96742c28cf69fb604986868a
/* istanbul ignore next */
function cov_2gjum6ztc6() {
  var path = "/home/user/Desktop/MintMind/src/vs/workbench/services/textMate/browser/tokenizationSupport/textMateTokenizationSupport.ts";
  var hash = "8aad87edba213c64cc4eef2dad55048f6bbb8fe8";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/user/Desktop/MintMind/src/vs/workbench/services/textMate/browser/tokenizationSupport/textMateTokenizationSupport.ts",
    statementMap: {
      "0": {
        start: {
          line: 18,
          column: 21
        },
        end: {
          line: 18,
          column: 23
        }
      },
      "1": {
        start: {
          line: 19,
          column: 30
        },
        end: {
          line: 19,
          column: 59
        }
      },
      "2": {
        start: {
          line: 20,
          column: 35
        },
        end: {
          line: 20,
          column: 77
        }
      },
      "3": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 16
        }
      },
      "4": {
        start: {
          line: 23,
          column: 8
        },
        end: {
          line: 23,
          column: 33
        }
      },
      "5": {
        start: {
          line: 24,
          column: 8
        },
        end: {
          line: 24,
          column: 43
        }
      },
      "6": {
        start: {
          line: 25,
          column: 8
        },
        end: {
          line: 25,
          column: 69
        }
      },
      "7": {
        start: {
          line: 26,
          column: 8
        },
        end: {
          line: 26,
          column: 69
        }
      },
      "8": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 27,
          column: 101
        }
      },
      "9": {
        start: {
          line: 28,
          column: 8
        },
        end: {
          line: 28,
          column: 63
        }
      },
      "10": {
        start: {
          line: 29,
          column: 8
        },
        end: {
          line: 29,
          column: 63
        }
      },
      "11": {
        start: {
          line: 32,
          column: 8
        },
        end: {
          line: 32,
          column: 65
        }
      },
      "12": {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 35,
          column: 34
        }
      },
      "13": {
        start: {
          line: 38,
          column: 8
        },
        end: {
          line: 38,
          column: 42
        }
      },
      "14": {
        start: {
          line: 41,
          column: 8
        },
        end: {
          line: 43,
          column: 9
        }
      },
      "15": {
        start: {
          line: 42,
          column: 12
        },
        end: {
          line: 42,
          column: 69
        }
      },
      "16": {
        start: {
          line: 44,
          column: 8
        },
        end: {
          line: 44,
          column: 25
        }
      },
      "17": {
        start: {
          line: 47,
          column: 31
        },
        end: {
          line: 47,
          column: 57
        }
      },
      "18": {
        start: {
          line: 48,
          column: 30
        },
        end: {
          line: 48,
          column: 76
        }
      },
      "19": {
        start: {
          line: 49,
          column: 19
        },
        end: {
          line: 49,
          column: 66
        }
      },
      "20": {
        start: {
          line: 50,
          column: 31
        },
        end: {
          line: 50,
          column: 76
        }
      },
      "21": {
        start: {
          line: 51,
          column: 8
        },
        end: {
          line: 56,
          column: 9
        }
      },
      "22": {
        start: {
          line: 52,
          column: 27
        },
        end: {
          line: 52,
          column: 39
        }
      },
      "23": {
        start: {
          line: 53,
          column: 12
        },
        end: {
          line: 55,
          column: 13
        }
      },
      "24": {
        start: {
          line: 54,
          column: 16
        },
        end: {
          line: 54,
          column: 82
        }
      },
      "25": {
        start: {
          line: 57,
          column: 8
        },
        end: {
          line: 61,
          column: 9
        }
      },
      "26": {
        start: {
          line: 58,
          column: 12
        },
        end: {
          line: 58,
          column: 95
        }
      },
      "27": {
        start: {
          line: 60,
          column: 12
        },
        end: {
          line: 60,
          column: 79
        }
      },
      "28": {
        start: {
          line: 62,
          column: 8
        },
        end: {
          line: 74,
          column: 9
        }
      },
      "29": {
        start: {
          line: 63,
          column: 34
        },
        end: {
          line: 63,
          column: 53
        }
      },
      "30": {
        start: {
          line: 64,
          column: 27
        },
        end: {
          line: 64,
          column: 48
        }
      },
      "31": {
        start: {
          line: 66,
          column: 12
        },
        end: {
          line: 73,
          column: 13
        }
      },
      "32": {
        start: {
          line: 66,
          column: 25
        },
        end: {
          line: 66,
          column: 26
        }
      },
      "33": {
        start: {
          line: 66,
          column: 35
        },
        end: {
          line: 66,
          column: 54
        }
      },
      "34": {
        start: {
          line: 67,
          column: 33
        },
        end: {
          line: 67,
          column: 53
        }
      },
      "35": {
        start: {
          line: 68,
          column: 35
        },
        end: {
          line: 68,
          column: 72
        }
      },
      "36": {
        start: {
          line: 69,
          column: 16
        },
        end: {
          line: 72,
          column: 17
        }
      },
      "37": {
        start: {
          line: 70,
          column: 20
        },
        end: {
          line: 70,
          column: 53
        }
      },
      "38": {
        start: {
          line: 71,
          column: 20
        },
        end: {
          line: 71,
          column: 66
        }
      },
      "39": {
        start: {
          line: 77,
          column: 8
        },
        end: {
          line: 82,
          column: 9
        }
      },
      "40": {
        start: {
          line: 78,
          column: 12
        },
        end: {
          line: 78,
          column: 29
        }
      },
      "41": {
        start: {
          line: 81,
          column: 12
        },
        end: {
          line: 81,
          column: 48
        }
      },
      "42": {
        start: {
          line: 83,
          column: 8
        },
        end: {
          line: 83,
          column: 78
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 20,
            column: 4
          },
          end: {
            line: 20,
            column: 5
          }
        },
        loc: {
          start: {
            line: 20,
            column: 33
          },
          end: {
            line: 20,
            column: 79
          }
        },
        line: 20
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 21,
            column: 4
          },
          end: {
            line: 21,
            column: 5
          }
        },
        loc: {
          start: {
            line: 21,
            column: 191
          },
          end: {
            line: 30,
            column: 5
          }
        },
        line: 21
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 31,
            column: 4
          },
          end: {
            line: 31,
            column: 5
          }
        },
        loc: {
          start: {
            line: 31,
            column: 52
          },
          end: {
            line: 33,
            column: 5
          }
        },
        line: 31
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 34,
            column: 4
          },
          end: {
            line: 34,
            column: 5
          }
        },
        loc: {
          start: {
            line: 34,
            column: 22
          },
          end: {
            line: 36,
            column: 5
          }
        },
        line: 34
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 37,
            column: 4
          },
          end: {
            line: 37,
            column: 5
          }
        },
        loc: {
          start: {
            line: 37,
            column: 34
          },
          end: {
            line: 39,
            column: 5
          }
        },
        line: 37
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 40,
            column: 4
          },
          end: {
            line: 40,
            column: 5
          }
        },
        loc: {
          start: {
            line: 40,
            column: 48
          },
          end: {
            line: 45,
            column: 5
          }
        },
        line: 40
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 46,
            column: 4
          },
          end: {
            line: 46,
            column: 5
          }
        },
        loc: {
          start: {
            line: 46,
            column: 41
          },
          end: {
            line: 84,
            column: 5
          }
        },
        line: 46
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 41,
            column: 8
          },
          end: {
            line: 43,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 41,
            column: 8
          },
          end: {
            line: 43,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 41
      },
      "1": {
        loc: {
          start: {
            line: 48,
            column: 30
          },
          end: {
            line: 48,
            column: 76
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 48,
            column: 30
          },
          end: {
            line: 48,
            column: 58
          }
        }, {
          start: {
            line: 48,
            column: 62
          },
          end: {
            line: 48,
            column: 76
          }
        }],
        line: 48
      },
      "2": {
        loc: {
          start: {
            line: 49,
            column: 19
          },
          end: {
            line: 49,
            column: 66
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 49,
            column: 35
          },
          end: {
            line: 49,
            column: 54
          }
        }, {
          start: {
            line: 49,
            column: 57
          },
          end: {
            line: 49,
            column: 66
          }
        }],
        line: 49
      },
      "3": {
        loc: {
          start: {
            line: 51,
            column: 8
          },
          end: {
            line: 56,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 51,
            column: 8
          },
          end: {
            line: 56,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 51
      },
      "4": {
        loc: {
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 55,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 53,
            column: 12
          },
          end: {
            line: 55,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 53
      },
      "5": {
        loc: {
          start: {
            line: 53,
            column: 16
          },
          end: {
            line: 53,
            column: 45
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 53,
            column: 16
          },
          end: {
            line: 53,
            column: 30
          }
        }, {
          start: {
            line: 53,
            column: 34
          },
          end: {
            line: 53,
            column: 45
          }
        }],
        line: 53
      },
      "6": {
        loc: {
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 61,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 8
          },
          end: {
            line: 61,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "7": {
        loc: {
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 74,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 8
          },
          end: {
            line: 74,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 62
      },
      "8": {
        loc: {
          start: {
            line: 69,
            column: 16
          },
          end: {
            line: 72,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 69,
            column: 16
          },
          end: {
            line: 72,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 69
      },
      "9": {
        loc: {
          start: {
            line: 77,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 77,
            column: 8
          },
          end: {
            line: 82,
            column: 9
          }
        }, {
          start: {
            line: 80,
            column: 13
          },
          end: {
            line: 82,
            column: 9
          }
        }],
        line: 77
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0,
      "42": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0]
    },
    inputSourceMap: {
      file: "/home/user/Desktop/MintMind/src/vs/workbench/services/textMate/browser/tokenizationSupport/textMateTokenizationSupport.ts",
      mappings: "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",
      names: [],
      sources: ["/home/user/Desktop/MintMind/src/vs/workbench/services/textMate/browser/tokenizationSupport/textMateTokenizationSupport.ts"],
      sourcesContent: ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../../base/common/stopwatch.js';\nimport { LanguageId, TokenMetadata } from '../../../../../editor/common/encodedTokenAttributes.js';\nimport { EncodedTokenizationResult, IBackgroundTokenizationStore, IBackgroundTokenizer, IState, ITokenizationSupport, TokenizationResult } from '../../../../../editor/common/languages.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport type { IGrammar, StateStack } from 'vscode-textmate';\n\nexport class TextMateTokenizationSupport extends Disposable implements ITokenizationSupport {\n\tprivate readonly _seenLanguages: boolean[] = [];\n\tprivate readonly _onDidEncounterLanguage: Emitter<LanguageId> = this._register(new Emitter<LanguageId>());\n\tpublic get onDidEncounterLanguage(): Event<LanguageId> { return this._onDidEncounterLanguage.event; }\n\n\tconstructor(\n\t\tprivate readonly _grammar: IGrammar,\n\t\tprivate readonly _initialState: StateStack,\n\t\tprivate readonly _containsEmbeddedLanguages: boolean,\n\t\tprivate readonly _createBackgroundTokenizer: ((textModel: ITextModel, tokenStore: IBackgroundTokenizationStore) => IBackgroundTokenizer | undefined) | undefined,\n\t\tprivate readonly _backgroundTokenizerShouldOnlyVerifyTokens: () => boolean,\n\t\tprivate readonly _reportTokenizationTime: (timeMs: number, lineLength: number, isRandomSample: boolean) => void,\n\t\tprivate readonly _reportSlowTokenization: boolean,\n\t) {\n\t\tsuper();\n\t}\n\n\tpublic get backgroundTokenizerShouldOnlyVerifyTokens(): boolean | undefined {\n\t\treturn this._backgroundTokenizerShouldOnlyVerifyTokens();\n\t}\n\n\tpublic getInitialState(): IState {\n\t\treturn this._initialState;\n\t}\n\n\tpublic tokenize(line: string, hasEOL: boolean, state: IState): TokenizationResult {\n\t\tthrow new Error('Not supported!');\n\t}\n\n\tpublic createBackgroundTokenizer(textModel: ITextModel, store: IBackgroundTokenizationStore): IBackgroundTokenizer | undefined {\n\t\tif (this._createBackgroundTokenizer) {\n\t\t\treturn this._createBackgroundTokenizer(textModel, store);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tpublic tokenizeEncoded(line: string, hasEOL: boolean, state: StateStack): EncodedTokenizationResult {\n\t\tconst isRandomSample = Math.random() * 10_000 < 1;\n\t\tconst shouldMeasure = this._reportSlowTokenization || isRandomSample;\n\t\tconst sw = shouldMeasure ? new StopWatch(true) : undefined;\n\t\tconst textMateResult = this._grammar.tokenizeLine2(line, state, 500);\n\t\tif (shouldMeasure) {\n\t\t\tconst timeMS = sw!.elapsed();\n\t\t\tif (isRandomSample || timeMS > 32) {\n\t\t\t\tthis._reportTokenizationTime(timeMS, line.length, isRandomSample);\n\t\t\t}\n\t\t}\n\n\t\tif (textMateResult.stoppedEarly) {\n\t\t\tconsole.warn(`Time limit reached when tokenizing line: ${line.substring(0, 100)}`);\n\t\t\t// return the state at the beginning of the line\n\t\t\treturn new EncodedTokenizationResult(textMateResult.tokens, state);\n\t\t}\n\n\t\tif (this._containsEmbeddedLanguages) {\n\t\t\tconst seenLanguages = this._seenLanguages;\n\t\t\tconst tokens = textMateResult.tokens;\n\n\t\t\t// Must check if any of the embedded languages was hit\n\t\t\tfor (let i = 0, len = (tokens.length >>> 1); i < len; i++) {\n\t\t\t\tconst metadata = tokens[(i << 1) + 1];\n\t\t\t\tconst languageId = TokenMetadata.getLanguageId(metadata);\n\n\t\t\t\tif (!seenLanguages[languageId]) {\n\t\t\t\t\tseenLanguages[languageId] = true;\n\t\t\t\t\tthis._onDidEncounterLanguage.fire(languageId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet endState: StateStack;\n\t\t// try to save an object if possible\n\t\tif (state.equals(textMateResult.ruleStack)) {\n\t\t\tendState = state;\n\t\t} else {\n\t\t\tendState = textMateResult.ruleStack;\n\t\t}\n\n\t\treturn new EncodedTokenizationResult(textMateResult.tokens, endState);\n\t}\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "8aad87edba213c64cc4eef2dad55048f6bbb8fe8"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_2gjum6ztc6 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_2gjum6ztc6();
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
import { Emitter } from '../../../../../base/common/event.js';
import { Disposable } from '../../../../../base/common/lifecycle.js';
import { StopWatch } from '../../../../../base/common/stopwatch.js';
import { TokenMetadata } from '../../../../../editor/common/encodedTokenAttributes.js';
import { EncodedTokenizationResult } from '../../../../../editor/common/languages.js';
export class TextMateTokenizationSupport extends Disposable {
  _grammar;
  _initialState;
  _containsEmbeddedLanguages;
  _createBackgroundTokenizer;
  _backgroundTokenizerShouldOnlyVerifyTokens;
  _reportTokenizationTime;
  _reportSlowTokenization;
  _seenLanguages =
  /* istanbul ignore next */
  (cov_2gjum6ztc6().s[0]++, []);
  _onDidEncounterLanguage =
  /* istanbul ignore next */
  (cov_2gjum6ztc6().s[1]++, this._register(new Emitter()));
  get onDidEncounterLanguage() {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[0]++;
    cov_2gjum6ztc6().s[2]++;
    return this._onDidEncounterLanguage.event;
  }
  constructor(_grammar, _initialState, _containsEmbeddedLanguages, _createBackgroundTokenizer, _backgroundTokenizerShouldOnlyVerifyTokens, _reportTokenizationTime, _reportSlowTokenization) {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[1]++;
    cov_2gjum6ztc6().s[3]++;
    super();
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[4]++;
    this._grammar = _grammar;
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[5]++;
    this._initialState = _initialState;
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[6]++;
    this._containsEmbeddedLanguages = _containsEmbeddedLanguages;
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[7]++;
    this._createBackgroundTokenizer = _createBackgroundTokenizer;
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[8]++;
    this._backgroundTokenizerShouldOnlyVerifyTokens = _backgroundTokenizerShouldOnlyVerifyTokens;
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[9]++;
    this._reportTokenizationTime = _reportTokenizationTime;
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[10]++;
    this._reportSlowTokenization = _reportSlowTokenization;
  }
  get backgroundTokenizerShouldOnlyVerifyTokens() {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[2]++;
    cov_2gjum6ztc6().s[11]++;
    return this._backgroundTokenizerShouldOnlyVerifyTokens();
  }
  getInitialState() {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[3]++;
    cov_2gjum6ztc6().s[12]++;
    return this._initialState;
  }
  tokenize(line, hasEOL, state) {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[4]++;
    cov_2gjum6ztc6().s[13]++;
    throw new Error('Not supported!');
  }
  createBackgroundTokenizer(textModel, store) {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[5]++;
    cov_2gjum6ztc6().s[14]++;
    if (this._createBackgroundTokenizer) {
      /* istanbul ignore next */
      cov_2gjum6ztc6().b[0][0]++;
      cov_2gjum6ztc6().s[15]++;
      return this._createBackgroundTokenizer(textModel, store);
    } else
    /* istanbul ignore next */
    {
      cov_2gjum6ztc6().b[0][1]++;
    }
    cov_2gjum6ztc6().s[16]++;
    return undefined;
  }
  tokenizeEncoded(line, hasEOL, state) {
    /* istanbul ignore next */
    cov_2gjum6ztc6().f[6]++;
    const isRandomSample =
    /* istanbul ignore next */
    (cov_2gjum6ztc6().s[17]++, Math.random() * 10_000 < 1);
    const shouldMeasure =
    /* istanbul ignore next */
    (cov_2gjum6ztc6().s[18]++,
    /* istanbul ignore next */
    (cov_2gjum6ztc6().b[1][0]++, this._reportSlowTokenization) ||
    /* istanbul ignore next */
    (cov_2gjum6ztc6().b[1][1]++, isRandomSample));
    const sw =
    /* istanbul ignore next */
    (cov_2gjum6ztc6().s[19]++, shouldMeasure ?
    /* istanbul ignore next */
    (cov_2gjum6ztc6().b[2][0]++, new StopWatch(true)) :
    /* istanbul ignore next */
    (cov_2gjum6ztc6().b[2][1]++, undefined));
    const textMateResult =
    /* istanbul ignore next */
    (cov_2gjum6ztc6().s[20]++, this._grammar.tokenizeLine2(line, state, 500));
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[21]++;
    if (shouldMeasure) {
      /* istanbul ignore next */
      cov_2gjum6ztc6().b[3][0]++;
      const timeMS =
      /* istanbul ignore next */
      (cov_2gjum6ztc6().s[22]++, sw.elapsed());
      /* istanbul ignore next */
      cov_2gjum6ztc6().s[23]++;
      if (
      /* istanbul ignore next */
      (cov_2gjum6ztc6().b[5][0]++, isRandomSample) ||
      /* istanbul ignore next */
      (cov_2gjum6ztc6().b[5][1]++, timeMS > 32)) {
        /* istanbul ignore next */
        cov_2gjum6ztc6().b[4][0]++;
        cov_2gjum6ztc6().s[24]++;
        this._reportTokenizationTime(timeMS, line.length, isRandomSample);
      } else
      /* istanbul ignore next */
      {
        cov_2gjum6ztc6().b[4][1]++;
      }
    } else
    /* istanbul ignore next */
    {
      cov_2gjum6ztc6().b[3][1]++;
    }
    cov_2gjum6ztc6().s[25]++;
    if (textMateResult.stoppedEarly) {
      /* istanbul ignore next */
      cov_2gjum6ztc6().b[6][0]++;
      cov_2gjum6ztc6().s[26]++;
      console.warn(`Time limit reached when tokenizing line: ${line.substring(0, 100)}`);
      // return the state at the beginning of the line
      /* istanbul ignore next */
      cov_2gjum6ztc6().s[27]++;
      return new EncodedTokenizationResult(textMateResult.tokens, state);
    } else
    /* istanbul ignore next */
    {
      cov_2gjum6ztc6().b[6][1]++;
    }
    cov_2gjum6ztc6().s[28]++;
    if (this._containsEmbeddedLanguages) {
      /* istanbul ignore next */
      cov_2gjum6ztc6().b[7][0]++;
      const seenLanguages =
      /* istanbul ignore next */
      (cov_2gjum6ztc6().s[29]++, this._seenLanguages);
      const tokens =
      /* istanbul ignore next */
      (cov_2gjum6ztc6().s[30]++, textMateResult.tokens);
      // Must check if any of the embedded languages was hit
      /* istanbul ignore next */
      cov_2gjum6ztc6().s[31]++;
      for (let i =
        /* istanbul ignore next */
        (cov_2gjum6ztc6().s[32]++, 0), len =
        /* istanbul ignore next */
        (cov_2gjum6ztc6().s[33]++, tokens.length >>> 1); i < len; i++) {
        const metadata =
        /* istanbul ignore next */
        (cov_2gjum6ztc6().s[34]++, tokens[(i << 1) + 1]);
        const languageId =
        /* istanbul ignore next */
        (cov_2gjum6ztc6().s[35]++, TokenMetadata.getLanguageId(metadata));
        /* istanbul ignore next */
        cov_2gjum6ztc6().s[36]++;
        if (!seenLanguages[languageId]) {
          /* istanbul ignore next */
          cov_2gjum6ztc6().b[8][0]++;
          cov_2gjum6ztc6().s[37]++;
          seenLanguages[languageId] = true;
          /* istanbul ignore next */
          cov_2gjum6ztc6().s[38]++;
          this._onDidEncounterLanguage.fire(languageId);
        } else
        /* istanbul ignore next */
        {
          cov_2gjum6ztc6().b[8][1]++;
        }
      }
    } else
    /* istanbul ignore next */
    {
      cov_2gjum6ztc6().b[7][1]++;
    }
    let endState;
    // try to save an object if possible
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[39]++;
    if (state.equals(textMateResult.ruleStack)) {
      /* istanbul ignore next */
      cov_2gjum6ztc6().b[9][0]++;
      cov_2gjum6ztc6().s[40]++;
      endState = state;
    } else {
      /* istanbul ignore next */
      cov_2gjum6ztc6().b[9][1]++;
      cov_2gjum6ztc6().s[41]++;
      endState = textMateResult.ruleStack;
    }
    /* istanbul ignore next */
    cov_2gjum6ztc6().s[42]++;
    return new EncodedTokenizationResult(textMateResult.tokens, endState);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMmdqdW02enRjNiIsImFjdHVhbENvdmVyYWdlIiwiRW1pdHRlciIsIkRpc3Bvc2FibGUiLCJTdG9wV2F0Y2giLCJUb2tlbk1ldGFkYXRhIiwiRW5jb2RlZFRva2VuaXphdGlvblJlc3VsdCIsIlRleHRNYXRlVG9rZW5pemF0aW9uU3VwcG9ydCIsIl9ncmFtbWFyIiwiX2luaXRpYWxTdGF0ZSIsIl9jb250YWluc0VtYmVkZGVkTGFuZ3VhZ2VzIiwiX2NyZWF0ZUJhY2tncm91bmRUb2tlbml6ZXIiLCJfYmFja2dyb3VuZFRva2VuaXplclNob3VsZE9ubHlWZXJpZnlUb2tlbnMiLCJfcmVwb3J0VG9rZW5pemF0aW9uVGltZSIsIl9yZXBvcnRTbG93VG9rZW5pemF0aW9uIiwiX3NlZW5MYW5ndWFnZXMiLCJzIiwiX29uRGlkRW5jb3VudGVyTGFuZ3VhZ2UiLCJfcmVnaXN0ZXIiLCJvbkRpZEVuY291bnRlckxhbmd1YWdlIiwiZiIsImV2ZW50IiwiY29uc3RydWN0b3IiLCJiYWNrZ3JvdW5kVG9rZW5pemVyU2hvdWxkT25seVZlcmlmeVRva2VucyIsImdldEluaXRpYWxTdGF0ZSIsInRva2VuaXplIiwibGluZSIsImhhc0VPTCIsInN0YXRlIiwiRXJyb3IiLCJjcmVhdGVCYWNrZ3JvdW5kVG9rZW5pemVyIiwidGV4dE1vZGVsIiwic3RvcmUiLCJiIiwidW5kZWZpbmVkIiwidG9rZW5pemVFbmNvZGVkIiwiaXNSYW5kb21TYW1wbGUiLCJNYXRoIiwicmFuZG9tIiwic2hvdWxkTWVhc3VyZSIsInN3IiwidGV4dE1hdGVSZXN1bHQiLCJ0b2tlbml6ZUxpbmUyIiwidGltZU1TIiwiZWxhcHNlZCIsImxlbmd0aCIsInN0b3BwZWRFYXJseSIsImNvbnNvbGUiLCJ3YXJuIiwic3Vic3RyaW5nIiwidG9rZW5zIiwic2Vlbkxhbmd1YWdlcyIsImkiLCJsZW4iLCJtZXRhZGF0YSIsImxhbmd1YWdlSWQiLCJnZXRMYW5ndWFnZUlkIiwiZmlyZSIsImVuZFN0YXRlIiwiZXF1YWxzIiwicnVsZVN0YWNrIl0sInNvdXJjZXMiOlsiL2hvbWUvdXNlci9EZXNrdG9wL01pbnRNaW5kL3NyYy92cy93b3JrYmVuY2gvc2VydmljZXMvdGV4dE1hdGUvYnJvd3Nlci90b2tlbml6YXRpb25TdXBwb3J0L3RleHRNYXRlVG9rZW5pemF0aW9uU3VwcG9ydC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuaW1wb3J0IHsgRW1pdHRlciwgRXZlbnQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9iYXNlL2NvbW1vbi9ldmVudC5qcyc7XG5pbXBvcnQgeyBEaXNwb3NhYmxlIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vYmFzZS9jb21tb24vbGlmZWN5Y2xlLmpzJztcbmltcG9ydCB7IFN0b3BXYXRjaCB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL2Jhc2UvY29tbW9uL3N0b3B3YXRjaC5qcyc7XG5pbXBvcnQgeyBMYW5ndWFnZUlkLCBUb2tlbk1ldGFkYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZWRpdG9yL2NvbW1vbi9lbmNvZGVkVG9rZW5BdHRyaWJ1dGVzLmpzJztcbmltcG9ydCB7IEVuY29kZWRUb2tlbml6YXRpb25SZXN1bHQsIElCYWNrZ3JvdW5kVG9rZW5pemF0aW9uU3RvcmUsIElCYWNrZ3JvdW5kVG9rZW5pemVyLCBJU3RhdGUsIElUb2tlbml6YXRpb25TdXBwb3J0LCBUb2tlbml6YXRpb25SZXN1bHQgfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9lZGl0b3IvY29tbW9uL2xhbmd1YWdlcy5qcyc7XG5pbXBvcnQgeyBJVGV4dE1vZGVsIH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vZWRpdG9yL2NvbW1vbi9tb2RlbC5qcyc7XG5pbXBvcnQgdHlwZSB7IElHcmFtbWFyLCBTdGF0ZVN0YWNrIH0gZnJvbSAndnNjb2RlLXRleHRtYXRlJztcblxuZXhwb3J0IGNsYXNzIFRleHRNYXRlVG9rZW5pemF0aW9uU3VwcG9ydCBleHRlbmRzIERpc3Bvc2FibGUgaW1wbGVtZW50cyBJVG9rZW5pemF0aW9uU3VwcG9ydCB7XG5cdHByaXZhdGUgcmVhZG9ubHkgX3NlZW5MYW5ndWFnZXM6IGJvb2xlYW5bXSA9IFtdO1xuXHRwcml2YXRlIHJlYWRvbmx5IF9vbkRpZEVuY291bnRlckxhbmd1YWdlOiBFbWl0dGVyPExhbmd1YWdlSWQ+ID0gdGhpcy5fcmVnaXN0ZXIobmV3IEVtaXR0ZXI8TGFuZ3VhZ2VJZD4oKSk7XG5cdHB1YmxpYyBnZXQgb25EaWRFbmNvdW50ZXJMYW5ndWFnZSgpOiBFdmVudDxMYW5ndWFnZUlkPiB7IHJldHVybiB0aGlzLl9vbkRpZEVuY291bnRlckxhbmd1YWdlLmV2ZW50OyB9XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSByZWFkb25seSBfZ3JhbW1hcjogSUdyYW1tYXIsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBfaW5pdGlhbFN0YXRlOiBTdGF0ZVN0YWNrLFxuXHRcdHByaXZhdGUgcmVhZG9ubHkgX2NvbnRhaW5zRW1iZWRkZWRMYW5ndWFnZXM6IGJvb2xlYW4sXG5cdFx0cHJpdmF0ZSByZWFkb25seSBfY3JlYXRlQmFja2dyb3VuZFRva2VuaXplcjogKCh0ZXh0TW9kZWw6IElUZXh0TW9kZWwsIHRva2VuU3RvcmU6IElCYWNrZ3JvdW5kVG9rZW5pemF0aW9uU3RvcmUpID0+IElCYWNrZ3JvdW5kVG9rZW5pemVyIHwgdW5kZWZpbmVkKSB8IHVuZGVmaW5lZCxcblx0XHRwcml2YXRlIHJlYWRvbmx5IF9iYWNrZ3JvdW5kVG9rZW5pemVyU2hvdWxkT25seVZlcmlmeVRva2VuczogKCkgPT4gYm9vbGVhbixcblx0XHRwcml2YXRlIHJlYWRvbmx5IF9yZXBvcnRUb2tlbml6YXRpb25UaW1lOiAodGltZU1zOiBudW1iZXIsIGxpbmVMZW5ndGg6IG51bWJlciwgaXNSYW5kb21TYW1wbGU6IGJvb2xlYW4pID0+IHZvaWQsXG5cdFx0cHJpdmF0ZSByZWFkb25seSBfcmVwb3J0U2xvd1Rva2VuaXphdGlvbjogYm9vbGVhbixcblx0KSB7XG5cdFx0c3VwZXIoKTtcblx0fVxuXG5cdHB1YmxpYyBnZXQgYmFja2dyb3VuZFRva2VuaXplclNob3VsZE9ubHlWZXJpZnlUb2tlbnMoKTogYm9vbGVhbiB8IHVuZGVmaW5lZCB7XG5cdFx0cmV0dXJuIHRoaXMuX2JhY2tncm91bmRUb2tlbml6ZXJTaG91bGRPbmx5VmVyaWZ5VG9rZW5zKCk7XG5cdH1cblxuXHRwdWJsaWMgZ2V0SW5pdGlhbFN0YXRlKCk6IElTdGF0ZSB7XG5cdFx0cmV0dXJuIHRoaXMuX2luaXRpYWxTdGF0ZTtcblx0fVxuXG5cdHB1YmxpYyB0b2tlbml6ZShsaW5lOiBzdHJpbmcsIGhhc0VPTDogYm9vbGVhbiwgc3RhdGU6IElTdGF0ZSk6IFRva2VuaXphdGlvblJlc3VsdCB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdOb3Qgc3VwcG9ydGVkIScpO1xuXHR9XG5cblx0cHVibGljIGNyZWF0ZUJhY2tncm91bmRUb2tlbml6ZXIodGV4dE1vZGVsOiBJVGV4dE1vZGVsLCBzdG9yZTogSUJhY2tncm91bmRUb2tlbml6YXRpb25TdG9yZSk6IElCYWNrZ3JvdW5kVG9rZW5pemVyIHwgdW5kZWZpbmVkIHtcblx0XHRpZiAodGhpcy5fY3JlYXRlQmFja2dyb3VuZFRva2VuaXplcikge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2NyZWF0ZUJhY2tncm91bmRUb2tlbml6ZXIodGV4dE1vZGVsLCBzdG9yZSk7XG5cdFx0fVxuXHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdH1cblxuXHRwdWJsaWMgdG9rZW5pemVFbmNvZGVkKGxpbmU6IHN0cmluZywgaGFzRU9MOiBib29sZWFuLCBzdGF0ZTogU3RhdGVTdGFjayk6IEVuY29kZWRUb2tlbml6YXRpb25SZXN1bHQge1xuXHRcdGNvbnN0IGlzUmFuZG9tU2FtcGxlID0gTWF0aC5yYW5kb20oKSAqIDEwXzAwMCA8IDE7XG5cdFx0Y29uc3Qgc2hvdWxkTWVhc3VyZSA9IHRoaXMuX3JlcG9ydFNsb3dUb2tlbml6YXRpb24gfHwgaXNSYW5kb21TYW1wbGU7XG5cdFx0Y29uc3Qgc3cgPSBzaG91bGRNZWFzdXJlID8gbmV3IFN0b3BXYXRjaCh0cnVlKSA6IHVuZGVmaW5lZDtcblx0XHRjb25zdCB0ZXh0TWF0ZVJlc3VsdCA9IHRoaXMuX2dyYW1tYXIudG9rZW5pemVMaW5lMihsaW5lLCBzdGF0ZSwgNTAwKTtcblx0XHRpZiAoc2hvdWxkTWVhc3VyZSkge1xuXHRcdFx0Y29uc3QgdGltZU1TID0gc3chLmVsYXBzZWQoKTtcblx0XHRcdGlmIChpc1JhbmRvbVNhbXBsZSB8fCB0aW1lTVMgPiAzMikge1xuXHRcdFx0XHR0aGlzLl9yZXBvcnRUb2tlbml6YXRpb25UaW1lKHRpbWVNUywgbGluZS5sZW5ndGgsIGlzUmFuZG9tU2FtcGxlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAodGV4dE1hdGVSZXN1bHQuc3RvcHBlZEVhcmx5KSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYFRpbWUgbGltaXQgcmVhY2hlZCB3aGVuIHRva2VuaXppbmcgbGluZTogJHtsaW5lLnN1YnN0cmluZygwLCAxMDApfWApO1xuXHRcdFx0Ly8gcmV0dXJuIHRoZSBzdGF0ZSBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBsaW5lXG5cdFx0XHRyZXR1cm4gbmV3IEVuY29kZWRUb2tlbml6YXRpb25SZXN1bHQodGV4dE1hdGVSZXN1bHQudG9rZW5zLCBzdGF0ZSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2NvbnRhaW5zRW1iZWRkZWRMYW5ndWFnZXMpIHtcblx0XHRcdGNvbnN0IHNlZW5MYW5ndWFnZXMgPSB0aGlzLl9zZWVuTGFuZ3VhZ2VzO1xuXHRcdFx0Y29uc3QgdG9rZW5zID0gdGV4dE1hdGVSZXN1bHQudG9rZW5zO1xuXG5cdFx0XHQvLyBNdXN0IGNoZWNrIGlmIGFueSBvZiB0aGUgZW1iZWRkZWQgbGFuZ3VhZ2VzIHdhcyBoaXRcblx0XHRcdGZvciAobGV0IGkgPSAwLCBsZW4gPSAodG9rZW5zLmxlbmd0aCA+Pj4gMSk7IGkgPCBsZW47IGkrKykge1xuXHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRva2Vuc1soaSA8PCAxKSArIDFdO1xuXHRcdFx0XHRjb25zdCBsYW5ndWFnZUlkID0gVG9rZW5NZXRhZGF0YS5nZXRMYW5ndWFnZUlkKG1ldGFkYXRhKTtcblxuXHRcdFx0XHRpZiAoIXNlZW5MYW5ndWFnZXNbbGFuZ3VhZ2VJZF0pIHtcblx0XHRcdFx0XHRzZWVuTGFuZ3VhZ2VzW2xhbmd1YWdlSWRdID0gdHJ1ZTtcblx0XHRcdFx0XHR0aGlzLl9vbkRpZEVuY291bnRlckxhbmd1YWdlLmZpcmUobGFuZ3VhZ2VJZCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgZW5kU3RhdGU6IFN0YXRlU3RhY2s7XG5cdFx0Ly8gdHJ5IHRvIHNhdmUgYW4gb2JqZWN0IGlmIHBvc3NpYmxlXG5cdFx0aWYgKHN0YXRlLmVxdWFscyh0ZXh0TWF0ZVJlc3VsdC5ydWxlU3RhY2spKSB7XG5cdFx0XHRlbmRTdGF0ZSA9IHN0YXRlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbmRTdGF0ZSA9IHRleHRNYXRlUmVzdWx0LnJ1bGVTdGFjaztcblx0XHR9XG5cblx0XHRyZXR1cm4gbmV3IEVuY29kZWRUb2tlbml6YXRpb25SZXN1bHQodGV4dE1hdGVSZXN1bHQudG9rZW5zLCBlbmRTdGF0ZSk7XG5cdH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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