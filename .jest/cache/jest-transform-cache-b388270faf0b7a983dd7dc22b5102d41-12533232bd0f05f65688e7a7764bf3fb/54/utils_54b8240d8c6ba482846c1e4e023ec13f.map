{"version":3,"names":["cov_1e4k9kwe37","actualCoverage","BugIndicatingError","DisposableStore","getDebugName","DebugNameData","observableFromEvent","autorunOpts","derivedObservableWithCache","latestChangedValue","owner","observables","f","s","length","b","hasLastChangedValue","lastChangedValue","undefined","result","cb","store","o","add","debugName","reader","read","dispose","get","derivedConstOnceDefined","fn","lastValue"],"sources":["/home/user/Desktop/MintMind/src/vs/base/common/observableInternal/experimental/utils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IObservable, IReader } from '../base.js';\nimport { BugIndicatingError, DisposableStore } from '../commonFacade/deps.js';\nimport { DebugOwner, getDebugName, DebugNameData } from '../debugName.js';\nimport { observableFromEvent } from '../observables/observableFromEvent.js';\nimport { autorunOpts } from '../reactions/autorun.js';\nimport { derivedObservableWithCache } from '../utils/utils.js';\n\n/**\n * Creates an observable that has the latest changed value of the given observables.\n * Initially (and when not observed), it has the value of the last observable.\n * When observed and any of the observables change, it has the value of the last changed observable.\n * If multiple observables change in the same transaction, the last observable wins.\n*/\nexport function latestChangedValue<T extends IObservable<any>[]>(owner: DebugOwner, observables: T): IObservable<ReturnType<T[number]['get']>> {\n\tif (observables.length === 0) {\n\t\tthrow new BugIndicatingError();\n\t}\n\n\tlet hasLastChangedValue = false;\n\tlet lastChangedValue: unknown = undefined;\n\n\tconst result = observableFromEvent<any, void>(owner, cb => {\n\t\tconst store = new DisposableStore();\n\t\tfor (const o of observables) {\n\t\t\tstore.add(autorunOpts({ debugName: () => getDebugName(result, new DebugNameData(owner, undefined, undefined)) + '.updateLastChangedValue' }, reader => {\n\t\t\t\thasLastChangedValue = true;\n\t\t\t\tlastChangedValue = o.read(reader);\n\t\t\t\tcb();\n\t\t\t}));\n\t\t}\n\t\tstore.add({\n\t\t\tdispose() {\n\t\t\t\thasLastChangedValue = false;\n\t\t\t\tlastChangedValue = undefined;\n\t\t\t},\n\t\t});\n\t\treturn store;\n\t}, () => {\n\t\tif (hasLastChangedValue) {\n\t\t\treturn lastChangedValue;\n\t\t} else {\n\t\t\treturn observables[observables.length - 1].get();\n\t\t}\n\t});\n\treturn result;\n}\n\n/**\n * Works like a derived.\n * However, if the value is not undefined, it is cached and will not be recomputed anymore.\n * In that case, the derived will unsubscribe from its dependencies.\n*/\nexport function derivedConstOnceDefined<T>(owner: DebugOwner, fn: (reader: IReader) => T): IObservable<T | undefined> {\n\treturn derivedObservableWithCache<T | undefined>(owner, (reader, lastValue) => lastValue ?? fn(reader));\n}\n"],"mappings":"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","ignoreList":[]}