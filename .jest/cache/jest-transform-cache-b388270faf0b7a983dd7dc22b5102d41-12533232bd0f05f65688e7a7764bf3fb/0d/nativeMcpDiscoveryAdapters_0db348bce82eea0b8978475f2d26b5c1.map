{"version":3,"names":["cov_sk1wbbg8o","actualCoverage","URI","McpServerLaunch","claudeConfigToServerDefinition","idPrefix","contents","cwd","f","parsed","s","JSON","parse","toString","Promise","all","Object","entries","mcpServers","map","name","server","launch","url","b","type","uri","headers","args","command","env","envFile","undefined","fsPath","id","label","cacheNonce","hash","ClaudeDesktopMpcDiscoveryAdapter","remoteAuthority","order","discoverySource","constructor","getFilePath","platform","winAppData","xdgHome","homedir","appData","joinPath","configDir","adaptFile","WindsurfDesktopMpcDiscoveryAdapter","CursorDesktopMpcDiscoveryAdapter"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/mcp/common/discovery/nativeMcpDiscoveryAdapters.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../../../base/common/buffer.js';\nimport { Platform } from '../../../../../base/common/platform.js';\nimport { Mutable } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { INativeMcpDiscoveryData } from '../../../../../platform/mcp/common/nativeMcpDiscoveryHelper.js';\nimport { DiscoverySource } from '../mcpConfiguration.js';\nimport { McpCollectionSortOrder, McpServerDefinition, McpServerLaunch, McpServerTransportType } from '../mcpTypes.js';\n\nexport interface NativeMpcDiscoveryAdapter {\n\treadonly remoteAuthority: string | null;\n\treadonly id: string;\n\treadonly order: number;\n\treadonly discoverySource: DiscoverySource;\n\n\tgetFilePath(details: INativeMcpDiscoveryData): URI | undefined;\n\tadaptFile(contents: VSBuffer, details: INativeMcpDiscoveryData): Promise<McpServerDefinition[] | undefined>;\n}\n\nexport async function claudeConfigToServerDefinition(idPrefix: string, contents: VSBuffer, cwd?: URI) {\n\tlet parsed: {\n\t\tmcpServers: Record<string, {\n\t\t\tcommand: string;\n\t\t\targs?: string[];\n\t\t\tenv?: Record<string, string>;\n\t\t\turl?: string;\n\t\t}>;\n\t};\n\n\ttry {\n\t\tparsed = JSON.parse(contents.toString());\n\t} catch {\n\t\treturn;\n\t}\n\n\treturn Promise.all(Object.entries(parsed.mcpServers).map(async ([name, server]): Promise<Mutable<McpServerDefinition>> => {\n\t\tconst launch: McpServerLaunch = server.url ? {\n\t\t\ttype: McpServerTransportType.HTTP,\n\t\t\turi: URI.parse(server.url),\n\t\t\theaders: [],\n\t\t} : {\n\t\t\ttype: McpServerTransportType.Stdio,\n\t\t\targs: server.args || [],\n\t\t\tcommand: server.command,\n\t\t\tenv: server.env || {},\n\t\t\tenvFile: undefined,\n\t\t\tcwd: cwd?.fsPath,\n\t\t};\n\n\t\treturn {\n\t\t\tid: `${idPrefix}.${name}`,\n\t\t\tlabel: name,\n\t\t\tlaunch,\n\t\t\tcacheNonce: await McpServerLaunch.hash(launch),\n\t\t};\n\t}));\n}\n\nexport class ClaudeDesktopMpcDiscoveryAdapter implements NativeMpcDiscoveryAdapter {\n\tpublic id: string;\n\tpublic readonly order = McpCollectionSortOrder.Filesystem;\n\tpublic readonly discoverySource: DiscoverySource = DiscoverySource.ClaudeDesktop;\n\n\tconstructor(public readonly remoteAuthority: string | null) {\n\t\tthis.id = `claude-desktop.${this.remoteAuthority}`;\n\t}\n\n\tgetFilePath({ platform, winAppData, xdgHome, homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\tif (platform === Platform.Windows) {\n\t\t\tconst appData = winAppData || URI.joinPath(homedir, 'AppData', 'Roaming');\n\t\t\treturn URI.joinPath(appData, 'Claude', 'claude_desktop_config.json');\n\t\t} else if (platform === Platform.Mac) {\n\t\t\treturn URI.joinPath(homedir, 'Library', 'Application Support', 'Claude', 'claude_desktop_config.json');\n\t\t} else {\n\t\t\tconst configDir = xdgHome || URI.joinPath(homedir, '.config');\n\t\t\treturn URI.joinPath(configDir, 'Claude', 'claude_desktop_config.json');\n\t\t}\n\t}\n\n\tadaptFile(contents: VSBuffer, { homedir }: INativeMcpDiscoveryData): Promise<McpServerDefinition[] | undefined> {\n\t\treturn claudeConfigToServerDefinition(this.id, contents, homedir);\n\t}\n}\n\nexport class WindsurfDesktopMpcDiscoveryAdapter extends ClaudeDesktopMpcDiscoveryAdapter {\n\tpublic override readonly discoverySource: DiscoverySource = DiscoverySource.Windsurf;\n\n\tconstructor(remoteAuthority: string | null) {\n\t\tsuper(remoteAuthority);\n\t\tthis.id = `windsurf.${this.remoteAuthority}`;\n\t}\n\n\toverride getFilePath({ homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\treturn URI.joinPath(homedir, '.codeium', 'windsurf', 'mcp_config.json');\n\t}\n}\n\nexport class CursorDesktopMpcDiscoveryAdapter extends ClaudeDesktopMpcDiscoveryAdapter {\n\tpublic override readonly discoverySource: DiscoverySource = DiscoverySource.CursorGlobal;\n\n\tconstructor(remoteAuthority: string | null) {\n\t\tsuper(remoteAuthority);\n\t\tthis.id = `cursor.${this.remoteAuthority}`;\n\t}\n\n\toverride getFilePath({ homedir }: INativeMcpDiscoveryData): URI | undefined {\n\t\treturn URI.joinPath(homedir, '.cursor', 'mcp.json');\n\t}\n}\n"],"mappings":"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","ignoreList":[]}