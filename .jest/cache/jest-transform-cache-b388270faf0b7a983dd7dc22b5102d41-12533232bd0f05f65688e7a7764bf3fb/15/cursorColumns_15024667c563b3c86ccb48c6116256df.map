{"version":3,"names":["strings","CursorColumns","_nextVisibleColumn","codePoint","visibleColumn","tabSize","cov_5af80lesk","f","s","b","nextRenderTabStop","isFullWidthCharacter","isEmojiImprecise","visibleColumnFromColumn","lineContent","column","textLen","Math","min","length","text","substring","iterator","GraphemeIterator","result","eol","getNextCodePoint","offset","nextGraphemeLength","toStatusbarColumn","CodePointIterator","nextCodePoint","columnFromVisibleColumn","lineContentLength","beforeVisibleColumn","beforeColumn","afterVisibleColumn","afterColumn","beforeDelta","afterDelta","nextIndentTabStop","indentSize","prevRenderTabStop","max","prevIndentTabStop"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/core/cursorColumns.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from '../../../base/common/charCode.js';\nimport * as strings from '../../../base/common/strings.js';\n\n/**\n * A column in a position is the gap between two adjacent characters. The methods here\n * work with a concept called \"visible column\". A visible column is a very rough approximation\n * of the horizontal screen position of a column. For example, using a tab size of 4:\n * ```txt\n * |<TAB>|<TAB>|T|ext\n * |     |     | \\---- column = 4, visible column = 9\n * |     |     \\------ column = 3, visible column = 8\n * |     \\------------ column = 2, visible column = 4\n * \\------------------ column = 1, visible column = 0\n * ```\n *\n * **NOTE**: Visual columns do not work well for RTL text or variable-width fonts or characters.\n *\n * **NOTE**: These methods work and make sense both on the model and on the view model.\n */\nexport class CursorColumns {\n\n\tprivate static _nextVisibleColumn(codePoint: number, visibleColumn: number, tabSize: number): number {\n\t\tif (codePoint === CharCode.Tab) {\n\t\t\treturn CursorColumns.nextRenderTabStop(visibleColumn, tabSize);\n\t\t}\n\t\tif (strings.isFullWidthCharacter(codePoint) || strings.isEmojiImprecise(codePoint)) {\n\t\t\treturn visibleColumn + 2;\n\t\t}\n\t\treturn visibleColumn + 1;\n\t}\n\n\t/**\n\t * Returns a visible column from a column.\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static visibleColumnFromColumn(lineContent: string, column: number, tabSize: number): number {\n\t\tconst textLen = Math.min(column - 1, lineContent.length);\n\t\tconst text = lineContent.substring(0, textLen);\n\t\tconst iterator = new strings.GraphemeIterator(text);\n\n\t\tlet result = 0;\n\t\twhile (!iterator.eol()) {\n\t\t\tconst codePoint = strings.getNextCodePoint(text, textLen, iterator.offset);\n\t\t\titerator.nextGraphemeLength();\n\n\t\t\tresult = this._nextVisibleColumn(codePoint, result, tabSize);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Returns the value to display as \"Col\" in the status bar.\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static toStatusbarColumn(lineContent: string, column: number, tabSize: number): number {\n\t\tconst text = lineContent.substring(0, Math.min(column - 1, lineContent.length));\n\t\tconst iterator = new strings.CodePointIterator(text);\n\n\t\tlet result = 0;\n\t\twhile (!iterator.eol()) {\n\t\t\tconst codePoint = iterator.nextCodePoint();\n\n\t\t\tif (codePoint === CharCode.Tab) {\n\t\t\t\tresult = CursorColumns.nextRenderTabStop(result, tabSize);\n\t\t\t} else {\n\t\t\t\tresult = result + 1;\n\t\t\t}\n\t\t}\n\n\t\treturn result + 1;\n\t}\n\n\t/**\n\t * Returns a column from a visible column.\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static columnFromVisibleColumn(lineContent: string, visibleColumn: number, tabSize: number): number {\n\t\tif (visibleColumn <= 0) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst lineContentLength = lineContent.length;\n\t\tconst iterator = new strings.GraphemeIterator(lineContent);\n\n\t\tlet beforeVisibleColumn = 0;\n\t\tlet beforeColumn = 1;\n\t\twhile (!iterator.eol()) {\n\t\t\tconst codePoint = strings.getNextCodePoint(lineContent, lineContentLength, iterator.offset);\n\t\t\titerator.nextGraphemeLength();\n\n\t\t\tconst afterVisibleColumn = this._nextVisibleColumn(codePoint, beforeVisibleColumn, tabSize);\n\t\t\tconst afterColumn = iterator.offset + 1;\n\n\t\t\tif (afterVisibleColumn >= visibleColumn) {\n\t\t\t\tconst beforeDelta = visibleColumn - beforeVisibleColumn;\n\t\t\t\tconst afterDelta = afterVisibleColumn - visibleColumn;\n\t\t\t\tif (afterDelta < beforeDelta) {\n\t\t\t\t\treturn afterColumn;\n\t\t\t\t} else {\n\t\t\t\t\treturn beforeColumn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbeforeVisibleColumn = afterVisibleColumn;\n\t\t\tbeforeColumn = afterColumn;\n\t\t}\n\n\t\t// walked the entire string\n\t\treturn lineContentLength + 1;\n\t}\n\n\t/**\n\t * ATTENTION: This works with 0-based columns (as opposed to the regular 1-based columns)\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static nextRenderTabStop(visibleColumn: number, tabSize: number): number {\n\t\treturn visibleColumn + tabSize - visibleColumn % tabSize;\n\t}\n\n\t/**\n\t * ATTENTION: This works with 0-based columns (as opposed to the regular 1-based columns)\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static nextIndentTabStop(visibleColumn: number, indentSize: number): number {\n\t\treturn CursorColumns.nextRenderTabStop(visibleColumn, indentSize);\n\t}\n\n\t/**\n\t * ATTENTION: This works with 0-based columns (as opposed to the regular 1-based columns)\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static prevRenderTabStop(column: number, tabSize: number): number {\n\t\treturn Math.max(0, column - 1 - (column - 1) % tabSize);\n\t}\n\n\t/**\n\t * ATTENTION: This works with 0-based columns (as opposed to the regular 1-based columns)\n\t * @see {@link CursorColumns}\n\t */\n\tpublic static prevIndentTabStop(column: number, indentSize: number): number {\n\t\treturn CursorColumns.prevRenderTabStop(column, indentSize);\n\t}\n}\n"],"mappings":"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","ignoreList":[]}