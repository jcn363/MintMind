{"version":3,"names":["cov_vo3glsz5e","actualCoverage","WorkbenchObjectTree","TestItemTreeElement","TestId","TestingObjectTree","getOptimizedViewState","updatePreviousState","f","root","s","b","build","node","parent","element","localId","test","item","extId","inTree","children","collapsed","depth","undefined","hasAnyNonDefaultValue","length","child","hasOwnProperty","getNode","controllerId","ctrlNode"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/testing/browser/explorerProjections/testingObjectTree.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ITreeNode } from '../../../../../base/browser/ui/tree/tree.js';\nimport { WorkbenchObjectTree } from '../../../../../platform/list/browser/listService.js';\nimport { TestExplorerTreeElement, TestItemTreeElement } from './index.js';\nimport { ISerializedTestTreeCollapseState } from './testingViewState.js';\nimport { TestId } from '../../common/testId.js';\n\n\nexport class TestingObjectTree<TFilterData = void> extends WorkbenchObjectTree<TestExplorerTreeElement, TFilterData> {\n\n\t/**\n\t * Gets a serialized view state for the tree, optimized for storage.\n\t *\n\t * @param updatePreviousState Optional previous state to mutate and update\n\t * instead of creating a new one.\n\t */\n\tpublic getOptimizedViewState(updatePreviousState?: ISerializedTestTreeCollapseState): ISerializedTestTreeCollapseState {\n\t\tconst root: ISerializedTestTreeCollapseState = updatePreviousState || {};\n\n\t\t/**\n\t\t * Recursive builder function. Returns whether the subtree has any non-default\n\t\t * value. Adds itself to the parent children if it does.\n\t\t */\n\t\tconst build = (node: ITreeNode<TestExplorerTreeElement | null, unknown>, parent: ISerializedTestTreeCollapseState): boolean => {\n\t\t\tif (!(node.element instanceof TestItemTreeElement)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst localId = TestId.localId(node.element.test.item.extId);\n\t\t\tconst inTree = parent.children?.[localId] || {};\n\t\t\t// only saved collapsed state if it's not the default (not collapsed, or a root depth)\n\t\t\tinTree.collapsed = node.depth === 0 || !node.collapsed ? node.collapsed : undefined;\n\n\t\t\tlet hasAnyNonDefaultValue = inTree.collapsed !== undefined;\n\t\t\tif (node.children.length) {\n\t\t\t\tfor (const child of node.children) {\n\t\t\t\t\thasAnyNonDefaultValue = build(child, inTree) || hasAnyNonDefaultValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hasAnyNonDefaultValue) {\n\t\t\t\tparent.children ??= {};\n\t\t\t\tparent.children[localId] = inTree;\n\t\t\t} else if (parent.children?.hasOwnProperty(localId)) {\n\t\t\t\tdelete parent.children[localId];\n\t\t\t}\n\n\t\t\treturn hasAnyNonDefaultValue;\n\t\t};\n\n\t\troot.children ??= {};\n\n\t\t// Controller IDs are hidden if there's only a single test controller, but\n\t\t// make sure they're added when the tree is built if this is the case, so\n\t\t// that the later ID lookup works.\n\t\tfor (const node of this.getNode().children) {\n\t\t\tif (node.element instanceof TestItemTreeElement) {\n\t\t\t\tif (node.element.test.controllerId === node.element.test.item.extId) {\n\t\t\t\t\tbuild(node, root);\n\t\t\t\t} else {\n\t\t\t\t\tconst ctrlNode = root.children[node.element.test.controllerId] ??= { children: {} };\n\t\t\t\t\tbuild(node, ctrlNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn root;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}