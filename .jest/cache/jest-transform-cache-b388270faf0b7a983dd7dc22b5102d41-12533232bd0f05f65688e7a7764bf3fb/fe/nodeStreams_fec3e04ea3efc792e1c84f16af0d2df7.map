{"version":3,"names":["cov_18gk1ciom7","actualCoverage","Transform","binaryIndexOf","StreamSplitter","buffer","splitter","spitterLen","constructor","f","s","b","buf","Buffer","isBuffer","from","length","_transform","chunk","_encoding","callback","concat","offset","index","indexOf","push","slice","undefined","_flush"],"sources":["/home/user/Desktop/MintMind/src/vs/base/node/nodeStreams.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Transform } from 'stream';\nimport { binaryIndexOf } from '../common/buffer.js';\n\n/**\n * A Transform stream that splits the input on the \"splitter\" substring.\n * The resulting chunks will contain (and trail with) the splitter match.\n * The last chunk when the stream ends will be emitted even if a splitter\n * is not encountered.\n */\nexport class StreamSplitter extends Transform {\n\tprivate buffer: Buffer | undefined;\n\tprivate readonly splitter: Buffer | number;\n\tprivate readonly spitterLen: number;\n\n\tconstructor(splitter: string | number | Buffer) {\n\t\tsuper();\n\t\tif (typeof splitter === 'number') {\n\t\t\tthis.splitter = splitter;\n\t\t\tthis.spitterLen = 1;\n\t\t} else {\n\t\t\tconst buf = Buffer.isBuffer(splitter) ? splitter : Buffer.from(splitter);\n\t\t\tthis.splitter = buf.length === 1 ? buf[0] : buf;\n\t\t\tthis.spitterLen = buf.length;\n\t\t}\n\t}\n\n\toverride _transform(chunk: Buffer, _encoding: string, callback: (error?: Error | null, data?: Buffer) => void): void {\n\t\tif (!this.buffer) {\n\t\t\tthis.buffer = chunk;\n\t\t} else {\n\t\t\tthis.buffer = Buffer.concat([this.buffer, chunk]);\n\t\t}\n\n\t\tlet offset = 0;\n\t\twhile (offset < this.buffer.length) {\n\t\t\tconst index = typeof this.splitter === 'number'\n\t\t\t\t? this.buffer.indexOf(this.splitter, offset)\n\t\t\t\t: binaryIndexOf(this.buffer, this.splitter, offset);\n\t\t\tif (index === -1) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.push(this.buffer.slice(offset, index + this.spitterLen));\n\t\t\toffset = index + this.spitterLen;\n\t\t}\n\n\t\tthis.buffer = offset === this.buffer.length ? undefined : this.buffer.slice(offset);\n\t\tcallback();\n\t}\n\n\toverride _flush(callback: (error?: Error | null, data?: Buffer) => void): void {\n\t\tif (this.buffer) {\n\t\t\tthis.push(this.buffer);\n\t\t}\n\n\t\tcallback();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}