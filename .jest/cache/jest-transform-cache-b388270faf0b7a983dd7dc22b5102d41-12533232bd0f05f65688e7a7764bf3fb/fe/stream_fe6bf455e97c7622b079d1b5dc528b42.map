{"version":3,"names":["cov_l8s5vdjd","actualCoverage","onUnexpectedError","DisposableStore","toDisposable","isReadable","obj","f","candidate","s","b","read","isReadableStream","on","pause","resume","destroy","every","fn","isReadableBufferedStream","stream","Array","isArray","buffer","ended","newWriteableStream","reducer","options","WriteableStreamImpl","state","flowing","destroyed","data","error","listeners","end","pendingWritePromises","constructor","flowData","flowErrors","flowEnd","write","emitData","push","highWaterMark","length","Promise","resolve","emitError","result","emitEnd","slice","forEach","listener","event","callback","removeListener","undefined","index","indexOf","splice","fullDataBuffer","pendingWritePromise","consumeReadable","readable","chunks","chunk","peekReadable","maxChunks","shift","lastReadChunk","consumeStream","reject","listenStream","onData","onError","onEnd","token","isCancellationRequested","peekStream","streamListeners","dataListener","dispose","errorListener","endListener","add","toStream","t","emptyStream","Error","toReadable","consumed","transform","transformer","target","prefixedReadable","prefix","prefixHandled","prefixedStream"],"sources":["/home/user/Desktop/MintMind/src/vs/base/common/stream.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from './cancellation.js';\nimport { onUnexpectedError } from './errors.js';\nimport { DisposableStore, toDisposable } from './lifecycle.js';\n\n/**\n * The payload that flows in readable stream events.\n */\nexport type ReadableStreamEventPayload<T> = T | Error | 'end';\n\nexport interface ReadableStreamEvents<T> {\n\n\t/**\n\t * The 'data' event is emitted whenever the stream is\n\t * relinquishing ownership of a chunk of data to a consumer.\n\t *\n\t * NOTE: PLEASE UNDERSTAND THAT ADDING A DATA LISTENER CAN\n\t * TURN THE STREAM INTO FLOWING MODE. IT IS THEREFOR THE\n\t * LAST LISTENER THAT SHOULD BE ADDED AND NOT THE FIRST\n\t *\n\t * Use `listenStream` as a helper method to listen to\n\t * stream events in the right order.\n\t */\n\ton(event: 'data', callback: (data: T) => void): void;\n\n\t/**\n\t * Emitted when any error occurs.\n\t */\n\ton(event: 'error', callback: (err: Error) => void): void;\n\n\t/**\n\t * The 'end' event is emitted when there is no more data\n\t * to be consumed from the stream. The 'end' event will\n\t * not be emitted unless the data is completely consumed.\n\t */\n\ton(event: 'end', callback: () => void): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * stream for use in native and web environments.\n */\nexport interface ReadableStream<T> extends ReadableStreamEvents<T> {\n\n\t/**\n\t * Stops emitting any events until resume() is called.\n\t */\n\tpause(): void;\n\n\t/**\n\t * Starts emitting events again after pause() was called.\n\t */\n\tresume(): void;\n\n\t/**\n\t * Destroys the stream and stops emitting any event.\n\t */\n\tdestroy(): void;\n\n\t/**\n\t * Allows to remove a listener that was previously added.\n\t */\n\tremoveListener(event: string, callback: Function): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * for use in native and web environments.\n */\nexport interface Readable<T> {\n\n\t/**\n\t * Read data from the underlying source. Will return\n\t * null to indicate that no more data can be read.\n\t */\n\tread(): T | null;\n}\n\nexport function isReadable<T>(obj: unknown): obj is Readable<T> {\n\tconst candidate = obj as Readable<T> | undefined;\n\tif (!candidate) {\n\t\treturn false;\n\t}\n\n\treturn typeof candidate.read === 'function';\n}\n\n/**\n * A interface that emulates the API shape of a node.js writeable\n * stream for use in native and web environments.\n */\nexport interface WriteableStream<T> extends ReadableStream<T> {\n\n\t/**\n\t * Writing data to the stream will trigger the on('data')\n\t * event listener if the stream is flowing and buffer the\n\t * data otherwise until the stream is flowing.\n\t *\n\t * If a `highWaterMark` is configured and writing to the\n\t * stream reaches this mark, a promise will be returned\n\t * that should be awaited on before writing more data.\n\t * Otherwise there is a risk of buffering a large number\n\t * of data chunks without consumer.\n\t */\n\twrite(data: T): void | Promise<void>;\n\n\t/**\n\t * Signals an error to the consumer of the stream via the\n\t * on('error') handler if the stream is flowing.\n\t *\n\t * NOTE: call `end` to signal that the stream has ended,\n\t * this DOES NOT happen automatically from `error`.\n\t */\n\terror(error: Error): void;\n\n\t/**\n\t * Signals the end of the stream to the consumer. If the\n\t * result is provided, will trigger the on('data') event\n\t * listener if the stream is flowing and buffer the data\n\t * otherwise until the stream is flowing.\n\t */\n\tend(result?: T): void;\n}\n\n/**\n * A stream that has a buffer already read. Returns the original stream\n * that was read as well as the chunks that got read.\n *\n * The `ended` flag indicates if the stream has been fully consumed.\n */\nexport interface ReadableBufferedStream<T> {\n\n\t/**\n\t * The original stream that is being read.\n\t */\n\tstream: ReadableStream<T>;\n\n\t/**\n\t * An array of chunks already read from this stream.\n\t */\n\tbuffer: T[];\n\n\t/**\n\t * Signals if the stream has ended or not. If not, consumers\n\t * should continue to read from the stream until consumed.\n\t */\n\tended: boolean;\n}\n\nexport function isReadableStream<T>(obj: unknown): obj is ReadableStream<T> {\n\tconst candidate = obj as ReadableStream<T> | undefined;\n\tif (!candidate) {\n\t\treturn false;\n\t}\n\n\treturn [candidate.on, candidate.pause, candidate.resume, candidate.destroy].every(fn => typeof fn === 'function');\n}\n\nexport function isReadableBufferedStream<T>(obj: unknown): obj is ReadableBufferedStream<T> {\n\tconst candidate = obj as ReadableBufferedStream<T> | undefined;\n\tif (!candidate) {\n\t\treturn false;\n\t}\n\n\treturn isReadableStream(candidate.stream) && Array.isArray(candidate.buffer) && typeof candidate.ended === 'boolean';\n}\n\nexport interface IReducer<T, R = T> {\n\t(data: T[]): R;\n}\n\nexport interface IDataTransformer<Original, Transformed> {\n\t(data: Original): Transformed;\n}\n\nexport interface IErrorTransformer {\n\t(error: Error): Error;\n}\n\nexport interface ITransformer<Original, Transformed> {\n\tdata: IDataTransformer<Original, Transformed>;\n\terror?: IErrorTransformer;\n}\n\nexport function newWriteableStream<T>(reducer: IReducer<T> | null, options?: WriteableStreamOptions): WriteableStream<T> {\n\treturn new WriteableStreamImpl<T>(reducer, options);\n}\n\nexport interface WriteableStreamOptions {\n\n\t/**\n\t * The number of objects to buffer before WriteableStream#write()\n\t * signals back that the buffer is full. Can be used to reduce\n\t * the memory pressure when the stream is not flowing.\n\t */\n\thighWaterMark?: number;\n}\n\nclass WriteableStreamImpl<T> implements WriteableStream<T> {\n\n\tprivate readonly state = {\n\t\tflowing: false,\n\t\tended: false,\n\t\tdestroyed: false\n\t};\n\n\tprivate readonly buffer = {\n\t\tdata: [] as T[],\n\t\terror: [] as Error[]\n\t};\n\n\tprivate readonly listeners = {\n\t\tdata: [] as { (data: T): void }[],\n\t\terror: [] as { (error: Error): void }[],\n\t\tend: [] as { (): void }[]\n\t};\n\n\tprivate readonly pendingWritePromises: Function[] = [];\n\n\t/**\n\t * @param reducer a function that reduces the buffered data into a single object;\n\t * \t\t\t\t  because some objects can be complex and non-reducible, we also\n\t * \t\t\t\t  allow passing the explicit `null` value to skip the reduce step\n\t * @param options stream options\n\t */\n\tconstructor(private reducer: IReducer<T> | null, private options?: WriteableStreamOptions) { }\n\n\tpause(): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.flowing = false;\n\t}\n\n\tresume(): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.state.flowing) {\n\t\t\tthis.state.flowing = true;\n\n\t\t\t// emit buffered events\n\t\t\tthis.flowData();\n\t\t\tthis.flowErrors();\n\t\t\tthis.flowEnd();\n\t\t}\n\t}\n\n\twrite(data: T): void | Promise<void> {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// flowing: directly send the data to listeners\n\t\tif (this.state.flowing) {\n\t\t\tthis.emitData(data);\n\t\t}\n\n\t\t// not yet flowing: buffer data until flowing\n\t\telse {\n\t\t\tthis.buffer.data.push(data);\n\n\t\t\t// highWaterMark: if configured, signal back when buffer reached limits\n\t\t\tif (typeof this.options?.highWaterMark === 'number' && this.buffer.data.length > this.options.highWaterMark) {\n\t\t\t\treturn new Promise(resolve => this.pendingWritePromises.push(resolve));\n\t\t\t}\n\t\t}\n\t}\n\n\terror(error: Error): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// flowing: directly send the error to listeners\n\t\tif (this.state.flowing) {\n\t\t\tthis.emitError(error);\n\t\t}\n\n\t\t// not yet flowing: buffer errors until flowing\n\t\telse {\n\t\t\tthis.buffer.error.push(error);\n\t\t}\n\t}\n\n\tend(result?: T): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// end with data if provided\n\t\tif (typeof result !== 'undefined') {\n\t\t\tthis.write(result);\n\t\t}\n\n\t\t// flowing: send end event to listeners\n\t\tif (this.state.flowing) {\n\t\t\tthis.emitEnd();\n\n\t\t\tthis.destroy();\n\t\t}\n\n\t\t// not yet flowing: remember state\n\t\telse {\n\t\t\tthis.state.ended = true;\n\t\t}\n\t}\n\n\tprivate emitData(data: T): void {\n\t\tthis.listeners.data.slice(0).forEach(listener => listener(data)); // slice to avoid listener mutation from delivering event\n\t}\n\n\tprivate emitError(error: Error): void {\n\t\tif (this.listeners.error.length === 0) {\n\t\t\tonUnexpectedError(error); // nobody listened to this error so we log it as unexpected\n\t\t} else {\n\t\t\tthis.listeners.error.slice(0).forEach(listener => listener(error)); // slice to avoid listener mutation from delivering event\n\t\t}\n\t}\n\n\tprivate emitEnd(): void {\n\t\tthis.listeners.end.slice(0).forEach(listener => listener()); // slice to avoid listener mutation from delivering event\n\t}\n\n\ton(event: 'data', callback: (data: T) => void): void;\n\ton(event: 'error', callback: (err: Error) => void): void;\n\ton(event: 'end', callback: () => void): void;\n\ton(event: 'data' | 'error' | 'end', callback: ((data: T) => void) | ((err: Error) => void) | (() => void)): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (event) {\n\t\t\tcase 'data':\n\t\t\t\tthis.listeners.data.push(callback as (data: T) => void);\n\n\t\t\t\t// switch into flowing mode as soon as the first 'data'\n\t\t\t\t// listener is added and we are not yet in flowing mode\n\t\t\t\tthis.resume();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'end':\n\t\t\t\tthis.listeners.end.push(callback as () => void);\n\n\t\t\t\t// emit 'end' event directly if we are flowing\n\t\t\t\t// and the end has already been reached\n\t\t\t\t//\n\t\t\t\t// finish() when it went through\n\t\t\t\tif (this.state.flowing && this.flowEnd()) {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'error':\n\t\t\t\tthis.listeners.error.push(callback as (err: Error) => void);\n\n\t\t\t\t// emit buffered 'error' events unless done already\n\t\t\t\t// now that we know that we have at least one listener\n\t\t\t\tif (this.state.flowing) {\n\t\t\t\t\tthis.flowErrors();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tremoveListener(event: string, callback: Function): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet listeners: unknown[] | undefined = undefined;\n\n\t\tswitch (event) {\n\t\t\tcase 'data':\n\t\t\t\tlisteners = this.listeners.data;\n\t\t\t\tbreak;\n\n\t\t\tcase 'end':\n\t\t\t\tlisteners = this.listeners.end;\n\t\t\t\tbreak;\n\n\t\t\tcase 'error':\n\t\t\t\tlisteners = this.listeners.error;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (listeners) {\n\t\t\tconst index = listeners.indexOf(callback);\n\t\t\tif (index >= 0) {\n\t\t\t\tlisteners.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate flowData(): void {\n\t\t// if buffer is empty, nothing to do\n\t\tif (this.buffer.data.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\t// if buffer data can be reduced into a single object,\n\t\t// emit the reduced data\n\t\tif (typeof this.reducer === 'function') {\n\t\t\tconst fullDataBuffer = this.reducer(this.buffer.data);\n\n\t\t\tthis.emitData(fullDataBuffer);\n\t\t} else {\n\t\t\t// otherwise emit each buffered data instance individually\n\t\t\tfor (const data of this.buffer.data) {\n\t\t\t\tthis.emitData(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.buffer.data.length = 0;\n\n\t\t// when the buffer is empty, resolve all pending writers\n\t\tconst pendingWritePromises = [...this.pendingWritePromises];\n\t\tthis.pendingWritePromises.length = 0;\n\t\tpendingWritePromises.forEach(pendingWritePromise => pendingWritePromise());\n\t}\n\n\tprivate flowErrors(): void {\n\t\tif (this.listeners.error.length > 0) {\n\t\t\tfor (const error of this.buffer.error) {\n\t\t\t\tthis.emitError(error);\n\t\t\t}\n\n\t\t\tthis.buffer.error.length = 0;\n\t\t}\n\t}\n\n\tprivate flowEnd(): boolean {\n\t\tif (this.state.ended) {\n\t\t\tthis.emitEnd();\n\n\t\t\treturn this.listeners.end.length > 0;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdestroy(): void {\n\t\tif (!this.state.destroyed) {\n\t\t\tthis.state.destroyed = true;\n\t\t\tthis.state.ended = true;\n\n\t\t\tthis.buffer.data.length = 0;\n\t\t\tthis.buffer.error.length = 0;\n\n\t\t\tthis.listeners.data.length = 0;\n\t\t\tthis.listeners.error.length = 0;\n\t\t\tthis.listeners.end.length = 0;\n\n\t\t\tthis.pendingWritePromises.length = 0;\n\t\t}\n\t}\n}\n\n/**\n * Helper to fully read a T readable into a T.\n */\nexport function consumeReadable<T>(readable: Readable<T>, reducer: IReducer<T>): T {\n\tconst chunks: T[] = [];\n\n\tlet chunk: T | null;\n\twhile ((chunk = readable.read()) !== null) {\n\t\tchunks.push(chunk);\n\t}\n\n\treturn reducer(chunks);\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function peekReadable<T>(readable: Readable<T>, reducer: IReducer<T>, maxChunks: number): T | Readable<T> {\n\tconst chunks: T[] = [];\n\n\tlet chunk: T | null | undefined = undefined;\n\twhile ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n\t\tchunks.push(chunk);\n\t}\n\n\t// If the last chunk is null, it means we reached the end of\n\t// the readable and return all the data at once\n\tif (chunk === null && chunks.length > 0) {\n\t\treturn reducer(chunks);\n\t}\n\n\t// Otherwise, we still have a chunk, it means we reached the maxChunks\n\t// value and as such we return a new Readable that first returns\n\t// the existing read chunks and then continues with reading from\n\t// the underlying readable.\n\treturn {\n\t\tread: () => {\n\n\t\t\t// First consume chunks from our array\n\t\t\tif (chunks.length > 0) {\n\t\t\t\treturn chunks.shift()!;\n\t\t\t}\n\n\t\t\t// Then ensure to return our last read chunk\n\t\t\tif (typeof chunk !== 'undefined') {\n\t\t\t\tconst lastReadChunk = chunk;\n\n\t\t\t\t// explicitly use undefined here to indicate that we consumed\n\t\t\t\t// the chunk, which could have either been null or valued.\n\t\t\t\tchunk = undefined;\n\n\t\t\t\treturn lastReadChunk;\n\t\t\t}\n\n\t\t\t// Finally delegate back to the Readable\n\t\t\treturn readable.read();\n\t\t}\n\t};\n}\n\n/**\n * Helper to fully read a T stream into a T or consuming\n * a stream fully, awaiting all the events without caring\n * about the data.\n */\nexport function consumeStream<T, R = T>(stream: ReadableStreamEvents<T>, reducer: IReducer<T, R>): Promise<R>;\nexport function consumeStream(stream: ReadableStreamEvents<unknown>): Promise<undefined>;\nexport function consumeStream<T, R = T>(stream: ReadableStreamEvents<T>, reducer?: IReducer<T, R>): Promise<R | undefined> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst chunks: T[] = [];\n\n\t\tlistenStream(stream, {\n\t\t\tonData: chunk => {\n\t\t\t\tif (reducer) {\n\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError: error => {\n\t\t\t\tif (reducer) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonEnd: () => {\n\t\t\t\tif (reducer) {\n\t\t\t\t\tresolve(reducer(chunks));\n\t\t\t\t} else {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport interface IStreamListener<T> {\n\n\t/**\n\t * The 'data' event is emitted whenever the stream is\n\t * relinquishing ownership of a chunk of data to a consumer.\n\t */\n\tonData(data: T): void;\n\n\t/**\n\t * Emitted when any error occurs.\n\t */\n\tonError(err: Error): void;\n\n\t/**\n\t * The 'end' event is emitted when there is no more data\n\t * to be consumed from the stream. The 'end' event will\n\t * not be emitted unless the data is completely consumed.\n\t */\n\tonEnd(): void;\n}\n\n/**\n * Helper to listen to all events of a T stream in proper order.\n */\nexport function listenStream<T>(stream: ReadableStreamEvents<T>, listener: IStreamListener<T>, token?: CancellationToken): void {\n\n\tstream.on('error', error => {\n\t\tif (!token?.isCancellationRequested) {\n\t\t\tlistener.onError(error);\n\t\t}\n\t});\n\n\tstream.on('end', () => {\n\t\tif (!token?.isCancellationRequested) {\n\t\t\tlistener.onEnd();\n\t\t}\n\t});\n\n\t// Adding the `data` listener will turn the stream\n\t// into flowing mode. As such it is important to\n\t// add this listener last (DO NOT CHANGE!)\n\tstream.on('data', data => {\n\t\tif (!token?.isCancellationRequested) {\n\t\t\tlistener.onData(data);\n\t\t}\n\t});\n}\n\n/**\n * Helper to peek up to `maxChunks` into a stream. The return type signals if\n * the stream has ended or not. If not, caller needs to add a `data` listener\n * to continue reading.\n */\nexport function peekStream<T>(stream: ReadableStream<T>, maxChunks: number): Promise<ReadableBufferedStream<T>> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst streamListeners = new DisposableStore();\n\t\tconst buffer: T[] = [];\n\n\t\t// Data Listener\n\t\tconst dataListener = (chunk: T) => {\n\n\t\t\t// Add to buffer\n\t\t\tbuffer.push(chunk);\n\n\t\t\t// We reached maxChunks and thus need to return\n\t\t\tif (buffer.length > maxChunks) {\n\n\t\t\t\t// Dispose any listeners and ensure to pause the\n\t\t\t\t// stream so that it can be consumed again by caller\n\t\t\t\tstreamListeners.dispose();\n\t\t\t\tstream.pause();\n\n\t\t\t\treturn resolve({ stream, buffer, ended: false });\n\t\t\t}\n\t\t};\n\n\t\t// Error Listener\n\t\tconst errorListener = (error: Error) => {\n\t\t\tstreamListeners.dispose();\n\n\t\t\treturn reject(error);\n\t\t};\n\n\t\t// End Listener\n\t\tconst endListener = () => {\n\t\t\tstreamListeners.dispose();\n\n\t\t\treturn resolve({ stream, buffer, ended: true });\n\t\t};\n\n\t\tstreamListeners.add(toDisposable(() => stream.removeListener('error', errorListener)));\n\t\tstream.on('error', errorListener);\n\n\t\tstreamListeners.add(toDisposable(() => stream.removeListener('end', endListener)));\n\t\tstream.on('end', endListener);\n\n\t\t// Important: leave the `data` listener last because\n\t\t// this can turn the stream into flowing mode and we\n\t\t// want `error` events to be received as well.\n\t\tstreamListeners.add(toDisposable(() => stream.removeListener('data', dataListener)));\n\t\tstream.on('data', dataListener);\n\t});\n}\n\n/**\n * Helper to create a readable stream from an existing T.\n */\nexport function toStream<T>(t: T, reducer: IReducer<T>): ReadableStream<T> {\n\tconst stream = newWriteableStream<T>(reducer);\n\n\tstream.end(t);\n\n\treturn stream;\n}\n\n/**\n * Helper to create an empty stream\n */\nexport function emptyStream(): ReadableStream<never> {\n\tconst stream = newWriteableStream<never>(() => { throw new Error('not supported'); });\n\tstream.end();\n\n\treturn stream;\n}\n\n/**\n * Helper to convert a T into a Readable<T>.\n */\nexport function toReadable<T>(t: T): Readable<T> {\n\tlet consumed = false;\n\n\treturn {\n\t\tread: () => {\n\t\t\tif (consumed) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconsumed = true;\n\n\t\t\treturn t;\n\t\t}\n\t};\n}\n\n/**\n * Helper to transform a readable stream into another stream.\n */\nexport function transform<Original, Transformed>(stream: ReadableStreamEvents<Original>, transformer: ITransformer<Original, Transformed>, reducer: IReducer<Transformed>): ReadableStream<Transformed> {\n\tconst target = newWriteableStream<Transformed>(reducer);\n\n\tlistenStream(stream, {\n\t\tonData: data => target.write(transformer.data(data)),\n\t\tonError: error => target.error(transformer.error ? transformer.error(error) : error),\n\t\tonEnd: () => target.end()\n\t});\n\n\treturn target;\n}\n\n/**\n * Helper to take an existing readable that will\n * have a prefix injected to the beginning.\n */\nexport function prefixedReadable<T>(prefix: T, readable: Readable<T>, reducer: IReducer<T>): Readable<T> {\n\tlet prefixHandled = false;\n\n\treturn {\n\t\tread: () => {\n\t\t\tconst chunk = readable.read();\n\n\t\t\t// Handle prefix only once\n\t\t\tif (!prefixHandled) {\n\t\t\t\tprefixHandled = true;\n\n\t\t\t\t// If we have also a read-result, make\n\t\t\t\t// sure to reduce it to a single result\n\t\t\t\tif (chunk !== null) {\n\t\t\t\t\treturn reducer([prefix, chunk]);\n\t\t\t\t}\n\n\t\t\t\t// Otherwise, just return prefix directly\n\t\t\t\treturn prefix;\n\t\t\t}\n\n\t\t\treturn chunk;\n\t\t}\n\t};\n}\n\n/**\n * Helper to take an existing stream that will\n * have a prefix injected to the beginning.\n */\nexport function prefixedStream<T>(prefix: T, stream: ReadableStream<T>, reducer: IReducer<T>): ReadableStream<T> {\n\tlet prefixHandled = false;\n\n\tconst target = newWriteableStream<T>(reducer);\n\n\tlistenStream(stream, {\n\t\tonData: data => {\n\n\t\t\t// Handle prefix only once\n\t\t\tif (!prefixHandled) {\n\t\t\t\tprefixHandled = true;\n\n\t\t\t\treturn target.write(reducer([prefix, data]));\n\t\t\t}\n\n\t\t\treturn target.write(data);\n\t\t},\n\t\tonError: error => target.error(error),\n\t\tonEnd: () => {\n\n\t\t\t// Handle prefix only once\n\t\t\tif (!prefixHandled) {\n\t\t\t\tprefixHandled = true;\n\n\t\t\t\ttarget.write(prefix);\n\t\t\t}\n\n\t\t\ttarget.end();\n\t\t}\n\t});\n\n\treturn target;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}