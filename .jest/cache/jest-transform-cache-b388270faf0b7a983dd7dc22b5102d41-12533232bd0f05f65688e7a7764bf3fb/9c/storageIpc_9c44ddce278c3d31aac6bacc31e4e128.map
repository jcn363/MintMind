{"version":3,"names":["cov_d4tm2x8b1","actualCoverage","Emitter","Event","Disposable","revive","reviveIdentifier","StorageDatabaseChannel","logService","storageMainService","STORAGE_CHANGE_DEBOUNCE_TIME","s","onDidChangeApplicationStorageEmitter","_register","mapProfileToOnDidChangeProfileStorageEmitter","Map","constructor","f","registerStorageChangeListeners","applicationStorage","storage","emitter","debounce","onDidChangeStorage","prev","cur","b","push","events","length","fire","serializeStorageChangeEvents","changed","deleted","Set","forEach","event","existing","get","key","set","add","Array","from","entries","values","listen","_","arg","profile","undefined","profileStorageChangeEmitter","id","profileStorage","Error","call","command","workspace","withStorageInitialized","items","insert","value","delete","optimize","path","payload","isUsed","workspaceStorage","init","error"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/storage/electron-main/storageIpc.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { revive } from '../../../base/common/marshalling.js';\nimport { IServerChannel } from '../../../base/parts/ipc/common/ipc.js';\nimport { ILogService } from '../../log/common/log.js';\nimport { IBaseSerializableStorageRequest, ISerializableItemsChangeEvent, ISerializableUpdateRequest, Key, Value } from '../common/storageIpc.js';\nimport { IStorageChangeEvent, IStorageMain } from './storageMain.js';\nimport { IStorageMainService } from './storageMainService.js';\nimport { IUserDataProfile } from '../../userDataProfile/common/userDataProfile.js';\nimport { reviveIdentifier, IAnyWorkspaceIdentifier } from '../../workspace/common/workspace.js';\n\nexport class StorageDatabaseChannel extends Disposable implements IServerChannel {\n\n\tprivate static readonly STORAGE_CHANGE_DEBOUNCE_TIME = 100;\n\n\tprivate readonly onDidChangeApplicationStorageEmitter = this._register(new Emitter<ISerializableItemsChangeEvent>());\n\n\tprivate readonly mapProfileToOnDidChangeProfileStorageEmitter = new Map<string /* profile ID */, Emitter<ISerializableItemsChangeEvent>>();\n\n\tconstructor(\n\t\tprivate readonly logService: ILogService,\n\t\tprivate readonly storageMainService: IStorageMainService\n\t) {\n\t\tsuper();\n\n\t\tthis.registerStorageChangeListeners(storageMainService.applicationStorage, this.onDidChangeApplicationStorageEmitter);\n\t}\n\n\t//#region Storage Change Events\n\n\tprivate registerStorageChangeListeners(storage: IStorageMain, emitter: Emitter<ISerializableItemsChangeEvent>): void {\n\n\t\t// Listen for changes in provided storage to send to listeners\n\t\t// that are listening. Use a debouncer to reduce IPC traffic.\n\n\t\tthis._register(Event.debounce(storage.onDidChangeStorage, (prev: IStorageChangeEvent[] | undefined, cur: IStorageChangeEvent) => {\n\t\t\tif (!prev) {\n\t\t\t\tprev = [cur];\n\t\t\t} else {\n\t\t\t\tprev.push(cur);\n\t\t\t}\n\n\t\t\treturn prev;\n\t\t}, StorageDatabaseChannel.STORAGE_CHANGE_DEBOUNCE_TIME)(events => {\n\t\t\tif (events.length) {\n\t\t\t\temitter.fire(this.serializeStorageChangeEvents(events, storage));\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate serializeStorageChangeEvents(events: IStorageChangeEvent[], storage: IStorageMain): ISerializableItemsChangeEvent {\n\t\tconst changed = new Map<Key, Value>();\n\t\tconst deleted = new Set<Key>();\n\t\tevents.forEach(event => {\n\t\t\tconst existing = storage.get(event.key);\n\t\t\tif (typeof existing === 'string') {\n\t\t\t\tchanged.set(event.key, existing);\n\t\t\t} else {\n\t\t\t\tdeleted.add(event.key);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tchanged: Array.from(changed.entries()),\n\t\t\tdeleted: Array.from(deleted.values())\n\t\t};\n\t}\n\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tlisten(_: unknown, event: string, arg: IBaseSerializableStorageRequest): Event<any> {\n\t\tswitch (event) {\n\t\t\tcase 'onDidChangeStorage': {\n\t\t\t\tconst profile = arg.profile ? revive<IUserDataProfile>(arg.profile) : undefined;\n\n\t\t\t\t// Without profile: application scope\n\t\t\t\tif (!profile) {\n\t\t\t\t\treturn this.onDidChangeApplicationStorageEmitter.event;\n\t\t\t\t}\n\n\t\t\t\t// With profile: profile scope for the profile\n\t\t\t\tlet profileStorageChangeEmitter = this.mapProfileToOnDidChangeProfileStorageEmitter.get(profile.id);\n\t\t\t\tif (!profileStorageChangeEmitter) {\n\t\t\t\t\tprofileStorageChangeEmitter = this._register(new Emitter<ISerializableItemsChangeEvent>());\n\t\t\t\t\tthis.registerStorageChangeListeners(this.storageMainService.profileStorage(profile), profileStorageChangeEmitter);\n\t\t\t\t\tthis.mapProfileToOnDidChangeProfileStorageEmitter.set(profile.id, profileStorageChangeEmitter);\n\t\t\t\t}\n\n\t\t\t\treturn profileStorageChangeEmitter.event;\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error(`Event not found: ${event}`);\n\t}\n\n\t//#endregion\n\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tasync call(_: unknown, command: string, arg: IBaseSerializableStorageRequest): Promise<any> {\n\t\tconst profile = arg.profile ? revive<IUserDataProfile>(arg.profile) : undefined;\n\t\tconst workspace = reviveIdentifier(arg.workspace);\n\n\t\t// Get storage to be ready\n\t\tconst storage = await this.withStorageInitialized(profile, workspace);\n\n\t\t// handle call\n\t\tswitch (command) {\n\t\t\tcase 'getItems': {\n\t\t\t\treturn Array.from(storage.items.entries());\n\t\t\t}\n\n\t\t\tcase 'updateItems': {\n\t\t\t\tconst items: ISerializableUpdateRequest = arg;\n\n\t\t\t\tif (items.insert) {\n\t\t\t\t\tfor (const [key, value] of items.insert) {\n\t\t\t\t\t\tstorage.set(key, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\titems.delete?.forEach(key => storage.delete(key));\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'optimize': {\n\t\t\t\treturn storage.optimize();\n\t\t\t}\n\n\t\t\tcase 'isUsed': {\n\t\t\t\tconst path = arg.payload as string | undefined;\n\t\t\t\tif (typeof path === 'string') {\n\t\t\t\t\treturn this.storageMainService.isUsed(path);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Call not found: ${command}`);\n\t\t}\n\t}\n\n\tprivate async withStorageInitialized(profile: IUserDataProfile | undefined, workspace: IAnyWorkspaceIdentifier | undefined): Promise<IStorageMain> {\n\t\tlet storage: IStorageMain;\n\t\tif (workspace) {\n\t\t\tstorage = this.storageMainService.workspaceStorage(workspace);\n\t\t} else if (profile) {\n\t\t\tstorage = this.storageMainService.profileStorage(profile);\n\t\t} else {\n\t\t\tstorage = this.storageMainService.applicationStorage;\n\t\t}\n\n\t\ttry {\n\t\t\tawait storage.init();\n\t\t} catch (error) {\n\t\t\tthis.logService.error(`StorageIPC#init: Unable to init ${workspace ? 'workspace' : profile ? 'profile' : 'application'} storage due to ${error}`);\n\t\t}\n\n\t\treturn storage;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}