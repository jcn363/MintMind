{"version":3,"names":["VSBuffer","SharedWebContentExtractorService","_serviceBrand","readImage","uri","token","cov_n2u7n7ydu","f","s","isCancellationRequested","b","undefined","response","fetch","toString","headers","contentType","get","ok","startsWith","test","content","wrap","bytes","err","console","log"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/webContentExtractor/node/sharedWebContentExtractorService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ISharedWebContentExtractorService } from '../common/webContentExtractor.js';\n\nexport class SharedWebContentExtractorService implements ISharedWebContentExtractorService {\n\t_serviceBrand: undefined;\n\n\tasync readImage(uri: URI, token: CancellationToken): Promise<VSBuffer | undefined> {\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(uri.toString(true), {\n\t\t\t\theaders: {\n\t\t\t\t\t'Accept': 'image/*',\n\t\t\t\t\t'User-Agent': 'Mozilla/5.0'\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (!response.ok || !contentType?.startsWith('image/') || !/(webp|jpg|jpeg|gif|png|bmp)$/i.test(contentType)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst content = VSBuffer.wrap(await (response as unknown as { bytes: () => Promise<Uint8Array<ArrayBuffer>> } /* workaround https://github.com/microsoft/TypeScript/issues/61826 */).bytes());\n\t\t\treturn content;\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\treturn undefined;\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAKA,SAASA,QAAQ,QAAQ,gCAAgC;AAKzD,OAAM,MAAOC,gCAAgC;EAC5CC,aAAa;EAEb,MAAMC,SAASA,CAACC,GAAQ,EAAEC,KAAwB;IAAA;IAAAC,aAAA,GAAAC,CAAA;IAAAD,aAAA,GAAAE,CAAA;IACjD,IAAIH,KAAK,CAACI,uBAAuB,EAAE;MAAA;MAAAH,aAAA,GAAAI,CAAA;MAAAJ,aAAA,GAAAE,CAAA;MAClC,OAAOG,SAAS;IACjB,CAAC;IAAA;IAAA;MAAAL,aAAA,GAAAI,CAAA;IAAA;IAAAJ,aAAA,GAAAE,CAAA;IAED,IAAI;MACH,MAAMI,QAAQ;MAAA;MAAA,CAAAN,aAAA,GAAAE,CAAA,OAAG,MAAMK,KAAK,CAACT,GAAG,CAACU,QAAQ,CAAC,IAAI,CAAC,EAAE;QAChDC,OAAO,EAAE;UACR,QAAQ,EAAE,SAAS;UACnB,YAAY,EAAE;;OAEf,CAAC;MACF,MAAMC,WAAW;MAAA;MAAA,CAAAV,aAAA,GAAAE,CAAA,OAAGI,QAAQ,CAACG,OAAO,CAACE,GAAG,CAAC,cAAc,CAAC;MAAC;MAAAX,aAAA,GAAAE,CAAA;MACzD;MAAI;MAAA,CAAAF,aAAA,GAAAI,CAAA,WAACE,QAAQ,CAACM,EAAE;MAAA;MAAA,CAAAZ,aAAA,GAAAI,CAAA,UAAI,CAACM,WAAW,EAAEG,UAAU,CAAC,QAAQ,CAAC;MAAA;MAAA,CAAAb,aAAA,GAAAI,CAAA,UAAI,CAAC,+BAA+B,CAACU,IAAI,CAACJ,WAAW,CAAC,GAAE;QAAA;QAAAV,aAAA,GAAAI,CAAA;QAAAJ,aAAA,GAAAE,CAAA;QAC7G,OAAOG,SAAS;MACjB,CAAC;MAAA;MAAA;QAAAL,aAAA,GAAAI,CAAA;MAAA;MAED,MAAMW,OAAO;MAAA;MAAA,CAAAf,aAAA,GAAAE,CAAA,OAAGR,QAAQ,CAACsB,IAAI,CAAC,MAAOV,QAAwE,CAAC,sEAAuEW,KAAK,EAAE,CAAC;MAAC;MAAAjB,aAAA,GAAAE,CAAA;MAC9L,OAAOa,OAAO;IACf,CAAC,CAAC,OAAOG,GAAG,EAAE;MAAA;MAAAlB,aAAA,GAAAE,CAAA;MACbiB,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAAC;MAAAlB,aAAA,GAAAE,CAAA;MACjB,OAAOG,SAAS;IACjB;EACD","ignoreList":[]}