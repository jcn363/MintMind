{"version":3,"names":["cov_2rfxpgyao3","actualCoverage","IInstantiationService","ILifecycleService","Registry","DeferredPromise","runWhenGlobalIdle","mark","ILogService","IEnvironmentService","getOrSet","Disposable","DisposableStore","isDisposable","IEditorPaneService","Extensions","s","f","Workbench","b","isOnEditorWorkbenchContributionInstantiation","obj","candidate","editorTypeId","toWorkbenchPhase","phase","toLifecyclePhase","instantiation","WorkbenchContributionsRegistry","INSTANCE","BLOCK_BEFORE_RESTORE_WARN_THRESHOLD","BLOCK_AFTER_RESTORE_WARN_THRESHOLD","instantiationService","lifecycleService","logService","environmentService","editorPaneService","contributionsByPhase","Map","contributionsByEditor","contributionsById","instancesById","instanceDisposables","_register","timingsByPhase","timings","pendingRestoredContributions","whenRestored","p","registerWorkbenchContribution2","id","ctor","contribution","didInstantiateEditorPane","safeCreateContribution","push","has","set","console","error","registerWorkbenchContribution","undefined","getWorkbenchContribution","get","Error","warn","instance","start","accessor","onDidShutdown","clear","instantiateByPhase","keys","onEditor","onWillInstantiateEditorPane","e","typeId","contributions","delete","doInstantiateByPhase","when","then","doInstantiateWhenIdle","i","forcedTimeout","instantiateSome","idle","length","timeRemaining","complete","now","Date","createInstance","add","name","isBuilt","time","timingsForPhase","bind"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/common/contributions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IInstantiationService, IConstructorSignature, ServicesAccessor, BrandedService } from '../../platform/instantiation/common/instantiation.js';\nimport { ILifecycleService, LifecyclePhase } from '../services/lifecycle/common/lifecycle.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { IdleDeadline, DeferredPromise, runWhenGlobalIdle } from '../../base/common/async.js';\nimport { mark } from '../../base/common/performance.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nimport { IEnvironmentService } from '../../platform/environment/common/environment.js';\nimport { getOrSet } from '../../base/common/map.js';\nimport { Disposable, DisposableStore, isDisposable } from '../../base/common/lifecycle.js';\nimport { IEditorPaneService } from '../services/editor/common/editorPaneService.js';\n\n/**\n * A workbench contribution that will be loaded when the workbench starts and disposed when the workbench shuts down.\n */\nexport interface IWorkbenchContribution {\n\t// Marker Interface\n}\n\nexport namespace Extensions {\n\t/**\n\t * @deprecated use `registerWorkbenchContribution2` instead.\n\t */\n\texport const Workbench = 'workbench.contributions.kind';\n}\n\nexport const enum WorkbenchPhase {\n\n\t/**\n\t * The first phase signals that we are about to startup getting ready.\n\t *\n\t * Note: doing work in this phase blocks an editor from showing to\n\t * the user, so please rather consider to use the other types, preferable\n\t * `Lazy` to only instantiate the contribution when really needed.\n\t */\n\tBlockStartup = LifecyclePhase.Starting,\n\n\t/**\n\t * Services are ready and the window is about to restore its UI state.\n\t *\n\t * Note: doing work in this phase blocks an editor from showing to\n\t * the user, so please rather consider to use the other types, preferable\n\t * `Lazy` to only instantiate the contribution when really needed.\n\t */\n\tBlockRestore = LifecyclePhase.Ready,\n\n\t/**\n\t * Views, panels and editors have restored. Editors are given a bit of\n\t * time to restore their contents.\n\t */\n\tAfterRestored = LifecyclePhase.Restored,\n\n\t/**\n\t * The last phase after views, panels and editors have restored and\n\t * some time has passed (2-5 seconds).\n\t */\n\tEventually = LifecyclePhase.Eventually\n}\n\n/**\n * A workbenchch contribution that will only be instantiated\n * when calling `getWorkbenchContribution`.\n */\nexport interface ILazyWorkbenchContributionInstantiation {\n\treadonly lazy: true;\n}\n\n/**\n * A workbench contribution that will be instantiated when the\n * corresponding editor is being created.\n */\nexport interface IOnEditorWorkbenchContributionInstantiation {\n\treadonly editorTypeId: string;\n}\n\nfunction isOnEditorWorkbenchContributionInstantiation(obj: unknown): obj is IOnEditorWorkbenchContributionInstantiation {\n\tconst candidate = obj as IOnEditorWorkbenchContributionInstantiation | undefined;\n\treturn !!candidate && typeof candidate.editorTypeId === 'string';\n}\n\nexport type WorkbenchContributionInstantiation = WorkbenchPhase | ILazyWorkbenchContributionInstantiation | IOnEditorWorkbenchContributionInstantiation;\n\nfunction toWorkbenchPhase(phase: LifecyclePhase.Restored | LifecyclePhase.Eventually): WorkbenchPhase.AfterRestored | WorkbenchPhase.Eventually {\n\tswitch (phase) {\n\t\tcase LifecyclePhase.Restored:\n\t\t\treturn WorkbenchPhase.AfterRestored;\n\t\tcase LifecyclePhase.Eventually:\n\t\t\treturn WorkbenchPhase.Eventually;\n\t}\n}\n\nfunction toLifecyclePhase(instantiation: WorkbenchPhase): LifecyclePhase {\n\tswitch (instantiation) {\n\t\tcase WorkbenchPhase.BlockStartup:\n\t\t\treturn LifecyclePhase.Starting;\n\t\tcase WorkbenchPhase.BlockRestore:\n\t\t\treturn LifecyclePhase.Ready;\n\t\tcase WorkbenchPhase.AfterRestored:\n\t\t\treturn LifecyclePhase.Restored;\n\t\tcase WorkbenchPhase.Eventually:\n\t\t\treturn LifecyclePhase.Eventually;\n\t}\n}\n\ntype IWorkbenchContributionSignature<Service extends BrandedService[]> = new (...services: Service) => IWorkbenchContribution;\n\nexport interface IWorkbenchContributionsRegistry {\n\n\t/**\n\t * @deprecated use `registerWorkbenchContribution2` instead.\n\t */\n\tregisterWorkbenchContribution<Services extends BrandedService[]>(contribution: IWorkbenchContributionSignature<Services>, phase: LifecyclePhase.Restored | LifecyclePhase.Eventually): void;\n\n\t/**\n\t * Starts the registry by providing the required services.\n\t */\n\tstart(accessor: ServicesAccessor): void;\n\n\t/**\n\t * A promise that resolves when all contributions up to the `Restored`\n\t * phase have been instantiated.\n\t */\n\treadonly whenRestored: Promise<void>;\n\n\t/**\n\t * Provides access to the instantiation times of all contributions by\n\t * lifecycle phase.\n\t */\n\treadonly timings: Map<LifecyclePhase, Array<[string /* ID */, number /* Creation Time */]>>;\n}\n\ninterface IWorkbenchContributionRegistration {\n\treadonly id: string | undefined;\n\treadonly ctor: IConstructorSignature<IWorkbenchContribution>;\n}\n\nexport class WorkbenchContributionsRegistry extends Disposable implements IWorkbenchContributionsRegistry {\n\n\tstatic readonly INSTANCE = new WorkbenchContributionsRegistry();\n\n\tprivate static readonly BLOCK_BEFORE_RESTORE_WARN_THRESHOLD = 20;\n\tprivate static readonly BLOCK_AFTER_RESTORE_WARN_THRESHOLD = 100;\n\n\tprivate instantiationService: IInstantiationService | undefined;\n\tprivate lifecycleService: ILifecycleService | undefined;\n\tprivate logService: ILogService | undefined;\n\tprivate environmentService: IEnvironmentService | undefined;\n\tprivate editorPaneService: IEditorPaneService | undefined;\n\n\tprivate readonly contributionsByPhase = new Map<LifecyclePhase, IWorkbenchContributionRegistration[]>();\n\tprivate readonly contributionsByEditor = new Map<string, IWorkbenchContributionRegistration[]>();\n\tprivate readonly contributionsById = new Map<string, IWorkbenchContributionRegistration>();\n\n\tprivate readonly instancesById = new Map<string, IWorkbenchContribution>();\n\tprivate readonly instanceDisposables = this._register(new DisposableStore());\n\n\tprivate readonly timingsByPhase = new Map<LifecyclePhase, Array<[string /* ID */, number /* Creation Time */]>>();\n\tget timings() { return this.timingsByPhase; }\n\n\tprivate readonly pendingRestoredContributions = new DeferredPromise<void>();\n\treadonly whenRestored = this.pendingRestoredContributions.p;\n\n\tregisterWorkbenchContribution2(id: string, ctor: IConstructorSignature<IWorkbenchContribution>, phase: WorkbenchPhase.BlockStartup | WorkbenchPhase.BlockRestore): void;\n\tregisterWorkbenchContribution2(id: string | undefined, ctor: IConstructorSignature<IWorkbenchContribution>, phase: WorkbenchPhase.AfterRestored | WorkbenchPhase.Eventually): void;\n\tregisterWorkbenchContribution2(id: string, ctor: IConstructorSignature<IWorkbenchContribution>, lazy: ILazyWorkbenchContributionInstantiation): void;\n\tregisterWorkbenchContribution2(id: string, ctor: IConstructorSignature<IWorkbenchContribution>, onEditor: IOnEditorWorkbenchContributionInstantiation): void;\n\tregisterWorkbenchContribution2(id: string | undefined, ctor: IConstructorSignature<IWorkbenchContribution>, instantiation: WorkbenchContributionInstantiation): void {\n\t\tconst contribution: IWorkbenchContributionRegistration = { id, ctor };\n\n\t\t// Instantiate directly if we already have a matching instantiation condition\n\t\tif (\n\t\t\tthis.instantiationService && this.lifecycleService && this.logService && this.environmentService && this.editorPaneService &&\n\t\t\t(\n\t\t\t\t(typeof instantiation === 'number' && this.lifecycleService.phase >= instantiation) ||\n\t\t\t\t(typeof id === 'string' && isOnEditorWorkbenchContributionInstantiation(instantiation) && this.editorPaneService.didInstantiateEditorPane(instantiation.editorTypeId))\n\t\t\t)\n\t\t) {\n\t\t\tthis.safeCreateContribution(this.instantiationService, this.logService, this.environmentService, contribution, typeof instantiation === 'number' ? toLifecyclePhase(instantiation) : this.lifecycleService.phase);\n\t\t}\n\n\t\t// Otherwise keep contributions by instantiation kind for later instantiation\n\t\telse {\n\n\t\t\t// by phase\n\t\t\tif (typeof instantiation === 'number') {\n\t\t\t\tgetOrSet(this.contributionsByPhase, toLifecyclePhase(instantiation), []).push(contribution);\n\t\t\t}\n\n\t\t\tif (typeof id === 'string') {\n\n\t\t\t\t// by id\n\t\t\t\tif (!this.contributionsById.has(id)) {\n\t\t\t\t\tthis.contributionsById.set(id, contribution);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${id}'`);\n\t\t\t\t}\n\n\t\t\t\t// by editor\n\t\t\t\tif (isOnEditorWorkbenchContributionInstantiation(instantiation)) {\n\t\t\t\t\tgetOrSet(this.contributionsByEditor, instantiation.editorTypeId, []).push(contribution);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tregisterWorkbenchContribution(ctor: IConstructorSignature<IWorkbenchContribution>, phase: LifecyclePhase.Restored | LifecyclePhase.Eventually): void {\n\t\tthis.registerWorkbenchContribution2(undefined, ctor, toWorkbenchPhase(phase));\n\t}\n\n\tgetWorkbenchContribution<T extends IWorkbenchContribution>(id: string): T {\n\t\tif (this.instancesById.has(id)) {\n\t\t\treturn this.instancesById.get(id) as T;\n\t\t}\n\n\t\tconst instantiationService = this.instantiationService;\n\t\tconst lifecycleService = this.lifecycleService;\n\t\tconst logService = this.logService;\n\t\tconst environmentService = this.environmentService;\n\t\tif (!instantiationService || !lifecycleService || !logService || !environmentService) {\n\t\t\tthrow new Error(`IWorkbenchContributionsRegistry#getContribution('${id}'): cannot be called before registry started`);\n\t\t}\n\n\t\tconst contribution = this.contributionsById.get(id);\n\t\tif (!contribution) {\n\t\t\tthrow new Error(`IWorkbenchContributionsRegistry#getContribution('${id}'): contribution with that identifier is unknown.`);\n\t\t}\n\n\t\tif (lifecycleService.phase < LifecyclePhase.Restored) {\n\t\t\tlogService.warn(`IWorkbenchContributionsRegistry#getContribution('${id}'): contribution instantiated before LifecyclePhase.Restored!`);\n\t\t}\n\n\t\tthis.safeCreateContribution(instantiationService, logService, environmentService, contribution, lifecycleService.phase);\n\n\t\tconst instance = this.instancesById.get(id);\n\t\tif (!instance) {\n\t\t\tthrow new Error(`IWorkbenchContributionsRegistry#getContribution('${id}'): failed to create contribution.`);\n\t\t}\n\n\t\treturn instance as T;\n\t}\n\n\tstart(accessor: ServicesAccessor): void {\n\t\tconst instantiationService = this.instantiationService = accessor.get(IInstantiationService);\n\t\tconst lifecycleService = this.lifecycleService = accessor.get(ILifecycleService);\n\t\tconst logService = this.logService = accessor.get(ILogService);\n\t\tconst environmentService = this.environmentService = accessor.get(IEnvironmentService);\n\t\tconst editorPaneService = this.editorPaneService = accessor.get(IEditorPaneService);\n\n\t\t// Dispose contributions on shutdown\n\t\tthis._register(lifecycleService.onDidShutdown(() => {\n\t\t\tthis.instanceDisposables.clear();\n\t\t}));\n\n\t\t// Instantiate contributions by phase when they are ready\n\t\tfor (const phase of [LifecyclePhase.Starting, LifecyclePhase.Ready, LifecyclePhase.Restored, LifecyclePhase.Eventually]) {\n\t\t\tthis.instantiateByPhase(instantiationService, lifecycleService, logService, environmentService, phase);\n\t\t}\n\n\t\t// Instantiate contributions by editor when they are created or have been\n\t\tfor (const editorTypeId of this.contributionsByEditor.keys()) {\n\t\t\tif (editorPaneService.didInstantiateEditorPane(editorTypeId)) {\n\t\t\t\tthis.onEditor(editorTypeId, instantiationService, lifecycleService, logService, environmentService);\n\t\t\t}\n\t\t}\n\t\tthis._register(editorPaneService.onWillInstantiateEditorPane(e => this.onEditor(e.typeId, instantiationService, lifecycleService, logService, environmentService)));\n\t}\n\n\tprivate onEditor(editorTypeId: string, instantiationService: IInstantiationService, lifecycleService: ILifecycleService, logService: ILogService, environmentService: IEnvironmentService): void {\n\t\tconst contributions = this.contributionsByEditor.get(editorTypeId);\n\t\tif (contributions) {\n\t\t\tthis.contributionsByEditor.delete(editorTypeId);\n\n\t\t\tfor (const contribution of contributions) {\n\t\t\t\tthis.safeCreateContribution(instantiationService, logService, environmentService, contribution, lifecycleService.phase);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate instantiateByPhase(instantiationService: IInstantiationService, lifecycleService: ILifecycleService, logService: ILogService, environmentService: IEnvironmentService, phase: LifecyclePhase): void {\n\n\t\t// Instantiate contributions directly when phase is already reached\n\t\tif (lifecycleService.phase >= phase) {\n\t\t\tthis.doInstantiateByPhase(instantiationService, logService, environmentService, phase);\n\t\t}\n\n\t\t// Otherwise wait for phase to be reached\n\t\telse {\n\t\t\tlifecycleService.when(phase).then(() => this.doInstantiateByPhase(instantiationService, logService, environmentService, phase));\n\t\t}\n\t}\n\n\tprivate async doInstantiateByPhase(instantiationService: IInstantiationService, logService: ILogService, environmentService: IEnvironmentService, phase: LifecyclePhase): Promise<void> {\n\t\tconst contributions = this.contributionsByPhase.get(phase);\n\t\tif (contributions) {\n\t\t\tthis.contributionsByPhase.delete(phase);\n\n\t\t\tswitch (phase) {\n\t\t\t\tcase LifecyclePhase.Starting:\n\t\t\t\tcase LifecyclePhase.Ready: {\n\n\t\t\t\t\t// instantiate everything synchronously and blocking\n\t\t\t\t\t// measure the time it takes as perf marks for diagnosis\n\n\t\t\t\t\tmark(`code/willCreateWorkbenchContributions/${phase}`);\n\n\t\t\t\t\tfor (const contribution of contributions) {\n\t\t\t\t\t\tthis.safeCreateContribution(instantiationService, logService, environmentService, contribution, phase);\n\t\t\t\t\t}\n\n\t\t\t\t\tmark(`code/didCreateWorkbenchContributions/${phase}`);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase LifecyclePhase.Restored:\n\t\t\t\tcase LifecyclePhase.Eventually: {\n\n\t\t\t\t\t// for the Restored/Eventually-phase we instantiate contributions\n\t\t\t\t\t// only when idle. this might take a few idle-busy-cycles but will\n\t\t\t\t\t// finish within the timeouts\n\t\t\t\t\t// given that, we must ensure to await the contributions from the\n\t\t\t\t\t// Restored-phase before we instantiate the Eventually-phase\n\n\t\t\t\t\tif (phase === LifecyclePhase.Eventually) {\n\t\t\t\t\t\tawait this.pendingRestoredContributions.p;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.doInstantiateWhenIdle(contributions, instantiationService, logService, environmentService, phase);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate doInstantiateWhenIdle(contributions: IWorkbenchContributionRegistration[], instantiationService: IInstantiationService, logService: ILogService, environmentService: IEnvironmentService, phase: LifecyclePhase): void {\n\t\tmark(`code/willCreateWorkbenchContributions/${phase}`);\n\n\t\tlet i = 0;\n\t\tconst forcedTimeout = phase === LifecyclePhase.Eventually ? 3000 : 500;\n\n\t\tconst instantiateSome = (idle: IdleDeadline) => {\n\t\t\twhile (i < contributions.length) {\n\t\t\t\tconst contribution = contributions[i++];\n\t\t\t\tthis.safeCreateContribution(instantiationService, logService, environmentService, contribution, phase);\n\t\t\t\tif (idle.timeRemaining() < 1) {\n\t\t\t\t\t// time is up -> reschedule\n\t\t\t\t\trunWhenGlobalIdle(instantiateSome, forcedTimeout);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (i === contributions.length) {\n\t\t\t\tmark(`code/didCreateWorkbenchContributions/${phase}`);\n\n\t\t\t\tif (phase === LifecyclePhase.Restored) {\n\t\t\t\t\tthis.pendingRestoredContributions.complete();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\trunWhenGlobalIdle(instantiateSome, forcedTimeout);\n\t}\n\n\tprivate safeCreateContribution(instantiationService: IInstantiationService, logService: ILogService, environmentService: IEnvironmentService, contribution: IWorkbenchContributionRegistration, phase: LifecyclePhase): void {\n\t\tif (typeof contribution.id === 'string' && this.instancesById.has(contribution.id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst now = Date.now();\n\n\t\ttry {\n\t\t\tif (typeof contribution.id === 'string') {\n\t\t\t\tmark(`code/willCreateWorkbenchContribution/${phase}/${contribution.id}`);\n\t\t\t}\n\n\t\t\tconst instance = instantiationService.createInstance(contribution.ctor);\n\t\t\tif (typeof contribution.id === 'string') {\n\t\t\t\tthis.instancesById.set(contribution.id, instance);\n\t\t\t\tthis.contributionsById.delete(contribution.id);\n\t\t\t}\n\t\t\tif (isDisposable(instance)) {\n\t\t\t\tthis.instanceDisposables.add(instance);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tlogService.error(`Unable to create workbench contribution '${contribution.id ?? contribution.ctor.name}'.`, error);\n\t\t} finally {\n\t\t\tif (typeof contribution.id === 'string') {\n\t\t\t\tmark(`code/didCreateWorkbenchContribution/${phase}/${contribution.id}`);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof contribution.id === 'string' || !environmentService.isBuilt /* only log out of sources where we have good ctor names */) {\n\t\t\tconst time = Date.now() - now;\n\t\t\tif (time > (phase < LifecyclePhase.Restored ? WorkbenchContributionsRegistry.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD : WorkbenchContributionsRegistry.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)) {\n\t\t\t\tlogService.warn(`Creation of workbench contribution '${contribution.id ?? contribution.ctor.name}' took ${time}ms.`);\n\t\t\t}\n\n\t\t\tif (typeof contribution.id === 'string') {\n\t\t\t\tlet timingsForPhase = this.timingsByPhase.get(phase);\n\t\t\t\tif (!timingsForPhase) {\n\t\t\t\t\ttimingsForPhase = [];\n\t\t\t\t\tthis.timingsByPhase.set(phase, timingsForPhase);\n\t\t\t\t}\n\n\t\t\t\ttimingsForPhase.push([contribution.id, time]);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Register a workbench contribution that will be instantiated\n * based on the `instantiation` property.\n */\nexport const registerWorkbenchContribution2 = WorkbenchContributionsRegistry.INSTANCE.registerWorkbenchContribution2.bind(WorkbenchContributionsRegistry.INSTANCE) as {\n\t<Services extends BrandedService[]>(id: string, ctor: IWorkbenchContributionSignature<Services>, instantiation: WorkbenchContributionInstantiation): void;\n};\n\n/**\n * Provides access to a workbench contribution with a specific identifier.\n * The contribution is created if not yet done.\n *\n * Note: will throw an error if\n * - called too early before the registry has started\n * - no contribution is known for the given identifier\n */\nexport const getWorkbenchContribution = WorkbenchContributionsRegistry.INSTANCE.getWorkbenchContribution.bind(WorkbenchContributionsRegistry.INSTANCE);\n\nRegistry.add(Extensions.Workbench, WorkbenchContributionsRegistry.INSTANCE);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}