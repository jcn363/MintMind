{"version":3,"names":["cov_1eezjthjn3","actualCoverage","CancellationToken","Codicon","basename","URI","isCodeEditor","Position","EditorContextKeys","isLocation","ILanguageFeaturesService","ITextModelService","localize","localize2","Action2","MenuId","registerAction2","CommandsRegistry","IConfigurationService","ContextKeyExpr","IDialogService","EditorActivation","IEditorService","isChatViewTitleActionContext","ChatContextKeys","applyingChatEditsFailedContextKey","CHAT_EDITING_MULTI_DIFF_SOURCE_RESOLVER_SCHEME","chatEditingResourceContextKey","chatEditingWidgetFileStateContextKey","decidedChatEditingResourceContextKey","hasAppliedChatEditsContextKey","hasUndecidedChatEditingResourceContextKey","IChatEditingService","IChatService","isRequestVM","isResponseVM","ChatAgentLocation","ChatConfiguration","ChatModeKind","CHAT_CATEGORY","IChatWidgetService","EditingSessionAction","constructor","opts","f","s","category","run","accessor","args","context","getEditingSessionContext","b","editingSession","runEditingSessionAction","chatWidget","arg0","at","undefined","chatWidgetService","get","chatEditingService","getWidgetBySessionResource","sessionResource","lastFocusedWidget","getWidgetsByLocations","Chat","find","w","supportsChangingModes","viewModel","getEditingSession","model","WorkingSetAction","uris","isUri","push","input","selectedElements","length","runWorkingSetAction","OpenFileInDiffAction","id","title","icon","diffSingle","menu","ChatEditingWidgetModifiedFilesToolbar","when","equals","key","order","group","currentEditingSession","_chatWidget","editorService","uri","pane","activeEditorPane","openEditor","resource","editedFile","getEntry","getEditorIntegration","toggleDiff","AcceptAction","check","and","notIn","MultiDiffEditorFileToolbar","accept","DiscardAction","discard","reject","ChatEditingAcceptAllAction","tooltip","precondition","keybinding","primary","inChatInput","weight","ChatEditingWidgetToolbar","negate","ChatEditingDiscardAllAction","inputHasText","discardAllEditsWithConfirmation","dialogService","entries","confirmation","confirm","message","modifiedURI","primaryButton","type","confirmed","ChatEditingShowChangesAction","ID","LABEL","value","original","f1","diffMultiple","show","restoreSnapshotWithConfirmation","item","configurationService","widget","chatService","chatModel","getSession","session","requestId","chatRequests","getRequests","itemIndex","findIndex","request","editsToUndo","requestsToRemove","slice","requestIdsToRemove","Set","map","entriesModifiedInRequestsToRemove","filter","entry","has","lastModifyingRequestId","shouldPrompt","getValue","checkbox","label","checked","setCheckpoint","checkboxChecked","updateValue","snapshotRequestId","restoreSnapshot","RemoveAction","mac","inChatSession","textInputFocus","ChatMessageTitle","EditRequests","CheckpointsEnabled","lockedToCodingAgent","getFocus","focusInput","setValue","messageText","RestoreCheckpointAction","ChatMessageCheckpoint","isRequest","RestoreLastCheckpoint","ChatMessageFooter","in","itemId","lastItemId","text","EditAction","edit","or","startEditing","OpenWorkingSetHistoryAction","ChatEditingCodeBlockContext","snapshot","getSnapshotUri","stopId","editor","options","activation","ACTIVATE","updateOptions","readOnly","ResolveSymbolsContextAction","ChatInputSymbolAttachmentContext","chatModeKind","isEqualTo","Ask","hasReferenceProvider","textModelService","languageFeaturesService","symbol","modelReference","createModelReference","textModel","object","textEditorModel","position","range","startLineNumber","startColumn","references","definitions","implementations","Promise","all","getReferences","getDefinitions","getImplementations","attachments","reference","attachmentModel","asFileVariableEntry","addContext","referenceProviders","referenceProvider","provideReferences","includeDeclaration","None","flat","definitionProviders","definitionProvider","provideDefinition","implementationProviders","implementationProvider","provideImplementation","ViewPreviousEditsAction","Id","Label","enabled","registerCommand","resources","revive","editingSessionsObs"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/chatEditing/chatEditingActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { basename } from '../../../../../base/common/resources.js';\nimport { URI, UriComponents } from '../../../../../base/common/uri.js';\nimport { isCodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { Position } from '../../../../../editor/common/core/position.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { isLocation, Location } from '../../../../../editor/common/languages.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { ILanguageFeaturesService } from '../../../../../editor/common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, IAction2Options, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { EditorActivation } from '../../../../../platform/editor/common/editor.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IEditorPane } from '../../../../common/editor.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { isChatViewTitleActionContext } from '../../common/chatActions.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { applyingChatEditsFailedContextKey, CHAT_EDITING_MULTI_DIFF_SOURCE_RESOLVER_SCHEME, chatEditingResourceContextKey, chatEditingWidgetFileStateContextKey, decidedChatEditingResourceContextKey, hasAppliedChatEditsContextKey, hasUndecidedChatEditingResourceContextKey, IChatEditingService, IChatEditingSession, ModifiedFileEntryState } from '../../common/chatEditingService.js';\nimport { IChatService } from '../../common/chatService.js';\nimport { isRequestVM, isResponseVM } from '../../common/chatViewModel.js';\nimport { ChatAgentLocation, ChatConfiguration, ChatModeKind } from '../../common/constants.js';\nimport { CHAT_CATEGORY } from '../actions/chatActions.js';\nimport { ChatTreeItem, IChatWidget, IChatWidgetService } from '../chat.js';\n\nexport abstract class EditingSessionAction extends Action2 {\n\n\tconstructor(opts: Readonly<IAction2Options>) {\n\t\tsuper({\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t...opts\n\t\t});\n\t}\n\n\trun(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tconst context = getEditingSessionContext(accessor, args);\n\t\tif (!context || !context.editingSession) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.runEditingSessionAction(accessor, context.editingSession, context.chatWidget, ...args);\n\t}\n\n\tabstract runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]): any;\n}\n\n/**\n * Resolve view title toolbar context. If none, return context from the lastFocusedWidget.\n */\nexport function getEditingSessionContext(accessor: ServicesAccessor, args: any[]): { editingSession?: IChatEditingSession; chatWidget: IChatWidget } | undefined {\n\tconst arg0 = args.at(0);\n\tconst context = isChatViewTitleActionContext(arg0) ? arg0 : undefined;\n\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst chatEditingService = accessor.get(IChatEditingService);\n\tlet chatWidget = context ? chatWidgetService.getWidgetBySessionResource(context.sessionResource) : undefined;\n\tif (!chatWidget) {\n\t\tchatWidget = chatWidgetService.lastFocusedWidget ?? chatWidgetService.getWidgetsByLocations(ChatAgentLocation.Chat).find(w => w.supportsChangingModes);\n\t}\n\n\tif (!chatWidget?.viewModel) {\n\t\treturn;\n\t}\n\n\tconst editingSession = chatEditingService.getEditingSession(chatWidget.viewModel.model.sessionResource);\n\treturn { editingSession, chatWidget };\n}\n\n\nabstract class WorkingSetAction extends EditingSessionAction {\n\n\trunEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]) {\n\n\t\tconst uris: URI[] = [];\n\t\tif (URI.isUri(args[0])) {\n\t\t\turis.push(args[0]);\n\t\t} else if (chatWidget) {\n\t\t\turis.push(...chatWidget.input.selectedElements);\n\t\t}\n\t\tif (!uris.length) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.runWorkingSetAction(accessor, editingSession, chatWidget, ...uris);\n\t}\n\n\tabstract runWorkingSetAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget | undefined, ...uris: URI[]): any;\n}\n\nregisterAction2(class OpenFileInDiffAction extends WorkingSetAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'chatEditing.openFileInDiff',\n\t\t\ttitle: localize2('open.fileInDiff', 'Open Changes in Diff Editor'),\n\t\t\ticon: Codicon.diffSingle,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditingWidgetModifiedFilesToolbar,\n\t\t\t\twhen: ContextKeyExpr.equals(chatEditingWidgetFileStateContextKey.key, ModifiedFileEntryState.Modified),\n\t\t\t\torder: 2,\n\t\t\t\tgroup: 'navigation'\n\t\t\t}],\n\t\t});\n\t}\n\n\tasync runWorkingSetAction(accessor: ServicesAccessor, currentEditingSession: IChatEditingSession, _chatWidget: IChatWidget, ...uris: URI[]): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\n\t\tfor (const uri of uris) {\n\n\t\t\tlet pane: IEditorPane | undefined = editorService.activeEditorPane;\n\t\t\tif (!pane) {\n\t\t\t\tpane = await editorService.openEditor({ resource: uri });\n\t\t\t}\n\n\t\t\tif (!pane) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst editedFile = currentEditingSession.getEntry(uri);\n\t\t\teditedFile?.getEditorIntegration(pane).toggleDiff(undefined, true);\n\t\t}\n\t}\n});\n\nregisterAction2(class AcceptAction extends WorkingSetAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'chatEditing.acceptFile',\n\t\t\ttitle: localize2('accept.file', 'Keep'),\n\t\t\ticon: Codicon.check,\n\t\t\tmenu: [{\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('resourceScheme', CHAT_EDITING_MULTI_DIFF_SOURCE_RESOLVER_SCHEME), ContextKeyExpr.notIn(chatEditingResourceContextKey.key, decidedChatEditingResourceContextKey.key)),\n\t\t\t\tid: MenuId.MultiDiffEditorFileToolbar,\n\t\t\t\torder: 0,\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ChatEditingWidgetModifiedFilesToolbar,\n\t\t\t\twhen: ContextKeyExpr.equals(chatEditingWidgetFileStateContextKey.key, ModifiedFileEntryState.Modified),\n\t\t\t\torder: 0,\n\t\t\t\tgroup: 'navigation'\n\t\t\t}],\n\t\t});\n\t}\n\n\tasync runWorkingSetAction(accessor: ServicesAccessor, currentEditingSession: IChatEditingSession, chatWidget: IChatWidget, ...uris: URI[]): Promise<void> {\n\t\tawait currentEditingSession.accept(...uris);\n\t}\n});\n\nregisterAction2(class DiscardAction extends WorkingSetAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'chatEditing.discardFile',\n\t\t\ttitle: localize2('discard.file', 'Undo'),\n\t\t\ticon: Codicon.discard,\n\t\t\tmenu: [{\n\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals('resourceScheme', CHAT_EDITING_MULTI_DIFF_SOURCE_RESOLVER_SCHEME), ContextKeyExpr.notIn(chatEditingResourceContextKey.key, decidedChatEditingResourceContextKey.key)),\n\t\t\t\tid: MenuId.MultiDiffEditorFileToolbar,\n\t\t\t\torder: 2,\n\t\t\t\tgroup: 'navigation',\n\t\t\t}, {\n\t\t\t\tid: MenuId.ChatEditingWidgetModifiedFilesToolbar,\n\t\t\t\twhen: ContextKeyExpr.equals(chatEditingWidgetFileStateContextKey.key, ModifiedFileEntryState.Modified),\n\t\t\t\torder: 1,\n\t\t\t\tgroup: 'navigation'\n\t\t\t}],\n\t\t});\n\t}\n\n\tasync runWorkingSetAction(accessor: ServicesAccessor, currentEditingSession: IChatEditingSession, chatWidget: IChatWidget, ...uris: URI[]): Promise<void> {\n\t\tawait currentEditingSession.reject(...uris);\n\t}\n});\n\nexport class ChatEditingAcceptAllAction extends EditingSessionAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'chatEditing.acceptAllFiles',\n\t\t\ttitle: localize('accept', 'Keep'),\n\t\t\ticon: Codicon.check,\n\t\t\ttooltip: localize('acceptAllEdits', 'Keep All Edits'),\n\t\t\tprecondition: hasUndecidedChatEditingResourceContextKey,\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\twhen: ContextKeyExpr.and(hasUndecidedChatEditingResourceContextKey, ChatContextKeys.inChatInput),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t},\n\t\t\tmenu: [\n\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatEditingWidgetToolbar,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 0,\n\t\t\t\t\twhen: ContextKeyExpr.and(applyingChatEditsFailedContextKey.negate(), ContextKeyExpr.and(hasUndecidedChatEditingResourceContextKey))\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\toverride async runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]) {\n\t\tawait editingSession.accept();\n\t}\n}\nregisterAction2(ChatEditingAcceptAllAction);\n\nexport class ChatEditingDiscardAllAction extends EditingSessionAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'chatEditing.discardAllFiles',\n\t\t\ttitle: localize('discard', 'Undo'),\n\t\t\ticon: Codicon.discard,\n\t\t\ttooltip: localize('discardAllEdits', 'Undo All Edits'),\n\t\t\tprecondition: hasUndecidedChatEditingResourceContextKey,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatEditingWidgetToolbar,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(applyingChatEditsFailedContextKey.negate(), hasUndecidedChatEditingResourceContextKey)\n\t\t\t\t}\n\t\t\t],\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(hasUndecidedChatEditingResourceContextKey, ChatContextKeys.inChatInput, ChatContextKeys.inputHasText.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t\t\t},\n\t\t});\n\t}\n\n\toverride async runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]) {\n\t\tawait discardAllEditsWithConfirmation(accessor, editingSession);\n\t}\n}\nregisterAction2(ChatEditingDiscardAllAction);\n\nexport async function discardAllEditsWithConfirmation(accessor: ServicesAccessor, currentEditingSession: IChatEditingSession): Promise<boolean> {\n\n\tconst dialogService = accessor.get(IDialogService);\n\n\t// Ask for confirmation if there are any edits\n\tconst entries = currentEditingSession.entries.get();\n\tif (entries.length > 0) {\n\t\tconst confirmation = await dialogService.confirm({\n\t\t\ttitle: localize('chat.editing.discardAll.confirmation.title', \"Undo all edits?\"),\n\t\t\tmessage: entries.length === 1\n\t\t\t\t? localize('chat.editing.discardAll.confirmation.oneFile', \"This will undo changes made in {0}. Do you want to proceed?\", basename(entries[0].modifiedURI))\n\t\t\t\t: localize('chat.editing.discardAll.confirmation.manyFiles', \"This will undo changes made in {0} files. Do you want to proceed?\", entries.length),\n\t\t\tprimaryButton: localize('chat.editing.discardAll.confirmation.primaryButton', \"Yes\"),\n\t\t\ttype: 'info'\n\t\t});\n\t\tif (!confirmation.confirmed) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tawait currentEditingSession.reject();\n\treturn true;\n}\n\nexport class ChatEditingShowChangesAction extends EditingSessionAction {\n\tstatic readonly ID = 'chatEditing.viewChanges';\n\tstatic readonly LABEL = localize('chatEditing.viewChanges', 'View All Edits');\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ChatEditingShowChangesAction.ID,\n\t\t\ttitle: { value: ChatEditingShowChangesAction.LABEL, original: ChatEditingShowChangesAction.LABEL },\n\t\t\ttooltip: ChatEditingShowChangesAction.LABEL,\n\t\t\tf1: true,\n\t\t\ticon: Codicon.diffMultiple,\n\t\t\tprecondition: hasUndecidedChatEditingResourceContextKey,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatEditingWidgetToolbar,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(applyingChatEditsFailedContextKey.negate(), ContextKeyExpr.and(hasAppliedChatEditsContextKey, hasUndecidedChatEditingResourceContextKey))\n\t\t\t\t}\n\t\t\t],\n\t\t});\n\t}\n\n\toverride async runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]): Promise<void> {\n\t\tawait editingSession.show();\n\t}\n}\nregisterAction2(ChatEditingShowChangesAction);\n\nasync function restoreSnapshotWithConfirmation(accessor: ServicesAccessor, item: ChatTreeItem): Promise<void> {\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst dialogService = accessor.get(IDialogService);\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst widget = chatWidgetService.lastFocusedWidget;\n\tconst chatService = accessor.get(IChatService);\n\tconst chatModel = chatService.getSession(item.sessionResource);\n\tif (!chatModel) {\n\t\treturn;\n\t}\n\n\tconst session = chatModel.editingSession;\n\tif (!session) {\n\t\treturn;\n\t}\n\n\tconst requestId = isRequestVM(item) ? item.id :\n\t\tisResponseVM(item) ? item.requestId : undefined;\n\n\tif (requestId) {\n\t\tconst chatRequests = chatModel.getRequests();\n\t\tconst itemIndex = chatRequests.findIndex(request => request.id === requestId);\n\t\tconst editsToUndo = chatRequests.length - itemIndex;\n\n\t\tconst requestsToRemove = chatRequests.slice(itemIndex);\n\t\tconst requestIdsToRemove = new Set(requestsToRemove.map(request => request.id));\n\t\tconst entriesModifiedInRequestsToRemove = session.entries.get().filter((entry) => requestIdsToRemove.has(entry.lastModifyingRequestId)) ?? [];\n\t\tconst shouldPrompt = entriesModifiedInRequestsToRemove.length > 0 && configurationService.getValue('chat.editing.confirmEditRequestRemoval') === true;\n\n\t\tlet message: string;\n\t\tif (editsToUndo === 1) {\n\t\t\tif (entriesModifiedInRequestsToRemove.length === 1) {\n\t\t\t\tmessage = localize('chat.removeLast.confirmation.message2', \"This will remove your last request and undo the edits made to {0}. Do you want to proceed?\", basename(entriesModifiedInRequestsToRemove[0].modifiedURI));\n\t\t\t} else {\n\t\t\t\tmessage = localize('chat.removeLast.confirmation.multipleEdits.message', \"This will remove your last request and undo edits made to {0} files in your working set. Do you want to proceed?\", entriesModifiedInRequestsToRemove.length);\n\t\t\t}\n\t\t} else {\n\t\t\tif (entriesModifiedInRequestsToRemove.length === 1) {\n\t\t\t\tmessage = localize('chat.remove.confirmation.message2', \"This will remove all subsequent requests and undo edits made to {0}. Do you want to proceed?\", basename(entriesModifiedInRequestsToRemove[0].modifiedURI));\n\t\t\t} else {\n\t\t\t\tmessage = localize('chat.remove.confirmation.multipleEdits.message', \"This will remove all subsequent requests and undo edits made to {0} files in your working set. Do you want to proceed?\", entriesModifiedInRequestsToRemove.length);\n\t\t\t}\n\t\t}\n\n\t\tconst confirmation = shouldPrompt\n\t\t\t? await dialogService.confirm({\n\t\t\t\ttitle: editsToUndo === 1\n\t\t\t\t\t? localize('chat.removeLast.confirmation.title', \"Do you want to undo your last edit?\")\n\t\t\t\t\t: localize('chat.remove.confirmation.title', \"Do you want to undo {0} edits?\", editsToUndo),\n\t\t\t\tmessage: message,\n\t\t\t\tprimaryButton: localize('chat.remove.confirmation.primaryButton', \"Yes\"),\n\t\t\t\tcheckbox: { label: localize('chat.remove.confirmation.checkbox', \"Don't ask again\"), checked: false },\n\t\t\t\ttype: 'info'\n\t\t\t})\n\t\t\t: { confirmed: true };\n\n\t\tif (!confirmation.confirmed) {\n\t\t\twidget?.viewModel?.model.setCheckpoint(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tif (confirmation.checkboxChecked) {\n\t\t\tawait configurationService.updateValue('chat.editing.confirmEditRequestRemoval', false);\n\t\t}\n\n\t\t// Restore the snapshot to what it was before the request(s) that we deleted\n\t\tconst snapshotRequestId = chatRequests[itemIndex].id;\n\t\tawait session.restoreSnapshot(snapshotRequestId, undefined);\n\t}\n}\n\nregisterAction2(class RemoveAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.undoEdits',\n\t\t\ttitle: localize2('chat.undoEdits.label', \"Undo Requests\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.discard,\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyCode.Delete,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t\t\t\t},\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inChatSession, EditorContextKeys.textInputFocus.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatMessageTitle,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.equals(`config.${ChatConfiguration.EditRequests}`, 'input').negate(), ContextKeyExpr.equals(`config.${ChatConfiguration.CheckpointsEnabled}`, false), ChatContextKeys.lockedToCodingAgent.negate()),\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tlet item = args[0] as ChatTreeItem | undefined;\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!isResponseVM(item) && !isRequestVM(item)) {\n\t\t\titem = widget?.getFocus();\n\t\t}\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait restoreSnapshotWithConfirmation(accessor, item);\n\n\t\tif (isRequestVM(item) && configurationService.getValue('chat.undoRequests.restoreInput')) {\n\t\t\twidget?.focusInput();\n\t\t\twidget?.input.setValue(item.messageText, false);\n\t\t}\n\t}\n});\n\nregisterAction2(class RestoreCheckpointAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.restoreCheckpoint',\n\t\t\ttitle: localize2('chat.restoreCheckpoint.label', \"Restore Checkpoint\"),\n\t\t\ttooltip: localize2('chat.restoreCheckpoint.tooltip', \"Restores workspace and chat to this point\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyCode.Delete,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t\t\t\t},\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inChatSession, EditorContextKeys.textInputFocus.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatMessageCheckpoint,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.isRequest, ChatContextKeys.lockedToCodingAgent.negate())\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tlet item = args[0] as ChatTreeItem | undefined;\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!isResponseVM(item) && !isRequestVM(item)) {\n\t\t\titem = widget?.getFocus();\n\t\t}\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isRequestVM(item)) {\n\t\t\twidget?.focusInput();\n\t\t\twidget?.input.setValue(item.messageText, false);\n\t\t}\n\n\t\twidget?.viewModel?.model.setCheckpoint(item.id);\n\t\tawait restoreSnapshotWithConfirmation(accessor, item);\n\t}\n});\n\nregisterAction2(class RestoreLastCheckpoint extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.restoreLastCheckpoint',\n\t\t\ttitle: localize2('chat.restoreLastCheckpoint.label', \"Restore to Last Checkpoint\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.discard,\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.in(ChatContextKeys.itemId.key, ChatContextKeys.lastItemId.key), ContextKeyExpr.equals(`config.${ChatConfiguration.CheckpointsEnabled}`, true), ChatContextKeys.lockedToCodingAgent.negate()),\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tlet item = args[0] as ChatTreeItem | undefined;\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!isResponseVM(item) && !isRequestVM(item)) {\n\t\t\titem = widget?.getFocus();\n\t\t}\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatModel = chatService.getSession(item.sessionResource);\n\t\tif (!chatModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst session = chatModel.editingSession;\n\t\tif (!session) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait restoreSnapshotWithConfirmation(accessor, item);\n\n\t\tif (isResponseVM(item)) {\n\t\t\twidget?.viewModel?.model.setCheckpoint(item.requestId);\n\t\t\tconst request = chatModel.getRequests().find(request => request.id === item.requestId);\n\t\t\tif (request) {\n\t\t\t\twidget?.focusInput();\n\t\t\t\twidget?.input.setValue(request.message.text, false);\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class EditAction extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.editRequests',\n\t\t\ttitle: localize2('chat.editRequests.label', \"Edit Request\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\ticon: Codicon.edit,\n\t\t\tkeybinding: {\n\t\t\t\tprimary: KeyCode.Enter,\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inChatSession, EditorContextKeys.textInputFocus.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t},\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatMessageTitle,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.and(ContextKeyExpr.or(ContextKeyExpr.equals(`config.${ChatConfiguration.EditRequests}`, 'hover'), ContextKeyExpr.equals(`config.${ChatConfiguration.EditRequests}`, 'input')))\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, ...args: unknown[]) {\n\t\tlet item = args[0] as ChatTreeItem | undefined;\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!isResponseVM(item) && !isRequestVM(item)) {\n\t\t\titem = widget?.getFocus();\n\t\t}\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isRequestVM(item)) {\n\t\t\twidget?.startEditing(item.id);\n\t\t}\n\t}\n});\n\nexport interface ChatEditingActionContext {\n\treadonly sessionResource: URI;\n\treadonly requestId: string;\n\treadonly uri: URI;\n\treadonly stopId: string | undefined;\n}\n\nregisterAction2(class OpenWorkingSetHistoryAction extends Action2 {\n\n\tstatic readonly id = 'chat.openFileUpdatedBySnapshot';\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenWorkingSetHistoryAction.id,\n\t\t\ttitle: localize('chat.openFileUpdatedBySnapshot.label', \"Open File\"),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditingCodeBlockContext,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 0,\n\t\t\t},]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst context = args[0] as ChatEditingActionContext | undefined;\n\t\tif (!context?.sessionResource) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tawait editorService.openEditor({ resource: context.uri });\n\t}\n});\n\nregisterAction2(class OpenWorkingSetHistoryAction extends Action2 {\n\n\tstatic readonly id = 'chat.openFileSnapshot';\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: OpenWorkingSetHistoryAction.id,\n\t\t\ttitle: localize('chat.openSnapshot.label', \"Open File Snapshot\"),\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditingCodeBlockContext,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1,\n\t\t\t},]\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst context = args[0] as ChatEditingActionContext | undefined;\n\t\tif (!context?.sessionResource) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst chatEditingService = accessor.get(IChatEditingService);\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst chatModel = chatService.getSession(context.sessionResource);\n\t\tif (!chatModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst snapshot = chatEditingService.getEditingSession(chatModel.sessionResource)?.getSnapshotUri(context.requestId, context.uri, context.stopId);\n\t\tif (snapshot) {\n\t\t\tconst editor = await editorService.openEditor({ resource: snapshot, label: localize('chatEditing.snapshot', '{0} (Snapshot)', basename(context.uri)), options: { activation: EditorActivation.ACTIVATE } });\n\t\t\tif (isCodeEditor(editor)) {\n\t\t\t\teditor.updateOptions({ readOnly: true });\n\t\t\t}\n\t\t}\n\t}\n});\n\nregisterAction2(class ResolveSymbolsContextAction extends EditingSessionAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.edits.addFilesFromReferences',\n\t\t\ttitle: localize2('addFilesFromReferences', \"Add Files From References\"),\n\t\t\tf1: false,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ChatInputSymbolAttachmentContext,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.chatModeKind.isEqualTo(ChatModeKind.Ask), EditorContextKeys.hasReferenceProvider)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]): Promise<void> {\n\t\tif (args.length === 0 || !isLocation(args[0])) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst textModelService = accessor.get(ITextModelService);\n\t\tconst languageFeaturesService = accessor.get(ILanguageFeaturesService);\n\t\tconst symbol = args[0] as Location;\n\n\t\tconst modelReference = await textModelService.createModelReference(symbol.uri);\n\t\tconst textModel = modelReference.object.textEditorModel;\n\t\tif (!textModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst position = new Position(symbol.range.startLineNumber, symbol.range.startColumn);\n\n\t\tconst [references, definitions, implementations] = await Promise.all([\n\t\t\tthis.getReferences(position, textModel, languageFeaturesService),\n\t\t\tthis.getDefinitions(position, textModel, languageFeaturesService),\n\t\t\tthis.getImplementations(position, textModel, languageFeaturesService)\n\t\t]);\n\n\t\t// Sort the references, definitions and implementations by\n\t\t// how important it is that they make it into the working set as it has limited size\n\t\tconst attachments = [];\n\t\tfor (const reference of [...definitions, ...implementations, ...references]) {\n\t\t\tattachments.push(chatWidget.attachmentModel.asFileVariableEntry(reference.uri));\n\t\t}\n\n\t\tchatWidget.attachmentModel.addContext(...attachments);\n\t}\n\n\tprivate async getReferences(position: Position, textModel: ITextModel, languageFeaturesService: ILanguageFeaturesService): Promise<Location[]> {\n\t\tconst referenceProviders = languageFeaturesService.referenceProvider.all(textModel);\n\n\t\tconst references = await Promise.all(referenceProviders.map(async (referenceProvider) => {\n\t\t\treturn await referenceProvider.provideReferences(textModel, position, { includeDeclaration: true }, CancellationToken.None) ?? [];\n\t\t}));\n\n\t\treturn references.flat();\n\t}\n\n\tprivate async getDefinitions(position: Position, textModel: ITextModel, languageFeaturesService: ILanguageFeaturesService): Promise<Location[]> {\n\t\tconst definitionProviders = languageFeaturesService.definitionProvider.all(textModel);\n\n\t\tconst definitions = await Promise.all(definitionProviders.map(async (definitionProvider) => {\n\t\t\treturn await definitionProvider.provideDefinition(textModel, position, CancellationToken.None) ?? [];\n\t\t}));\n\n\t\treturn definitions.flat();\n\t}\n\n\tprivate async getImplementations(position: Position, textModel: ITextModel, languageFeaturesService: ILanguageFeaturesService): Promise<Location[]> {\n\t\tconst implementationProviders = languageFeaturesService.implementationProvider.all(textModel);\n\n\t\tconst implementations = await Promise.all(implementationProviders.map(async (implementationProvider) => {\n\t\t\treturn await implementationProvider.provideImplementation(textModel, position, CancellationToken.None) ?? [];\n\t\t}));\n\n\t\treturn implementations.flat();\n\t}\n});\n\nexport class ViewPreviousEditsAction extends EditingSessionAction {\n\tstatic readonly Id = 'chatEditing.viewPreviousEdits';\n\tstatic readonly Label = localize('chatEditing.viewPreviousEdits', 'View Previous Edits');\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ViewPreviousEditsAction.Id,\n\t\t\ttitle: { value: ViewPreviousEditsAction.Label, original: ViewPreviousEditsAction.Label },\n\t\t\ttooltip: ViewPreviousEditsAction.Label,\n\t\t\tf1: true,\n\t\t\ticon: Codicon.diffMultiple,\n\t\t\tprecondition: ContextKeyExpr.and(ChatContextKeys.enabled, hasUndecidedChatEditingResourceContextKey.negate()),\n\t\t\tmenu: [\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatEditingWidgetToolbar,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(applyingChatEditsFailedContextKey.negate(), ContextKeyExpr.and(hasAppliedChatEditsContextKey, hasUndecidedChatEditingResourceContextKey.negate()))\n\t\t\t\t}\n\t\t\t],\n\t\t});\n\t}\n\n\toverride async runEditingSessionAction(accessor: ServicesAccessor, editingSession: IChatEditingSession, chatWidget: IChatWidget, ...args: unknown[]): Promise<void> {\n\t\tawait editingSession.show(true);\n\t}\n}\nregisterAction2(ViewPreviousEditsAction);\n\n/**\n * Workbench command to explore accepting working set changes from an extension. Executing\n * the command will accept the changes for the provided resources across all edit sessions.\n */\nCommandsRegistry.registerCommand('_chat.editSessions.accept', async (accessor: ServicesAccessor, resources: UriComponents[]) => {\n\tif (resources.length === 0) {\n\t\treturn;\n\t}\n\n\tconst uris = resources.map(resource => URI.revive(resource));\n\tconst chatEditingService = accessor.get(IChatEditingService);\n\tfor (const editingSession of chatEditingService.editingSessionsObs.get()) {\n\t\tawait editingSession.accept(...uris);\n\t}\n});\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}