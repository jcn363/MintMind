{"version":3,"names":["cov_2c2s5cyozp","actualCoverage","assert","Position","MirrorTextModel","createTextModel","testApplyEditsWithSyncedModels","original","edits","expected","inputEditsAreInvalid","b","f","originalStr","s","join","expectedStr","assertSyncedModels","model","assertMirrorModels","inverseEdits","applyEdits","deepStrictEqual","getValue","inverseInverseEdits","simplifyEdit","edit","range","text","forceMoveMarkers","map","assertOneDirectionLineMapping","direction","msg","allText","line","column","previousIsCarriageReturn","offset","length","position","actualPosition","getPositionAt","strictEqual","toString","expectedOffset","actualOffset","getOffsetAt","charAt","assertLineMapping","callback","setup","setEOL","mirrorModel2","getLinesContent","getEOL","getVersionId","mirrorModel2PrevVersionId","disposable","onDidChangeContent","e","versionId","console","warn","onEvents","getText","version","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/test/common/model/editableTextModelTestUtils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ISingleEditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { EndOfLinePreference, EndOfLineSequence } from '../../../common/model.js';\nimport { MirrorTextModel } from '../../../common/model/mirrorTextModel.js';\nimport { TextModel } from '../../../common/model/textModel.js';\nimport { IModelContentChangedEvent } from '../../../common/textModelEvents.js';\nimport { createTextModel } from '../testTextModel.js';\n\nexport function testApplyEditsWithSyncedModels(original: string[], edits: ISingleEditOperation[], expected: string[], inputEditsAreInvalid: boolean = false): void {\n\tconst originalStr = original.join('\\n');\n\tconst expectedStr = expected.join('\\n');\n\n\tassertSyncedModels(originalStr, (model, assertMirrorModels) => {\n\t\t// Apply edits & collect inverse edits\n\t\tconst inverseEdits = model.applyEdits(edits, true);\n\n\t\t// Assert edits produced expected result\n\t\tassert.deepStrictEqual(model.getValue(EndOfLinePreference.LF), expectedStr);\n\n\t\tassertMirrorModels();\n\n\t\t// Apply the inverse edits\n\t\tconst inverseInverseEdits = model.applyEdits(inverseEdits, true);\n\n\t\t// Assert the inverse edits brought back model to original state\n\t\tassert.deepStrictEqual(model.getValue(EndOfLinePreference.LF), originalStr);\n\n\t\tif (!inputEditsAreInvalid) {\n\t\t\tconst simplifyEdit = (edit: ISingleEditOperation) => {\n\t\t\t\treturn {\n\t\t\t\t\trange: edit.range,\n\t\t\t\t\ttext: edit.text,\n\t\t\t\t\tforceMoveMarkers: edit.forceMoveMarkers || false\n\t\t\t\t};\n\t\t\t};\n\t\t\t// Assert the inverse of the inverse edits are the original edits\n\t\t\tassert.deepStrictEqual(inverseInverseEdits.map(simplifyEdit), edits.map(simplifyEdit));\n\t\t}\n\n\t\tassertMirrorModels();\n\t});\n}\n\nconst enum AssertDocumentLineMappingDirection {\n\tOffsetToPosition,\n\tPositionToOffset\n}\n\nfunction assertOneDirectionLineMapping(model: TextModel, direction: AssertDocumentLineMappingDirection, msg: string): void {\n\tconst allText = model.getValue();\n\n\tlet line = 1, column = 1, previousIsCarriageReturn = false;\n\tfor (let offset = 0; offset <= allText.length; offset++) {\n\t\t// The position coordinate system cannot express the position between \\r and \\n\n\t\tconst position: Position = new Position(line, column + (previousIsCarriageReturn ? -1 : 0));\n\n\t\tif (direction === AssertDocumentLineMappingDirection.OffsetToPosition) {\n\t\t\tconst actualPosition = model.getPositionAt(offset);\n\t\t\tassert.strictEqual(actualPosition.toString(), position.toString(), msg + ' - getPositionAt mismatch for offset ' + offset);\n\t\t} else {\n\t\t\t// The position coordinate system cannot express the position between \\r and \\n\n\t\t\tconst expectedOffset: number = offset + (previousIsCarriageReturn ? -1 : 0);\n\t\t\tconst actualOffset = model.getOffsetAt(position);\n\t\t\tassert.strictEqual(actualOffset, expectedOffset, msg + ' - getOffsetAt mismatch for position ' + position.toString());\n\t\t}\n\n\t\tif (allText.charAt(offset) === '\\n') {\n\t\t\tline++;\n\t\t\tcolumn = 1;\n\t\t} else {\n\t\t\tcolumn++;\n\t\t}\n\n\t\tpreviousIsCarriageReturn = (allText.charAt(offset) === '\\r');\n\t}\n}\n\nfunction assertLineMapping(model: TextModel, msg: string): void {\n\tassertOneDirectionLineMapping(model, AssertDocumentLineMappingDirection.PositionToOffset, msg);\n\tassertOneDirectionLineMapping(model, AssertDocumentLineMappingDirection.OffsetToPosition, msg);\n}\n\n\nexport function assertSyncedModels(text: string, callback: (model: TextModel, assertMirrorModels: () => void) => void, setup: ((model: TextModel) => void) | null = null): void {\n\tconst model = createTextModel(text);\n\tmodel.setEOL(EndOfLineSequence.LF);\n\tassertLineMapping(model, 'model');\n\n\tif (setup) {\n\t\tsetup(model);\n\t\tassertLineMapping(model, 'model');\n\t}\n\n\tconst mirrorModel2 = new MirrorTextModel(null!, model.getLinesContent(), model.getEOL(), model.getVersionId());\n\tlet mirrorModel2PrevVersionId = model.getVersionId();\n\n\tconst disposable = model.onDidChangeContent((e: IModelContentChangedEvent) => {\n\t\tconst versionId = e.versionId;\n\t\tif (versionId < mirrorModel2PrevVersionId) {\n\t\t\tconsole.warn('Model version id did not advance between edits (2)');\n\t\t}\n\t\tmirrorModel2PrevVersionId = versionId;\n\t\tmirrorModel2.onEvents(e);\n\t});\n\n\tconst assertMirrorModels = () => {\n\t\tassertLineMapping(model, 'model');\n\t\tassert.strictEqual(mirrorModel2.getText(), model.getValue(), 'mirror model 2 text OK');\n\t\tassert.strictEqual(mirrorModel2.version, model.getVersionId(), 'mirror model 2 version OK');\n\t};\n\n\tcallback(model, assertMirrorModels);\n\n\tdisposable.dispose();\n\tmodel.dispose();\n\tmirrorModel2.dispose();\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAuBE;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAvBF;;;;AAKA,OAAOE,MAAM,MAAM,QAAQ;AAE3B,SAASC,QAAQ,QAAQ,kCAAkC;AAE3D,SAASC,eAAe,QAAQ,0CAA0C;AAG1E,SAASC,eAAe,QAAQ,qBAAqB;AAErD,OAAM,SAAUC,8BAA8BA,CAACC,QAAkB,EAAEC,KAA6B,EAAEC,QAAkB,EAAEC,oBAAA;AAAA;AAAA,CAAAV,cAAA,GAAAW,CAAA,UAAgC,KAAK;EAAA;EAAAX,cAAA,GAAAY,CAAA;EAC1J,MAAMC,WAAW;EAAA;EAAA,CAAAb,cAAA,GAAAc,CAAA,OAAGP,QAAQ,CAACQ,IAAI,CAAC,IAAI,CAAC;EACvC,MAAMC,WAAW;EAAA;EAAA,CAAAhB,cAAA,GAAAc,CAAA,OAAGL,QAAQ,CAACM,IAAI,CAAC,IAAI,CAAC;EAAC;EAAAf,cAAA,GAAAc,CAAA;EAExCG,kBAAkB,CAACJ,WAAW,EAAE,CAACK,KAAK,EAAEC,kBAAkB,KAAI;IAAA;IAAAnB,cAAA,GAAAY,CAAA;IAC7D;IACA,MAAMQ,YAAY;IAAA;IAAA,CAAApB,cAAA,GAAAc,CAAA,OAAGI,KAAK,CAACG,UAAU,CAACb,KAAK,EAAE,IAAI,CAAC;IAElD;IAAA;IAAAR,cAAA,GAAAc,CAAA;IACAZ,MAAM,CAACoB,eAAe,CAACJ,KAAK,CAACK,QAAQ,gCAAwB,EAAEP,WAAW,CAAC;IAAC;IAAAhB,cAAA,GAAAc,CAAA;IAE5EK,kBAAkB,EAAE;IAEpB;IACA,MAAMK,mBAAmB;IAAA;IAAA,CAAAxB,cAAA,GAAAc,CAAA,OAAGI,KAAK,CAACG,UAAU,CAACD,YAAY,EAAE,IAAI,CAAC;IAEhE;IAAA;IAAApB,cAAA,GAAAc,CAAA;IACAZ,MAAM,CAACoB,eAAe,CAACJ,KAAK,CAACK,QAAQ,gCAAwB,EAAEV,WAAW,CAAC;IAAC;IAAAb,cAAA,GAAAc,CAAA;IAE5E,IAAI,CAACJ,oBAAoB,EAAE;MAAA;MAAAV,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAc,CAAA;MAC1B,MAAMW,YAAY,GAAIC,IAA0B,IAAI;QAAA;QAAA1B,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAc,CAAA;QACnD,OAAO;UACNa,KAAK,EAAED,IAAI,CAACC,KAAK;UACjBC,IAAI,EAAEF,IAAI,CAACE,IAAI;UACfC,gBAAgB;UAAE;UAAA,CAAA7B,cAAA,GAAAW,CAAA,UAAAe,IAAI,CAACG,gBAAgB;UAAA;UAAA,CAAA7B,cAAA,GAAAW,CAAA,UAAI,KAAK;SAChD;MACF,CAAC;MACD;MAAA;MAAAX,cAAA,GAAAc,CAAA;MACAZ,MAAM,CAACoB,eAAe,CAACE,mBAAmB,CAACM,GAAG,CAACL,YAAY,CAAC,EAAEjB,KAAK,CAACsB,GAAG,CAACL,YAAY,CAAC,CAAC;IACvF,CAAC;IAAA;IAAA;MAAAzB,cAAA,GAAAW,CAAA;IAAA;IAAAX,cAAA,GAAAc,CAAA;IAEDK,kBAAkB,EAAE;EACrB,CAAC,CAAC;AACH;AAOA,SAASY,6BAA6BA,CAACb,KAAgB,EAAEc,SAA6C,EAAEC,GAAW;EAAA;EAAAjC,cAAA,GAAAY,CAAA;EAClH,MAAMsB,OAAO;EAAA;EAAA,CAAAlC,cAAA,GAAAc,CAAA,QAAGI,KAAK,CAACK,QAAQ,EAAE;EAEhC,IAAIY,IAAI;IAAA;IAAA,CAAAnC,cAAA,GAAAc,CAAA,QAAG,CAAC;IAAEsB,MAAM;IAAA;IAAA,CAAApC,cAAA,GAAAc,CAAA,QAAG,CAAC;IAAEuB,wBAAwB;IAAA;IAAA,CAAArC,cAAA,GAAAc,CAAA,QAAG,KAAK;EAAC;EAAAd,cAAA,GAAAc,CAAA;EAC3D,KAAK,IAAIwB,MAAM;EAAA;EAAA,CAAAtC,cAAA,GAAAc,CAAA,QAAG,CAAC,GAAEwB,MAAM,IAAIJ,OAAO,CAACK,MAAM,EAAED,MAAM,EAAE,EAAE;IACxD;IACA,MAAME,QAAQ;IAAA;IAAA,CAAAxC,cAAA,GAAAc,CAAA,QAAa,IAAIX,QAAQ,CAACgC,IAAI,EAAEC,MAAM,IAAIC,wBAAwB;IAAA;IAAA,CAAArC,cAAA,GAAAW,CAAA,UAAG,CAAC,CAAC;IAAA;IAAA,CAAAX,cAAA,GAAAW,CAAA,UAAG,CAAC,EAAC,CAAC;IAAC;IAAAX,cAAA,GAAAc,CAAA;IAE5F,IAAIkB,SAAS,kEAA0D;MAAA;MAAAhC,cAAA,GAAAW,CAAA;MACtE,MAAM8B,cAAc;MAAA;MAAA,CAAAzC,cAAA,GAAAc,CAAA,QAAGI,KAAK,CAACwB,aAAa,CAACJ,MAAM,CAAC;MAAC;MAAAtC,cAAA,GAAAc,CAAA;MACnDZ,MAAM,CAACyC,WAAW,CAACF,cAAc,CAACG,QAAQ,EAAE,EAAEJ,QAAQ,CAACI,QAAQ,EAAE,EAAEX,GAAG,GAAG,uCAAuC,GAAGK,MAAM,CAAC;IAC3H,CAAC,MAAM;MAAA;MAAAtC,cAAA,GAAAW,CAAA;MACN;MACA,MAAMkC,cAAc;MAAA;MAAA,CAAA7C,cAAA,GAAAc,CAAA,QAAWwB,MAAM,IAAID,wBAAwB;MAAA;MAAA,CAAArC,cAAA,GAAAW,CAAA,UAAG,CAAC,CAAC;MAAA;MAAA,CAAAX,cAAA,GAAAW,CAAA,UAAG,CAAC,EAAC;MAC3E,MAAMmC,YAAY;MAAA;MAAA,CAAA9C,cAAA,GAAAc,CAAA,QAAGI,KAAK,CAAC6B,WAAW,CAACP,QAAQ,CAAC;MAAC;MAAAxC,cAAA,GAAAc,CAAA;MACjDZ,MAAM,CAACyC,WAAW,CAACG,YAAY,EAAED,cAAc,EAAEZ,GAAG,GAAG,uCAAuC,GAAGO,QAAQ,CAACI,QAAQ,EAAE,CAAC;IACtH;IAAC;IAAA5C,cAAA,GAAAc,CAAA;IAED,IAAIoB,OAAO,CAACc,MAAM,CAACV,MAAM,CAAC,KAAK,IAAI,EAAE;MAAA;MAAAtC,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAc,CAAA;MACpCqB,IAAI,EAAE;MAAC;MAAAnC,cAAA,GAAAc,CAAA;MACPsB,MAAM,GAAG,CAAC;IACX,CAAC,MAAM;MAAA;MAAApC,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAc,CAAA;MACNsB,MAAM,EAAE;IACT;IAAC;IAAApC,cAAA,GAAAc,CAAA;IAEDuB,wBAAwB,GAAIH,OAAO,CAACc,MAAM,CAACV,MAAM,CAAC,KAAK,IAAK;EAC7D;AACD;AAEA,SAASW,iBAAiBA,CAAC/B,KAAgB,EAAEe,GAAW;EAAA;EAAAjC,cAAA,GAAAY,CAAA;EAAAZ,cAAA,GAAAc,CAAA;EACvDiB,6BAA6B,CAACb,KAAK,+DAAuDe,GAAG,CAAC;EAAC;EAAAjC,cAAA,GAAAc,CAAA;EAC/FiB,6BAA6B,CAACb,KAAK,+DAAuDe,GAAG,CAAC;AAC/F;AAGA,OAAM,SAAUhB,kBAAkBA,CAACW,IAAY,EAAEsB,QAAoE,EAAEC,KAAA;AAAA;AAAA,CAAAnD,cAAA,GAAAW,CAAA,UAA6C,IAAI;EAAA;EAAAX,cAAA,GAAAY,CAAA;EACvK,MAAMM,KAAK;EAAA;EAAA,CAAAlB,cAAA,GAAAc,CAAA,QAAGT,eAAe,CAACuB,IAAI,CAAC;EAAC;EAAA5B,cAAA,GAAAc,CAAA;EACpCI,KAAK,CAACkC,MAAM,8BAAsB;EAAC;EAAApD,cAAA,GAAAc,CAAA;EACnCmC,iBAAiB,CAAC/B,KAAK,EAAE,OAAO,CAAC;EAAC;EAAAlB,cAAA,GAAAc,CAAA;EAElC,IAAIqC,KAAK,EAAE;IAAA;IAAAnD,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAc,CAAA;IACVqC,KAAK,CAACjC,KAAK,CAAC;IAAC;IAAAlB,cAAA,GAAAc,CAAA;IACbmC,iBAAiB,CAAC/B,KAAK,EAAE,OAAO,CAAC;EAClC,CAAC;EAAA;EAAA;IAAAlB,cAAA,GAAAW,CAAA;EAAA;EAED,MAAM0C,YAAY;EAAA;EAAA,CAAArD,cAAA,GAAAc,CAAA,QAAG,IAAIV,eAAe,CAAC,IAAK,EAAEc,KAAK,CAACoC,eAAe,EAAE,EAAEpC,KAAK,CAACqC,MAAM,EAAE,EAAErC,KAAK,CAACsC,YAAY,EAAE,CAAC;EAC9G,IAAIC,yBAAyB;EAAA;EAAA,CAAAzD,cAAA,GAAAc,CAAA,QAAGI,KAAK,CAACsC,YAAY,EAAE;EAEpD,MAAME,UAAU;EAAA;EAAA,CAAA1D,cAAA,GAAAc,CAAA,QAAGI,KAAK,CAACyC,kBAAkB,CAAEC,CAA4B,IAAI;IAAA;IAAA5D,cAAA,GAAAY,CAAA;IAC5E,MAAMiD,SAAS;IAAA;IAAA,CAAA7D,cAAA,GAAAc,CAAA,QAAG8C,CAAC,CAACC,SAAS;IAAC;IAAA7D,cAAA,GAAAc,CAAA;IAC9B,IAAI+C,SAAS,GAAGJ,yBAAyB,EAAE;MAAA;MAAAzD,cAAA,GAAAW,CAAA;MAAAX,cAAA,GAAAc,CAAA;MAC1CgD,OAAO,CAACC,IAAI,CAAC,oDAAoD,CAAC;IACnE,CAAC;IAAA;IAAA;MAAA/D,cAAA,GAAAW,CAAA;IAAA;IAAAX,cAAA,GAAAc,CAAA;IACD2C,yBAAyB,GAAGI,SAAS;IAAC;IAAA7D,cAAA,GAAAc,CAAA;IACtCuC,YAAY,CAACW,QAAQ,CAACJ,CAAC,CAAC;EACzB,CAAC,CAAC;EAAC;EAAA5D,cAAA,GAAAc,CAAA;EAEH,MAAMK,kBAAkB,GAAGA,CAAA,KAAK;IAAA;IAAAnB,cAAA,GAAAY,CAAA;IAAAZ,cAAA,GAAAc,CAAA;IAC/BmC,iBAAiB,CAAC/B,KAAK,EAAE,OAAO,CAAC;IAAC;IAAAlB,cAAA,GAAAc,CAAA;IAClCZ,MAAM,CAACyC,WAAW,CAACU,YAAY,CAACY,OAAO,EAAE,EAAE/C,KAAK,CAACK,QAAQ,EAAE,EAAE,wBAAwB,CAAC;IAAC;IAAAvB,cAAA,GAAAc,CAAA;IACvFZ,MAAM,CAACyC,WAAW,CAACU,YAAY,CAACa,OAAO,EAAEhD,KAAK,CAACsC,YAAY,EAAE,EAAE,2BAA2B,CAAC;EAC5F,CAAC;EAAC;EAAAxD,cAAA,GAAAc,CAAA;EAEFoC,QAAQ,CAAChC,KAAK,EAAEC,kBAAkB,CAAC;EAAC;EAAAnB,cAAA,GAAAc,CAAA;EAEpC4C,UAAU,CAACS,OAAO,EAAE;EAAC;EAAAnE,cAAA,GAAAc,CAAA;EACrBI,KAAK,CAACiD,OAAO,EAAE;EAAC;EAAAnE,cAAA,GAAAc,CAAA;EAChBuC,YAAY,CAACc,OAAO,EAAE;AACvB","ignoreList":[]}