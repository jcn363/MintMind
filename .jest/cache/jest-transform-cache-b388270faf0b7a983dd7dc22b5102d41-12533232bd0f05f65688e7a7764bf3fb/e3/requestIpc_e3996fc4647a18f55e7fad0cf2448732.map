{"version":3,"names":["cov_1mnvt4vz9h","actualCoverage","bufferToStream","streamToBuffer","CancellationToken","RequestChannel","service","constructor","f","s","listen","context","event","Error","call","command","args","token","b","None","request","then","res","stream","buffer","statusCode","headers","resolveProxy","lookupAuthorization","lookupKerberosAuthorization","loadCertificates","RequestChannelClient","channel","options","url","authInfo"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/request/common/requestIpc.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { bufferToStream, streamToBuffer, VSBuffer } from '../../../base/common/buffer.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { Event } from '../../../base/common/event.js';\nimport { IChannel, IServerChannel } from '../../../base/parts/ipc/common/ipc.js';\nimport { IHeaders, IRequestContext, IRequestOptions } from '../../../base/parts/request/common/request.js';\nimport { AuthInfo, Credentials, IRequestService } from './request.js';\n\ntype RequestResponse = [\n\t{\n\t\theaders: IHeaders;\n\t\tstatusCode?: number;\n\t},\n\tVSBuffer\n];\n\nexport class RequestChannel implements IServerChannel {\n\n\tconstructor(private readonly service: IRequestService) { }\n\n\tlisten(context: any, event: string): Event<any> {\n\t\tthrow new Error('Invalid listen');\n\t}\n\n\tcall(context: any, command: string, args?: any, token: CancellationToken = CancellationToken.None): Promise<any> {\n\t\tswitch (command) {\n\t\t\tcase 'request': return this.service.request(args[0], token)\n\t\t\t\t.then(async ({ res, stream }) => {\n\t\t\t\t\tconst buffer = await streamToBuffer(stream);\n\t\t\t\t\treturn <RequestResponse>[{ statusCode: res.statusCode, headers: res.headers }, buffer];\n\t\t\t\t});\n\t\t\tcase 'resolveProxy': return this.service.resolveProxy(args[0]);\n\t\t\tcase 'lookupAuthorization': return this.service.lookupAuthorization(args[0]);\n\t\t\tcase 'lookupKerberosAuthorization': return this.service.lookupKerberosAuthorization(args[0]);\n\t\t\tcase 'loadCertificates': return this.service.loadCertificates();\n\t\t}\n\t\tthrow new Error('Invalid call');\n\t}\n}\n\nexport class RequestChannelClient implements IRequestService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(private readonly channel: IChannel) { }\n\n\tasync request(options: IRequestOptions, token: CancellationToken): Promise<IRequestContext> {\n\t\tconst [res, buffer] = await this.channel.call<RequestResponse>('request', [options], token);\n\t\treturn { res, stream: bufferToStream(buffer) };\n\t}\n\n\tasync resolveProxy(url: string): Promise<string | undefined> {\n\t\treturn this.channel.call<string | undefined>('resolveProxy', [url]);\n\t}\n\n\tasync lookupAuthorization(authInfo: AuthInfo): Promise<Credentials | undefined> {\n\t\treturn this.channel.call<{ username: string; password: string } | undefined>('lookupAuthorization', [authInfo]);\n\t}\n\n\tasync lookupKerberosAuthorization(url: string): Promise<string | undefined> {\n\t\treturn this.channel.call<string | undefined>('lookupKerberosAuthorization', [url]);\n\t}\n\n\tasync loadCertificates(): Promise<string[]> {\n\t\treturn this.channel.call<string[]>('loadCertificates');\n\t}\n}\n"],"mappings":"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","ignoreList":[]}