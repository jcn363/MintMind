{"version":3,"names":["cov_1h9iv5pwl5","actualCoverage","$","getActiveDocument","Disposable","toDisposable","DecorationCssRuleExtractor","_container","_dummyElement","_ruleCache","s","Map","constructor","f","appendChild","_register","remove","getStyleRules","canvas","decorationClassName","existing","get","b","className","rules","_getStyleRules","set","removeChild","doc","stylesheets","styleSheets","i","length","stylesheet","rule","cssRules","CSSImportRule","styleSheet","push","CSSStyleRule","searchTerm","index","selectorText","indexOf","endOfResult","substring","match"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/browser/gpu/css/decorationCssRuleExtractor.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, getActiveDocument } from '../../../../base/browser/dom.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport './media/decorationCssRuleExtractor.css';\n\n/**\n * Extracts CSS rules that would be applied to certain decoration classes.\n */\nexport class DecorationCssRuleExtractor extends Disposable {\n\tprivate _container: HTMLElement;\n\tprivate _dummyElement: HTMLSpanElement;\n\n\tprivate _ruleCache: Map</* className */string, CSSStyleRule[]> = new Map();\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._container = $('div.monaco-decoration-css-rule-extractor');\n\t\tthis._dummyElement = $('span');\n\t\tthis._container.appendChild(this._dummyElement);\n\n\t\tthis._register(toDisposable(() => this._container.remove()));\n\t}\n\n\tgetStyleRules(canvas: HTMLElement, decorationClassName: string): CSSStyleRule[] {\n\t\t// Check cache\n\t\tconst existing = this._ruleCache.get(decorationClassName);\n\t\tif (existing) {\n\t\t\treturn existing;\n\t\t}\n\n\t\t// Set up DOM\n\t\tthis._dummyElement.className = decorationClassName;\n\t\tcanvas.appendChild(this._container);\n\n\t\t// Get rules\n\t\tconst rules = this._getStyleRules(decorationClassName);\n\t\tthis._ruleCache.set(decorationClassName, rules);\n\n\t\t// Tear down DOM\n\t\tcanvas.removeChild(this._container);\n\n\t\treturn rules;\n\t}\n\n\tprivate _getStyleRules(className: string) {\n\t\t// Iterate through all stylesheets and imported stylesheets to find matching rules\n\t\tconst rules = [];\n\t\tconst doc = getActiveDocument();\n\t\tconst stylesheets = [...doc.styleSheets];\n\t\tfor (let i = 0; i < stylesheets.length; i++) {\n\t\t\tconst stylesheet = stylesheets[i];\n\t\t\tfor (const rule of stylesheet.cssRules) {\n\t\t\t\tif (rule instanceof CSSImportRule) {\n\t\t\t\t\tif (rule.styleSheet) {\n\t\t\t\t\t\tstylesheets.push(rule.styleSheet);\n\t\t\t\t\t}\n\t\t\t\t} else if (rule instanceof CSSStyleRule) {\n\t\t\t\t\t// Note that originally `.matches(rule.selectorText)` was used but this would\n\t\t\t\t\t// not pick up pseudo-classes which are important to determine support of the\n\t\t\t\t\t// returned styles.\n\t\t\t\t\t//\n\t\t\t\t\t// Since a selector could contain a class name lookup that is simple a prefix of\n\t\t\t\t\t// the class name we are looking for, we need to also check the character after\n\t\t\t\t\t// it.\n\t\t\t\t\tconst searchTerm = `.${className}`;\n\t\t\t\t\tconst index = rule.selectorText.indexOf(searchTerm);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tconst endOfResult = index + searchTerm.length;\n\t\t\t\t\t\tif (rule.selectorText.length === endOfResult || rule.selectorText.substring(endOfResult, endOfResult + 1).match(/[ :]/)) {\n\t\t\t\t\t\t\trules.push(rule);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rules;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}