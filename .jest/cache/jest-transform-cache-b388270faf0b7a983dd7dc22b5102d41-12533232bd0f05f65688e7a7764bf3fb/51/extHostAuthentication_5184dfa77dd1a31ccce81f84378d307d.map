{"version":3,"names":["cov_lujh7wkhm","actualCoverage","nls","URL","ExtHostAuthentication","DynamicAuthProvider","isAuthorizationDeviceResponse","isAuthorizationTokenResponse","raceCancellationError","CancellationError","isCancellationError","URI","LoopbackAuthServer","NodeDynamicAuthProvider","constructor","extHostWindow","extHostUrls","initData","extHostProgress","loggerService","proxy","authorizationServer","serverMetadata","resourceMetadata","clientId","clientSecret","onDidDynamicAuthProviderTokensChange","initialTokens","f","s","b","remote","isRemote","authorization_endpoint","_createFlows","unshift","label","localize","handler","scopes","progress","token","_createWithLoopbackServer","device_authorization_endpoint","push","_createWithDeviceCode","_serverMetadata","Error","token_endpoint","codeVerifier","generateRandomString","codeChallenge","generateCodeChallenge","nonce","callbackUri","parse","_initData","environment","appUriScheme","authority","appUri","_extHostUrls","createAppUri","error","authorizationUrl","searchParams","append","_clientId","scopeString","join","_resourceMetadata","resource","server","_logger","appName","start","err","set","redirectUri","state","promise","waitForOAuthResponse","_proxy","$waitForUriHandler","info","trace","toString","opened","_extHostWindow","openUri","report","message","code","response","tokenResponse","exchangeCodeForToken","setTimeout","stop","deviceAuthUrl","deviceCodeRequest","URLSearchParams","deviceCodeResponse","fetch","method","headers","body","ok","text","status","statusText","deviceCodeData","json","user_code","userConfirmed","$showDeviceCodeModal","verification_uri","pollInterval","interval","expiresAt","Date","now","expires_in","isCancellationRequested","Promise","resolve","tokenRequest","device_code","tokenData","errorData","e","warn","_generateNewClientId","error_description","NodeExtHostAuthentication","_dynamicAuthProviderCtor","extHostRpc","extHostLoggerService","extHostLogService"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/node/extHostAuthentication.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../nls.js';\nimport type * as vscode from 'vscode';\nimport { URL } from 'url';\nimport { ExtHostAuthentication, DynamicAuthProvider, IExtHostAuthentication } from '../common/extHostAuthentication.js';\nimport { IExtHostRpcService } from '../common/extHostRpcService.js';\nimport { IExtHostInitDataService } from '../common/extHostInitDataService.js';\nimport { IExtHostWindow } from '../common/extHostWindow.js';\nimport { IExtHostUrlsService } from '../common/extHostUrls.js';\nimport { ILoggerService, ILogService } from '../../../platform/log/common/log.js';\nimport { MainThreadAuthenticationShape } from '../common/extHost.protocol.js';\nimport { IAuthorizationServerMetadata, IAuthorizationProtectedResourceMetadata, IAuthorizationTokenResponse, IAuthorizationDeviceResponse, isAuthorizationDeviceResponse, isAuthorizationTokenResponse, IAuthorizationDeviceTokenErrorResponse, AuthorizationErrorType, AuthorizationDeviceCodeErrorType } from '../../../base/common/oauth.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { raceCancellationError } from '../../../base/common/async.js';\nimport { IExtHostProgress } from '../common/extHostProgress.js';\nimport { IProgressStep } from '../../../platform/progress/common/progress.js';\nimport { CancellationError, isCancellationError } from '../../../base/common/errors.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { LoopbackAuthServer } from './loopbackServer.js';\n\nexport class NodeDynamicAuthProvider extends DynamicAuthProvider {\n\n\tconstructor(\n\t\textHostWindow: IExtHostWindow,\n\t\textHostUrls: IExtHostUrlsService,\n\t\tinitData: IExtHostInitDataService,\n\t\textHostProgress: IExtHostProgress,\n\t\tloggerService: ILoggerService,\n\t\tproxy: MainThreadAuthenticationShape,\n\t\tauthorizationServer: URI,\n\t\tserverMetadata: IAuthorizationServerMetadata,\n\t\tresourceMetadata: IAuthorizationProtectedResourceMetadata | undefined,\n\t\tclientId: string,\n\t\tclientSecret: string | undefined,\n\t\tonDidDynamicAuthProviderTokensChange: Emitter<{ authProviderId: string; clientId: string; tokens: any[] }>,\n\t\tinitialTokens: any[]\n\t) {\n\t\tsuper(\n\t\t\textHostWindow,\n\t\t\textHostUrls,\n\t\t\tinitData,\n\t\t\textHostProgress,\n\t\t\tloggerService,\n\t\t\tproxy,\n\t\t\tauthorizationServer,\n\t\t\tserverMetadata,\n\t\t\tresourceMetadata,\n\t\t\tclientId,\n\t\t\tclientSecret,\n\t\t\tonDidDynamicAuthProviderTokensChange,\n\t\t\tinitialTokens\n\t\t);\n\n\t\t// Prepend Node-specific flows to the existing flows\n\t\tif (!initData.remote.isRemote && serverMetadata.authorization_endpoint) {\n\t\t\t// If we are not in a remote environment, we can use the loopback server for authentication\n\t\t\tthis._createFlows.unshift({\n\t\t\t\tlabel: nls.localize('loopback', \"Loopback Server\"),\n\t\t\t\thandler: (scopes, progress, token) => this._createWithLoopbackServer(scopes, progress, token)\n\t\t\t});\n\t\t}\n\n\t\t// Add device code flow to the end since it's not as streamlined\n\t\tif (serverMetadata.device_authorization_endpoint) {\n\t\t\tthis._createFlows.push({\n\t\t\t\tlabel: nls.localize('device code', \"Device Code\"),\n\t\t\t\thandler: (scopes, progress, token) => this._createWithDeviceCode(scopes, progress, token)\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async _createWithLoopbackServer(scopes: string[], progress: vscode.Progress<IProgressStep>, token: vscode.CancellationToken): Promise<IAuthorizationTokenResponse> {\n\t\tif (!this._serverMetadata.authorization_endpoint) {\n\t\t\tthrow new Error('Authorization Endpoint required');\n\t\t}\n\t\tif (!this._serverMetadata.token_endpoint) {\n\t\t\tthrow new Error('Token endpoint not available in server metadata');\n\t\t}\n\n\t\t// Generate PKCE code verifier (random string) and code challenge (SHA-256 hash of verifier)\n\t\tconst codeVerifier = this.generateRandomString(64);\n\t\tconst codeChallenge = await this.generateCodeChallenge(codeVerifier);\n\n\t\t// Generate a random state value to prevent CSRF\n\t\tconst nonce = this.generateRandomString(32);\n\t\tconst callbackUri = URI.parse(`${this._initData.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/redirect?nonce=${nonce}`);\n\t\tlet appUri: URI;\n\t\ttry {\n\t\t\tappUri = await this._extHostUrls.createAppUri(callbackUri);\n\t\t} catch (error) {\n\t\t\tthrow new Error(`Failed to create external URI: ${error}`);\n\t\t}\n\n\t\t// Prepare the authorization request URL\n\t\tconst authorizationUrl = new URL(this._serverMetadata.authorization_endpoint);\n\t\tauthorizationUrl.searchParams.append('client_id', this._clientId);\n\t\tauthorizationUrl.searchParams.append('response_type', 'code');\n\t\tauthorizationUrl.searchParams.append('code_challenge', codeChallenge);\n\t\tauthorizationUrl.searchParams.append('code_challenge_method', 'S256');\n\t\tconst scopeString = scopes.join(' ');\n\t\tif (scopeString) {\n\t\t\tauthorizationUrl.searchParams.append('scope', scopeString);\n\t\t}\n\t\tif (this._resourceMetadata?.resource) {\n\t\t\t// If a resource is specified, include it in the request\n\t\t\tauthorizationUrl.searchParams.append('resource', this._resourceMetadata.resource);\n\t\t}\n\n\t\t// Create and start the loopback server\n\t\tconst server = new LoopbackAuthServer(\n\t\t\tthis._logger,\n\t\t\tappUri,\n\t\t\tthis._initData.environment.appName\n\t\t);\n\t\ttry {\n\t\t\tawait server.start();\n\t\t} catch (err) {\n\t\t\tthrow new Error(`Failed to start loopback server: ${err}`);\n\t\t}\n\n\t\t// Update the authorization URL with the actual redirect URI\n\t\tauthorizationUrl.searchParams.set('redirect_uri', server.redirectUri);\n\t\tauthorizationUrl.searchParams.set('state', server.state);\n\n\t\tconst promise = server.waitForOAuthResponse();\n\t\t// Set up a Uri Handler but it's just to redirect not to handle the code\n\t\tvoid this._proxy.$waitForUriHandler(appUri);\n\n\t\ttry {\n\t\t\t// Open the browser for user authorization\n\t\t\tthis._logger.info(`Opening authorization URL for scopes: ${scopeString}`);\n\t\t\tthis._logger.trace(`Authorization URL: ${authorizationUrl.toString()}`);\n\t\t\tconst opened = await this._extHostWindow.openUri(authorizationUrl.toString(), {});\n\t\t\tif (!opened) {\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\t\t\tprogress.report({\n\t\t\t\tmessage: nls.localize('completeAuth', \"Complete the authentication in the browser window that has opened.\"),\n\t\t\t});\n\n\t\t\t// Wait for the authorization code via the loopback server\n\t\t\tlet code: string | undefined;\n\t\t\ttry {\n\t\t\t\tconst response = await raceCancellationError(promise, token);\n\t\t\t\tcode = response.code;\n\t\t\t} catch (err) {\n\t\t\t\tif (isCancellationError(err)) {\n\t\t\t\t\tthis._logger.info('Authorization code request was cancelled by the user.');\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t\tthis._logger.error(`Failed to receive authorization code: ${err}`);\n\t\t\t\tthrow new Error(`Failed to receive authorization code: ${err}`);\n\t\t\t}\n\t\t\tthis._logger.info(`Authorization code received for scopes: ${scopeString}`);\n\n\t\t\t// Exchange the authorization code for tokens\n\t\t\tconst tokenResponse = await this.exchangeCodeForToken(code, codeVerifier, server.redirectUri);\n\t\t\treturn tokenResponse;\n\t\t} finally {\n\t\t\t// Clean up the server\n\t\t\tsetTimeout(() => {\n\t\t\t\tvoid server.stop();\n\t\t\t}, 5000);\n\t\t}\n\t}\n\n\tprivate async _createWithDeviceCode(scopes: string[], progress: vscode.Progress<IProgressStep>, token: vscode.CancellationToken): Promise<IAuthorizationTokenResponse> {\n\t\tif (!this._serverMetadata.token_endpoint) {\n\t\t\tthrow new Error('Token endpoint not available in server metadata');\n\t\t}\n\t\tif (!this._serverMetadata.device_authorization_endpoint) {\n\t\t\tthrow new Error('Device authorization endpoint not available in server metadata');\n\t\t}\n\n\t\tconst deviceAuthUrl = this._serverMetadata.device_authorization_endpoint;\n\t\tconst scopeString = scopes.join(' ');\n\t\tthis._logger.info(`Starting device code flow for scopes: ${scopeString}`);\n\n\t\t// Step 1: Request device and user codes\n\t\tconst deviceCodeRequest = new URLSearchParams();\n\t\tdeviceCodeRequest.append('client_id', this._clientId);\n\t\tif (scopeString) {\n\t\t\tdeviceCodeRequest.append('scope', scopeString);\n\t\t}\n\t\tif (this._resourceMetadata?.resource) {\n\t\t\t// If a resource is specified, include it in the request\n\t\t\tdeviceCodeRequest.append('resource', this._resourceMetadata.resource);\n\t\t}\n\n\t\tlet deviceCodeResponse: Response;\n\t\ttry {\n\t\t\tdeviceCodeResponse = await fetch(deviceAuthUrl, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: deviceCodeRequest.toString()\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tthis._logger.error(`Failed to request device code: ${error}`);\n\t\t\tthrow new Error(`Failed to request device code: ${error}`);\n\t\t}\n\n\t\tif (!deviceCodeResponse.ok) {\n\t\t\tconst text = await deviceCodeResponse.text();\n\t\t\tthrow new Error(`Device code request failed: ${deviceCodeResponse.status} ${deviceCodeResponse.statusText} - ${text}`);\n\t\t}\n\n\t\tconst deviceCodeData: IAuthorizationDeviceResponse = await deviceCodeResponse.json();\n\t\tif (!isAuthorizationDeviceResponse(deviceCodeData)) {\n\t\t\tthis._logger.error('Invalid device code response received from server');\n\t\t\tthrow new Error('Invalid device code response received from server');\n\t\t}\n\t\tthis._logger.info(`Device code received: ${deviceCodeData.user_code}`);\n\n\t\t// Step 2: Show the device code modal\n\t\tconst userConfirmed = await this._proxy.$showDeviceCodeModal(\n\t\t\tdeviceCodeData.user_code,\n\t\t\tdeviceCodeData.verification_uri\n\t\t);\n\n\t\tif (!userConfirmed) {\n\t\t\tthrow new CancellationError();\n\t\t}\n\n\t\t// Step 3: Poll for token\n\t\tprogress.report({\n\t\t\tmessage: nls.localize('waitingForAuth', \"Open [{0}]({0}) in a new tab and paste your one-time code: {1}\", deviceCodeData.verification_uri, deviceCodeData.user_code)\n\t\t});\n\n\t\tconst pollInterval = (deviceCodeData.interval || 5) * 1000; // Convert to milliseconds\n\t\tconst expiresAt = Date.now() + (deviceCodeData.expires_in * 1000);\n\n\t\twhile (Date.now() < expiresAt) {\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\n\t\t\t// Wait for the specified interval\n\t\t\tawait new Promise(resolve => setTimeout(resolve, pollInterval));\n\n\t\t\tif (token.isCancellationRequested) {\n\t\t\t\tthrow new CancellationError();\n\t\t\t}\n\n\t\t\t// Poll the token endpoint\n\t\t\tconst tokenRequest = new URLSearchParams();\n\t\t\ttokenRequest.append('grant_type', 'urn:ietf:params:oauth:grant-type:device_code');\n\t\t\ttokenRequest.append('device_code', deviceCodeData.device_code);\n\t\t\ttokenRequest.append('client_id', this._clientId);\n\n\t\t\t// Add resource indicator if available (RFC 8707)\n\t\t\tif (this._resourceMetadata?.resource) {\n\t\t\t\ttokenRequest.append('resource', this._resourceMetadata.resource);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst tokenResponse = await fetch(this._serverMetadata.token_endpoint, {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t\t'Accept': 'application/json'\n\t\t\t\t\t},\n\t\t\t\t\tbody: tokenRequest.toString()\n\t\t\t\t});\n\n\t\t\t\tif (tokenResponse.ok) {\n\t\t\t\t\tconst tokenData: IAuthorizationTokenResponse = await tokenResponse.json();\n\t\t\t\t\tif (!isAuthorizationTokenResponse(tokenData)) {\n\t\t\t\t\t\tthis._logger.error('Invalid token response received from server');\n\t\t\t\t\t\tthrow new Error('Invalid token response received from server');\n\t\t\t\t\t}\n\t\t\t\t\tthis._logger.info(`Device code flow completed successfully for scopes: ${scopeString}`);\n\t\t\t\t\treturn tokenData;\n\t\t\t\t} else {\n\t\t\t\t\tlet errorData: IAuthorizationDeviceTokenErrorResponse;\n\t\t\t\t\ttry {\n\t\t\t\t\t\terrorData = await tokenResponse.json();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthis._logger.error(`Failed to parse error response: ${e}`);\n\t\t\t\t\t\tthrow new Error(`Token request failed with status ${tokenResponse.status}: ${tokenResponse.statusText}`);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Handle known error cases\n\t\t\t\t\tif (errorData.error === AuthorizationDeviceCodeErrorType.AuthorizationPending) {\n\t\t\t\t\t\t// User hasn't completed authorization yet, continue polling\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (errorData.error === AuthorizationDeviceCodeErrorType.SlowDown) {\n\t\t\t\t\t\t// Server is asking us to slow down\n\t\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, pollInterval));\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (errorData.error === AuthorizationDeviceCodeErrorType.ExpiredToken) {\n\t\t\t\t\t\tthrow new Error('Device code expired. Please try again.');\n\t\t\t\t\t} else if (errorData.error === AuthorizationDeviceCodeErrorType.AccessDenied) {\n\t\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t\t} else if (errorData.error === AuthorizationErrorType.InvalidClient) {\n\t\t\t\t\t\tthis._logger.warn(`Client ID (${this._clientId}) was invalid, generated a new one.`);\n\t\t\t\t\t\tawait this._generateNewClientId();\n\t\t\t\t\t\tthrow new Error(`Client ID was invalid, generated a new one. Please try again.`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(`Token request failed: ${errorData.error_description || errorData.error || 'Unknown error'}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (isCancellationError(error)) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\tthrow new Error(`Error polling for token: ${error}`);\n\t\t\t}\n\t\t}\n\n\t\tthrow new Error('Device code flow timed out. Please try again.');\n\t}\n}\n\nexport class NodeExtHostAuthentication extends ExtHostAuthentication implements IExtHostAuthentication {\n\n\tprotected override readonly _dynamicAuthProviderCtor = NodeDynamicAuthProvider;\n\n\tconstructor(\n\t\textHostRpc: IExtHostRpcService,\n\t\tinitData: IExtHostInitDataService,\n\t\textHostWindow: IExtHostWindow,\n\t\textHostUrls: IExtHostUrlsService,\n\t\textHostProgress: IExtHostProgress,\n\t\textHostLoggerService: ILoggerService,\n\t\textHostLogService: ILogService\n\t) {\n\t\tsuper(extHostRpc, initData, extHostWindow, extHostUrls, extHostProgress, extHostLoggerService, extHostLogService);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}