{"version":3,"names":["cov_23urx89r8c","actualCoverage","DeferredPromise","isThenable","CancellationTokenSource","Codicon","DisposableStore","toDisposable","Schemas","autorun","observableValue","ThemeIcon","isObject","URI","Range","EditorContextKeys","ITextModelService","AbstractGotoSymbolQuickAccessProvider","localize","localize2","Action2","MenuId","registerAction2","ICommandService","ContextKeyExpr","IContextKeyService","IFileService","IInstantiationService","IKeybindingService","IListService","ILogService","IQuickInputService","resolveCommandsContext","ResourceContextKey","EditorResourceAccessor","isEditorCommandsContext","SideBySideEditor","IEditorGroupsService","IEditorService","IWorkbenchLayoutService","IViewsService","ExplorerFolderContext","CTX_INLINE_CHAT_V2_ENABLED","AnythingQuickAccessProvider","isSearchTreeFileMatch","isSearchTreeMatch","SymbolsQuickAccessProvider","SearchContext","ChatContextKeys","isSupportedChatFileScheme","ChatAgentLocation","IChatWidgetService","IQuickChatService","showChatView","IChatContextPickService","isChatContextPickerPickItem","isQuickChat","resizeImage","registerPromptActions","CHAT_CATEGORY","registerChatContextActions","f","s","AttachContextAction","AttachFileToChatAction","AttachFolderToChatAction","AttachSelectionToChatAction","AttachSearchResultAction","withChatView","accessor","viewsService","get","chatWidgetService","layoutService","lastFocusedWidget","b","location","Chat","AttachResourceAction","run","args","instaService","widget","invokeFunction","runWithWidget","bind","_getResources","editorService","contexts","_getEditorResources","Array","isArray","files","context","uri","isUri","resource","parent","activeTextEditorControl","getCanonicalUri","activeEditor","supportSideBySide","PRIMARY","file","vscodeRemote","untitled","includes","scheme","push","resolvedContext","groupedEditors","flatMap","groupedEditor","editors","map","editor","filter","undefined","ID","constructor","id","title","category","precondition","enabled","f1","menu","group","order","when","and","FileMatchOrMatchFocusKey","SearchResultHeaderFocused","negate","ExplorerContext","or","Scheme","isEqualTo","EditorTitleContext","EditorContext","vscodeUserData","length","focusInput","attachmentModel","addFile","folders","folder","addFolder","hasNonEmptySelection","_","matches","uris","Map","match","set","_parent","range","_range","startLineNumber","endLineNumber","activeUri","selection","getSelection","isEmpty","Name","logService","trace","inputEditor","originalRange","getModel","getFullModelRange","collapseToEnd","insertText","varRange","startColumn","model","getValueInRange","success","executeEdits","text","isIContextPickItemItem","obj","kind","isIGotoSymbolQuickPickItem","symbolName","isIQuickPickItemWithResource","icon","attach","keybinding","inChatInput","primary","weight","EditorInline","lockedToCodingAgent","agentSupportsAttachments","ChatInputAttachmentToolbar","instantiationService","widgetService","contextKeyService","keybindingService","contextPickService","quickPickItems","item","items","isEnabled","label","iconClass","asClassName","commandId","lookupKeybinding","_show","placeholder","additionPicks","quickInputService","quickChatService","commandService","providerOptions","pick","handleAccept","isBackgroundAccept","isDone","type","_handleContextPick","_handleContextPickerItem","_handleQPPick","open","quickAccess","show","enabledProviderPrefixes","PREFIX","isInBackground","fileService","textModelService","toAttach","test","path","readFile","resizedImage","value","buffer","toString","name","fullName","references","reference","omittedState","createdModel","createModelReference","dispose","JSON","stringify","decoration","addContext","asAttachment","pickerConfig","asPicker","store","goBackItem","alwaysShow","configureItem","configure","extraPicks","qp","add","createQuickPick","useSeparators","cts","onDidHide","cancel","matchOnDescription","matchOnDetail","canAcceptInBackground","busy","picks","then","concat","query","onDidChangeValue","picksObservable","token","reader","read","isCancellationRequested","defer","addPromises","onDidAccept","e","noop","selected","selectedItems","attachment","v","goBack","complete","executeCommand","inBackground","result","p","Promise","all"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/actions/chatContextActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DeferredPromise, isThenable } from '../../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { autorun, observableValue } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { isObject } from '../../../../../base/common/types.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { AbstractGotoSymbolQuickAccessProvider, IGotoSymbolQuickPickItem } from '../../../../../editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService } from '../../../../../platform/list/browser/listService.js';\nimport { ILogService } from '../../../../../platform/log/common/log.js';\nimport { AnythingQuickAccessProviderRunOptions } from '../../../../../platform/quickinput/common/quickAccess.js';\nimport { IQuickInputService, IQuickPickItem, IQuickPickItemWithResource, QuickPickItem } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { resolveCommandsContext } from '../../../../browser/parts/editor/editorCommandsContext.js';\nimport { ResourceContextKey } from '../../../../common/contextkeys.js';\nimport { EditorResourceAccessor, isEditorCommandsContext, SideBySideEditor } from '../../../../common/editor.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IWorkbenchLayoutService } from '../../../../services/layout/browser/layoutService.js';\nimport { IViewsService } from '../../../../services/views/common/viewsService.js';\nimport { ExplorerFolderContext } from '../../../files/common/files.js';\nimport { CTX_INLINE_CHAT_V2_ENABLED } from '../../../inlineChat/common/inlineChat.js';\nimport { AnythingQuickAccessProvider } from '../../../search/browser/anythingQuickAccess.js';\nimport { isSearchTreeFileMatch, isSearchTreeMatch } from '../../../search/browser/searchTreeModel/searchTreeCommon.js';\nimport { ISymbolQuickPickItem, SymbolsQuickAccessProvider } from '../../../search/browser/symbolsQuickAccess.js';\nimport { SearchContext } from '../../../search/common/constants.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { IChatRequestVariableEntry, OmittedState } from '../../common/chatVariableEntries.js';\nimport { isSupportedChatFileScheme, ChatAgentLocation } from '../../common/constants.js';\nimport { IChatWidget, IChatWidgetService, IQuickChatService, showChatView } from '../chat.js';\nimport { IChatContextPickerItem, IChatContextPickService, IChatContextValueItem, isChatContextPickerPickItem } from '../chatContextPickService.js';\nimport { isQuickChat } from '../chatWidget.js';\nimport { resizeImage } from '../imageUtils.js';\nimport { registerPromptActions } from '../promptSyntax/promptFileActions.js';\nimport { CHAT_CATEGORY } from './chatActions.js';\n\nexport function registerChatContextActions() {\n\tregisterAction2(AttachContextAction);\n\tregisterAction2(AttachFileToChatAction);\n\tregisterAction2(AttachFolderToChatAction);\n\tregisterAction2(AttachSelectionToChatAction);\n\tregisterAction2(AttachSearchResultAction);\n\tregisterPromptActions();\n}\n\nasync function withChatView(accessor: ServicesAccessor): Promise<IChatWidget | undefined> {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst layoutService = accessor.get(IWorkbenchLayoutService);\n\n\tconst lastFocusedWidget = chatWidgetService.lastFocusedWidget;\n\tif (!lastFocusedWidget || lastFocusedWidget.location === ChatAgentLocation.Chat) {\n\t\treturn showChatView(viewsService, layoutService); // only show chat view if we either have no chat view or its located in view container\n\t}\n\treturn lastFocusedWidget;\n}\n\nabstract class AttachResourceAction extends Action2 {\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\t\tconst instaService = accessor.get(IInstantiationService);\n\t\tconst widget = await instaService.invokeFunction(withChatView);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\t\treturn instaService.invokeFunction(this.runWithWidget.bind(this), widget, ...args);\n\t}\n\n\tabstract runWithWidget(accessor: ServicesAccessor, widget: IChatWidget, ...args: unknown[]): Promise<void>;\n\n\tprotected _getResources(accessor: ServicesAccessor, ...args: unknown[]): URI[] {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst contexts = isEditorCommandsContext(args[1]) ? this._getEditorResources(accessor, args) : Array.isArray(args[1]) ? args[1] : [args[0]];\n\t\tconst files = [];\n\t\tfor (const context of contexts) {\n\t\t\tlet uri;\n\t\t\tif (URI.isUri(context)) {\n\t\t\t\turi = context;\n\t\t\t} else if (isSearchTreeFileMatch(context)) {\n\t\t\t\turi = context.resource;\n\t\t\t} else if (isSearchTreeMatch(context)) {\n\t\t\t\turi = context.parent().resource;\n\t\t\t} else if (!context && editorService.activeTextEditorControl) {\n\t\t\t\turi = EditorResourceAccessor.getCanonicalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\t\t}\n\n\t\t\tif (uri && [Schemas.file, Schemas.vscodeRemote, Schemas.untitled].includes(uri.scheme)) {\n\t\t\t\tfiles.push(uri);\n\t\t\t}\n\t\t}\n\n\t\treturn files;\n\t}\n\n\tprivate _getEditorResources(accessor: ServicesAccessor, ...args: unknown[]): URI[] {\n\t\tconst resolvedContext = resolveCommandsContext(args, accessor.get(IEditorService), accessor.get(IEditorGroupsService), accessor.get(IListService));\n\n\t\treturn resolvedContext.groupedEditors\n\t\t\t.flatMap(groupedEditor => groupedEditor.editors)\n\t\t\t.map(editor => EditorResourceAccessor.getCanonicalUri(editor, { supportSideBySide: SideBySideEditor.PRIMARY }))\n\t\t\t.filter(uri => uri !== undefined);\n\t}\n}\n\nclass AttachFileToChatAction extends AttachResourceAction {\n\n\tstatic readonly ID = 'workbench.action.chat.attachFile';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AttachFileToChatAction.ID,\n\t\t\ttitle: localize2('workbench.action.chat.attachFile.label', \"Add File to Chat\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tf1: true,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\tgroup: 'z_chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.enabled, SearchContext.FileMatchOrMatchFocusKey, SearchContext.SearchResultHeaderFocused.negate()),\n\t\t\t}, {\n\t\t\t\tid: MenuId.ExplorerContext,\n\t\t\t\tgroup: '5_chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\tExplorerFolderContext.negate(),\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.file),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeRemote)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t}, {\n\t\t\t\tid: MenuId.EditorTitleContext,\n\t\t\t\tgroup: '2_chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.file),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeRemote)\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t}, {\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: '1_chat',\n\t\t\t\torder: 2,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.file),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeRemote),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.untitled),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeUserData)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async runWithWidget(accessor: ServicesAccessor, widget: IChatWidget, ...args: unknown[]): Promise<void> {\n\t\tconst files = this._getResources(accessor, ...args);\n\t\tif (!files.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (widget) {\n\t\t\twidget.focusInput();\n\t\t\tfor (const file of files) {\n\t\t\t\twidget.attachmentModel.addFile(file);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass AttachFolderToChatAction extends AttachResourceAction {\n\n\tstatic readonly ID = 'workbench.action.chat.attachFolder';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AttachFolderToChatAction.ID,\n\t\t\ttitle: localize2('workbench.action.chat.attachFolder.label', \"Add Folder to Chat\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.ExplorerContext,\n\t\t\t\tgroup: '5_chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\tExplorerFolderContext,\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.file),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeRemote)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async runWithWidget(accessor: ServicesAccessor, widget: IChatWidget, ...args: unknown[]): Promise<void> {\n\t\tconst folders = this._getResources(accessor, ...args);\n\t\tif (!folders.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (widget) {\n\t\t\twidget.focusInput();\n\t\t\tfor (const folder of folders) {\n\t\t\t\twidget.attachmentModel.addFolder(folder);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass AttachSelectionToChatAction extends Action2 {\n\n\tstatic readonly ID = 'workbench.action.chat.attachSelection';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: AttachSelectionToChatAction.ID,\n\t\t\ttitle: localize2('workbench.action.chat.attachSelection.label', \"Add Selection to Chat\"),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: true,\n\t\t\tprecondition: ChatContextKeys.enabled,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: '1_chat',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\tEditorContextKeys.hasNonEmptySelection,\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.file),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeRemote),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.untitled),\n\t\t\t\t\t\tResourceContextKey.Scheme.isEqualTo(Schemas.vscodeUserData)\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: any[]): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst widget = await accessor.get(IInstantiationService).invokeFunction(withChatView);\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [_, matches] = args;\n\t\t// If we have search matches, it means this is coming from the search widget\n\t\tif (matches && matches.length > 0) {\n\t\t\tconst uris = new Map<URI, Range | undefined>();\n\t\t\tfor (const match of matches) {\n\t\t\t\tif (isSearchTreeFileMatch(match)) {\n\t\t\t\t\turis.set(match.resource, undefined);\n\t\t\t\t} else {\n\t\t\t\t\tconst context = { uri: match._parent.resource, range: match._range };\n\t\t\t\t\tconst range = uris.get(context.uri);\n\t\t\t\t\tif (!range ||\n\t\t\t\t\t\trange.startLineNumber !== context.range.startLineNumber && range.endLineNumber !== context.range.endLineNumber) {\n\t\t\t\t\t\turis.set(context.uri, context.range);\n\t\t\t\t\t\twidget.attachmentModel.addFile(context.uri, context.range);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Add the root files for all of the ones that didn't have a match\n\t\t\tfor (const uri of uris) {\n\t\t\t\tconst [resource, range] = uri;\n\t\t\t\tif (!range) {\n\t\t\t\t\twidget.attachmentModel.addFile(resource);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst activeEditor = editorService.activeTextEditorControl;\n\t\t\tconst activeUri = EditorResourceAccessor.getCanonicalUri(editorService.activeEditor, { supportSideBySide: SideBySideEditor.PRIMARY });\n\t\t\tif (activeEditor && activeUri && [Schemas.file, Schemas.vscodeRemote, Schemas.untitled].includes(activeUri.scheme)) {\n\t\t\t\tconst selection = activeEditor.getSelection();\n\t\t\t\tif (selection) {\n\t\t\t\t\twidget.focusInput();\n\t\t\t\t\tconst range = selection.isEmpty() ? new Range(selection.startLineNumber, 1, selection.startLineNumber + 1, 1) : selection;\n\t\t\t\t\twidget.attachmentModel.addFile(activeUri, range);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class AttachSearchResultAction extends Action2 {\n\n\tprivate static readonly Name = 'searchResults';\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.insertSearchResults',\n\t\t\ttitle: localize2('chat.insertSearchResults', 'Add Search Results to Chat'),\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tf1: false,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\tgroup: 'z_chat',\n\t\t\t\torder: 3,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.enabled,\n\t\t\t\t\tSearchContext.SearchResultHeaderFocused),\n\t\t\t}]\n\t\t});\n\t}\n\tasync run(accessor: ServicesAccessor) {\n\t\tconst logService = accessor.get(ILogService);\n\t\tconst widget = await accessor.get(IInstantiationService).invokeFunction(withChatView);\n\n\t\tif (!widget) {\n\t\t\tlogService.trace('InsertSearchResultAction: no chat view available');\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = widget.inputEditor;\n\t\tconst originalRange = editor.getSelection() ?? editor.getModel()?.getFullModelRange().collapseToEnd();\n\n\t\tif (!originalRange) {\n\t\t\tlogService.trace('InsertSearchResultAction: no selection');\n\t\t\treturn;\n\t\t}\n\n\t\tlet insertText = `#${AttachSearchResultAction.Name}`;\n\t\tconst varRange = new Range(originalRange.startLineNumber, originalRange.startColumn, originalRange.endLineNumber, originalRange.startLineNumber + insertText.length);\n\t\t// check character before the start of the range. If it's not a space, add a space\n\t\tconst model = editor.getModel();\n\t\tif (model && model.getValueInRange(new Range(originalRange.startLineNumber, originalRange.startColumn - 1, originalRange.startLineNumber, originalRange.startColumn)) !== ' ') {\n\t\t\tinsertText = ' ' + insertText;\n\t\t}\n\t\tconst success = editor.executeEdits('chatInsertSearch', [{ range: varRange, text: insertText + ' ' }]);\n\t\tif (!success) {\n\t\t\tlogService.trace(`InsertSearchResultAction: failed to insert \"${insertText}\"`);\n\t\t\treturn;\n\t\t}\n\t}\n}\n\n/** This is our type */\ninterface IContextPickItemItem extends IQuickPickItem {\n\tkind: 'contextPick';\n\titem: IChatContextValueItem | IChatContextPickerItem;\n}\n\n/** These are the types we get from \"platform QP\" */\ntype IQuickPickServicePickItem = IGotoSymbolQuickPickItem | ISymbolQuickPickItem | IQuickPickItemWithResource;\n\nfunction isIContextPickItemItem(obj: unknown): obj is IContextPickItemItem {\n\treturn (\n\t\tisObject(obj)\n\t\t&& typeof (<IContextPickItemItem>obj).kind === 'string'\n\t\t&& (<IContextPickItemItem>obj).kind === 'contextPick'\n\t);\n}\n\nfunction isIGotoSymbolQuickPickItem(obj: unknown): obj is IGotoSymbolQuickPickItem {\n\treturn (\n\t\tisObject(obj)\n\t\t&& typeof (obj as IGotoSymbolQuickPickItem).symbolName === 'string'\n\t\t&& !!(obj as IGotoSymbolQuickPickItem).uri\n\t\t&& !!(obj as IGotoSymbolQuickPickItem).range);\n}\n\nfunction isIQuickPickItemWithResource(obj: unknown): obj is IQuickPickItemWithResource {\n\treturn (\n\t\tisObject(obj)\n\t\t&& URI.isUri((obj as IQuickPickItemWithResource).resource));\n}\n\n\nexport class AttachContextAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'workbench.action.chat.attachContext',\n\t\t\ttitle: localize2('workbench.action.chat.attachContext.label.2', \"Add Context...\"),\n\t\t\ticon: Codicon.attach,\n\t\t\tcategory: CHAT_CATEGORY,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inChatInput, ChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat)),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Slash,\n\t\t\t\tweight: KeybindingWeight.EditorContrib\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tChatContextKeys.location.isEqualTo(ChatAgentLocation.Chat),\n\t\t\t\t\t\tContextKeyExpr.and(ChatContextKeys.location.isEqualTo(ChatAgentLocation.EditorInline), CTX_INLINE_CHAT_V2_ENABLED)\n\t\t\t\t\t),\n\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\tChatContextKeys.lockedToCodingAgent.negate(),\n\t\t\t\t\t\tChatContextKeys.agentSupportsAttachments\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tid: MenuId.ChatInputAttachmentToolbar,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 3\n\t\t\t},\n\n\t\t});\n\t}\n\n\toverride async run(accessor: ServicesAccessor, ...args: unknown[]): Promise<void> {\n\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst widgetService = accessor.get(IChatWidgetService);\n\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\t\tconst keybindingService = accessor.get(IKeybindingService);\n\t\tconst contextPickService = accessor.get(IChatContextPickService);\n\n\t\tconst context = args[0] as { widget?: IChatWidget; placeholder?: string } | undefined;\n\t\tconst widget = context?.widget ?? widgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst quickPickItems: IContextPickItemItem[] = [];\n\n\t\tfor (const item of contextPickService.items) {\n\n\t\t\tif (item.isEnabled && !await item.isEnabled(widget)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tquickPickItems.push({\n\t\t\t\tkind: 'contextPick',\n\t\t\t\titem,\n\t\t\t\tlabel: item.label,\n\t\t\t\ticonClass: ThemeIcon.asClassName(item.icon),\n\t\t\t\tkeybinding: item.commandId ? keybindingService.lookupKeybinding(item.commandId, contextKeyService) : undefined,\n\t\t\t});\n\t\t}\n\n\t\tinstantiationService.invokeFunction(this._show.bind(this), widget, quickPickItems, context?.placeholder);\n\t}\n\n\tprivate _show(accessor: ServicesAccessor, widget: IChatWidget, additionPicks: IContextPickItemItem[] | undefined, placeholder?: string) {\n\t\tconst quickInputService = accessor.get(IQuickInputService);\n\t\tconst quickChatService = accessor.get(IQuickChatService);\n\t\tconst instantiationService = accessor.get(IInstantiationService);\n\t\tconst commandService = accessor.get(ICommandService);\n\n\t\tconst providerOptions: AnythingQuickAccessProviderRunOptions = {\n\t\t\tfilter: (pick) => {\n\t\t\t\tif (isIQuickPickItemWithResource(pick) && pick.resource) {\n\t\t\t\t\treturn instantiationService.invokeFunction(accessor => isSupportedChatFileScheme(accessor, pick.resource!.scheme));\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tadditionPicks,\n\t\t\thandleAccept: async (item: IQuickPickServicePickItem | IContextPickItemItem, isBackgroundAccept: boolean) => {\n\n\t\t\t\tif (isIContextPickItemItem(item)) {\n\n\t\t\t\t\tlet isDone = true;\n\t\t\t\t\tif (item.item.type === 'valuePick') {\n\t\t\t\t\t\tthis._handleContextPick(item.item, widget);\n\n\t\t\t\t\t} else if (item.item.type === 'pickerPick') {\n\t\t\t\t\t\tisDone = await this._handleContextPickerItem(quickInputService, commandService, item.item, widget);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!isDone) {\n\t\t\t\t\t\t// restart picker when sub-picker didn't return anything\n\t\t\t\t\t\tinstantiationService.invokeFunction(this._show.bind(this), widget, additionPicks, placeholder);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tinstantiationService.invokeFunction(this._handleQPPick.bind(this), widget, isBackgroundAccept, item);\n\t\t\t\t}\n\t\t\t\tif (isQuickChat(widget)) {\n\t\t\t\t\tquickChatService.open();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tquickInputService.quickAccess.show('', {\n\t\t\tenabledProviderPrefixes: [\n\t\t\t\tAnythingQuickAccessProvider.PREFIX,\n\t\t\t\tSymbolsQuickAccessProvider.PREFIX,\n\t\t\t\tAbstractGotoSymbolQuickAccessProvider.PREFIX\n\t\t\t],\n\t\t\tplaceholder: placeholder ?? localize('chatContext.attach.placeholder', 'Search attachments'),\n\t\t\tproviderOptions,\n\t\t});\n\t}\n\n\tprivate async _handleQPPick(accessor: ServicesAccessor, widget: IChatWidget, isInBackground: boolean, pick: IQuickPickServicePickItem) {\n\t\tconst fileService = accessor.get(IFileService);\n\t\tconst textModelService = accessor.get(ITextModelService);\n\n\t\tconst toAttach: IChatRequestVariableEntry[] = [];\n\n\t\tif (isIQuickPickItemWithResource(pick) && pick.resource) {\n\t\t\tif (/\\.(png|jpg|jpeg|bmp|gif|tiff)$/i.test(pick.resource.path)) {\n\t\t\t\t// checks if the file is an image\n\t\t\t\tif (URI.isUri(pick.resource)) {\n\t\t\t\t\t// read the image and attach a new file context.\n\t\t\t\t\tconst readFile = await fileService.readFile(pick.resource);\n\t\t\t\t\tconst resizedImage = await resizeImage(readFile.value.buffer);\n\t\t\t\t\ttoAttach.push({\n\t\t\t\t\t\tid: pick.resource.toString(),\n\t\t\t\t\t\tname: pick.label,\n\t\t\t\t\t\tfullName: pick.label,\n\t\t\t\t\t\tvalue: resizedImage,\n\t\t\t\t\t\tkind: 'image',\n\t\t\t\t\t\treferences: [{ reference: pick.resource, kind: 'reference' }]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet omittedState = OmittedState.NotOmitted;\n\t\t\t\ttry {\n\t\t\t\t\tconst createdModel = await textModelService.createModelReference(pick.resource);\n\t\t\t\t\tcreatedModel.dispose();\n\t\t\t\t} catch {\n\t\t\t\t\tomittedState = OmittedState.Full;\n\t\t\t\t}\n\n\t\t\t\ttoAttach.push({\n\t\t\t\t\tkind: 'file',\n\t\t\t\t\tid: pick.resource.toString(),\n\t\t\t\t\tvalue: pick.resource,\n\t\t\t\t\tname: pick.label,\n\t\t\t\t\tomittedState\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (isIGotoSymbolQuickPickItem(pick) && pick.uri && pick.range) {\n\t\t\ttoAttach.push({\n\t\t\t\tkind: 'generic',\n\t\t\t\tid: JSON.stringify({ uri: pick.uri, range: pick.range.decoration }),\n\t\t\t\tvalue: { uri: pick.uri, range: pick.range.decoration },\n\t\t\t\tfullName: pick.label,\n\t\t\t\tname: pick.symbolName!,\n\t\t\t});\n\t\t}\n\n\n\t\twidget.attachmentModel.addContext(...toAttach);\n\n\t\tif (!isInBackground) {\n\t\t\t// Set focus back into the input once the user is done attaching items\n\t\t\t// so that the user can start typing their message\n\t\t\twidget.focusInput();\n\t\t}\n\t}\n\n\tprivate async _handleContextPick(item: IChatContextValueItem, widget: IChatWidget) {\n\n\t\tconst value = await item.asAttachment(widget);\n\t\tif (Array.isArray(value)) {\n\t\t\twidget.attachmentModel.addContext(...value);\n\t\t} else if (value) {\n\t\t\twidget.attachmentModel.addContext(value);\n\t\t}\n\t}\n\n\tprivate async _handleContextPickerItem(quickInputService: IQuickInputService, commandService: ICommandService, item: IChatContextPickerItem, widget: IChatWidget): Promise<boolean> {\n\n\t\tconst pickerConfig = item.asPicker(widget);\n\n\t\tconst store = new DisposableStore();\n\n\t\tconst goBackItem: IQuickPickItem = {\n\t\t\tlabel: localize('goBack', 'Go back â†©'),\n\t\t\talwaysShow: true\n\t\t};\n\t\tconst configureItem = pickerConfig.configure ? {\n\t\t\tlabel: pickerConfig.configure.label,\n\t\t\tcommandId: pickerConfig.configure.commandId,\n\t\t\talwaysShow: true\n\t\t} : undefined;\n\t\tconst extraPicks: QuickPickItem[] = [{ type: 'separator' }];\n\t\tif (configureItem) {\n\t\t\textraPicks.push(configureItem);\n\t\t}\n\t\textraPicks.push(goBackItem);\n\n\t\tconst qp = store.add(quickInputService.createQuickPick({ useSeparators: true }));\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tstore.add(qp.onDidHide(() => cts.cancel()));\n\t\tstore.add(toDisposable(() => cts.dispose(true)));\n\n\t\tqp.placeholder = pickerConfig.placeholder;\n\t\tqp.matchOnDescription = true;\n\t\tqp.matchOnDetail = true;\n\t\t// qp.ignoreFocusOut = true;\n\t\tqp.canAcceptInBackground = true;\n\t\tqp.busy = true;\n\t\tqp.show();\n\n\t\tif (isThenable(pickerConfig.picks)) {\n\t\t\tconst items = await (pickerConfig.picks.then(value => {\n\t\t\t\treturn ([] as QuickPickItem[]).concat(value, extraPicks);\n\t\t\t}));\n\n\t\t\tqp.items = items;\n\t\t\tqp.busy = false;\n\t\t} else {\n\t\t\tconst query = observableValue<string>('attachContext.query', qp.value);\n\t\t\tstore.add(qp.onDidChangeValue(() => query.set(qp.value, undefined)));\n\n\t\t\tconst picksObservable = pickerConfig.picks(query, cts.token);\n\t\t\tstore.add(autorun(reader => {\n\t\t\t\tconst { busy, picks } = picksObservable.read(reader);\n\t\t\t\tqp.items = ([] as QuickPickItem[]).concat(picks, extraPicks);\n\t\t\t\tqp.busy = busy;\n\t\t\t}));\n\t\t}\n\n\t\tif (cts.token.isCancellationRequested) {\n\t\t\tpickerConfig.dispose?.();\n\t\t\treturn true; // picker got hidden already\n\t\t}\n\n\t\tconst defer = new DeferredPromise<boolean>();\n\t\tconst addPromises: Promise<void>[] = [];\n\n\t\tstore.add(qp.onDidAccept(async e => {\n\t\t\tconst noop = 'noop';\n\t\t\tconst [selected] = qp.selectedItems;\n\t\t\tif (isChatContextPickerPickItem(selected)) {\n\t\t\t\tconst attachment = selected.asAttachment();\n\t\t\t\tif (!attachment || attachment === noop) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (isThenable(attachment)) {\n\t\t\t\t\taddPromises.push(attachment.then(v => {\n\t\t\t\t\t\tif (v !== noop) {\n\t\t\t\t\t\t\twidget.attachmentModel.addContext(v);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t} else {\n\t\t\t\t\twidget.attachmentModel.addContext(attachment);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (selected === goBackItem) {\n\t\t\t\tif (pickerConfig.goBack?.()) {\n\t\t\t\t\t// Custom goBack handled the navigation, stay in the picker\n\t\t\t\t\treturn; // Don't complete, keep picker open\n\t\t\t\t}\n\t\t\t\t// Default behavior: go back to main picker\n\t\t\t\tdefer.complete(false);\n\t\t\t}\n\t\t\tif (selected === configureItem) {\n\t\t\t\tdefer.complete(true);\n\t\t\t\tcommandService.executeCommand(configureItem.commandId);\n\t\t\t}\n\t\t\tif (!e.inBackground) {\n\t\t\t\tdefer.complete(true);\n\t\t\t}\n\t\t}));\n\n\t\tstore.add(qp.onDidHide(() => {\n\t\t\tdefer.complete(true);\n\t\t\tpickerConfig.dispose?.();\n\t\t}));\n\n\t\ttry {\n\t\t\tconst result = await defer.p;\n\t\t\tqp.busy = true; // if still visible\n\t\t\tawait Promise.all(addPromises);\n\t\t\treturn result;\n\t\t} finally {\n\t\t\tstore.dispose();\n\t\t}\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}