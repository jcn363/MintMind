{"version":3,"names":["cov_yhwf74q34","actualCoverage","BugIndicatingError","matchesSubString","observableSignal","observableValue","commonPrefixLength","commonSuffixLength","splitLines","applyEditsToRanges","StringEdit","StringReplacement","TextEdit","TextReplacement","Range","OffsetRange","StringText","getPositionOffsetTransformerFromTextModel","TextLength","linesDiffComputers","InlineCompletionTriggerKind","TextModelText","singleTextRemoveCommonPrefix","InlineSuggestionItem","s","f","create","data","textModel","b","isInlineEdit","uri","InlineCompletionItem","InlineEditItem","InlineSuggestionItemBase","_data","identity","hint","constructor","source","isFromExplicitRequest","context","triggerKind","Explicit","forwardStable","inlineSuggestions","enableForwardStability","editRange","getSingleTextEdit","range","targetRange","jumpToEdit","insertText","text","semanticId","hash","action","_sourceInlineCompletion","gutterMenuLinkAction","command","warning","showInlineEditMenu","JSON","stringify","getStartPosition","toString","shownCommand","requestUuid","partialAccepts","sourceInlineCompletion","addRef","removeRef","reportInlineEditShown","commandService","viewKind","viewData","reportPartialAccept","acceptedCharacters","info","partialAcceptance","reportEndOfLife","reason","setEndOfLifeReason","setIsPreceeded","item","setNotShownReasonIfNotSet","setNotShownReason","getSourceCompletion","InlineSuggestionIdentity","idCounter","_onDispose","onDispose","_jumpedTo","jumpedTo","_refCount","id","trigger","undefined","setJumpTo","tx","set","InlineSuggestHint","content","style","displayLocation","lift","withEdit","edit","positionOffsetTransformer","offsetRange","getOffset","getEndPosition","newOffsetRange","newRange","getRange","_edit","_trimmedEdit","_textEdit","_originalRange","snippetInfo","additionalTextEdits","transformer","replace","getEOL","reshapeInlineCompletion","getOffsetRange","trimmedEdit","removeCommonSuffixAndPrefix","getValue","textEdit","getTextReplacement","toJson","withIdentity","textModelEdit","newEditRange","replaceRange","length","newEdit","newTextEdit","newDisplayLocation","canBeReused","model","position","updatedRange","result","containsPosition","isVisible","ofRange","isGreaterThanOrEqualTo","cursorPosition","singleTextEdit","inlineCompletionIsVisible","originalRange","minimizedReplacement","equals","lineNumber","startLineNumber","isEmpty","originalValue","getValueInRange","filterText","cursorPosIndex","Math","max","column","startColumn","filterTextBefore","substring","filterTextAfter","originalValueBefore","originalValueAfter","originalValueIndent","getLineIndentColumn","trimStart","startsWith","_edits","_lastChangePartOfInlineEdit","_inlineEditModelVersion","offsetEdit","getStringEdit","fromStringEdit","toReplacement","edits","replacements","map","replacedRange","fromPositions","getPositionAt","start","endExclusive","replacedText","SingleUpdatedNextEdit","getVersionId","updatedEditModelVersion","updatedEdit","textModelChanges","_applyTextModelChanges","innerEdit","applyTextModelChanges","some","newTextModelVersion","inlineEditModelVersion","lastChangePartOfInlineEdit","lastChangeUpdatedEdit","filter","getTextEdit","replaceText","eol","editOriginalText","editReplaceText","diffAlgorithm","getDefault","lineDiffs","computeDiff","ignoreTrimWhitespace","computeMoves","extendToSubwords","maxComputationTimeMs","innerChanges","changes","flatMap","c","addRangeToPos","pos","fromPosition","createRange","addToPosition","modifiedText","rangeInModel","getValueOfRange","modifiedRange","originalText","reshapeInlineEdit","_trimmedNewText","_prefixLength","_suffixLength","_lastChangeUpdatedEdit","prefixLength","newText","suffixLength","trimmedNewText","_clone","_applyChanges","editHasChanged","editStart","editEnd","shouldPreserveEditShape","i","change","isInsertion","isDeletion","includes","reshapeMultiLineInsertion","totalInnerEdits","endsWith","deltaEnd","slice","startPosition","hasTextOnInsertionLine","getLineLength","deltaStart","delta"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/inlineCompletions/browser/model/inlineSuggestionItem.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BugIndicatingError } from '../../../../../base/common/errors.js';\nimport { matchesSubString } from '../../../../../base/common/filters.js';\nimport { IObservable, ITransaction, observableSignal, observableValue } from '../../../../../base/common/observable.js';\nimport { commonPrefixLength, commonSuffixLength, splitLines } from '../../../../../base/common/strings.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { ISingleEditOperation } from '../../../../common/core/editOperation.js';\nimport { applyEditsToRanges, StringEdit, StringReplacement } from '../../../../common/core/edits/stringEdit.js';\nimport { TextEdit, TextReplacement } from '../../../../common/core/edits/textEdit.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { OffsetRange } from '../../../../common/core/ranges/offsetRange.js';\nimport { StringText } from '../../../../common/core/text/abstractText.js';\nimport { getPositionOffsetTransformerFromTextModel } from '../../../../common/core/text/getPositionOffsetTransformerFromTextModel.js';\nimport { PositionOffsetTransformerBase } from '../../../../common/core/text/positionToOffset.js';\nimport { TextLength } from '../../../../common/core/text/textLength.js';\nimport { linesDiffComputers } from '../../../../common/diff/linesDiffComputers.js';\nimport { Command, InlineCompletion, InlineCompletionHintStyle, InlineCompletionEndOfLifeReason, InlineCompletionTriggerKind, InlineCompletionWarning, PartialAcceptInfo, InlineCompletionHint } from '../../../../common/languages.js';\nimport { EndOfLinePreference, ITextModel } from '../../../../common/model.js';\nimport { TextModelText } from '../../../../common/model/textModelText.js';\nimport { InlineCompletionViewData, InlineCompletionViewKind } from '../view/inlineEdits/inlineEditsViewInterface.js';\nimport { InlineSuggestData, InlineSuggestionList, PartialAcceptance, SnippetInfo } from './provideInlineCompletions.js';\nimport { singleTextRemoveCommonPrefix } from './singleTextEditHelpers.js';\n\nexport type InlineSuggestionItem = InlineEditItem | InlineCompletionItem;\n\nexport namespace InlineSuggestionItem {\n\texport function create(\n\t\tdata: InlineSuggestData,\n\t\ttextModel: ITextModel,\n\t): InlineSuggestionItem {\n\t\tif (!data.isInlineEdit && !data.uri) {\n\t\t\treturn InlineCompletionItem.create(data, textModel);\n\t\t} else {\n\t\t\treturn InlineEditItem.create(data, textModel);\n\t\t}\n\t}\n}\n\nabstract class InlineSuggestionItemBase {\n\tconstructor(\n\t\tprotected readonly _data: InlineSuggestData,\n\t\tpublic readonly identity: InlineSuggestionIdentity,\n\t\tpublic readonly hint: InlineSuggestHint | undefined\n\t) { }\n\n\t/**\n\t * A reference to the original inline completion list this inline completion has been constructed from.\n\t * Used for event data to ensure referential equality.\n\t*/\n\tpublic get source(): InlineSuggestionList { return this._data.source; }\n\n\tpublic get isFromExplicitRequest(): boolean { return this._data.context.triggerKind === InlineCompletionTriggerKind.Explicit; }\n\tpublic get forwardStable(): boolean { return this.source.inlineSuggestions.enableForwardStability ?? false; }\n\tpublic get editRange(): Range { return this.getSingleTextEdit().range; }\n\tpublic get targetRange(): Range { return this.hint?.range && !this.hint.jumpToEdit ? this.hint?.range : this.editRange; }\n\tpublic get insertText(): string { return this.getSingleTextEdit().text; }\n\tpublic get semanticId(): string { return this.hash; }\n\tpublic get action(): Command | undefined { return this._sourceInlineCompletion.gutterMenuLinkAction; }\n\tpublic get command(): Command | undefined { return this._sourceInlineCompletion.command; }\n\tpublic get warning(): InlineCompletionWarning | undefined { return this._sourceInlineCompletion.warning; }\n\tpublic get showInlineEditMenu(): boolean { return !!this._sourceInlineCompletion.showInlineEditMenu; }\n\tpublic get hash() {\n\t\treturn JSON.stringify([\n\t\t\tthis.getSingleTextEdit().text,\n\t\t\tthis.getSingleTextEdit().range.getStartPosition().toString()\n\t\t]);\n\t}\n\t/** @deprecated */\n\tpublic get shownCommand(): Command | undefined { return this._sourceInlineCompletion.shownCommand; }\n\n\tpublic get requestUuid(): string { return this._data.context.requestUuid; }\n\n\tpublic get partialAccepts(): PartialAcceptance { return this._data.partialAccepts; }\n\n\t/**\n\t * A reference to the original inline completion this inline completion has been constructed from.\n\t * Used for event data to ensure referential equality.\n\t*/\n\tprivate get _sourceInlineCompletion(): InlineCompletion { return this._data.sourceInlineCompletion; }\n\n\n\tpublic abstract getSingleTextEdit(): TextReplacement;\n\n\tpublic abstract withEdit(userEdit: StringEdit, textModel: ITextModel): InlineSuggestionItem | undefined;\n\n\tpublic abstract withIdentity(identity: InlineSuggestionIdentity): InlineSuggestionItem;\n\tpublic abstract canBeReused(model: ITextModel, position: Position): boolean;\n\n\n\tpublic addRef(): void {\n\t\tthis.identity.addRef();\n\t\tthis.source.addRef();\n\t}\n\n\tpublic removeRef(): void {\n\t\tthis.identity.removeRef();\n\t\tthis.source.removeRef();\n\t}\n\n\tpublic reportInlineEditShown(commandService: ICommandService, viewKind: InlineCompletionViewKind, viewData: InlineCompletionViewData) {\n\t\tthis._data.reportInlineEditShown(commandService, this.insertText, viewKind, viewData);\n\t}\n\n\tpublic reportPartialAccept(acceptedCharacters: number, info: PartialAcceptInfo, partialAcceptance: PartialAcceptance) {\n\t\tthis._data.reportPartialAccept(acceptedCharacters, info, partialAcceptance);\n\t}\n\n\tpublic reportEndOfLife(reason: InlineCompletionEndOfLifeReason): void {\n\t\tthis._data.reportEndOfLife(reason);\n\t}\n\n\tpublic setEndOfLifeReason(reason: InlineCompletionEndOfLifeReason): void {\n\t\tthis._data.setEndOfLifeReason(reason);\n\t}\n\n\tpublic setIsPreceeded(item: InlineSuggestionItem): void {\n\t\tthis._data.setIsPreceeded(item.partialAccepts);\n\t}\n\n\tpublic setNotShownReasonIfNotSet(reason: string): void {\n\t\tthis._data.setNotShownReason(reason);\n\t}\n\n\t/**\n\t * Avoid using this method. Instead introduce getters for the needed properties.\n\t*/\n\tpublic getSourceCompletion(): InlineCompletion {\n\t\treturn this._sourceInlineCompletion;\n\t}\n}\n\nexport class InlineSuggestionIdentity {\n\tprivate static idCounter = 0;\n\tprivate readonly _onDispose = observableSignal(this);\n\tpublic readonly onDispose: IObservable<void> = this._onDispose;\n\n\tprivate readonly _jumpedTo = observableValue(this, false);\n\tpublic get jumpedTo(): IObservable<boolean> {\n\t\treturn this._jumpedTo;\n\t}\n\n\tprivate _refCount = 1;\n\tpublic readonly id = 'InlineCompletionIdentity' + InlineSuggestionIdentity.idCounter++;\n\n\taddRef() {\n\t\tthis._refCount++;\n\t}\n\n\tremoveRef() {\n\t\tthis._refCount--;\n\t\tif (this._refCount === 0) {\n\t\t\tthis._onDispose.trigger(undefined);\n\t\t}\n\t}\n\n\tsetJumpTo(tx: ITransaction | undefined): void {\n\t\tthis._jumpedTo.set(true, tx);\n\t}\n}\n\nexport class InlineSuggestHint {\n\n\tpublic static create(displayLocation: InlineCompletionHint) {\n\t\treturn new InlineSuggestHint(\n\t\t\tRange.lift(displayLocation.range),\n\t\t\tdisplayLocation.content,\n\t\t\tdisplayLocation.style,\n\t\t\tdisplayLocation.jumpToEdit\n\t\t);\n\t}\n\n\tprivate constructor(\n\t\tpublic readonly range: Range,\n\t\tpublic readonly content: string,\n\t\tpublic readonly style: InlineCompletionHintStyle,\n\t\tpublic readonly jumpToEdit: boolean,\n\t) { }\n\n\tpublic withEdit(edit: StringEdit, positionOffsetTransformer: PositionOffsetTransformerBase): InlineSuggestHint | undefined {\n\t\tconst offsetRange = new OffsetRange(\n\t\t\tpositionOffsetTransformer.getOffset(this.range.getStartPosition()),\n\t\t\tpositionOffsetTransformer.getOffset(this.range.getEndPosition())\n\t\t);\n\n\t\tconst newOffsetRange = applyEditsToRanges([offsetRange], edit)[0];\n\t\tif (!newOffsetRange) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst newRange = positionOffsetTransformer.getRange(newOffsetRange);\n\n\t\treturn new InlineSuggestHint(newRange, this.content, this.style, this.jumpToEdit);\n\t}\n}\n\nexport class InlineCompletionItem extends InlineSuggestionItemBase {\n\tpublic static create(\n\t\tdata: InlineSuggestData,\n\t\ttextModel: ITextModel,\n\t): InlineCompletionItem {\n\t\tconst identity = new InlineSuggestionIdentity();\n\t\tconst transformer = getPositionOffsetTransformerFromTextModel(textModel);\n\n\t\tconst insertText = data.insertText.replace(/\\r\\n|\\r|\\n/g, textModel.getEOL());\n\n\t\tconst edit = reshapeInlineCompletion(new StringReplacement(transformer.getOffsetRange(data.range), insertText), textModel);\n\t\tconst trimmedEdit = edit.removeCommonSuffixAndPrefix(textModel.getValue());\n\t\tconst textEdit = transformer.getTextReplacement(edit);\n\n\t\tconst displayLocation = data.hint ? InlineSuggestHint.create(data.hint) : undefined;\n\n\t\treturn new InlineCompletionItem(edit, trimmedEdit, textEdit, textEdit.range, data.snippetInfo, data.additionalTextEdits, data, identity, displayLocation);\n\t}\n\n\tpublic readonly isInlineEdit = false;\n\n\tprivate constructor(\n\t\tprivate readonly _edit: StringReplacement,\n\t\tprivate readonly _trimmedEdit: StringReplacement,\n\t\tprivate readonly _textEdit: TextReplacement,\n\t\tprivate readonly _originalRange: Range,\n\t\tpublic readonly snippetInfo: SnippetInfo | undefined,\n\t\tpublic readonly additionalTextEdits: readonly ISingleEditOperation[],\n\n\t\tdata: InlineSuggestData,\n\t\tidentity: InlineSuggestionIdentity,\n\t\tdisplayLocation: InlineSuggestHint | undefined,\n\t) {\n\t\tsuper(data, identity, displayLocation);\n\t}\n\n\toverride get hash(): string {\n\t\treturn JSON.stringify(this._trimmedEdit.toJson());\n\t}\n\n\toverride getSingleTextEdit(): TextReplacement { return this._textEdit; }\n\n\toverride withIdentity(identity: InlineSuggestionIdentity): InlineCompletionItem {\n\t\treturn new InlineCompletionItem(\n\t\t\tthis._edit,\n\t\t\tthis._trimmedEdit,\n\t\t\tthis._textEdit,\n\t\t\tthis._originalRange,\n\t\t\tthis.snippetInfo,\n\t\t\tthis.additionalTextEdits,\n\t\t\tthis._data,\n\t\t\tidentity,\n\t\t\tthis.hint\n\t\t);\n\t}\n\n\toverride withEdit(textModelEdit: StringEdit, textModel: ITextModel): InlineCompletionItem | undefined {\n\t\tconst newEditRange = applyEditsToRanges([this._edit.replaceRange], textModelEdit);\n\t\tif (newEditRange.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst newEdit = new StringReplacement(newEditRange[0], this._textEdit.text);\n\t\tconst positionOffsetTransformer = getPositionOffsetTransformerFromTextModel(textModel);\n\t\tconst newTextEdit = positionOffsetTransformer.getTextReplacement(newEdit);\n\n\t\tlet newDisplayLocation = this.hint;\n\t\tif (newDisplayLocation) {\n\t\t\tnewDisplayLocation = newDisplayLocation.withEdit(textModelEdit, positionOffsetTransformer);\n\t\t\tif (!newDisplayLocation) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\tconst trimmedEdit = newEdit.removeCommonSuffixAndPrefix(textModel.getValue());\n\n\t\treturn new InlineCompletionItem(\n\t\t\tnewEdit,\n\t\t\ttrimmedEdit,\n\t\t\tnewTextEdit,\n\t\t\tthis._originalRange,\n\t\t\tthis.snippetInfo,\n\t\t\tthis.additionalTextEdits,\n\t\t\tthis._data,\n\t\t\tthis.identity,\n\t\t\tnewDisplayLocation\n\t\t);\n\t}\n\n\toverride canBeReused(model: ITextModel, position: Position): boolean {\n\t\t// TODO@hediet I believe this can be simplified to `return true;`, as applying an edit should kick out this suggestion.\n\t\tconst updatedRange = this._textEdit.range;\n\t\tconst result = !!updatedRange\n\t\t\t&& updatedRange.containsPosition(position)\n\t\t\t&& this.isVisible(model, position)\n\t\t\t&& TextLength.ofRange(updatedRange).isGreaterThanOrEqualTo(TextLength.ofRange(this._originalRange));\n\t\treturn result;\n\t}\n\n\tpublic isVisible(model: ITextModel, cursorPosition: Position): boolean {\n\t\tconst singleTextEdit = this.getSingleTextEdit();\n\t\treturn inlineCompletionIsVisible(singleTextEdit, this._originalRange, model, cursorPosition);\n\t}\n}\n\nexport function inlineCompletionIsVisible(singleTextEdit: TextReplacement, originalRange: Range | undefined, model: ITextModel, cursorPosition: Position): boolean {\n\tconst minimizedReplacement = singleTextRemoveCommonPrefix(singleTextEdit, model);\n\tconst editRange = singleTextEdit.range;\n\tif (!editRange\n\t\t|| (originalRange && !originalRange.getStartPosition().equals(editRange.getStartPosition()))\n\t\t|| cursorPosition.lineNumber !== minimizedReplacement.range.startLineNumber\n\t\t|| minimizedReplacement.isEmpty // if the completion is empty after removing the common prefix of the completion and the model, the completion item would not be visible\n\t) {\n\t\treturn false;\n\t}\n\n\t// We might consider comparing by .toLowerText, but this requires GhostTextReplacement\n\tconst originalValue = model.getValueInRange(minimizedReplacement.range, EndOfLinePreference.LF);\n\tconst filterText = minimizedReplacement.text;\n\n\tconst cursorPosIndex = Math.max(0, cursorPosition.column - minimizedReplacement.range.startColumn);\n\n\tlet filterTextBefore = filterText.substring(0, cursorPosIndex);\n\tlet filterTextAfter = filterText.substring(cursorPosIndex);\n\n\tlet originalValueBefore = originalValue.substring(0, cursorPosIndex);\n\tlet originalValueAfter = originalValue.substring(cursorPosIndex);\n\n\tconst originalValueIndent = model.getLineIndentColumn(minimizedReplacement.range.startLineNumber);\n\tif (minimizedReplacement.range.startColumn <= originalValueIndent) {\n\t\t// Remove indentation\n\t\toriginalValueBefore = originalValueBefore.trimStart();\n\t\tif (originalValueBefore.length === 0) {\n\t\t\toriginalValueAfter = originalValueAfter.trimStart();\n\t\t}\n\t\tfilterTextBefore = filterTextBefore.trimStart();\n\t\tif (filterTextBefore.length === 0) {\n\t\t\tfilterTextAfter = filterTextAfter.trimStart();\n\t\t}\n\t}\n\n\treturn filterTextBefore.startsWith(originalValueBefore)\n\t\t&& !!matchesSubString(originalValueAfter, filterTextAfter);\n}\n\nexport class InlineEditItem extends InlineSuggestionItemBase {\n\tpublic static create(\n\t\tdata: InlineSuggestData,\n\t\ttextModel: ITextModel,\n\t): InlineEditItem {\n\t\tconst offsetEdit = getStringEdit(textModel, data.range, data.insertText);\n\t\tconst text = new TextModelText(textModel);\n\t\tconst textEdit = TextEdit.fromStringEdit(offsetEdit, text);\n\t\tconst singleTextEdit = offsetEdit.isEmpty() ? new TextReplacement(new Range(1, 1, 1, 1), '') : textEdit.toReplacement(text); // FIXME: .toReplacement() can throw because offsetEdit is empty because we get an empty diff in getStringEdit after diffing\n\t\tconst identity = new InlineSuggestionIdentity();\n\n\t\tconst edits = offsetEdit.replacements.map(edit => {\n\t\t\tconst replacedRange = Range.fromPositions(textModel.getPositionAt(edit.replaceRange.start), textModel.getPositionAt(edit.replaceRange.endExclusive));\n\t\t\tconst replacedText = textModel.getValueInRange(replacedRange);\n\t\t\treturn SingleUpdatedNextEdit.create(edit, replacedText);\n\t\t});\n\t\tconst hint = data.hint ? InlineSuggestHint.create(data.hint) : undefined;\n\t\treturn new InlineEditItem(offsetEdit, singleTextEdit, data.uri, data, identity, edits, hint, false, textModel.getVersionId());\n\t}\n\n\tpublic readonly snippetInfo: SnippetInfo | undefined = undefined;\n\tpublic readonly additionalTextEdits: readonly ISingleEditOperation[] = [];\n\tpublic readonly isInlineEdit = true;\n\n\tprivate constructor(\n\t\tprivate readonly _edit: StringEdit,\n\t\tprivate readonly _textEdit: TextReplacement,\n\t\tpublic readonly uri: URI | undefined,\n\n\t\tdata: InlineSuggestData,\n\n\t\tidentity: InlineSuggestionIdentity,\n\t\tprivate readonly _edits: readonly SingleUpdatedNextEdit[],\n\t\thint: InlineSuggestHint | undefined,\n\t\tprivate readonly _lastChangePartOfInlineEdit = false,\n\t\tprivate readonly _inlineEditModelVersion: number,\n\t) {\n\t\tsuper(data, identity, hint);\n\t}\n\n\tpublic get updatedEditModelVersion(): number { return this._inlineEditModelVersion; }\n\tpublic get updatedEdit(): StringEdit { return this._edit; }\n\n\toverride getSingleTextEdit(): TextReplacement {\n\t\treturn this._textEdit;\n\t}\n\n\toverride withIdentity(identity: InlineSuggestionIdentity): InlineEditItem {\n\t\treturn new InlineEditItem(\n\t\t\tthis._edit,\n\t\t\tthis._textEdit,\n\t\t\tthis.uri,\n\t\t\tthis._data,\n\t\t\tidentity,\n\t\t\tthis._edits,\n\t\t\tthis.hint,\n\t\t\tthis._lastChangePartOfInlineEdit,\n\t\t\tthis._inlineEditModelVersion,\n\t\t);\n\t}\n\n\toverride canBeReused(model: ITextModel, position: Position): boolean {\n\t\t// TODO@hediet I believe this can be simplified to `return true;`, as applying an edit should kick out this suggestion.\n\t\treturn this._lastChangePartOfInlineEdit && this.updatedEditModelVersion === model.getVersionId();\n\t}\n\n\toverride withEdit(textModelChanges: StringEdit, textModel: ITextModel): InlineEditItem | undefined {\n\t\tconst edit = this._applyTextModelChanges(textModelChanges, this._edits, textModel);\n\t\treturn edit;\n\t}\n\n\tprivate _applyTextModelChanges(textModelChanges: StringEdit, edits: readonly SingleUpdatedNextEdit[], textModel: ITextModel): InlineEditItem | undefined {\n\t\tedits = edits.map(innerEdit => innerEdit.applyTextModelChanges(textModelChanges));\n\n\t\tif (edits.some(edit => edit.edit === undefined)) {\n\t\t\treturn undefined; // change is invalid, so we will have to drop the completion\n\t\t}\n\n\t\tconst newTextModelVersion = textModel.getVersionId();\n\n\t\tlet inlineEditModelVersion = this._inlineEditModelVersion;\n\t\tconst lastChangePartOfInlineEdit = edits.some(edit => edit.lastChangeUpdatedEdit);\n\t\tif (lastChangePartOfInlineEdit) {\n\t\t\tinlineEditModelVersion = newTextModelVersion ?? -1;\n\t\t}\n\n\t\tif (newTextModelVersion === null || inlineEditModelVersion + 20 < newTextModelVersion) {\n\t\t\treturn undefined; // the completion has been ignored for a while, remove it\n\t\t}\n\n\t\tedits = edits.filter(innerEdit => !innerEdit.edit!.isEmpty);\n\t\tif (edits.length === 0) {\n\t\t\treturn undefined; // the completion has been typed by the user\n\t\t}\n\n\t\tconst newEdit = new StringEdit(edits.map(edit => edit.edit!));\n\t\tconst positionOffsetTransformer = getPositionOffsetTransformerFromTextModel(textModel);\n\t\tconst newTextEdit = positionOffsetTransformer.getTextEdit(newEdit).toReplacement(new TextModelText(textModel));\n\n\t\tlet newDisplayLocation = this.hint;\n\t\tif (newDisplayLocation) {\n\t\t\tnewDisplayLocation = newDisplayLocation.withEdit(textModelChanges, positionOffsetTransformer);\n\t\t\tif (!newDisplayLocation) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\n\t\treturn new InlineEditItem(\n\t\t\tnewEdit,\n\t\t\tnewTextEdit,\n\t\t\tthis.uri,\n\t\t\tthis._data,\n\t\t\tthis.identity,\n\t\t\tedits,\n\t\t\tnewDisplayLocation,\n\t\t\tlastChangePartOfInlineEdit,\n\t\t\tinlineEditModelVersion,\n\t\t);\n\t}\n}\n\nfunction getStringEdit(textModel: ITextModel, editRange: Range, replaceText: string): StringEdit {\n\tconst eol = textModel.getEOL();\n\tconst editOriginalText = textModel.getValueInRange(editRange);\n\tconst editReplaceText = replaceText.replace(/\\r\\n|\\r|\\n/g, eol);\n\n\tconst diffAlgorithm = linesDiffComputers.getDefault();\n\tconst lineDiffs = diffAlgorithm.computeDiff(\n\t\tsplitLines(editOriginalText),\n\t\tsplitLines(editReplaceText),\n\t\t{\n\t\t\tignoreTrimWhitespace: false,\n\t\t\tcomputeMoves: false,\n\t\t\textendToSubwords: true,\n\t\t\tmaxComputationTimeMs: 500,\n\t\t}\n\t);\n\n\tconst innerChanges = lineDiffs.changes.flatMap(c => c.innerChanges ?? []);\n\n\tfunction addRangeToPos(pos: Position, range: Range): Range {\n\t\tconst start = TextLength.fromPosition(range.getStartPosition());\n\t\treturn TextLength.ofRange(range).createRange(start.addToPosition(pos));\n\t}\n\n\tconst modifiedText = new StringText(editReplaceText);\n\n\tconst offsetEdit = new StringEdit(\n\t\tinnerChanges.map(c => {\n\t\t\tconst rangeInModel = addRangeToPos(editRange.getStartPosition(), c.originalRange);\n\t\t\tconst originalRange = getPositionOffsetTransformerFromTextModel(textModel).getOffsetRange(rangeInModel);\n\n\t\t\tconst replaceText = modifiedText.getValueOfRange(c.modifiedRange);\n\t\t\tconst edit = new StringReplacement(originalRange, replaceText);\n\n\t\t\tconst originalText = textModel.getValueInRange(rangeInModel);\n\t\t\treturn reshapeInlineEdit(edit, originalText, innerChanges.length, textModel);\n\t\t})\n\t);\n\n\treturn offsetEdit;\n}\n\nclass SingleUpdatedNextEdit {\n\tpublic static create(\n\t\tedit: StringReplacement,\n\t\treplacedText: string,\n\t): SingleUpdatedNextEdit {\n\t\tconst prefixLength = commonPrefixLength(edit.newText, replacedText);\n\t\tconst suffixLength = commonSuffixLength(edit.newText, replacedText);\n\t\tconst trimmedNewText = edit.newText.substring(prefixLength, edit.newText.length - suffixLength);\n\t\treturn new SingleUpdatedNextEdit(edit, trimmedNewText, prefixLength, suffixLength);\n\t}\n\n\tpublic get edit() { return this._edit; }\n\tpublic get lastChangeUpdatedEdit() { return this._lastChangeUpdatedEdit; }\n\n\tconstructor(\n\t\tprivate _edit: StringReplacement | undefined,\n\t\tprivate _trimmedNewText: string,\n\t\tprivate _prefixLength: number,\n\t\tprivate _suffixLength: number,\n\t\tprivate _lastChangeUpdatedEdit: boolean = false,\n\t) {\n\t}\n\n\tpublic applyTextModelChanges(textModelChanges: StringEdit) {\n\t\tconst c = this._clone();\n\t\tc._applyTextModelChanges(textModelChanges);\n\t\treturn c;\n\t}\n\n\tprivate _clone(): SingleUpdatedNextEdit {\n\t\treturn new SingleUpdatedNextEdit(\n\t\t\tthis._edit,\n\t\t\tthis._trimmedNewText,\n\t\t\tthis._prefixLength,\n\t\t\tthis._suffixLength,\n\t\t\tthis._lastChangeUpdatedEdit,\n\t\t);\n\t}\n\n\tprivate _applyTextModelChanges(textModelChanges: StringEdit) {\n\t\tthis._lastChangeUpdatedEdit = false;\n\n\t\tif (!this._edit) {\n\t\t\tthrow new BugIndicatingError('UpdatedInnerEdits: No edit to apply changes to');\n\t\t}\n\n\t\tconst result = this._applyChanges(this._edit, textModelChanges);\n\t\tif (!result) {\n\t\t\tthis._edit = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._edit = result.edit;\n\t\tthis._lastChangeUpdatedEdit = result.editHasChanged;\n\t}\n\n\tprivate _applyChanges(edit: StringReplacement, textModelChanges: StringEdit): { edit: StringReplacement; editHasChanged: boolean } | undefined {\n\t\tlet editStart = edit.replaceRange.start;\n\t\tlet editEnd = edit.replaceRange.endExclusive;\n\t\tlet editReplaceText = edit.newText;\n\t\tlet editHasChanged = false;\n\n\t\tconst shouldPreserveEditShape = this._prefixLength > 0 || this._suffixLength > 0;\n\n\t\tfor (let i = textModelChanges.replacements.length - 1; i >= 0; i--) {\n\t\t\tconst change = textModelChanges.replacements[i];\n\n\t\t\t// INSERTIONS (only support inserting at start of edit)\n\t\t\tconst isInsertion = change.newText.length > 0 && change.replaceRange.isEmpty;\n\n\t\t\tif (isInsertion && !shouldPreserveEditShape && change.replaceRange.start === editStart && editReplaceText.startsWith(change.newText)) {\n\t\t\t\teditStart += change.newText.length;\n\t\t\t\teditReplaceText = editReplaceText.substring(change.newText.length);\n\t\t\t\teditEnd = Math.max(editStart, editEnd);\n\t\t\t\teditHasChanged = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (isInsertion && shouldPreserveEditShape && change.replaceRange.start === editStart + this._prefixLength && this._trimmedNewText.startsWith(change.newText)) {\n\t\t\t\teditEnd += change.newText.length;\n\t\t\t\teditHasChanged = true;\n\t\t\t\tthis._prefixLength += change.newText.length;\n\t\t\t\tthis._trimmedNewText = this._trimmedNewText.substring(change.newText.length);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// DELETIONS\n\t\t\tconst isDeletion = change.newText.length === 0 && change.replaceRange.length > 0;\n\t\t\tif (isDeletion && change.replaceRange.start >= editStart + this._prefixLength && change.replaceRange.endExclusive <= editEnd - this._suffixLength) {\n\t\t\t\t// user deleted text IN-BETWEEN the deletion range\n\t\t\t\teditEnd -= change.replaceRange.length;\n\t\t\t\teditHasChanged = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// user did exactly the edit\n\t\t\tif (change.equals(edit)) {\n\t\t\t\teditHasChanged = true;\n\t\t\t\teditStart = change.replaceRange.endExclusive;\n\t\t\t\teditReplaceText = '';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// MOVE EDIT\n\t\t\tif (change.replaceRange.start > editEnd) {\n\t\t\t\t// the change happens after the completion range\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (change.replaceRange.endExclusive < editStart) {\n\t\t\t\t// the change happens before the completion range\n\t\t\t\teditStart += change.newText.length - change.replaceRange.length;\n\t\t\t\teditEnd += change.newText.length - change.replaceRange.length;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// The change intersects the completion, so we will have to drop the completion\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// the resulting edit is a noop as the original and new text are the same\n\t\tif (this._trimmedNewText.length === 0 && editStart + this._prefixLength === editEnd - this._suffixLength) {\n\t\t\treturn { edit: new StringReplacement(new OffsetRange(editStart + this._prefixLength, editStart + this._prefixLength), ''), editHasChanged: true };\n\t\t}\n\n\t\treturn { edit: new StringReplacement(new OffsetRange(editStart, editEnd), editReplaceText), editHasChanged };\n\t}\n}\n\nfunction reshapeInlineCompletion(edit: StringReplacement, textModel: ITextModel): StringReplacement {\n\t// If the insertion is a multi line insertion starting on the next line\n\t// Move it forwards so that the multi line insertion starts on the current line\n\tconst eol = textModel.getEOL();\n\tif (edit.replaceRange.isEmpty && edit.newText.includes(eol)) {\n\t\tedit = reshapeMultiLineInsertion(edit, textModel);\n\t}\n\n\treturn edit;\n}\n\nfunction reshapeInlineEdit(edit: StringReplacement, originalText: string, totalInnerEdits: number, textModel: ITextModel): StringReplacement {\n\t// TODO: EOL are not properly trimmed by the diffAlgorithm #12680\n\tconst eol = textModel.getEOL();\n\tif (edit.newText.endsWith(eol) && originalText.endsWith(eol)) {\n\t\tedit = new StringReplacement(edit.replaceRange.deltaEnd(-eol.length), edit.newText.slice(0, -eol.length));\n\t}\n\n\t// INSERTION\n\t// If the insertion ends with a new line and is inserted at the start of a line which has text,\n\t// we move the insertion to the end of the previous line if possible\n\tif (totalInnerEdits === 1 && edit.replaceRange.isEmpty && edit.newText.includes(eol)) {\n\t\tconst startPosition = textModel.getPositionAt(edit.replaceRange.start);\n\t\tconst hasTextOnInsertionLine = textModel.getLineLength(startPosition.lineNumber) !== 0;\n\t\tif (hasTextOnInsertionLine) {\n\t\t\tedit = reshapeMultiLineInsertion(edit, textModel);\n\t\t}\n\t}\n\n\t// The diff algorithm extended a simple edit to the entire word\n\t// shrink it back to a simple edit if it is deletion/insertion only\n\tif (totalInnerEdits === 1) {\n\t\tconst prefixLength = commonPrefixLength(originalText, edit.newText);\n\t\tconst suffixLength = commonSuffixLength(originalText.slice(prefixLength), edit.newText.slice(prefixLength));\n\n\t\t// reshape it back to an insertion\n\t\tif (prefixLength + suffixLength === originalText.length) {\n\t\t\treturn new StringReplacement(edit.replaceRange.deltaStart(prefixLength).deltaEnd(-suffixLength), edit.newText.substring(prefixLength, edit.newText.length - suffixLength));\n\t\t}\n\n\t\t// reshape it back to a deletion\n\t\tif (prefixLength + suffixLength === edit.newText.length) {\n\t\t\treturn new StringReplacement(edit.replaceRange.deltaStart(prefixLength).deltaEnd(-suffixLength), '');\n\t\t}\n\t}\n\n\treturn edit;\n}\n\nfunction reshapeMultiLineInsertion(edit: StringReplacement, textModel: ITextModel): StringReplacement {\n\tif (!edit.replaceRange.isEmpty) {\n\t\tthrow new BugIndicatingError('Unexpected original range');\n\t}\n\n\tif (edit.replaceRange.start === 0) {\n\t\treturn edit;\n\t}\n\n\tconst eol = textModel.getEOL();\n\tconst startPosition = textModel.getPositionAt(edit.replaceRange.start);\n\tconst startColumn = startPosition.column;\n\tconst startLineNumber = startPosition.lineNumber;\n\n\t// If the insertion ends with a new line and is inserted at the start of a line which has text,\n\t// we move the insertion to the end of the previous line if possible\n\tif (startColumn === 1 && startLineNumber > 1 && edit.newText.endsWith(eol) && !edit.newText.startsWith(eol)) {\n\t\treturn new StringReplacement(edit.replaceRange.delta(-1), eol + edit.newText.slice(0, -eol.length));\n\t}\n\n\treturn edit;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}