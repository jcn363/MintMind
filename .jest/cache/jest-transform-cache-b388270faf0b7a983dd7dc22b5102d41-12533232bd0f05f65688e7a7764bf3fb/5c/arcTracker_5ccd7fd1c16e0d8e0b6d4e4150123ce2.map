{"version":3,"names":["cov_6owb63pa2","actualCoverage","sumBy","LineEdit","ArcTracker","_valueBeforeTrackedEdit","_updatedTrackedEdit","_trackedEdit","constructor","trackedEdit","f","s","removeCommonSuffixPrefix","getValue","mapData","IsTrackedEditData","getOriginalCharacterCount","replacements","e","getNewLength","handleEdits","edit","_d","composedEdit","compose","getAcceptedRestrainedCharactersCount","data","isTrackedEdit","b","getDebugState","edits","map","range","replaceRange","toString","newText","getLineCountInfo","toStringEdit","r","le","fromStringEdit","deletedLineCount","lineRange","length","insertedLineCount","getNewLineRanges","deletedLineCounts","insertedLineCounts","getValues","arc","join","undefined"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/editTelemetry/common/arcTracker.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { sumBy } from '../../../../base/common/arrays.js';\nimport { LineEdit } from '../../../../editor/common/core/edits/lineEdit.js';\nimport { AnnotatedStringEdit, BaseStringEdit, IEditData } from '../../../../editor/common/core/edits/stringEdit.js';\nimport { AbstractText } from '../../../../editor/common/core/text/abstractText.js';\n\n/**\n * The ARC (accepted and retained characters) counts how many characters inserted by the initial suggestion (trackedEdit)\n * stay unmodified after a certain amount of time after acceptance.\n*/\nexport class ArcTracker {\n\tprivate _updatedTrackedEdit: AnnotatedStringEdit<IsTrackedEditData>;\n\tprivate _trackedEdit: BaseStringEdit;\n\n\tconstructor(\n\t\tprivate readonly _valueBeforeTrackedEdit: AbstractText,\n\t\ttrackedEdit: BaseStringEdit,\n\t) {\n\t\tthis._trackedEdit = trackedEdit.removeCommonSuffixPrefix(_valueBeforeTrackedEdit.getValue());\n\t\tthis._updatedTrackedEdit = this._trackedEdit.mapData(() => new IsTrackedEditData(true));\n\t}\n\n\tgetOriginalCharacterCount(): number {\n\t\treturn sumBy(this._trackedEdit.replacements, e => e.getNewLength());\n\t}\n\n\t/**\n\t * edit must apply to _updatedTrackedEdit.apply(_valueBeforeTrackedEdit)\n\t*/\n\thandleEdits(edit: BaseStringEdit): void {\n\t\tconst e = edit.mapData(_d => new IsTrackedEditData(false));\n\t\tconst composedEdit = this._updatedTrackedEdit.compose(e); // (still) applies to _valueBeforeTrackedEdit\n\n\t\t// TODO@hediet improve memory by using:\n\t\t// composedEdit = const onlyTrackedEdit = composedEdit.decomposeSplit(e => !e.data.isTrackedEdit).e2;\n\n\t\tthis._updatedTrackedEdit = composedEdit;\n\t}\n\n\tgetAcceptedRestrainedCharactersCount(): number {\n\t\tconst s = sumBy(this._updatedTrackedEdit.replacements, e => e.data.isTrackedEdit ? e.getNewLength() : 0);\n\t\treturn s;\n\t}\n\n\tgetDebugState(): unknown {\n\t\treturn {\n\t\t\tedits: this._updatedTrackedEdit.replacements.map(e => ({\n\t\t\t\trange: e.replaceRange.toString(),\n\t\t\t\tnewText: e.newText,\n\t\t\t\tisTrackedEdit: e.data.isTrackedEdit,\n\t\t\t}))\n\t\t};\n\t}\n\n\tpublic getLineCountInfo(): { deletedLineCounts: number; insertedLineCounts: number } {\n\t\tconst e = this._updatedTrackedEdit.toStringEdit(r => r.data.isTrackedEdit);\n\t\tconst le = LineEdit.fromStringEdit(e, this._valueBeforeTrackedEdit);\n\t\tconst deletedLineCount = sumBy(le.replacements, r => r.lineRange.length);\n\t\tconst insertedLineCount = sumBy(le.getNewLineRanges(), r => r.length);\n\t\treturn {\n\t\t\tdeletedLineCounts: deletedLineCount,\n\t\t\tinsertedLineCounts: insertedLineCount,\n\t\t};\n\t}\n\n\tpublic getValues(): unknown {\n\t\treturn {\n\t\t\tarc: this.getAcceptedRestrainedCharactersCount(),\n\t\t\t...this.getLineCountInfo(),\n\t\t};\n\t}\n}\n\nexport class IsTrackedEditData implements IEditData<IsTrackedEditData> {\n\tconstructor(\n\t\tpublic readonly isTrackedEdit: boolean\n\t) { }\n\n\tjoin(data: IsTrackedEditData): IsTrackedEditData | undefined {\n\t\tif (this.isTrackedEdit !== data.isTrackedEdit) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}