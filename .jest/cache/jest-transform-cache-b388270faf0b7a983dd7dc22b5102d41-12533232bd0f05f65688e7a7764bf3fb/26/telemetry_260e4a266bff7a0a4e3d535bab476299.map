{"version":3,"names":["cov_2iyjy8wxnk","actualCoverage","fs","join","Promises","buildTelemetryMessage","appRoot","extensionsPath","f","mergedTelemetry","s","Object","create","mergeTelemetry","contents","dirName","telemetryData","JSON","parse","b","dirs","files","readdir","file","fileStat","promises","stat","isDirectory","push","telemetryJsonFolders","dir","filter","length","folder","readFile","toString","stringify"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/telemetry/node/telemetry.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as fs from 'fs';\nimport { join } from '../../../base/common/path.js';\nimport { Promises } from '../../../base/node/pfs.js';\n\nexport async function buildTelemetryMessage(appRoot: string, extensionsPath?: string): Promise<string> {\n\tconst mergedTelemetry = Object.create(null);\n\n\t// Simple function to merge the telemetry into one json object\n\tconst mergeTelemetry = (contents: string, dirName: string) => {\n\t\tconst telemetryData = JSON.parse(contents);\n\t\tmergedTelemetry[dirName] = telemetryData;\n\t};\n\n\tif (extensionsPath) {\n\t\tconst dirs: string[] = [];\n\n\t\tconst files = await Promises.readdir(extensionsPath);\n\t\tfor (const file of files) {\n\t\t\ttry {\n\t\t\t\tconst fileStat = await fs.promises.stat(join(extensionsPath, file));\n\t\t\t\tif (fileStat.isDirectory()) {\n\t\t\t\t\tdirs.push(file);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// This handles case where broken symbolic links can cause statSync to throw and error\n\t\t\t}\n\t\t}\n\n\t\tconst telemetryJsonFolders: string[] = [];\n\t\tfor (const dir of dirs) {\n\t\t\tconst files = (await Promises.readdir(join(extensionsPath, dir))).filter(file => file === 'telemetry.json');\n\t\t\tif (files.length === 1) {\n\t\t\t\ttelemetryJsonFolders.push(dir); // // We know it contains a telemetry.json file so we add it to the list of folders which have one\n\t\t\t}\n\t\t}\n\n\t\tfor (const folder of telemetryJsonFolders) {\n\t\t\tconst contents = (await fs.promises.readFile(join(extensionsPath, folder, 'telemetry.json'))).toString();\n\t\t\tmergeTelemetry(contents, folder);\n\t\t}\n\t}\n\n\tlet contents = (await fs.promises.readFile(join(appRoot, 'telemetry-core.json'))).toString();\n\tmergeTelemetry(contents, 'vscode-core');\n\n\tcontents = (await fs.promises.readFile(join(appRoot, 'telemetry-extensions.json'))).toString();\n\tmergeTelemetry(contents, 'vscode-extensions');\n\n\treturn JSON.stringify(mergedTelemetry, null, 4);\n}\n"],"mappings":"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","ignoreList":[]}