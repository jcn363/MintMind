{"version":3,"names":["cov_1kkbmk7la3","actualCoverage","constants","FSConstants","promises","FSPromises","join","env","XDG_SESSION_TYPE","s","WAYLAND_DISPLAY","XDG_RUNTIME_DIR","getDisplayProtocol","errorLogger","f","xdgSessionType","b","waylandDisplay","xdgRuntimeDir","waylandServerPipe","access","R_OK","err","getCodeDisplayProtocol","displayProtocol","ozonePlatform"],"sources":["/home/user/Desktop/MintMind/src/vs/base/node/osDisplayProtocolInfo.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { constants as FSConstants, promises as FSPromises } from 'fs';\nimport { join } from '../common/path.js';\nimport { env } from '../common/process.js';\n\nconst XDG_SESSION_TYPE = 'XDG_SESSION_TYPE';\nconst WAYLAND_DISPLAY = 'WAYLAND_DISPLAY';\nconst XDG_RUNTIME_DIR = 'XDG_RUNTIME_DIR';\n\nconst enum DisplayProtocolType {\n\tWayland = 'wayland',\n\tXWayland = 'xwayland',\n\tX11 = 'x11',\n\tUnknown = 'unknown'\n}\n\nexport async function getDisplayProtocol(errorLogger: (error: any) => void): Promise<DisplayProtocolType> {\n\tconst xdgSessionType = env[XDG_SESSION_TYPE];\n\n\tif (xdgSessionType) {\n\t\t// If XDG_SESSION_TYPE is set, return its value if it's either 'wayland' or 'x11'.\n\t\t// We assume that any value other than 'wayland' or 'x11' is an error or unexpected,\n\t\t// hence 'unknown' is returned.\n\t\treturn xdgSessionType === DisplayProtocolType.Wayland || xdgSessionType === DisplayProtocolType.X11 ? xdgSessionType : DisplayProtocolType.Unknown;\n\t} else {\n\t\tconst waylandDisplay = env[WAYLAND_DISPLAY];\n\n\t\tif (!waylandDisplay) {\n\t\t\t// If WAYLAND_DISPLAY is empty, then the session is x11.\n\t\t\treturn DisplayProtocolType.X11;\n\t\t} else {\n\t\t\tconst xdgRuntimeDir = env[XDG_RUNTIME_DIR];\n\n\t\t\tif (!xdgRuntimeDir) {\n\t\t\t\t// If XDG_RUNTIME_DIR is empty, then the session can only be guessed.\n\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t\t} else {\n\t\t\t\t// Check for the presence of the file $XDG_RUNTIME_DIR/wayland-0.\n\t\t\t\tconst waylandServerPipe = join(xdgRuntimeDir, 'wayland-0');\n\n\t\t\t\ttry {\n\t\t\t\t\tawait FSPromises.access(waylandServerPipe, FSConstants.R_OK);\n\n\t\t\t\t\t// If the file exists, then the session is wayland.\n\t\t\t\t\treturn DisplayProtocolType.Wayland;\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// If the file does not exist or an error occurs, we guess 'unknown'\n\t\t\t\t\t// since WAYLAND_DISPLAY was set but no wayland-0 pipe could be confirmed.\n\t\t\t\t\terrorLogger(err);\n\t\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nexport function getCodeDisplayProtocol(displayProtocol: DisplayProtocolType, ozonePlatform: string | undefined): DisplayProtocolType {\n\tif (!ozonePlatform) {\n\t\treturn displayProtocol === DisplayProtocolType.Wayland ? DisplayProtocolType.XWayland : DisplayProtocolType.X11;\n\t} else {\n\t\tswitch (ozonePlatform) {\n\t\t\tcase 'auto':\n\t\t\t\treturn displayProtocol;\n\t\t\tcase 'x11':\n\t\t\t\treturn displayProtocol === DisplayProtocolType.Wayland ? DisplayProtocolType.XWayland : DisplayProtocolType.X11;\n\t\t\tcase 'wayland':\n\t\t\t\treturn DisplayProtocolType.Wayland;\n\t\t\tdefault:\n\t\t\t\treturn DisplayProtocolType.Unknown;\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}