{"version":3,"names":["cov_1xzw3bbzs8","actualCoverage","extHostProtocol","NotebookEdit","TextEdit","URI","asArray","ExtHostCodeMapper","_providerHandlePool","s","_proxy","providers","Map","constructor","mainContext","f","getProxy","MainContext","MainThreadCodeMapper","$mapCode","handle","internalRequest","token","provider","get","b","Error","stream","textEdit","target","edits","$handleProgress","requestId","uri","map","from","notebookEdit","request","location","chatRequestId","chatRequestModel","chatSessionId","codeBlocks","block","code","resource","revive","markdownBeforeBlock","result","provideMappedEdits","registerMappedEditsProvider","extension","$registerCodeMapperProvider","displayName","name","set","dispose","$unregisterCodeMapperProvider"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/api/common/extHostCodeMapper.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as vscode from 'vscode';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { IExtensionDescription } from '../../../platform/extensions/common/extensions.js';\nimport { ICodeMapperResult } from '../../contrib/chat/common/chatCodeMapperService.js';\nimport * as extHostProtocol from './extHost.protocol.js';\nimport { NotebookEdit, TextEdit } from './extHostTypeConverters.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { asArray } from '../../../base/common/arrays.js';\n\nexport class ExtHostCodeMapper implements extHostProtocol.ExtHostCodeMapperShape {\n\n\tprivate static _providerHandlePool: number = 0;\n\tprivate readonly _proxy: extHostProtocol.MainThreadCodeMapperShape;\n\tprivate readonly providers = new Map<number, vscode.MappedEditsProvider2>();\n\n\tconstructor(\n\t\tmainContext: extHostProtocol.IMainContext\n\t) {\n\t\tthis._proxy = mainContext.getProxy(extHostProtocol.MainContext.MainThreadCodeMapper);\n\t}\n\n\tasync $mapCode(handle: number, internalRequest: extHostProtocol.ICodeMapperRequestDto, token: CancellationToken): Promise<ICodeMapperResult | null> {\n\t\t// Received request to map code from the main thread\n\t\tconst provider = this.providers.get(handle);\n\t\tif (!provider) {\n\t\t\tthrow new Error(`Received request to map code for unknown provider handle ${handle}`);\n\t\t}\n\n\t\t// Construct a response object to pass to the provider\n\t\tconst stream: vscode.MappedEditsResponseStream = {\n\t\t\ttextEdit: (target: vscode.Uri, edits: vscode.TextEdit | vscode.TextEdit[]) => {\n\t\t\t\tedits = asArray(edits);\n\t\t\t\tthis._proxy.$handleProgress(internalRequest.requestId, {\n\t\t\t\t\turi: target,\n\t\t\t\t\tedits: edits.map(TextEdit.from)\n\t\t\t\t});\n\t\t\t},\n\t\t\tnotebookEdit: (target: vscode.Uri, edits: vscode.NotebookEdit | vscode.NotebookEdit[]) => {\n\t\t\t\tedits = asArray(edits);\n\t\t\t\tthis._proxy.$handleProgress(internalRequest.requestId, {\n\t\t\t\t\turi: target,\n\t\t\t\t\tedits: edits.map(NotebookEdit.from)\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tconst request: vscode.MappedEditsRequest = {\n\t\t\tlocation: internalRequest.location,\n\t\t\tchatRequestId: internalRequest.chatRequestId,\n\t\t\tchatRequestModel: internalRequest.chatRequestModel,\n\t\t\tchatSessionId: internalRequest.chatSessionId,\n\t\t\tcodeBlocks: internalRequest.codeBlocks.map(block => {\n\t\t\t\treturn {\n\t\t\t\t\tcode: block.code,\n\t\t\t\t\tresource: URI.revive(block.resource),\n\t\t\t\t\tmarkdownBeforeBlock: block.markdownBeforeBlock\n\t\t\t\t};\n\t\t\t})\n\t\t};\n\n\t\tconst result = await provider.provideMappedEdits(request, stream, token);\n\t\treturn result ?? null;\n\t}\n\n\tregisterMappedEditsProvider(extension: IExtensionDescription, provider: vscode.MappedEditsProvider2): vscode.Disposable {\n\t\tconst handle = ExtHostCodeMapper._providerHandlePool++;\n\t\tthis._proxy.$registerCodeMapperProvider(handle, extension.displayName ?? extension.name);\n\t\tthis.providers.set(handle, provider);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\treturn this._proxy.$unregisterCodeMapperProvider(handle);\n\t\t\t}\n\t\t};\n\t}\n}\n"],"mappings":"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","ignoreList":[]}