{"version":3,"names":["cov_10k57xo47k","actualCoverage","Codicon","isCodeEditor","isDiffEditor","EditorAction2","EmbeddedDiffEditorWidget","EmbeddedCodeEditorWidget","EditorContextKeys","InlineChatController","InlineChatController1","InlineChatController2","InlineChatRunOptions","ACTION_ACCEPT_CHANGES","CTX_INLINE_CHAT_HAS_STASHED_SESSION","CTX_INLINE_CHAT_FOCUSED","CTX_INLINE_CHAT_INNER_CURSOR_FIRST","CTX_INLINE_CHAT_INNER_CURSOR_LAST","CTX_INLINE_CHAT_VISIBLE","CTX_INLINE_CHAT_OUTER_CURSOR_POSITION","MENU_INLINE_CHAT_WIDGET_STATUS","CTX_INLINE_CHAT_REQUEST_IN_PROGRESS","CTX_INLINE_CHAT_RESPONSE_TYPE","ACTION_REGENERATE_RESPONSE","ACTION_VIEW_IN_CHAT","ACTION_TOGGLE_DIFF","CTX_INLINE_CHAT_CHANGE_HAS_DIFF","CTX_INLINE_CHAT_CHANGE_SHOWS_DIFF","MENU_INLINE_CHAT_ZONE","ACTION_DISCARD_CHANGES","CTX_INLINE_CHAT_POSSIBLE","ACTION_START","MENU_INLINE_CHAT_SIDE","CTX_INLINE_CHAT_V2_ENABLED","CTX_INLINE_CHAT_V1_ENABLED","ctxHasEditorModification","ctxHasRequestInProgress","localize","localize2","Action2","MenuId","ContextKeyExpr","IContextKeyService","IInstantiationService","IEditorService","ICodeEditorService","CONTEXT_ACCESSIBILITY_MODE_ENABLED","CommandsRegistry","registerIcon","IPreferencesService","ILogService","IChatService","ChatContextKeys","IChatWidgetService","IInlineChatSessionService","ChatAgentLocation","s","registerCommandAlias","START_INLINE_CHAT","sparkle","_holdForSpeech","undefined","setHoldForSpeech","holdForSpeech","f","inlineChatContextKey","and","or","writable","editorSimpleInput","negate","StartSessionAction","constructor","id","title","category","AbstractInline1ChatAction","f1","precondition","keybinding","when","focus","weight","primary","icon","menu","EditorContext","group","order","ChatTitleBarMenu","run","accessor","args","codeEditorService","get","editor","getActiveCodeEditor","b","isSimpleWidget","invokeWithinContext","editorAccessor","kbService","logService","enabled","contextMatchesRules","desc","debug","serialize","_runEditorCommand","_args","ctrl","invokeFunction","options","arg","isInlineChatRunOptions","FocusInlineChat","editorTextFocus","isEqualTo","isEmbeddedDiffEditor","runEditorCommand","_accessor","UnstashSessionAction","session","unstashLastSession","existingSession","massageMenu","Array","isArray","entry","editorService","activeTextEditorControl","getModifiedEditor","warn","getModel","uri","getParentEditor","diffEditor","listDiffEditors","getOriginalEditor","runInlineChatCommand","ArrowOutUpAction","_editor","arrowOut","ArrowOutDownAction","AcceptChanges","shortTitle","check","inputHasText","toNegated","hunk","acceptHunk","DiscardHunkAction","chromeClose","discardHunk","RerunAction","refresh","notEqualsTo","chatService","chatWidgetService","model","chatWidget","viewModel","lastRequest","getRequests","at","widget","getWidgetBySessionResource","sessionResource","resendRequest","noCommandDetection","attempt","location","userSelectedModelId","input","currentLanguageModel","CloseAction","close","cancelSession","ConfigureInlineChatAction","settingsGear","openSettings","query","MoveToNextHunk","moveHunk","MoveToPreviousHunk","ViewInChatAction","chatSparkle","inChatInput","viewInChat","ToggleDiffForChange","diffSingle","toggled","condition","hunkInfo","toggleDiff","AbstractInline2ChatAction","KeepOrUndoSessionAction","_keep","_ctrl","inlineChatSessions","hasModel","textModel","getSession2","editingSession","accept","reject","setSelection","getSelection","collapseToStart","dispose","KeepSessionAction2","EditorInline","inputHasFocus","ChatEditorInlineExecute","UndoAndCloseSessionAction2"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/inlineChat/browser/inlineChatActions.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { ICodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../../editor/browser/editorExtensions.js';\nimport { EmbeddedDiffEditorWidget } from '../../../../editor/browser/widget/diffEditor/embeddedDiffEditorWidget.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { EditorContextKeys } from '../../../../editor/common/editorContextKeys.js';\nimport { InlineChatController, InlineChatController1, InlineChatController2, InlineChatRunOptions } from './inlineChatController.js';\nimport { ACTION_ACCEPT_CHANGES, CTX_INLINE_CHAT_HAS_STASHED_SESSION, CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_FIRST, CTX_INLINE_CHAT_INNER_CURSOR_LAST, CTX_INLINE_CHAT_VISIBLE, CTX_INLINE_CHAT_OUTER_CURSOR_POSITION, MENU_INLINE_CHAT_WIDGET_STATUS, CTX_INLINE_CHAT_REQUEST_IN_PROGRESS, CTX_INLINE_CHAT_RESPONSE_TYPE, InlineChatResponseType, ACTION_REGENERATE_RESPONSE, ACTION_VIEW_IN_CHAT, ACTION_TOGGLE_DIFF, CTX_INLINE_CHAT_CHANGE_HAS_DIFF, CTX_INLINE_CHAT_CHANGE_SHOWS_DIFF, MENU_INLINE_CHAT_ZONE, ACTION_DISCARD_CHANGES, CTX_INLINE_CHAT_POSSIBLE, ACTION_START, MENU_INLINE_CHAT_SIDE, CTX_INLINE_CHAT_V2_ENABLED, CTX_INLINE_CHAT_V1_ENABLED } from '../common/inlineChat.js';\nimport { ctxHasEditorModification, ctxHasRequestInProgress } from '../../chat/browser/chatEditing/chatEditingEditorContextKeys.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { Action2, IAction2Options, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../platform/accessibility/common/accessibility.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { IChatService } from '../../chat/common/chatService.js';\nimport { ChatContextKeys } from '../../chat/common/chatContextKeys.js';\nimport { HunkInformation } from './inlineChatSession.js';\nimport { IChatWidgetService } from '../../chat/browser/chat.js';\nimport { IInlineChatSessionService } from './inlineChatSessionService.js';\nimport { ChatAgentLocation } from '../../chat/common/constants.js';\n\n\nCommandsRegistry.registerCommandAlias('interactiveEditor.start', 'inlineChat.start');\nCommandsRegistry.registerCommandAlias('interactive.acceptChanges', ACTION_ACCEPT_CHANGES);\n\n\nexport const START_INLINE_CHAT = registerIcon('start-inline-chat', Codicon.sparkle, localize('startInlineChat', 'Icon which spawns the inline chat from the editor toolbar.'));\n\n// some gymnastics to enable hold for speech without moving the StartSessionAction into the electron-layer\n\nexport interface IHoldForSpeech {\n\t(accessor: ServicesAccessor, controller: InlineChatController, source: Action2): void;\n}\nlet _holdForSpeech: IHoldForSpeech | undefined = undefined;\nexport function setHoldForSpeech(holdForSpeech: IHoldForSpeech) {\n\t_holdForSpeech = holdForSpeech;\n}\n\nconst inlineChatContextKey = ContextKeyExpr.and(\n\tContextKeyExpr.or(CTX_INLINE_CHAT_V1_ENABLED, CTX_INLINE_CHAT_V2_ENABLED),\n\tCTX_INLINE_CHAT_POSSIBLE,\n\tEditorContextKeys.writable,\n\tEditorContextKeys.editorSimpleInput.negate()\n);\n\nexport class StartSessionAction extends Action2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_START,\n\t\t\ttitle: localize2('run', 'Open Inline Chat'),\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tf1: true,\n\t\t\tprecondition: inlineChatContextKey,\n\t\t\tkeybinding: {\n\t\t\t\twhen: EditorContextKeys.focus,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyI\n\t\t\t},\n\t\t\ticon: START_INLINE_CHAT,\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.EditorContext,\n\t\t\t\tgroup: '1_chat',\n\t\t\t\torder: 3,\n\t\t\t\twhen: inlineChatContextKey\n\t\t\t}, {\n\t\t\t\tid: MenuId.ChatTitleBarMenu,\n\t\t\t\tgroup: 'a_open',\n\t\t\t\torder: 3,\n\t\t\t}]\n\t\t});\n\t}\n\toverride run(accessor: ServicesAccessor, ...args: unknown[]): any {\n\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst editor = codeEditorService.getActiveCodeEditor();\n\t\tif (!editor || editor.isSimpleWidget) {\n\t\t\t// well, at least we tried...\n\t\t\treturn;\n\t\t}\n\n\n\t\t// precondition does hold\n\t\treturn editor.invokeWithinContext((editorAccessor) => {\n\t\t\tconst kbService = editorAccessor.get(IContextKeyService);\n\t\t\tconst logService = editorAccessor.get(ILogService);\n\t\t\tconst enabled = kbService.contextMatchesRules(this.desc.precondition ?? undefined);\n\t\t\tif (!enabled) {\n\t\t\t\tlogService.debug(`[EditorAction2] NOT running command because its precondition is FALSE`, this.desc.id, this.desc.precondition?.serialize());\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn this._runEditorCommand(editorAccessor, editor, ...args);\n\t\t});\n\t}\n\n\tprivate _runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\n\t\tconst ctrl = InlineChatController.get(editor);\n\t\tif (!ctrl) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_holdForSpeech) {\n\t\t\taccessor.get(IInstantiationService).invokeFunction(_holdForSpeech, ctrl, this);\n\t\t}\n\n\t\tlet options: InlineChatRunOptions | undefined;\n\t\tconst arg = _args[0];\n\t\tif (arg && InlineChatRunOptions.isInlineChatRunOptions(arg)) {\n\t\t\toptions = arg;\n\t\t}\n\t\tInlineChatController.get(editor)?.run({ ...options });\n\t}\n}\n\nexport class FocusInlineChat extends EditorAction2 {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.focus',\n\t\t\ttitle: localize2('focus', \"Focus Input\"),\n\t\t\tf1: true,\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, CTX_INLINE_CHAT_VISIBLE, CTX_INLINE_CHAT_FOCUSED.negate(), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\t\tkeybinding: [{\n\t\t\t\tweight: KeybindingWeight.EditorCore + 10, // win against core_command\n\t\t\t\twhen: ContextKeyExpr.and(CTX_INLINE_CHAT_OUTER_CURSOR_POSITION.isEqualTo('above'), EditorContextKeys.isEmbeddedDiffEditor.negate()),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow,\n\t\t\t}, {\n\t\t\t\tweight: KeybindingWeight.EditorCore + 10, // win against core_command\n\t\t\t\twhen: ContextKeyExpr.and(CTX_INLINE_CHAT_OUTER_CURSOR_POSITION.isEqualTo('below'), EditorContextKeys.isEmbeddedDiffEditor.negate()),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow,\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride runEditorCommand(_accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tInlineChatController.get(editor)?.focus();\n\t}\n}\n\n//#region --- VERSION 1\n\nexport class UnstashSessionAction extends EditorAction2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.unstash',\n\t\t\ttitle: localize2('unstash', \"Resume Last Dismissed Inline Chat\"),\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_HAS_STASHED_SESSION, EditorContextKeys.writable),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyZ,\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async runEditorCommand(_accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tconst ctrl = InlineChatController1.get(editor);\n\t\tif (ctrl) {\n\t\t\tconst session = ctrl.unstashLastSession();\n\t\t\tif (session) {\n\t\t\t\tctrl.run({\n\t\t\t\t\texistingSession: session,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport abstract class AbstractInline1ChatAction extends EditorAction2 {\n\n\tstatic readonly category = localize2('cat', \"Inline Chat\");\n\n\tconstructor(desc: IAction2Options) {\n\n\t\tconst massageMenu = (menu: IAction2Options['menu'] | undefined) => {\n\t\t\tif (Array.isArray(menu)) {\n\t\t\t\tfor (const entry of menu) {\n\t\t\t\t\tentry.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V1_ENABLED, entry.when);\n\t\t\t\t}\n\t\t\t} else if (menu) {\n\t\t\t\tmenu.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V1_ENABLED, menu.when);\n\t\t\t}\n\t\t};\n\t\tif (Array.isArray(desc.menu)) {\n\t\t\tmassageMenu(desc.menu);\n\t\t} else {\n\t\t\tmassageMenu(desc.menu);\n\t\t}\n\n\t\tsuper({\n\t\t\t...desc,\n\t\t\tcategory: AbstractInline1ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_V1_ENABLED, desc.precondition)\n\t\t});\n\t}\n\n\toverride runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst logService = accessor.get(ILogService);\n\n\t\tlet ctrl = InlineChatController1.get(editor);\n\t\tif (!ctrl) {\n\t\t\tconst { activeTextEditorControl } = editorService;\n\t\t\tif (isCodeEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl;\n\t\t\t} else if (isDiffEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl.getModifiedEditor();\n\t\t\t}\n\t\t\tctrl = InlineChatController1.get(editor);\n\t\t}\n\n\t\tif (!ctrl) {\n\t\t\tlogService.warn('[IE] NO controller found for action', this.desc.id, editor.getModel()?.uri);\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\t\teditor = editor.getParentEditor();\n\t\t}\n\t\tif (!ctrl) {\n\t\t\tfor (const diffEditor of accessor.get(ICodeEditorService).listDiffEditors()) {\n\t\t\t\tif (diffEditor.getOriginalEditor() === editor || diffEditor.getModifiedEditor() === editor) {\n\t\t\t\t\tif (diffEditor instanceof EmbeddedDiffEditorWidget) {\n\t\t\t\t\t\tthis.runEditorCommand(accessor, diffEditor.getParentEditor(), ..._args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.runInlineChatCommand(accessor, ctrl, editor, ..._args);\n\t}\n\n\tabstract runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, editor: ICodeEditor, ...args: unknown[]): void;\n}\n\nexport class ArrowOutUpAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.arrowOutUp',\n\t\t\ttitle: localize('arrowUp', 'Cursor Up'),\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_FIRST, EditorContextKeys.isEmbeddedDiffEditor.negate(), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorCore,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow\n\t\t\t}\n\t\t});\n\t}\n\n\trunInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): void {\n\t\tctrl.arrowOut(true);\n\t}\n}\n\nexport class ArrowOutDownAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.arrowOutDown',\n\t\t\ttitle: localize('arrowDown', 'Cursor Down'),\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_LAST, EditorContextKeys.isEmbeddedDiffEditor.negate(), CONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()),\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorCore,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow\n\t\t\t}\n\t\t});\n\t}\n\n\trunInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): void {\n\t\tctrl.arrowOut(false);\n\t}\n}\n\nexport class AcceptChanges extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_ACCEPT_CHANGES,\n\t\t\ttitle: localize2('apply1', \"Accept Changes\"),\n\t\t\tshortTitle: localize('apply2', 'Accept'),\n\t\t\ticon: Codicon.check,\n\t\t\tf1: true,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_VISIBLE),\n\t\t\tkeybinding: [{\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 10,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t}],\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_REQUEST_IN_PROGRESS.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.MessagesAndEdits)\n\t\t\t\t),\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_ZONE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1,\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride async runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, hunk?: HunkInformation | any): Promise<void> {\n\t\tctrl.acceptHunk(hunk);\n\t}\n}\n\nexport class DiscardHunkAction extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_DISCARD_CHANGES,\n\t\t\ttitle: localize('discard', 'Discard'),\n\t\t\ticon: Codicon.chromeClose,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_ZONE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 2\n\t\t\t}],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.MessagesAndEdits)\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, hunk?: HunkInformation | any): Promise<void> {\n\t\treturn ctrl.discardHunk(hunk);\n\t}\n}\n\nexport class RerunAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_REGENERATE_RESPONSE,\n\t\t\ttitle: localize2('chat.rerun.label', \"Rerun Request\"),\n\t\t\tshortTitle: localize('rerun', 'Rerun'),\n\t\t\tf1: false,\n\t\t\ticon: Codicon.refresh,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tmenu: {\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 5,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_REQUEST_IN_PROGRESS.negate(),\n\t\t\t\t\tCTX_INLINE_CHAT_RESPONSE_TYPE.notEqualsTo(InlineChatResponseType.None)\n\t\t\t\t)\n\t\t\t},\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyR\n\t\t\t}\n\t\t});\n\t}\n\n\toverride async runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst model = ctrl.chatWidget.viewModel?.model;\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastRequest = model.getRequests().at(-1);\n\t\tif (lastRequest) {\n\t\t\tconst widget = chatWidgetService.getWidgetBySessionResource(model.sessionResource);\n\t\t\tawait chatService.resendRequest(lastRequest, {\n\t\t\t\tnoCommandDetection: false,\n\t\t\t\tattempt: lastRequest.attempt + 1,\n\t\t\t\tlocation: ctrl.chatWidget.location,\n\t\t\t\tuserSelectedModelId: widget?.input.currentLanguageModel\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class CloseAction extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.close',\n\t\t\ttitle: localize('close', 'Close'),\n\t\t\ticon: Codicon.close,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.EditorContrib + 1,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 1,\n\t\t\t\twhen: CTX_INLINE_CHAT_REQUEST_IN_PROGRESS.negate()\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_SIDE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.None)\n\t\t\t}]\n\t\t});\n\t}\n\n\tasync runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\tctrl.cancelSession();\n\t}\n}\n\nexport class ConfigureInlineChatAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.configure',\n\t\t\ttitle: localize2('configure', 'Configure Inline Chat'),\n\t\t\ticon: Codicon.settingsGear,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tf1: true,\n\t\t\tmenu: {\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: 'zzz',\n\t\t\t\torder: 5\n\t\t\t}\n\t\t});\n\t}\n\n\tasync runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\taccessor.get(IPreferencesService).openSettings({ query: 'inlineChat' });\n\t}\n}\n\nexport class MoveToNextHunk extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.moveToNextHunk',\n\t\t\ttitle: localize2('moveToNextHunk', 'Move to Next Change'),\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tf1: true,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyCode.F7\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tctrl.moveHunk(true);\n\t}\n}\n\nexport class MoveToPreviousHunk extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'inlineChat.moveToPreviousHunk',\n\t\t\ttitle: localize2('moveToPreviousHunk', 'Move to Previous Change'),\n\t\t\tf1: true,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.Shift | KeyCode.F7\n\t\t\t}\n\t\t});\n\t}\n\n\toverride runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController1, editor: ICodeEditor, ...args: unknown[]): void {\n\t\tctrl.moveHunk(false);\n\t}\n}\n\nexport class ViewInChatAction extends AbstractInline1ChatAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_VIEW_IN_CHAT,\n\t\t\ttitle: localize('viewInChat', 'View in Chat'),\n\t\t\ticon: Codicon.chatSparkle,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: 'more',\n\t\t\t\torder: 1,\n\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.notEqualsTo(InlineChatResponseType.Messages)\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: '0_main',\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated(),\n\t\t\t\t\tCTX_INLINE_CHAT_RESPONSE_TYPE.isEqualTo(InlineChatResponseType.Messages),\n\t\t\t\t\tCTX_INLINE_CHAT_REQUEST_IN_PROGRESS.negate()\n\t\t\t\t)\n\t\t\t}],\n\t\t\tkeybinding: {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow,\n\t\t\t\twhen: ChatContextKeys.inChatInput\n\t\t\t}\n\t\t});\n\t}\n\toverride runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, ..._args: unknown[]) {\n\t\treturn ctrl.viewInChat();\n\t}\n}\n\nexport class ToggleDiffForChange extends AbstractInline1ChatAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: ACTION_TOGGLE_DIFF,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_VISIBLE, CTX_INLINE_CHAT_CHANGE_HAS_DIFF),\n\t\t\ttitle: localize2('showChanges', 'Toggle Changes'),\n\t\t\ticon: Codicon.diffSingle,\n\t\t\ttoggled: {\n\t\t\t\tcondition: CTX_INLINE_CHAT_CHANGE_SHOWS_DIFF,\n\t\t\t},\n\t\t\tmenu: [{\n\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_STATUS,\n\t\t\t\tgroup: 'zzz',\n\t\t\t\torder: 1,\n\t\t\t}, {\n\t\t\t\tid: MENU_INLINE_CHAT_ZONE,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\twhen: CTX_INLINE_CHAT_CHANGE_HAS_DIFF,\n\t\t\t\torder: 2\n\t\t\t}]\n\t\t});\n\t}\n\n\toverride runInlineChatCommand(_accessor: ServicesAccessor, ctrl: InlineChatController1, _editor: ICodeEditor, hunkInfo: HunkInformation | any): void {\n\t\tctrl.toggleDiff(hunkInfo);\n\t}\n}\n\n//#endregion\n\n\n//#region --- VERSION 2\nabstract class AbstractInline2ChatAction extends EditorAction2 {\n\n\tstatic readonly category = localize2('cat', \"Inline Chat\");\n\n\tconstructor(desc: IAction2Options) {\n\t\tconst massageMenu = (menu: IAction2Options['menu'] | undefined) => {\n\t\t\tif (Array.isArray(menu)) {\n\t\t\t\tfor (const entry of menu) {\n\t\t\t\t\tentry.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V2_ENABLED, entry.when);\n\t\t\t\t}\n\t\t\t} else if (menu) {\n\t\t\t\tmenu.when = ContextKeyExpr.and(CTX_INLINE_CHAT_V2_ENABLED, menu.when);\n\t\t\t}\n\t\t};\n\t\tif (Array.isArray(desc.menu)) {\n\t\t\tmassageMenu(desc.menu);\n\t\t} else {\n\t\t\tmassageMenu(desc.menu);\n\t\t}\n\n\t\tsuper({\n\t\t\t...desc,\n\t\t\tcategory: AbstractInline2ChatAction.category,\n\t\t\tprecondition: ContextKeyExpr.and(CTX_INLINE_CHAT_V2_ENABLED, desc.precondition)\n\t\t});\n\t}\n\n\toverride runEditorCommand(accessor: ServicesAccessor, editor: ICodeEditor, ..._args: unknown[]) {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst logService = accessor.get(ILogService);\n\n\t\tlet ctrl = InlineChatController2.get(editor);\n\t\tif (!ctrl) {\n\t\t\tconst { activeTextEditorControl } = editorService;\n\t\t\tif (isCodeEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl;\n\t\t\t} else if (isDiffEditor(activeTextEditorControl)) {\n\t\t\t\teditor = activeTextEditorControl.getModifiedEditor();\n\t\t\t}\n\t\t\tctrl = InlineChatController2.get(editor);\n\t\t}\n\n\t\tif (!ctrl) {\n\t\t\tlogService.warn('[IE] NO controller found for action', this.desc.id, editor.getModel()?.uri);\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof EmbeddedCodeEditorWidget) {\n\t\t\teditor = editor.getParentEditor();\n\t\t}\n\t\tif (!ctrl) {\n\t\t\tfor (const diffEditor of accessor.get(ICodeEditorService).listDiffEditors()) {\n\t\t\t\tif (diffEditor.getOriginalEditor() === editor || diffEditor.getModifiedEditor() === editor) {\n\t\t\t\t\tif (diffEditor instanceof EmbeddedDiffEditorWidget) {\n\t\t\t\t\t\tthis.runEditorCommand(accessor, diffEditor.getParentEditor(), ..._args);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis.runInlineChatCommand(accessor, ctrl, editor, ..._args);\n\t}\n\n\tabstract runInlineChatCommand(accessor: ServicesAccessor, ctrl: InlineChatController2, editor: ICodeEditor, ...args: unknown[]): void;\n}\n\nclass KeepOrUndoSessionAction extends AbstractInline2ChatAction {\n\n\tconstructor(private readonly _keep: boolean, desc: IAction2Options) {\n\t\tsuper(desc);\n\t}\n\n\toverride async runInlineChatCommand(accessor: ServicesAccessor, _ctrl: InlineChatController2, editor: ICodeEditor, ..._args: unknown[]): Promise<void> {\n\t\tconst inlineChatSessions = accessor.get(IInlineChatSessionService);\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tconst textModel = editor.getModel();\n\t\tconst session = inlineChatSessions.getSession2(textModel.uri);\n\t\tif (session) {\n\t\t\tif (this._keep) {\n\t\t\t\tawait session.editingSession.accept();\n\t\t\t} else {\n\t\t\t\tawait session.editingSession.reject();\n\t\t\t}\n\t\t\teditor.setSelection(editor.getSelection().collapseToStart());\n\t\t\tsession.dispose();\n\t\t}\n\t}\n}\n\nexport class KeepSessionAction2 extends KeepOrUndoSessionAction {\n\tconstructor() {\n\t\tsuper(true, {\n\t\t\tid: 'inlineChat2.keep',\n\t\t\ttitle: localize2('Keep', \"Keep\"),\n\t\t\tf1: true,\n\t\t\ticon: Codicon.check,\n\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\tCTX_INLINE_CHAT_VISIBLE,\n\t\t\t\tctxHasRequestInProgress.negate(),\n\t\t\t\tctxHasEditorModification,\n\t\t\t\tChatContextKeys.location.isEqualTo(ChatAgentLocation.EditorInline)\n\t\t\t),\n\t\t\tkeybinding: [{\n\t\t\t\twhen: ContextKeyExpr.and(ChatContextKeys.inputHasFocus, ChatContextKeys.inputHasText.negate()),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyCode.Enter\n\t\t\t}, {\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 10,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter\n\t\t\t}],\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 4,\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tctxHasRequestInProgress.negate(),\n\t\t\t\t\tctxHasEditorModification,\n\t\t\t\t\tChatContextKeys.inputHasText.toNegated()\n\t\t\t\t),\n\t\t\t}]\n\t\t});\n\t}\n}\n\n\nexport class UndoAndCloseSessionAction2 extends KeepOrUndoSessionAction {\n\n\tconstructor() {\n\t\tsuper(false, {\n\t\t\tid: 'inlineChat2.close',\n\t\t\ttitle: localize2('close2', \"Close\"),\n\t\t\tf1: true,\n\t\t\ticon: Codicon.close,\n\t\t\tprecondition: CTX_INLINE_CHAT_VISIBLE,\n\t\t\tkeybinding: [{\n\t\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\t\tContextKeyExpr.and(EditorContextKeys.focus, ctxHasEditorModification.negate()),\n\t\t\t\t\tChatContextKeys.inputHasFocus,\n\t\t\t\t),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib + 1,\n\t\t\t\tprimary: KeyCode.Escape,\n\t\t\t}],\n\t\t\tmenu: [{\n\t\t\t\tid: MenuId.ChatEditorInlineExecute,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 100\n\t\t\t}]\n\t\t});\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}