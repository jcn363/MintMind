{"version":3,"names":["cov_wicz0ap70","actualCoverage","binarySearch","isFalsyOrEmpty","Range","BracketSelectionRangeProvider","WordDistance","None","s","distance","f","create","service","editor","getOption","localityBonus","b","hasModel","model","getModel","position","getPosition","canComputeWordRanges","uri","ranges","provideSelectionRanges","length","wordRanges","computeWordRanges","range","wordUntilPos","getWordUntilPosition","word","anchor","item","equals","kind","label","wordLines","idx","fromPositions","compareRangesUsingStarts","bestWordRange","Math","max","blockDistance","containsRange"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/suggest/browser/wordDistance.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { IPosition } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CompletionItem, CompletionItemKind } from '../../../common/languages.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\n\nexport abstract class WordDistance {\n\n\tstatic readonly None = new class extends WordDistance {\n\t\tdistance() { return 0; }\n\t};\n\n\tstatic async create(service: IEditorWorkerService, editor: ICodeEditor): Promise<WordDistance> {\n\n\t\tif (!editor.getOption(EditorOption.suggest).localityBonus) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tif (!editor.hasModel()) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tconst model = editor.getModel();\n\t\tconst position = editor.getPosition();\n\n\t\tif (!service.canComputeWordRanges(model.uri)) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tconst [ranges] = await new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n\t\tif (ranges.length === 0) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\tconst wordRanges = await service.computeWordRanges(model.uri, ranges[0].range);\n\t\tif (!wordRanges) {\n\t\t\treturn WordDistance.None;\n\t\t}\n\n\t\t// remove current word\n\t\tconst wordUntilPos = model.getWordUntilPosition(position);\n\t\tdelete wordRanges[wordUntilPos.word];\n\n\t\treturn new class extends WordDistance {\n\t\t\tdistance(anchor: IPosition, item: CompletionItem) {\n\t\t\t\tif (!position.equals(editor.getPosition())) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\t\t\t\tif (item.kind === CompletionItemKind.Keyword) {\n\t\t\t\t\treturn 2 << 20;\n\t\t\t\t}\n\t\t\t\tconst word = typeof item.label === 'string' ? item.label : item.label.label;\n\t\t\t\tconst wordLines = wordRanges[word];\n\t\t\t\tif (isFalsyOrEmpty(wordLines)) {\n\t\t\t\t\treturn 2 << 20;\n\t\t\t\t}\n\t\t\t\tconst idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n\t\t\t\tconst bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n\t\t\t\tlet blockDistance = ranges.length;\n\t\t\t\tfor (const range of ranges) {\n\t\t\t\t\tif (!Range.containsRange(range.range, bestWordRange)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tblockDistance -= 1;\n\t\t\t\t}\n\t\t\t\treturn blockDistance;\n\t\t\t}\n\t\t};\n\t}\n\n\tabstract distance(anchor: IPosition, suggestion: CompletionItem): number;\n}\n"],"mappings":"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","ignoreList":[]}