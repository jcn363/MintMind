{"version":3,"names":["cov_13ys01lwt3","actualCoverage","sameOriginWindowChainCache","s","WeakMap","getParentWindowIfSameOrigin","w","f","b","parent","location","parentLocation","origin","e","IframeUtils","getSameOriginWindowChain","targetWindow","windowChainCache","get","set","push","window","WeakRef","iframeElement","frameElement","slice","getPositionOfChildWindowRelativeToAncestorWindow","childWindow","ancestorWindow","top","left","windowChain","windowChainEl","windowInChain","deref","scrollY","scrollX","boundingRect","getBoundingClientRect","parentOriginHash","parentOrigin","salt","crypto","subtle","Error","strData","JSON","stringify","encoder","TextEncoder","arrData","encode","hash","digest","sha256AsBase32","bytes","array","Array","from","Uint8Array","hexArray","map","toString","padStart","join","BigInt"],"sources":["/home/user/Desktop/MintMind/src/vs/base/browser/iframe.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Represents a window in a possible chain of iframes\n */\ninterface IWindowChainElement {\n\t/**\n\t * The window object for it\n\t */\n\treadonly window: WeakRef<Window>;\n\t/**\n\t * The iframe element inside the window.parent corresponding to window\n\t */\n\treadonly iframeElement: Element | null;\n}\n\nconst sameOriginWindowChainCache = new WeakMap<Window, IWindowChainElement[] | null>();\n\nfunction getParentWindowIfSameOrigin(w: Window): Window | null {\n\tif (!w.parent || w.parent === w) {\n\t\treturn null;\n\t}\n\n\t// Cannot really tell if we have access to the parent window unless we try to access something in it\n\ttry {\n\t\tconst location = w.location;\n\t\tconst parentLocation = w.parent.location;\n\t\tif (location.origin !== 'null' && parentLocation.origin !== 'null' && location.origin !== parentLocation.origin) {\n\t\t\treturn null;\n\t\t}\n\t} catch (e) {\n\t\treturn null;\n\t}\n\n\treturn w.parent;\n}\n\nexport class IframeUtils {\n\n\t/**\n\t * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n\t * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n\t */\n\tprivate static getSameOriginWindowChain(targetWindow: Window): IWindowChainElement[] {\n\t\tlet windowChainCache = sameOriginWindowChainCache.get(targetWindow);\n\t\tif (!windowChainCache) {\n\t\t\twindowChainCache = [];\n\t\t\tsameOriginWindowChainCache.set(targetWindow, windowChainCache);\n\t\t\tlet w: Window | null = targetWindow;\n\t\t\tlet parent: Window | null;\n\t\t\tdo {\n\t\t\t\tparent = getParentWindowIfSameOrigin(w);\n\t\t\t\tif (parent) {\n\t\t\t\t\twindowChainCache.push({\n\t\t\t\t\t\twindow: new WeakRef(w),\n\t\t\t\t\t\tiframeElement: w.frameElement || null\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\twindowChainCache.push({\n\t\t\t\t\t\twindow: new WeakRef(w),\n\t\t\t\t\t\tiframeElement: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tw = parent;\n\t\t\t} while (w);\n\t\t}\n\t\treturn windowChainCache.slice(0);\n\t}\n\n\t/**\n\t * Returns the position of `childWindow` relative to `ancestorWindow`\n\t */\n\tpublic static getPositionOfChildWindowRelativeToAncestorWindow(childWindow: Window, ancestorWindow: Window | null) {\n\n\t\tif (!ancestorWindow || childWindow === ancestorWindow) {\n\t\t\treturn {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t};\n\t\t}\n\n\t\tlet top = 0, left = 0;\n\n\t\tconst windowChain = this.getSameOriginWindowChain(childWindow);\n\n\t\tfor (const windowChainEl of windowChain) {\n\t\t\tconst windowInChain = windowChainEl.window.deref();\n\t\t\ttop += windowInChain?.scrollY ?? 0;\n\t\t\tleft += windowInChain?.scrollX ?? 0;\n\n\t\t\tif (windowInChain === ancestorWindow) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!windowChainEl.iframeElement) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n\t\t\ttop += boundingRect.top;\n\t\t\tleft += boundingRect.left;\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left\n\t\t};\n\t}\n}\n\n/**\n * Returns a sha-256 composed of `parentOrigin` and `salt` converted to base 32\n */\nexport async function parentOriginHash(parentOrigin: string, salt: string): Promise<string> {\n\t// This same code is also inlined at `src/vs/workbench/services/extensions/worker/webWorkerExtensionHostIframe.html`\n\tif (!crypto.subtle) {\n\t\tthrow new Error(`'crypto.subtle' is not available so webviews will not work. This is likely because the editor is not running in a secure context (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).`);\n\t}\n\n\tconst strData = JSON.stringify({ parentOrigin, salt });\n\tconst encoder = new TextEncoder();\n\tconst arrData = encoder.encode(strData);\n\tconst hash = await crypto.subtle.digest('sha-256', arrData);\n\treturn sha256AsBase32(hash);\n}\n\nfunction sha256AsBase32(bytes: ArrayBuffer): string {\n\tconst array = Array.from(new Uint8Array(bytes));\n\tconst hexArray = array.map(b => b.toString(16).padStart(2, '0')).join('');\n\t// sha256 has 256 bits, so we need at most ceil(lg(2^256-1)/lg(32)) = 52 chars to represent it in base 32\n\treturn BigInt(`0x${hexArray}`).toString(32).padStart(52, '0');\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}