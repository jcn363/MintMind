{"version":3,"names":["cov_2lfg7elsqx","actualCoverage","localize","OutputMonitorState","MarkdownString","toolResultDetailsFromResponse","terminalResults","f","s","Array","from","Map","flatMap","r","b","resources","filter","res","uri","map","range","item","undefined","key","toString","values","toolResultMessageFromResponse","result","taskLabel","toolResultDetails","getOutputTool","resultSummary","exitCode","problemCount","length","every","state","Idle"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/chatAgentTools/browser/tools/task/taskHelpers.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../../../base/common/uri.js';\nimport { Location } from '../../../../../../../editor/common/languages.js';\nimport { Range } from '../../../../../../../editor/common/core/range.js';\nimport { ITaskSummary } from '../../../../../tasks/common/taskService.js';\nimport { localize } from '../../../../../../../nls.js';\nimport { OutputMonitorState } from '../monitoring/types.js';\nimport { MarkdownString } from '../../../../../../../base/common/htmlContent.js';\n\nexport function toolResultDetailsFromResponse(terminalResults: { output: string; resources?: ILinkLocation[] }[]): (URI | Location)[] {\n\treturn Array.from(new Map(\n\t\tterminalResults\n\t\t\t.flatMap(r =>\n\t\t\t\tr.resources?.filter(res => res.uri).map(res => {\n\t\t\t\t\tconst range = res.range;\n\t\t\t\t\tconst item = range !== undefined ? { uri: res.uri, range } : res.uri;\n\t\t\t\t\tconst key = range !== undefined\n\t\t\t\t\t\t? `${res.uri.toString()}-${range.toString()}`\n\t\t\t\t\t\t: `${res.uri.toString()}`;\n\t\t\t\t\treturn [key, item] as [string, URI | Location];\n\t\t\t\t}) ?? []\n\t\t\t)\n\t).values());\n}\n\nexport function toolResultMessageFromResponse(result: ITaskSummary | undefined, taskLabel: string, toolResultDetails: (URI | Location)[], terminalResults: { output: string; resources?: ILinkLocation[]; state: OutputMonitorState }[], getOutputTool?: boolean): MarkdownString {\n\tlet resultSummary = '';\n\tif (result?.exitCode) {\n\t\tresultSummary = localize('copilotChat.taskFailedWithExitCode', 'Task `{0}` failed with exit code {1}.', taskLabel, result.exitCode);\n\t} else {\n\t\tresultSummary += `\\`${taskLabel}\\` task `;\n\t\tconst problemCount = toolResultDetails.length;\n\t\tif (getOutputTool) {\n\t\t\treturn problemCount ? new MarkdownString(`Got output for ${resultSummary} with \\`${problemCount}\\` problem${problemCount === 1 ? '' : 's'}`) : new MarkdownString(`Got output for ${resultSummary}`);\n\t\t} else {\n\t\t\tconst problemCount = toolResultDetails.length;\n\t\t\tresultSummary += terminalResults.every(r => r.state === OutputMonitorState.Idle)\n\t\t\t\t? (problemCount\n\t\t\t\t\t? `finished with \\`${problemCount}\\` problem${problemCount === 1 ? '' : 's'}`\n\t\t\t\t\t: 'finished')\n\t\t\t\t: (problemCount\n\t\t\t\t\t? `started and will continue to run in the background with \\`${problemCount}\\` problem${problemCount === 1 ? '' : 's'}`\n\t\t\t\t\t: 'started and will continue to run in the background');\n\t\t}\n\t}\n\treturn new MarkdownString(resultSummary);\n}\n\nexport interface ILinkLocation { uri: URI; range?: Range }\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAuBK;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAvBL;;;;AASA,SAASE,QAAQ,QAAQ,6BAA6B;AACtD,SAASC,kBAAkB,QAAQ,wBAAwB;AAC3D,SAASC,cAAc,QAAQ,iDAAiD;AAEhF,OAAM,SAAUC,6BAA6BA,CAACC,eAAkE;EAAA;EAAAN,cAAA,GAAAO,CAAA;EAAAP,cAAA,GAAAQ,CAAA;EAC/G,OAAOC,KAAK,CAACC,IAAI,CAAC,IAAIC,GAAG,CACxBL,eAAe,CACbM,OAAO,CAACC,CAAC,IACT;IAAA;IAAAb,cAAA,GAAAO,CAAA;IAAAP,cAAA,GAAAQ,CAAA;IAAA,kCAAAR,cAAA,GAAAc,CAAA,UAAAD,CAAC,CAACE,SAAS,EAAEC,MAAM,CAACC,GAAG,IAAI;MAAA;MAAAjB,cAAA,GAAAO,CAAA;MAAAP,cAAA,GAAAQ,CAAA;MAAA,OAAAS,GAAG,CAACC,GAAG;IAAH,CAAG,CAAC,CAACC,GAAG,CAACF,GAAG,IAAG;MAAA;MAAAjB,cAAA,GAAAO,CAAA;MAC7C,MAAMa,KAAK;MAAA;MAAA,CAAApB,cAAA,GAAAQ,CAAA,OAAGS,GAAG,CAACG,KAAK;MACvB,MAAMC,IAAI;MAAA;MAAA,CAAArB,cAAA,GAAAQ,CAAA,OAAGY,KAAK,KAAKE,SAAS;MAAA;MAAA,CAAAtB,cAAA,GAAAc,CAAA,UAAG;QAAEI,GAAG,EAAED,GAAG,CAACC,GAAG;QAAEE;MAAK,CAAE;MAAA;MAAA,CAAApB,cAAA,GAAAc,CAAA,UAAGG,GAAG,CAACC,GAAG;MACpE,MAAMK,GAAG;MAAA;MAAA,CAAAvB,cAAA,GAAAQ,CAAA,OAAGY,KAAK,KAAKE,SAAS;MAAA;MAAA,CAAAtB,cAAA,GAAAc,CAAA,UAC5B,GAAGG,GAAG,CAACC,GAAG,CAACM,QAAQ,EAAE,IAAIJ,KAAK,CAACI,QAAQ,EAAE,EAAE;MAAA;MAAA,CAAAxB,cAAA,GAAAc,CAAA,UAC3C,GAAGG,GAAG,CAACC,GAAG,CAACM,QAAQ,EAAE,EAAE;MAAC;MAAAxB,cAAA,GAAAQ,CAAA;MAC3B,OAAO,CAACe,GAAG,EAAEF,IAAI,CAA6B;IAC/C,CAAC,CAAC;IAAA;IAAA,CAAArB,cAAA,GAAAc,CAAA,UAAI,EAAE;EAAF,CAAE,CACR,CACF,CAACW,MAAM,EAAE,CAAC;AACZ;AAEA,OAAM,SAAUC,6BAA6BA,CAACC,MAAgC,EAAEC,SAAiB,EAAEC,iBAAqC,EAAEvB,eAA6F,EAAEwB,aAAuB;EAAA;EAAA9B,cAAA,GAAAO,CAAA;EAC/P,IAAIwB,aAAa;EAAA;EAAA,CAAA/B,cAAA,GAAAQ,CAAA,OAAG,EAAE;EAAC;EAAAR,cAAA,GAAAQ,CAAA;EACvB,IAAImB,MAAM,EAAEK,QAAQ,EAAE;IAAA;IAAAhC,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAQ,CAAA;IACrBuB,aAAa,GAAG7B,QAAQ,CAAC,oCAAoC,EAAE,uCAAuC,EAAE0B,SAAS,EAAED,MAAM,CAACK,QAAQ,CAAC;EACpI,CAAC,MAAM;IAAA;IAAAhC,cAAA,GAAAc,CAAA;IAAAd,cAAA,GAAAQ,CAAA;IACNuB,aAAa,IAAI,KAAKH,SAAS,UAAU;IACzC,MAAMK,YAAY;IAAA;IAAA,CAAAjC,cAAA,GAAAQ,CAAA,QAAGqB,iBAAiB,CAACK,MAAM;IAAC;IAAAlC,cAAA,GAAAQ,CAAA;IAC9C,IAAIsB,aAAa,EAAE;MAAA;MAAA9B,cAAA,GAAAc,CAAA;MAAAd,cAAA,GAAAQ,CAAA;MAClB,OAAOyB,YAAY;MAAA;MAAA,CAAAjC,cAAA,GAAAc,CAAA,UAAG,IAAIV,cAAc,CAAC,kBAAkB2B,aAAa,WAAWE,YAAY,aAAaA,YAAY,KAAK,CAAC;MAAA;MAAA,CAAAjC,cAAA,GAAAc,CAAA,UAAG,EAAE;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,UAAG,GAAG,GAAE,CAAC;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,UAAG,IAAIV,cAAc,CAAC,kBAAkB2B,aAAa,EAAE,CAAC;IACrM,CAAC,MAAM;MAAA;MAAA/B,cAAA,GAAAc,CAAA;MACN,MAAMmB,YAAY;MAAA;MAAA,CAAAjC,cAAA,GAAAQ,CAAA,QAAGqB,iBAAiB,CAACK,MAAM;MAAC;MAAAlC,cAAA,GAAAQ,CAAA;MAC9CuB,aAAa,IAAIzB,eAAe,CAAC6B,KAAK,CAACtB,CAAC,IAAI;QAAA;QAAAb,cAAA,GAAAO,CAAA;QAAAP,cAAA,GAAAQ,CAAA;QAAA,OAAAK,CAAC,CAACuB,KAAK,KAAKjC,kBAAkB,CAACkC,IAAI;MAAJ,CAAI,CAAC;MAAA;MAAA,CAAArC,cAAA,GAAAc,CAAA,UAC5EmB,YAAY;MAAA;MAAA,CAAAjC,cAAA,GAAAc,CAAA,UACZ,mBAAmBmB,YAAY,aAAaA,YAAY,KAAK,CAAC;MAAA;MAAA,CAAAjC,cAAA,GAAAc,CAAA,UAAG,EAAE;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,UAAG,GAAG,GAAE;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,UAC3E,UAAU;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,UACVmB,YAAY;MAAA;MAAA,CAAAjC,cAAA,GAAAc,CAAA,WACZ,6DAA6DmB,YAAY,aAAaA,YAAY,KAAK,CAAC;MAAA;MAAA,CAAAjC,cAAA,GAAAc,CAAA,WAAG,EAAE;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,WAAG,GAAG,GAAE;MAAA;MAAA,CAAAd,cAAA,GAAAc,CAAA,WACrH,oDAAoD,EAAC;IAC1D;EACD;EAAC;EAAAd,cAAA,GAAAQ,CAAA;EACD,OAAO,IAAIJ,cAAc,CAAC2B,aAAa,CAAC;AACzC","ignoreList":[]}