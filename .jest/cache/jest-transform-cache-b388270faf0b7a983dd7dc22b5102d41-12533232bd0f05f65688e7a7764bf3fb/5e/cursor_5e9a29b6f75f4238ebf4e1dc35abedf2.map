{"version":3,"names":["cov_1l6st2aqb8","actualCoverage","onUnexpectedError","strings","CursorCollection","CursorState","EditOperationResult","CursorContext","DeleteOperations","CompositionOutcome","TypeOperations","BaseTypeWithAutoClosingCommand","Range","Selection","ModelInjectedTextChangedEvent","ViewCursorStateChangedEvent","ViewRevealRangeRequestEvent","dispose","Disposable","CursorStateChangedEvent","EditSources","CursorsController","_model","_knownModelVersionId","_viewModel","_coordinatesConverter","context","_cursors","_hasFocus","_isHandling","_compositionState","_columnSelectData","_autoClosedActions","_prevEditOperationType","constructor","model","viewModel","coordinatesConverter","cursorConfig","f","s","getVersionId","updateConfiguration","updateContext","onLineMappingChanged","eventsCollector","b","setStates","getCursorStates","setHasFocus","hasFocus","_validateAutoClosedActions","length","selections","getSelections","i","autoClosedAction","isValid","splice","getPrimaryCursorState","getPrimaryCursor","getLastAddedCursorIndex","getAll","source","reason","states","reachedMaxCursorCount","multiCursorLimit","slice","oldState","CursorModelState","from","normalize","_emitStateChangedIfNecessary","setCursorColumnSelectData","columnSelectData","revealAll","minimalReveal","verticalType","revealHorizontal","scrollType","viewPositions","getViewPositions","revealViewRange","revealViewSelections","getViewSelections","fromPositions","emitViewEvent","revealPrimary","primaryCursor","viewState","selection","saveState","result","len","push","inSelectionMode","isEmpty","selectionStart","lineNumber","selectionStartLineNumber","column","selectionStartColumn","position","positionLineNumber","positionColumn","restoreState","desiredSelections","state","fromModelSelections","onModelContentChanged","event","e","rawContentChangedEvent","versionId","hadFlushEvent","containsEvent","resultingSelection","cursorState","isUndoing","isRedoing","selectionsFromMarkers","readSelectionFromMarkers","getSelection","modelState","getTopMostViewPosition","getBottomMostViewPosition","getCursorColumnSelectData","viewSelectionStart","getStartPosition","viewPosition","isReal","fromViewLineNumber","fromViewVisualColumn","visibleColumnFromColumn","toViewLineNumber","toViewVisualColumn","getPosition","setSelections","getPrevEditOperationType","setPrevEditOperationType","type","_pushAutoClosedAction","autoClosedCharactersRanges","autoClosedEnclosingRanges","autoClosedCharactersDeltaDecorations","autoClosedEnclosingDeltaDecorations","range","options","description","inlineClassName","stickiness","autoClosedCharactersDecorations","deltaDecorations","autoClosedEnclosingDecorations","AutoClosedAction","_executeEditOperation","opResult","editReason","shouldPushStackElementBefore","pushStackElement","CommandExecutor","executeCommands","commands","_interpretCommandResult","command","enclosingRange","closeCharacterRange","shouldPushStackElementAfter","newState","equals","viewSelections","some","newCursorState","oldSelections","map","oldModelVersionId","modelVersionId","emitOutgoingEvent","_findAutoClosingPairs","edits","indices","edit","text","indexOf","m","match","closeChar","autoClosingPairsCandidates","autoClosingPairs","autoClosingPairsCloseSingleChar","get","openChar","open","closeCharIndex","openCharIndex","lastIndexOf","executeEdits","cursorStateComputer","autoClosingIndices","_isTracked","pushEditOperations","undoEdits","openCharInnerIndex","closeCharInnerIndex","undoEdit","startLineNumber","startColumn","undefined","_executeEdit","callback","cursorChangeReason","readOnly","stopTrackingSelections","ensureValidState","err","startTrackingSelections","getAutoClosedCharacters","getAllAutoClosedCharacters","startComposition","CompositionState","endComposition","cursor","kind","detailedSource","compositionOutcome","deduceOutcome","compositionEndWithInterceptors","offset","charLength","nextCharLength","chr","substr","typeWithInterceptors","typeWithoutInterceptors","compositionType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","newSelections","paste","pasteOnNewLine","multicursorText","cut","executeCommand","killSecondaryCursors","other","autoClosedActions","autoClosedCharacters","concat","getAutoClosedCharactersRanges","_autoClosedCharactersDecorations","_autoClosedEnclosingDecorations","decorationRange","getDecorationRange","enclosingRanges","endLineNumber","sort","compareRangesUsingStarts","strictContainsRange","selectionsBefore","unknown","name","ctx","trackedRanges","trackedRangesDirection","_innerExecuteCommands","_setTrackedRange","_arrayIsEmpty","commandsData","_getEditOperations","operations","rawOperations","loserCursorsMap","_getLoserCursorMap","hasOwnProperty","console","warn","filteredOperations","identifier","major","toString","hadTrackedEditOperation","selectionsAfter","inverseEditOperations","groupedInverseEditOperations","op","minorBasedSorter","a","minor","cursorSelections","computeCursorState","getInverseEditOperations","getTrackedSelection","id","idx","parseInt","_getTrackedRange","endColumn","losingCursors","losingCursorIndex","losingCursor","r","_getEditOperationsFromCommand","majorIdentifier","operationMinor","addEditOperation","forceMoveMarkers","isAutoWhitespaceEdit","insertsAutoWhitespace","addTrackedEditOperation","trackSelection","_selection","trackPreviousOnEmpty","liftSelection","maxLineColumn","getLineMaxColumn","l","getDirection","editOperationBuilder","getEditOperations","compareRangesUsingEnds","previousOp","currentOp","isBefore","getEndPosition","loserMajor","j","CompositionLineState","startSelectionOffset","endSelectionOffset","_original","_capture","textModel","getLineContent","current","_deduceOutcome","original","commonPrefix","Math","min","commonPrefixLength","commonSuffix","commonSuffixLength","deletedText","substring","insertedTextStartOffset","insertedTextEndOffset","insertedText","insertedTextRange"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/cursor/cursor.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { CursorCollection } from './cursorCollection.js';\nimport { CursorConfiguration, CursorState, EditOperationResult, EditOperationType, IColumnSelectData, PartialCursorState, ICursorSimpleModel } from '../cursorCommon.js';\nimport { CursorContext } from './cursorContext.js';\nimport { DeleteOperations } from './cursorDeleteOperations.js';\nimport { CursorChangeReason } from '../cursorEvents.js';\nimport { CompositionOutcome, TypeOperations } from './cursorTypeOperations.js';\nimport { BaseTypeWithAutoClosingCommand } from './cursorTypeEditOperations.js';\nimport { Position } from '../core/position.js';\nimport { Range, IRange } from '../core/range.js';\nimport { ISelection, Selection, SelectionDirection } from '../core/selection.js';\nimport * as editorCommon from '../editorCommon.js';\nimport { ITextModel, TrackedRangeStickiness, IModelDeltaDecoration, ICursorStateComputer, IIdentifiedSingleEditOperation, IValidEditOperation } from '../model.js';\nimport { RawContentChangedType, ModelInjectedTextChangedEvent, InternalModelContentChangeEvent } from '../textModelEvents.js';\nimport { VerticalRevealType, ViewCursorStateChangedEvent, ViewRevealRangeRequestEvent } from '../viewEvents.js';\nimport { dispose, Disposable } from '../../../base/common/lifecycle.js';\nimport { CursorStateChangedEvent, ViewModelEventsCollector } from '../viewModelEventDispatcher.js';\nimport { TextModelEditSource, EditSources } from '../textModelEditSource.js';\nimport { ICoordinatesConverter } from '../coordinatesConverter.js';\n\nexport class CursorsController extends Disposable {\n\n\tprivate readonly _model: ITextModel;\n\tprivate _knownModelVersionId: number;\n\tprivate readonly _viewModel: ICursorSimpleModel;\n\tprivate readonly _coordinatesConverter: ICoordinatesConverter;\n\tpublic context: CursorContext;\n\tprivate _cursors: CursorCollection;\n\n\tprivate _hasFocus: boolean;\n\tprivate _isHandling: boolean;\n\tprivate _compositionState: CompositionState | null;\n\tprivate _columnSelectData: IColumnSelectData | null;\n\tprivate _autoClosedActions: AutoClosedAction[];\n\tprivate _prevEditOperationType: EditOperationType;\n\n\tconstructor(model: ITextModel, viewModel: ICursorSimpleModel, coordinatesConverter: ICoordinatesConverter, cursorConfig: CursorConfiguration) {\n\t\tsuper();\n\t\tthis._model = model;\n\t\tthis._knownModelVersionId = this._model.getVersionId();\n\t\tthis._viewModel = viewModel;\n\t\tthis._coordinatesConverter = coordinatesConverter;\n\t\tthis.context = new CursorContext(this._model, this._viewModel, this._coordinatesConverter, cursorConfig);\n\t\tthis._cursors = new CursorCollection(this.context);\n\n\t\tthis._hasFocus = false;\n\t\tthis._isHandling = false;\n\t\tthis._compositionState = null;\n\t\tthis._columnSelectData = null;\n\t\tthis._autoClosedActions = [];\n\t\tthis._prevEditOperationType = EditOperationType.Other;\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._cursors.dispose();\n\t\tthis._autoClosedActions = dispose(this._autoClosedActions);\n\t\tsuper.dispose();\n\t}\n\n\tpublic updateConfiguration(cursorConfig: CursorConfiguration): void {\n\t\tthis.context = new CursorContext(this._model, this._viewModel, this._coordinatesConverter, cursorConfig);\n\t\tthis._cursors.updateContext(this.context);\n\t}\n\n\tpublic onLineMappingChanged(eventsCollector: ViewModelEventsCollector): void {\n\t\tif (this._knownModelVersionId !== this._model.getVersionId()) {\n\t\t\t// There are model change events that I didn't yet receive.\n\t\t\t//\n\t\t\t// This can happen when editing the model, and the view model receives the change events first,\n\t\t\t// and the view model emits line mapping changed events, all before the cursor gets a chance to\n\t\t\t// recover from markers.\n\t\t\t//\n\t\t\t// The model change listener above will be called soon and we'll ensure a valid cursor state there.\n\t\t\treturn;\n\t\t}\n\t\t// Ensure valid state\n\t\tthis.setStates(eventsCollector, 'viewModel', CursorChangeReason.NotSet, this.getCursorStates());\n\t}\n\n\tpublic setHasFocus(hasFocus: boolean): void {\n\t\tthis._hasFocus = hasFocus;\n\t}\n\n\tprivate _validateAutoClosedActions(): void {\n\t\tif (this._autoClosedActions.length > 0) {\n\t\t\tconst selections: Range[] = this._cursors.getSelections();\n\t\t\tfor (let i = 0; i < this._autoClosedActions.length; i++) {\n\t\t\t\tconst autoClosedAction = this._autoClosedActions[i];\n\t\t\t\tif (!autoClosedAction.isValid(selections)) {\n\t\t\t\t\tautoClosedAction.dispose();\n\t\t\t\t\tthis._autoClosedActions.splice(i, 1);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// ------ some getters/setters\n\n\tpublic getPrimaryCursorState(): CursorState {\n\t\treturn this._cursors.getPrimaryCursor();\n\t}\n\n\tpublic getLastAddedCursorIndex(): number {\n\t\treturn this._cursors.getLastAddedCursorIndex();\n\t}\n\n\tpublic getCursorStates(): CursorState[] {\n\t\treturn this._cursors.getAll();\n\t}\n\n\tpublic setStates(eventsCollector: ViewModelEventsCollector, source: string | null | undefined, reason: CursorChangeReason, states: PartialCursorState[] | null): boolean {\n\t\tlet reachedMaxCursorCount = false;\n\t\tconst multiCursorLimit = this.context.cursorConfig.multiCursorLimit;\n\t\tif (states !== null && states.length > multiCursorLimit) {\n\t\t\tstates = states.slice(0, multiCursorLimit);\n\t\t\treachedMaxCursorCount = true;\n\t\t}\n\n\t\tconst oldState = CursorModelState.from(this._model, this);\n\n\t\tthis._cursors.setStates(states);\n\t\tthis._cursors.normalize();\n\t\tthis._columnSelectData = null;\n\n\t\tthis._validateAutoClosedActions();\n\n\t\treturn this._emitStateChangedIfNecessary(eventsCollector, source, reason, oldState, reachedMaxCursorCount);\n\t}\n\n\tpublic setCursorColumnSelectData(columnSelectData: IColumnSelectData): void {\n\t\tthis._columnSelectData = columnSelectData;\n\t}\n\n\tpublic revealAll(eventsCollector: ViewModelEventsCollector, source: string | null | undefined, minimalReveal: boolean, verticalType: VerticalRevealType, revealHorizontal: boolean, scrollType: editorCommon.ScrollType): void {\n\t\tconst viewPositions = this._cursors.getViewPositions();\n\n\t\tlet revealViewRange: Range | null = null;\n\t\tlet revealViewSelections: Selection[] | null = null;\n\t\tif (viewPositions.length > 1) {\n\t\t\trevealViewSelections = this._cursors.getViewSelections();\n\t\t} else {\n\t\t\trevealViewRange = Range.fromPositions(viewPositions[0], viewPositions[0]);\n\t\t}\n\n\t\teventsCollector.emitViewEvent(new ViewRevealRangeRequestEvent(source, minimalReveal, revealViewRange, revealViewSelections, verticalType, revealHorizontal, scrollType));\n\t}\n\n\tpublic revealPrimary(eventsCollector: ViewModelEventsCollector, source: string | null | undefined, minimalReveal: boolean, verticalType: VerticalRevealType, revealHorizontal: boolean, scrollType: editorCommon.ScrollType): void {\n\t\tconst primaryCursor = this._cursors.getPrimaryCursor();\n\t\tconst revealViewSelections = [primaryCursor.viewState.selection];\n\t\teventsCollector.emitViewEvent(new ViewRevealRangeRequestEvent(source, minimalReveal, null, revealViewSelections, verticalType, revealHorizontal, scrollType));\n\t}\n\n\tpublic saveState(): editorCommon.ICursorState[] {\n\n\t\tconst result: editorCommon.ICursorState[] = [];\n\n\t\tconst selections = this._cursors.getSelections();\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst selection = selections[i];\n\n\t\t\tresult.push({\n\t\t\t\tinSelectionMode: !selection.isEmpty(),\n\t\t\t\tselectionStart: {\n\t\t\t\t\tlineNumber: selection.selectionStartLineNumber,\n\t\t\t\t\tcolumn: selection.selectionStartColumn,\n\t\t\t\t},\n\t\t\t\tposition: {\n\t\t\t\t\tlineNumber: selection.positionLineNumber,\n\t\t\t\t\tcolumn: selection.positionColumn,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic restoreState(eventsCollector: ViewModelEventsCollector, states: editorCommon.ICursorState[]): void {\n\n\t\tconst desiredSelections: ISelection[] = [];\n\n\t\tfor (let i = 0, len = states.length; i < len; i++) {\n\t\t\tconst state = states[i];\n\n\t\t\tlet positionLineNumber = 1;\n\t\t\tlet positionColumn = 1;\n\n\t\t\t// Avoid missing properties on the literal\n\t\t\tif (state.position && state.position.lineNumber) {\n\t\t\t\tpositionLineNumber = state.position.lineNumber;\n\t\t\t}\n\t\t\tif (state.position && state.position.column) {\n\t\t\t\tpositionColumn = state.position.column;\n\t\t\t}\n\n\t\t\tlet selectionStartLineNumber = positionLineNumber;\n\t\t\tlet selectionStartColumn = positionColumn;\n\n\t\t\t// Avoid missing properties on the literal\n\t\t\tif (state.selectionStart && state.selectionStart.lineNumber) {\n\t\t\t\tselectionStartLineNumber = state.selectionStart.lineNumber;\n\t\t\t}\n\t\t\tif (state.selectionStart && state.selectionStart.column) {\n\t\t\t\tselectionStartColumn = state.selectionStart.column;\n\t\t\t}\n\n\t\t\tdesiredSelections.push({\n\t\t\t\tselectionStartLineNumber: selectionStartLineNumber,\n\t\t\t\tselectionStartColumn: selectionStartColumn,\n\t\t\t\tpositionLineNumber: positionLineNumber,\n\t\t\t\tpositionColumn: positionColumn\n\t\t\t});\n\t\t}\n\n\t\tthis.setStates(eventsCollector, 'restoreState', CursorChangeReason.NotSet, CursorState.fromModelSelections(desiredSelections));\n\t\tthis.revealAll(eventsCollector, 'restoreState', false, VerticalRevealType.Simple, true, editorCommon.ScrollType.Immediate);\n\t}\n\n\tpublic onModelContentChanged(eventsCollector: ViewModelEventsCollector, event: InternalModelContentChangeEvent | ModelInjectedTextChangedEvent): void {\n\t\tif (event instanceof ModelInjectedTextChangedEvent) {\n\t\t\t// If injected texts change, the view positions of all cursors need to be updated.\n\t\t\tif (this._isHandling) {\n\t\t\t\t// The view positions will be updated when handling finishes\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// setStates might remove markers, which could trigger a decoration change.\n\t\t\t// If there are injected text decorations for that line, `onModelContentChanged` is emitted again\n\t\t\t// and an endless recursion happens.\n\t\t\t// _isHandling prevents that.\n\t\t\tthis._isHandling = true;\n\t\t\ttry {\n\t\t\t\tthis.setStates(eventsCollector, 'modelChange', CursorChangeReason.NotSet, this.getCursorStates());\n\t\t\t} finally {\n\t\t\t\tthis._isHandling = false;\n\t\t\t}\n\t\t} else {\n\t\t\tconst e = event.rawContentChangedEvent;\n\t\t\tthis._knownModelVersionId = e.versionId;\n\t\t\tif (this._isHandling) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst hadFlushEvent = e.containsEvent(RawContentChangedType.Flush);\n\t\t\tthis._prevEditOperationType = EditOperationType.Other;\n\n\t\t\tif (hadFlushEvent) {\n\t\t\t\t// a model.setValue() was called\n\t\t\t\tthis._cursors.dispose();\n\t\t\t\tthis._cursors = new CursorCollection(this.context);\n\t\t\t\tthis._validateAutoClosedActions();\n\t\t\t\tthis._emitStateChangedIfNecessary(eventsCollector, 'model', CursorChangeReason.ContentFlush, null, false);\n\t\t\t} else {\n\t\t\t\tif (this._hasFocus && e.resultingSelection && e.resultingSelection.length > 0) {\n\t\t\t\t\tconst cursorState = CursorState.fromModelSelections(e.resultingSelection);\n\t\t\t\t\tif (this.setStates(eventsCollector, 'modelChange', e.isUndoing ? CursorChangeReason.Undo : e.isRedoing ? CursorChangeReason.Redo : CursorChangeReason.RecoverFromMarkers, cursorState)) {\n\t\t\t\t\t\tthis.revealAll(eventsCollector, 'modelChange', false, VerticalRevealType.Simple, true, editorCommon.ScrollType.Smooth);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconst selectionsFromMarkers = this._cursors.readSelectionFromMarkers();\n\t\t\t\t\tthis.setStates(eventsCollector, 'modelChange', CursorChangeReason.RecoverFromMarkers, CursorState.fromModelSelections(selectionsFromMarkers));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic getSelection(): Selection {\n\t\treturn this._cursors.getPrimaryCursor().modelState.selection;\n\t}\n\n\tpublic getTopMostViewPosition(): Position {\n\t\treturn this._cursors.getTopMostViewPosition();\n\t}\n\n\tpublic getBottomMostViewPosition(): Position {\n\t\treturn this._cursors.getBottomMostViewPosition();\n\t}\n\n\tpublic getCursorColumnSelectData(): IColumnSelectData {\n\t\tif (this._columnSelectData) {\n\t\t\treturn this._columnSelectData;\n\t\t}\n\t\tconst primaryCursor = this._cursors.getPrimaryCursor();\n\t\tconst viewSelectionStart = primaryCursor.viewState.selectionStart.getStartPosition();\n\t\tconst viewPosition = primaryCursor.viewState.position;\n\t\treturn {\n\t\t\tisReal: false,\n\t\t\tfromViewLineNumber: viewSelectionStart.lineNumber,\n\t\t\tfromViewVisualColumn: this.context.cursorConfig.visibleColumnFromColumn(this._viewModel, viewSelectionStart),\n\t\t\ttoViewLineNumber: viewPosition.lineNumber,\n\t\t\ttoViewVisualColumn: this.context.cursorConfig.visibleColumnFromColumn(this._viewModel, viewPosition),\n\t\t};\n\t}\n\n\tpublic getSelections(): Selection[] {\n\t\treturn this._cursors.getSelections();\n\t}\n\n\tpublic getPosition(): Position {\n\t\treturn this._cursors.getPrimaryCursor().modelState.position;\n\t}\n\n\tpublic setSelections(eventsCollector: ViewModelEventsCollector, source: string | null | undefined, selections: readonly ISelection[], reason: CursorChangeReason): void {\n\t\tthis.setStates(eventsCollector, source, reason, CursorState.fromModelSelections(selections));\n\t}\n\n\tpublic getPrevEditOperationType(): EditOperationType {\n\t\treturn this._prevEditOperationType;\n\t}\n\n\tpublic setPrevEditOperationType(type: EditOperationType): void {\n\t\tthis._prevEditOperationType = type;\n\t}\n\n\t// ------ auxiliary handling logic\n\n\tprivate _pushAutoClosedAction(autoClosedCharactersRanges: Range[], autoClosedEnclosingRanges: Range[]): void {\n\t\tconst autoClosedCharactersDeltaDecorations: IModelDeltaDecoration[] = [];\n\t\tconst autoClosedEnclosingDeltaDecorations: IModelDeltaDecoration[] = [];\n\n\t\tfor (let i = 0, len = autoClosedCharactersRanges.length; i < len; i++) {\n\t\t\tautoClosedCharactersDeltaDecorations.push({\n\t\t\t\trange: autoClosedCharactersRanges[i],\n\t\t\t\toptions: {\n\t\t\t\t\tdescription: 'auto-closed-character',\n\t\t\t\t\tinlineClassName: 'auto-closed-character',\n\t\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t\t\t\t}\n\t\t\t});\n\t\t\tautoClosedEnclosingDeltaDecorations.push({\n\t\t\t\trange: autoClosedEnclosingRanges[i],\n\t\t\t\toptions: {\n\t\t\t\t\tdescription: 'auto-closed-enclosing',\n\t\t\t\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst autoClosedCharactersDecorations = this._model.deltaDecorations([], autoClosedCharactersDeltaDecorations);\n\t\tconst autoClosedEnclosingDecorations = this._model.deltaDecorations([], autoClosedEnclosingDeltaDecorations);\n\t\tthis._autoClosedActions.push(new AutoClosedAction(this._model, autoClosedCharactersDecorations, autoClosedEnclosingDecorations));\n\t}\n\n\tprivate _executeEditOperation(opResult: EditOperationResult | null, editReason: TextModelEditSource): void {\n\n\t\tif (!opResult) {\n\t\t\t// Nothing to execute\n\t\t\treturn;\n\t\t}\n\n\t\tif (opResult.shouldPushStackElementBefore) {\n\t\t\tthis._model.pushStackElement();\n\t\t}\n\n\t\tconst result = CommandExecutor.executeCommands(this._model, this._cursors.getSelections(), opResult.commands, editReason);\n\t\tif (result) {\n\t\t\t// The commands were applied correctly\n\t\t\tthis._interpretCommandResult(result);\n\n\t\t\t// Check for auto-closing closed characters\n\t\t\tconst autoClosedCharactersRanges: Range[] = [];\n\t\t\tconst autoClosedEnclosingRanges: Range[] = [];\n\n\t\t\tfor (let i = 0; i < opResult.commands.length; i++) {\n\t\t\t\tconst command = opResult.commands[i];\n\t\t\t\tif (command instanceof BaseTypeWithAutoClosingCommand && command.enclosingRange && command.closeCharacterRange) {\n\t\t\t\t\tautoClosedCharactersRanges.push(command.closeCharacterRange);\n\t\t\t\t\tautoClosedEnclosingRanges.push(command.enclosingRange);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (autoClosedCharactersRanges.length > 0) {\n\t\t\t\tthis._pushAutoClosedAction(autoClosedCharactersRanges, autoClosedEnclosingRanges);\n\t\t\t}\n\n\t\t\tthis._prevEditOperationType = opResult.type;\n\t\t}\n\n\t\tif (opResult.shouldPushStackElementAfter) {\n\t\t\tthis._model.pushStackElement();\n\t\t}\n\t}\n\n\tprivate _interpretCommandResult(cursorState: Selection[] | null): void {\n\t\tif (!cursorState || cursorState.length === 0) {\n\t\t\tcursorState = this._cursors.readSelectionFromMarkers();\n\t\t}\n\n\t\tthis._columnSelectData = null;\n\t\tthis._cursors.setSelections(cursorState);\n\t\tthis._cursors.normalize();\n\t}\n\n\t// -----------------------------------------------------------------------------------------------------------\n\t// ----- emitting events\n\n\tprivate _emitStateChangedIfNecessary(eventsCollector: ViewModelEventsCollector, source: string | null | undefined, reason: CursorChangeReason, oldState: CursorModelState | null, reachedMaxCursorCount: boolean): boolean {\n\t\tconst newState = CursorModelState.from(this._model, this);\n\t\tif (newState.equals(oldState)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst selections = this._cursors.getSelections();\n\t\tconst viewSelections = this._cursors.getViewSelections();\n\n\t\t// Let the view get the event first.\n\t\teventsCollector.emitViewEvent(new ViewCursorStateChangedEvent(viewSelections, selections, reason));\n\n\t\t// Only after the view has been notified, let the rest of the world know...\n\t\tif (!oldState\n\t\t\t|| oldState.cursorState.length !== newState.cursorState.length\n\t\t\t|| newState.cursorState.some((newCursorState, i) => !newCursorState.modelState.equals(oldState.cursorState[i].modelState))\n\t\t) {\n\t\t\tconst oldSelections = oldState ? oldState.cursorState.map(s => s.modelState.selection) : null;\n\t\t\tconst oldModelVersionId = oldState ? oldState.modelVersionId : 0;\n\t\t\teventsCollector.emitOutgoingEvent(new CursorStateChangedEvent(oldSelections, selections, oldModelVersionId, newState.modelVersionId, source || 'keyboard', reason, reachedMaxCursorCount));\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t// -----------------------------------------------------------------------------------------------------------\n\t// ----- handlers beyond this point\n\n\tprivate _findAutoClosingPairs(edits: IIdentifiedSingleEditOperation[]): [number, number][] | null {\n\t\tif (!edits.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst indices: [number, number][] = [];\n\t\tfor (let i = 0, len = edits.length; i < len; i++) {\n\t\t\tconst edit = edits[i];\n\t\t\tif (!edit.text || edit.text.indexOf('\\n') >= 0) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst m = edit.text.match(/([)\\]}>'\"`])([^)\\]}>'\"`]*)$/);\n\t\t\tif (!m) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst closeChar = m[1];\n\n\t\t\tconst autoClosingPairsCandidates = this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(closeChar);\n\t\t\tif (!autoClosingPairsCandidates || autoClosingPairsCandidates.length !== 1) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst openChar = autoClosingPairsCandidates[0].open;\n\t\t\tconst closeCharIndex = edit.text.length - m[2].length - 1;\n\t\t\tconst openCharIndex = edit.text.lastIndexOf(openChar, closeCharIndex - 1);\n\t\t\tif (openCharIndex === -1) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tindices.push([openCharIndex, closeCharIndex]);\n\t\t}\n\n\t\treturn indices;\n\t}\n\n\tpublic executeEdits(eventsCollector: ViewModelEventsCollector, source: string | null | undefined, edits: IIdentifiedSingleEditOperation[], cursorStateComputer: ICursorStateComputer, reason: TextModelEditSource): void {\n\t\tlet autoClosingIndices: [number, number][] | null = null;\n\t\tif (source === 'snippet') {\n\t\t\tautoClosingIndices = this._findAutoClosingPairs(edits);\n\t\t}\n\n\t\tif (autoClosingIndices) {\n\t\t\tedits[0]._isTracked = true;\n\t\t}\n\t\tconst autoClosedCharactersRanges: Range[] = [];\n\t\tconst autoClosedEnclosingRanges: Range[] = [];\n\t\tconst selections = this._model.pushEditOperations(this.getSelections(), edits, (undoEdits) => {\n\t\t\tif (autoClosingIndices) {\n\t\t\t\tfor (let i = 0, len = autoClosingIndices.length; i < len; i++) {\n\t\t\t\t\tconst [openCharInnerIndex, closeCharInnerIndex] = autoClosingIndices[i];\n\t\t\t\t\tconst undoEdit = undoEdits[i];\n\t\t\t\t\tconst lineNumber = undoEdit.range.startLineNumber;\n\t\t\t\t\tconst openCharIndex = undoEdit.range.startColumn - 1 + openCharInnerIndex;\n\t\t\t\t\tconst closeCharIndex = undoEdit.range.startColumn - 1 + closeCharInnerIndex;\n\n\t\t\t\t\tautoClosedCharactersRanges.push(new Range(lineNumber, closeCharIndex + 1, lineNumber, closeCharIndex + 2));\n\t\t\t\t\tautoClosedEnclosingRanges.push(new Range(lineNumber, openCharIndex + 1, lineNumber, closeCharIndex + 2));\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst selections = cursorStateComputer(undoEdits);\n\t\t\tif (selections) {\n\t\t\t\t// Don't recover the selection from markers because\n\t\t\t\t// we know what it should be.\n\t\t\t\tthis._isHandling = true;\n\t\t\t}\n\n\t\t\treturn selections;\n\t\t}, undefined, reason);\n\t\tif (selections) {\n\t\t\tthis._isHandling = false;\n\t\t\tthis.setSelections(eventsCollector, source, selections, CursorChangeReason.NotSet);\n\t\t}\n\t\tif (autoClosedCharactersRanges.length > 0) {\n\t\t\tthis._pushAutoClosedAction(autoClosedCharactersRanges, autoClosedEnclosingRanges);\n\t\t}\n\t}\n\n\tprivate _executeEdit(callback: () => void, eventsCollector: ViewModelEventsCollector, source: string | null | undefined, cursorChangeReason: CursorChangeReason = CursorChangeReason.NotSet): void {\n\t\tif (this.context.cursorConfig.readOnly) {\n\t\t\t// we cannot edit when read only...\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldState = CursorModelState.from(this._model, this);\n\t\tthis._cursors.stopTrackingSelections();\n\t\tthis._isHandling = true;\n\n\t\ttry {\n\t\t\tthis._cursors.ensureValidState();\n\t\t\tcallback();\n\t\t} catch (err) {\n\t\t\tonUnexpectedError(err);\n\t\t}\n\n\t\tthis._isHandling = false;\n\t\tthis._cursors.startTrackingSelections();\n\t\tthis._validateAutoClosedActions();\n\t\tif (this._emitStateChangedIfNecessary(eventsCollector, source, cursorChangeReason, oldState, false)) {\n\t\t\tthis.revealAll(eventsCollector, source, false, VerticalRevealType.Simple, true, editorCommon.ScrollType.Smooth);\n\t\t}\n\t}\n\n\tpublic getAutoClosedCharacters(): Range[] {\n\t\treturn AutoClosedAction.getAllAutoClosedCharacters(this._autoClosedActions);\n\t}\n\n\tpublic startComposition(eventsCollector: ViewModelEventsCollector): void {\n\t\tthis._compositionState = new CompositionState(this._model, this.getSelections());\n\t}\n\n\tpublic endComposition(eventsCollector: ViewModelEventsCollector, source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'compositionEnd', detailedSource: source });\n\n\t\tconst compositionOutcome = this._compositionState ? this._compositionState.deduceOutcome(this._model, this.getSelections()) : null;\n\t\tthis._compositionState = null;\n\n\t\tthis._executeEdit(() => {\n\t\t\tif (source === 'keyboard') {\n\t\t\t\t// composition finishes, let's check if we need to auto complete if necessary.\n\t\t\t\tthis._executeEditOperation(TypeOperations.compositionEndWithInterceptors(this._prevEditOperationType, this.context.cursorConfig, this._model, compositionOutcome, this.getSelections(), this.getAutoClosedCharacters()), reason);\n\t\t\t}\n\t\t}, eventsCollector, source);\n\t}\n\n\tpublic type(eventsCollector: ViewModelEventsCollector, text: string, source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'type', detailedSource: source });\n\n\t\tthis._executeEdit(() => {\n\t\t\tif (source === 'keyboard') {\n\t\t\t\t// If this event is coming straight from the keyboard, look for electric characters and enter\n\n\t\t\t\tconst len = text.length;\n\t\t\t\tlet offset = 0;\n\t\t\t\twhile (offset < len) {\n\t\t\t\t\tconst charLength = strings.nextCharLength(text, offset);\n\t\t\t\t\tconst chr = text.substr(offset, charLength);\n\n\t\t\t\t\t// Here we must interpret each typed character individually\n\t\t\t\t\tthis._executeEditOperation(TypeOperations.typeWithInterceptors(!!this._compositionState, this._prevEditOperationType, this.context.cursorConfig, this._model, this.getSelections(), this.getAutoClosedCharacters(), chr), reason);\n\n\t\t\t\t\toffset += charLength;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tthis._executeEditOperation(TypeOperations.typeWithoutInterceptors(this._prevEditOperationType, this.context.cursorConfig, this._model, this.getSelections(), text), reason);\n\t\t\t}\n\t\t}, eventsCollector, source);\n\t}\n\n\tpublic compositionType(eventsCollector: ViewModelEventsCollector, text: string, replacePrevCharCnt: number, replaceNextCharCnt: number, positionDelta: number, source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'compositionType', detailedSource: source });\n\n\t\tif (text.length === 0 && replacePrevCharCnt === 0 && replaceNextCharCnt === 0) {\n\t\t\t// this edit is a no-op\n\t\t\tif (positionDelta !== 0) {\n\t\t\t\t// but it still wants to move the cursor\n\t\t\t\tconst newSelections = this.getSelections().map(selection => {\n\t\t\t\t\tconst position = selection.getPosition();\n\t\t\t\t\treturn new Selection(position.lineNumber, position.column + positionDelta, position.lineNumber, position.column + positionDelta);\n\t\t\t\t});\n\t\t\t\tthis.setSelections(eventsCollector, source, newSelections, CursorChangeReason.NotSet);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tthis._executeEdit(() => {\n\t\t\tthis._executeEditOperation(TypeOperations.compositionType(this._prevEditOperationType, this.context.cursorConfig, this._model, this.getSelections(), text, replacePrevCharCnt, replaceNextCharCnt, positionDelta), reason);\n\t\t}, eventsCollector, source);\n\t}\n\n\tpublic paste(eventsCollector: ViewModelEventsCollector, text: string, pasteOnNewLine: boolean, multicursorText?: string[] | null | undefined, source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'paste', detailedSource: source });\n\n\t\tthis._executeEdit(() => {\n\t\t\tthis._executeEditOperation(TypeOperations.paste(this.context.cursorConfig, this._model, this.getSelections(), text, pasteOnNewLine, multicursorText || []), reason);\n\t\t}, eventsCollector, source, CursorChangeReason.Paste);\n\t}\n\n\tpublic cut(eventsCollector: ViewModelEventsCollector, source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'cut', detailedSource: source });\n\t\tthis._executeEdit(() => {\n\t\t\tthis._executeEditOperation(DeleteOperations.cut(this.context.cursorConfig, this._model, this.getSelections()), reason);\n\t\t}, eventsCollector, source);\n\t}\n\n\tpublic executeCommand(eventsCollector: ViewModelEventsCollector, command: editorCommon.ICommand, source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'executeCommand', detailedSource: source });\n\n\t\tthis._executeEdit(() => {\n\t\t\tthis._cursors.killSecondaryCursors();\n\n\t\t\tthis._executeEditOperation(new EditOperationResult(EditOperationType.Other, [command], {\n\t\t\t\tshouldPushStackElementBefore: false,\n\t\t\t\tshouldPushStackElementAfter: false\n\t\t\t}), reason);\n\t\t}, eventsCollector, source);\n\t}\n\n\tpublic executeCommands(eventsCollector: ViewModelEventsCollector, commands: editorCommon.ICommand[], source?: string | null | undefined): void {\n\t\tconst reason = EditSources.cursor({ kind: 'executeCommands', detailedSource: source });\n\n\t\tthis._executeEdit(() => {\n\t\t\tthis._executeEditOperation(new EditOperationResult(EditOperationType.Other, commands, {\n\t\t\t\tshouldPushStackElementBefore: false,\n\t\t\t\tshouldPushStackElementAfter: false\n\t\t\t}), reason);\n\t\t}, eventsCollector, source);\n\t}\n}\n\n/**\n * A snapshot of the cursor and the model state\n */\nclass CursorModelState {\n\tpublic static from(model: ITextModel, cursor: CursorsController): CursorModelState {\n\t\treturn new CursorModelState(model.getVersionId(), cursor.getCursorStates());\n\t}\n\n\tconstructor(\n\t\tpublic readonly modelVersionId: number,\n\t\tpublic readonly cursorState: CursorState[],\n\t) {\n\t}\n\n\tpublic equals(other: CursorModelState | null): boolean {\n\t\tif (!other) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.modelVersionId !== other.modelVersionId) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.cursorState.length !== other.cursorState.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0, len = this.cursorState.length; i < len; i++) {\n\t\t\tif (!this.cursorState[i].equals(other.cursorState[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n}\n\nclass AutoClosedAction {\n\n\tpublic static getAllAutoClosedCharacters(autoClosedActions: AutoClosedAction[]): Range[] {\n\t\tlet autoClosedCharacters: Range[] = [];\n\t\tfor (const autoClosedAction of autoClosedActions) {\n\t\t\tautoClosedCharacters = autoClosedCharacters.concat(autoClosedAction.getAutoClosedCharactersRanges());\n\t\t}\n\t\treturn autoClosedCharacters;\n\t}\n\n\tprivate readonly _model: ITextModel;\n\n\tprivate _autoClosedCharactersDecorations: string[];\n\tprivate _autoClosedEnclosingDecorations: string[];\n\n\tconstructor(model: ITextModel, autoClosedCharactersDecorations: string[], autoClosedEnclosingDecorations: string[]) {\n\t\tthis._model = model;\n\t\tthis._autoClosedCharactersDecorations = autoClosedCharactersDecorations;\n\t\tthis._autoClosedEnclosingDecorations = autoClosedEnclosingDecorations;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._autoClosedCharactersDecorations = this._model.deltaDecorations(this._autoClosedCharactersDecorations, []);\n\t\tthis._autoClosedEnclosingDecorations = this._model.deltaDecorations(this._autoClosedEnclosingDecorations, []);\n\t}\n\n\tpublic getAutoClosedCharactersRanges(): Range[] {\n\t\tconst result: Range[] = [];\n\t\tfor (let i = 0; i < this._autoClosedCharactersDecorations.length; i++) {\n\t\t\tconst decorationRange = this._model.getDecorationRange(this._autoClosedCharactersDecorations[i]);\n\t\t\tif (decorationRange) {\n\t\t\t\tresult.push(decorationRange);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic isValid(selections: Range[]): boolean {\n\t\tconst enclosingRanges: Range[] = [];\n\t\tfor (let i = 0; i < this._autoClosedEnclosingDecorations.length; i++) {\n\t\t\tconst decorationRange = this._model.getDecorationRange(this._autoClosedEnclosingDecorations[i]);\n\t\t\tif (decorationRange) {\n\t\t\t\tenclosingRanges.push(decorationRange);\n\t\t\t\tif (decorationRange.startLineNumber !== decorationRange.endLineNumber) {\n\t\t\t\t\t// Stop tracking if the range becomes multiline...\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tenclosingRanges.sort(Range.compareRangesUsingStarts);\n\n\t\tselections.sort(Range.compareRangesUsingStarts);\n\n\t\tfor (let i = 0; i < selections.length; i++) {\n\t\t\tif (i >= enclosingRanges.length) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!enclosingRanges[i].strictContainsRange(selections[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\ninterface IExecContext {\n\treadonly model: ITextModel;\n\treadonly selectionsBefore: Selection[];\n\treadonly trackedRanges: string[];\n\treadonly trackedRangesDirection: SelectionDirection[];\n}\n\ninterface ICommandData {\n\toperations: IIdentifiedSingleEditOperation[];\n\thadTrackedEditOperation: boolean;\n}\n\ninterface ICommandsData {\n\toperations: IIdentifiedSingleEditOperation[];\n\thadTrackedEditOperation: boolean;\n}\n\nexport class CommandExecutor {\n\n\tpublic static executeCommands(model: ITextModel, selectionsBefore: Selection[], commands: (editorCommon.ICommand | null)[], editReason: TextModelEditSource = EditSources.unknown({ name: 'executeCommands' })): Selection[] | null {\n\n\t\tconst ctx: IExecContext = {\n\t\t\tmodel: model,\n\t\t\tselectionsBefore: selectionsBefore,\n\t\t\ttrackedRanges: [],\n\t\t\ttrackedRangesDirection: []\n\t\t};\n\n\t\tconst result = this._innerExecuteCommands(ctx, commands, editReason);\n\n\t\tfor (let i = 0, len = ctx.trackedRanges.length; i < len; i++) {\n\t\t\tctx.model._setTrackedRange(ctx.trackedRanges[i], null, TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate static _innerExecuteCommands(ctx: IExecContext, commands: (editorCommon.ICommand | null)[], editReason: TextModelEditSource): Selection[] | null {\n\n\t\tif (this._arrayIsEmpty(commands)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst commandsData = this._getEditOperations(ctx, commands);\n\t\tif (commandsData.operations.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst rawOperations = commandsData.operations;\n\n\t\tconst loserCursorsMap = this._getLoserCursorMap(rawOperations);\n\t\tif (loserCursorsMap.hasOwnProperty('0')) {\n\t\t\t// These commands are very messed up\n\t\t\tconsole.warn('Ignoring commands');\n\t\t\treturn null;\n\t\t}\n\n\t\t// Remove operations belonging to losing cursors\n\t\tconst filteredOperations: IIdentifiedSingleEditOperation[] = [];\n\t\tfor (let i = 0, len = rawOperations.length; i < len; i++) {\n\t\t\tif (!loserCursorsMap.hasOwnProperty(rawOperations[i].identifier!.major.toString())) {\n\t\t\t\tfilteredOperations.push(rawOperations[i]);\n\t\t\t}\n\t\t}\n\n\t\t// TODO@Alex: find a better way to do this.\n\t\t// give the hint that edit operations are tracked to the model\n\t\tif (commandsData.hadTrackedEditOperation && filteredOperations.length > 0) {\n\t\t\tfilteredOperations[0]._isTracked = true;\n\t\t}\n\t\tlet selectionsAfter = ctx.model.pushEditOperations(ctx.selectionsBefore, filteredOperations, (inverseEditOperations: IValidEditOperation[]): Selection[] => {\n\t\t\tconst groupedInverseEditOperations: IValidEditOperation[][] = [];\n\t\t\tfor (let i = 0; i < ctx.selectionsBefore.length; i++) {\n\t\t\t\tgroupedInverseEditOperations[i] = [];\n\t\t\t}\n\t\t\tfor (const op of inverseEditOperations) {\n\t\t\t\tif (!op.identifier) {\n\t\t\t\t\t// perhaps auto whitespace trim edits\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tgroupedInverseEditOperations[op.identifier.major].push(op);\n\t\t\t}\n\t\t\tconst minorBasedSorter = (a: IValidEditOperation, b: IValidEditOperation) => {\n\t\t\t\treturn a.identifier!.minor - b.identifier!.minor;\n\t\t\t};\n\t\t\tconst cursorSelections: Selection[] = [];\n\t\t\tfor (let i = 0; i < ctx.selectionsBefore.length; i++) {\n\t\t\t\tif (groupedInverseEditOperations[i].length > 0) {\n\t\t\t\t\tgroupedInverseEditOperations[i].sort(minorBasedSorter);\n\t\t\t\t\tcursorSelections[i] = commands[i]!.computeCursorState(ctx.model, {\n\t\t\t\t\t\tgetInverseEditOperations: () => {\n\t\t\t\t\t\t\treturn groupedInverseEditOperations[i];\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tgetTrackedSelection: (id: string) => {\n\t\t\t\t\t\t\tconst idx = parseInt(id, 10);\n\t\t\t\t\t\t\tconst range = ctx.model._getTrackedRange(ctx.trackedRanges[idx])!;\n\t\t\t\t\t\t\tif (ctx.trackedRangesDirection[idx] === SelectionDirection.LTR) {\n\t\t\t\t\t\t\t\treturn new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn new Selection(range.endLineNumber, range.endColumn, range.startLineNumber, range.startColumn);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tcursorSelections[i] = ctx.selectionsBefore[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn cursorSelections;\n\t\t}, undefined, editReason);\n\t\tif (!selectionsAfter) {\n\t\t\tselectionsAfter = ctx.selectionsBefore;\n\t\t}\n\n\t\t// Extract losing cursors\n\t\tconst losingCursors: number[] = [];\n\t\tfor (const losingCursorIndex in loserCursorsMap) {\n\t\t\tif (loserCursorsMap.hasOwnProperty(losingCursorIndex)) {\n\t\t\t\tlosingCursors.push(parseInt(losingCursorIndex, 10));\n\t\t\t}\n\t\t}\n\n\t\t// Sort losing cursors descending\n\t\tlosingCursors.sort((a: number, b: number): number => {\n\t\t\treturn b - a;\n\t\t});\n\n\t\t// Remove losing cursors\n\t\tfor (const losingCursor of losingCursors) {\n\t\t\tselectionsAfter.splice(losingCursor, 1);\n\t\t}\n\n\t\treturn selectionsAfter;\n\t}\n\n\tprivate static _arrayIsEmpty(commands: (editorCommon.ICommand | null)[]): boolean {\n\t\tfor (let i = 0, len = commands.length; i < len; i++) {\n\t\t\tif (commands[i]) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate static _getEditOperations(ctx: IExecContext, commands: (editorCommon.ICommand | null)[]): ICommandsData {\n\t\tlet operations: IIdentifiedSingleEditOperation[] = [];\n\t\tlet hadTrackedEditOperation: boolean = false;\n\n\t\tfor (let i = 0, len = commands.length; i < len; i++) {\n\t\t\tconst command = commands[i];\n\t\t\tif (command) {\n\t\t\t\tconst r = this._getEditOperationsFromCommand(ctx, i, command);\n\t\t\t\toperations = operations.concat(r.operations);\n\t\t\t\thadTrackedEditOperation = hadTrackedEditOperation || r.hadTrackedEditOperation;\n\t\t\t}\n\t\t}\n\t\treturn {\n\t\t\toperations: operations,\n\t\t\thadTrackedEditOperation: hadTrackedEditOperation\n\t\t};\n\t}\n\n\tprivate static _getEditOperationsFromCommand(ctx: IExecContext, majorIdentifier: number, command: editorCommon.ICommand): ICommandData {\n\t\t// This method acts as a transaction, if the command fails\n\t\t// everything it has done is ignored\n\t\tconst operations: IIdentifiedSingleEditOperation[] = [];\n\t\tlet operationMinor = 0;\n\n\t\tconst addEditOperation = (range: IRange, text: string | null, forceMoveMarkers: boolean = false) => {\n\t\t\tif (Range.isEmpty(range) && text === '') {\n\t\t\t\t// This command wants to add a no-op => no thank you\n\t\t\t\treturn;\n\t\t\t}\n\t\t\toperations.push({\n\t\t\t\tidentifier: {\n\t\t\t\t\tmajor: majorIdentifier,\n\t\t\t\t\tminor: operationMinor++\n\t\t\t\t},\n\t\t\t\trange: range,\n\t\t\t\ttext: text,\n\t\t\t\tforceMoveMarkers: forceMoveMarkers,\n\t\t\t\tisAutoWhitespaceEdit: command.insertsAutoWhitespace\n\t\t\t});\n\t\t};\n\n\t\tlet hadTrackedEditOperation = false;\n\t\tconst addTrackedEditOperation = (selection: IRange, text: string | null, forceMoveMarkers?: boolean) => {\n\t\t\thadTrackedEditOperation = true;\n\t\t\taddEditOperation(selection, text, forceMoveMarkers);\n\t\t};\n\n\t\tconst trackSelection = (_selection: ISelection, trackPreviousOnEmpty?: boolean) => {\n\t\t\tconst selection = Selection.liftSelection(_selection);\n\t\t\tlet stickiness: TrackedRangeStickiness;\n\t\t\tif (selection.isEmpty()) {\n\t\t\t\tif (typeof trackPreviousOnEmpty === 'boolean') {\n\t\t\t\t\tif (trackPreviousOnEmpty) {\n\t\t\t\t\t\tstickiness = TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstickiness = TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// Try to lock it with surrounding text\n\t\t\t\t\tconst maxLineColumn = ctx.model.getLineMaxColumn(selection.startLineNumber);\n\t\t\t\t\tif (selection.startColumn === maxLineColumn) {\n\t\t\t\t\t\tstickiness = TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstickiness = TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tstickiness = TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n\t\t\t}\n\n\t\t\tconst l = ctx.trackedRanges.length;\n\t\t\tconst id = ctx.model._setTrackedRange(null, selection, stickiness);\n\t\t\tctx.trackedRanges[l] = id;\n\t\t\tctx.trackedRangesDirection[l] = selection.getDirection();\n\t\t\treturn l.toString();\n\t\t};\n\n\t\tconst editOperationBuilder: editorCommon.IEditOperationBuilder = {\n\t\t\taddEditOperation: addEditOperation,\n\t\t\taddTrackedEditOperation: addTrackedEditOperation,\n\t\t\ttrackSelection: trackSelection\n\t\t};\n\n\t\ttry {\n\t\t\tcommand.getEditOperations(ctx.model, editOperationBuilder);\n\t\t} catch (e) {\n\t\t\t// TODO@Alex use notification service if this should be user facing\n\t\t\t// e.friendlyMessage = nls.localize('corrupt.commands', \"Unexpected exception while executing command.\");\n\t\t\tonUnexpectedError(e);\n\t\t\treturn {\n\t\t\t\toperations: [],\n\t\t\t\thadTrackedEditOperation: false\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\toperations: operations,\n\t\t\thadTrackedEditOperation: hadTrackedEditOperation\n\t\t};\n\t}\n\n\tprivate static _getLoserCursorMap(operations: IIdentifiedSingleEditOperation[]): { [index: string]: boolean } {\n\t\t// This is destructive on the array\n\t\toperations = operations.slice(0);\n\n\t\t// Sort operations with last one first\n\t\toperations.sort((a: IIdentifiedSingleEditOperation, b: IIdentifiedSingleEditOperation): number => {\n\t\t\t// Note the minus!\n\t\t\treturn -(Range.compareRangesUsingEnds(a.range, b.range));\n\t\t});\n\n\t\t// Operations can not overlap!\n\t\tconst loserCursorsMap: { [index: string]: boolean } = {};\n\n\t\tfor (let i = 1; i < operations.length; i++) {\n\t\t\tconst previousOp = operations[i - 1];\n\t\t\tconst currentOp = operations[i];\n\n\t\t\tif (Range.getStartPosition(previousOp.range).isBefore(Range.getEndPosition(currentOp.range))) {\n\n\t\t\t\tlet loserMajor: number;\n\n\t\t\t\tif (previousOp.identifier!.major > currentOp.identifier!.major) {\n\t\t\t\t\t// previousOp loses the battle\n\t\t\t\t\tloserMajor = previousOp.identifier!.major;\n\t\t\t\t} else {\n\t\t\t\t\tloserMajor = currentOp.identifier!.major;\n\t\t\t\t}\n\n\t\t\t\tloserCursorsMap[loserMajor.toString()] = true;\n\n\t\t\t\tfor (let j = 0; j < operations.length; j++) {\n\t\t\t\t\tif (operations[j].identifier!.major === loserMajor) {\n\t\t\t\t\t\toperations.splice(j, 1);\n\t\t\t\t\t\tif (j < i) {\n\t\t\t\t\t\t\ti--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tj--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (i > 0) {\n\t\t\t\t\ti--;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn loserCursorsMap;\n\t}\n}\n\nclass CompositionLineState {\n\tconstructor(\n\t\tpublic readonly text: string,\n\t\tpublic readonly lineNumber: number,\n\t\tpublic readonly startSelectionOffset: number,\n\t\tpublic readonly endSelectionOffset: number\n\t) { }\n}\n\nclass CompositionState {\n\n\tprivate readonly _original: CompositionLineState[] | null;\n\n\tprivate static _capture(textModel: ITextModel, selections: Selection[]): CompositionLineState[] | null {\n\t\tconst result: CompositionLineState[] = [];\n\t\tfor (const selection of selections) {\n\t\t\tif (selection.startLineNumber !== selection.endLineNumber) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst lineNumber = selection.startLineNumber;\n\t\t\tresult.push(new CompositionLineState(\n\t\t\t\ttextModel.getLineContent(lineNumber),\n\t\t\t\tlineNumber,\n\t\t\t\tselection.startColumn - 1,\n\t\t\t\tselection.endColumn - 1\n\t\t\t));\n\t\t}\n\t\treturn result;\n\t}\n\n\tconstructor(textModel: ITextModel, selections: Selection[]) {\n\t\tthis._original = CompositionState._capture(textModel, selections);\n\t}\n\n\t/**\n\t * Returns the inserted text during this composition.\n\t * If the composition resulted in existing text being changed (i.e. not a pure insertion) it returns null.\n\t */\n\tdeduceOutcome(textModel: ITextModel, selections: Selection[]): CompositionOutcome[] | null {\n\t\tif (!this._original) {\n\t\t\treturn null;\n\t\t}\n\t\tconst current = CompositionState._capture(textModel, selections);\n\t\tif (!current) {\n\t\t\treturn null;\n\t\t}\n\t\tif (this._original.length !== current.length) {\n\t\t\treturn null;\n\t\t}\n\t\tconst result: CompositionOutcome[] = [];\n\t\tfor (let i = 0, len = this._original.length; i < len; i++) {\n\t\t\tresult.push(CompositionState._deduceOutcome(this._original[i], current[i]));\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate static _deduceOutcome(original: CompositionLineState, current: CompositionLineState): CompositionOutcome {\n\t\tconst commonPrefix = Math.min(\n\t\t\toriginal.startSelectionOffset,\n\t\t\tcurrent.startSelectionOffset,\n\t\t\tstrings.commonPrefixLength(original.text, current.text)\n\t\t);\n\t\tconst commonSuffix = Math.min(\n\t\t\toriginal.text.length - original.endSelectionOffset,\n\t\t\tcurrent.text.length - current.endSelectionOffset,\n\t\t\tstrings.commonSuffixLength(original.text, current.text)\n\t\t);\n\t\tconst deletedText = original.text.substring(commonPrefix, original.text.length - commonSuffix);\n\t\tconst insertedTextStartOffset = commonPrefix;\n\t\tconst insertedTextEndOffset = current.text.length - commonSuffix;\n\t\tconst insertedText = current.text.substring(insertedTextStartOffset, insertedTextEndOffset);\n\t\tconst insertedTextRange = new Range(current.lineNumber, insertedTextStartOffset + 1, current.lineNumber, insertedTextEndOffset + 1);\n\t\treturn new CompositionOutcome(\n\t\t\tdeletedText,\n\t\t\toriginal.startSelectionOffset - commonPrefix,\n\t\t\toriginal.endSelectionOffset - commonPrefix,\n\t\t\tinsertedText,\n\t\t\tcurrent.startSelectionOffset - commonPrefix,\n\t\t\tcurrent.endSelectionOffset - commonPrefix,\n\t\t\tinsertedTextRange\n\t\t);\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}