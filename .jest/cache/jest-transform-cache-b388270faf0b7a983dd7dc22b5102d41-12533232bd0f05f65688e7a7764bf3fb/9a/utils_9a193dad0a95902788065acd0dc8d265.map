{"version":3,"names":["cov_xlwo02zig","actualCoverage","AsyncIterableProducer","toDisposable","observableValue","runOnChange","transaction","sumByCategory","items","getValue","getCategory","f","s","reduce","acc","item","category","b","mapObservableDelta","obs","mapFn","store","obsResult","get","add","value","_prevValue","changes","tx","c","set","iterateObservableChanges","e","isDisposed","prevValue","change","emitOne","Promise","res","undefined"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/editTelemetry/browser/helpers/utils.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AsyncIterableProducer } from '../../../../../base/common/async.js';\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IObservableWithChange, observableValue, runOnChange, transaction, RemoveUndefined } from '../../../../../base/common/observable.js';\n\nexport function sumByCategory<T, TCategory extends string>(items: readonly T[], getValue: (item: T) => number, getCategory: (item: T) => TCategory): Record<TCategory, number | undefined> {\n\treturn items.reduce((acc, item) => {\n\t\tconst category = getCategory(item);\n\t\tacc[category] = (acc[category] || 0) + getValue(item);\n\t\treturn acc;\n\t\t// eslint-disable-next-line local/code-no-any-casts\n\t}, {} as any as Record<TCategory, number>);\n}\n\nexport function mapObservableDelta<T, TDelta, TDeltaNew>(obs: IObservableWithChange<T, TDelta>, mapFn: (value: TDelta) => TDeltaNew, store: DisposableStore): IObservableWithChange<T, TDeltaNew> {\n\tconst obsResult = observableValue<T, TDeltaNew>('mapped', obs.get());\n\tstore.add(runOnChange(obs, (value, _prevValue, changes) => {\n\t\ttransaction(tx => {\n\t\t\tfor (const c of changes) {\n\t\t\t\tobsResult.set(value, tx, mapFn(c));\n\t\t\t}\n\t\t});\n\t}));\n\treturn obsResult;\n}\n\nexport function iterateObservableChanges<T, TChange>(obs: IObservableWithChange<T, TChange>, store: DisposableStore): AsyncIterable<{ value: T; prevValue: T; change: RemoveUndefined<TChange>[] }> {\n\treturn new AsyncIterableProducer<{ value: T; prevValue: T; change: RemoveUndefined<TChange>[] }>((e) => {\n\t\tif (store.isDisposed) {\n\t\t\treturn;\n\t\t}\n\t\tstore.add(runOnChange(obs, (value, prevValue, change) => {\n\t\t\te.emitOne({ value, prevValue, change: change });\n\t\t}));\n\n\t\treturn new Promise((res) => {\n\t\t\tstore.add(toDisposable(() => {\n\t\t\t\tres(undefined);\n\t\t\t}));\n\t\t});\n\t});\n}\n"],"mappings":"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","ignoreList":[]}