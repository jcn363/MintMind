{"version":3,"names":["cov_13qmd4yesu","actualCoverage","Disposable","isPowerShell","CommandLineCdPrefixRewriter","rewrite","options","f","s","cwd","b","undefined","isPwsh","shell","os","cdPrefixMatch","commandLine","match","cdDir","groups","dir","cdSuffix","suffix","cdDirPath","startsWith","endsWith","slice","replace","cwdFsPath","fsPath","toLowerCase","rewritten","reasoning"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/terminalContrib/chatAgentTools/browser/tools/commandLineRewriter/commandLineCdPrefixRewriter.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../../../../base/common/lifecycle.js';\nimport { OperatingSystem } from '../../../../../../../base/common/platform.js';\nimport { isPowerShell } from '../../runInTerminalHelpers.js';\nimport type { ICommandLineRewriter, ICommandLineRewriterOptions, ICommandLineRewriterResult } from './commandLineRewriter.js';\n\nexport class CommandLineCdPrefixRewriter extends Disposable implements ICommandLineRewriter {\n\trewrite(options: ICommandLineRewriterOptions): ICommandLineRewriterResult | undefined {\n\t\tif (!options.cwd) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst isPwsh = isPowerShell(options.shell, options.os);\n\n\t\t// Re-write the command if it starts with `cd <dir> && <suffix>` or `cd <dir>; <suffix>`\n\t\t// to just `<suffix>` if the directory matches the current terminal's cwd. This simplifies\n\t\t// the result in the chat by removing redundancies that some models like to add.\n\t\tconst cdPrefixMatch = options.commandLine.match(\n\t\t\tisPwsh\n\t\t\t\t? /^(?:cd(?: \\/d)?|Set-Location(?: -Path)?) (?<dir>[^\\s]+) ?(?:&&|;)\\s+(?<suffix>.+)$/i\n\t\t\t\t: /^cd (?<dir>[^\\s]+) &&\\s+(?<suffix>.+)$/\n\t\t);\n\t\tconst cdDir = cdPrefixMatch?.groups?.dir;\n\t\tconst cdSuffix = cdPrefixMatch?.groups?.suffix;\n\t\tif (cdDir && cdSuffix) {\n\t\t\t// Remove any surrounding quotes\n\t\t\tlet cdDirPath = cdDir;\n\t\t\tif (cdDirPath.startsWith('\"') && cdDirPath.endsWith('\"')) {\n\t\t\t\tcdDirPath = cdDirPath.slice(1, -1);\n\t\t\t}\n\t\t\t// Normalize trailing slashes\n\t\t\tcdDirPath = cdDirPath.replace(/(?:[\\\\\\/])$/, '');\n\t\t\tlet cwdFsPath = options.cwd.fsPath.replace(/(?:[\\\\\\/])$/, '');\n\t\t\t// Case-insensitive comparison on Windows\n\t\t\tif (options.os === OperatingSystem.Windows) {\n\t\t\t\tcdDirPath = cdDirPath.toLowerCase();\n\t\t\t\tcwdFsPath = cwdFsPath.toLowerCase();\n\t\t\t}\n\t\t\tif (cdDirPath === cwdFsPath) {\n\t\t\t\treturn { rewritten: cdSuffix, reasoning: 'Removed redundant cd command' };\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAqBE;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AArBF;;;;AAKA,SAASE,UAAU,QAAQ,+CAA+C;AAE1E,SAASC,YAAY,QAAQ,+BAA+B;AAG5D,OAAM,MAAOC,2BAA4B,SAAQF,UAAU;EAC1DG,OAAOA,CAACC,OAAoC;IAAA;IAAAN,cAAA,GAAAO,CAAA;IAAAP,cAAA,GAAAQ,CAAA;IAC3C,IAAI,CAACF,OAAO,CAACG,GAAG,EAAE;MAAA;MAAAT,cAAA,GAAAU,CAAA;MAAAV,cAAA,GAAAQ,CAAA;MACjB,OAAOG,SAAS;IACjB,CAAC;IAAA;IAAA;MAAAX,cAAA,GAAAU,CAAA;IAAA;IAED,MAAME,MAAM;IAAA;IAAA,CAAAZ,cAAA,GAAAQ,CAAA,OAAGL,YAAY,CAACG,OAAO,CAACO,KAAK,EAAEP,OAAO,CAACQ,EAAE,CAAC;IAEtD;IACA;IACA;IACA,MAAMC,aAAa;IAAA;IAAA,CAAAf,cAAA,GAAAQ,CAAA,OAAGF,OAAO,CAACU,WAAW,CAACC,KAAK,CAC9CL,MAAM;IAAA;IAAA,CAAAZ,cAAA,GAAAU,CAAA,UACH,qFAAqF;IAAA;IAAA,CAAAV,cAAA,GAAAU,CAAA,UACrF,wCAAwC,EAC3C;IACD,MAAMQ,KAAK;IAAA;IAAA,CAAAlB,cAAA,GAAAQ,CAAA,OAAGO,aAAa,EAAEI,MAAM,EAAEC,GAAG;IACxC,MAAMC,QAAQ;IAAA;IAAA,CAAArB,cAAA,GAAAQ,CAAA,OAAGO,aAAa,EAAEI,MAAM,EAAEG,MAAM;IAAC;IAAAtB,cAAA,GAAAQ,CAAA;IAC/C;IAAI;IAAA,CAAAR,cAAA,GAAAU,CAAA,UAAAQ,KAAK;IAAA;IAAA,CAAAlB,cAAA,GAAAU,CAAA,UAAIW,QAAQ,GAAE;MAAA;MAAArB,cAAA,GAAAU,CAAA;MACtB;MACA,IAAIa,SAAS;MAAA;MAAA,CAAAvB,cAAA,GAAAQ,CAAA,OAAGU,KAAK;MAAC;MAAAlB,cAAA,GAAAQ,CAAA;MACtB;MAAI;MAAA,CAAAR,cAAA,GAAAU,CAAA,UAAAa,SAAS,CAACC,UAAU,CAAC,GAAG,CAAC;MAAA;MAAA,CAAAxB,cAAA,GAAAU,CAAA,UAAIa,SAAS,CAACE,QAAQ,CAAC,GAAG,CAAC,GAAE;QAAA;QAAAzB,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAQ,CAAA;QACzDe,SAAS,GAAGA,SAAS,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACnC,CAAC;MAAA;MAAA;QAAA1B,cAAA,GAAAU,CAAA;MAAA;MACD;MAAAV,cAAA,GAAAQ,CAAA;MACAe,SAAS,GAAGA,SAAS,CAACI,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;MAChD,IAAIC,SAAS;MAAA;MAAA,CAAA5B,cAAA,GAAAQ,CAAA,QAAGF,OAAO,CAACG,GAAG,CAACoB,MAAM,CAACF,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;MAC7D;MAAA;MAAA3B,cAAA,GAAAQ,CAAA;MACA,IAAIF,OAAO,CAACQ,EAAE,sCAA8B;QAAA;QAAAd,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAQ,CAAA;QAC3Ce,SAAS,GAAGA,SAAS,CAACO,WAAW,EAAE;QAAC;QAAA9B,cAAA,GAAAQ,CAAA;QACpCoB,SAAS,GAAGA,SAAS,CAACE,WAAW,EAAE;MACpC,CAAC;MAAA;MAAA;QAAA9B,cAAA,GAAAU,CAAA;MAAA;MAAAV,cAAA,GAAAQ,CAAA;MACD,IAAIe,SAAS,KAAKK,SAAS,EAAE;QAAA;QAAA5B,cAAA,GAAAU,CAAA;QAAAV,cAAA,GAAAQ,CAAA;QAC5B,OAAO;UAAEuB,SAAS,EAAEV,QAAQ;UAAEW,SAAS,EAAE;QAA8B,CAAE;MAC1E,CAAC;MAAA;MAAA;QAAAhC,cAAA,GAAAU,CAAA;MAAA;IACF,CAAC;IAAA;IAAA;MAAAV,cAAA,GAAAU,CAAA;IAAA;IAAAV,cAAA,GAAAQ,CAAA;IACD,OAAOG,SAAS;EACjB","ignoreList":[]}