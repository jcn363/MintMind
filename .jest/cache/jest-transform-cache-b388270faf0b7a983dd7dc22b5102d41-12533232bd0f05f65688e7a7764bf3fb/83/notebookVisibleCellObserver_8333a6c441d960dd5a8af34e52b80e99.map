{"version":3,"names":["cov_21g8aonwy3","actualCoverage","diffSets","Emitter","Disposable","DisposableStore","isDefined","cellRangesToIndexes","NotebookVisibleCellObserver","_notebookEditor","_onDidChangeVisibleCells","s","_register","onDidChangeVisibleCells","event","_viewModelDisposables","_visibleCells","visibleCells","f","constructor","onDidChangeVisibleRanges","_updateVisibleCells","onDidChangeModel","_onModelChange","clear","hasModel","b","add","onDidChangeViewCells","updateEverything","fire","added","removed","Array","from","newVisibleCells","visibleRanges","map","index","cellAt","filter","newVisibleHandles","Set","cell","handle","oldVisibleHandles","diff","getCellByHandle"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/notebook/browser/contrib/cellStatusBar/notebookVisibleCellObserver.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { diffSets } from '../../../../../../base/common/collections.js';\nimport { Emitter } from '../../../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { isDefined } from '../../../../../../base/common/types.js';\nimport { ICellViewModel, INotebookEditor } from '../../notebookBrowser.js';\nimport { cellRangesToIndexes } from '../../../common/notebookRange.js';\n\nexport interface ICellVisibilityChangeEvent {\n\tadded: ICellViewModel[];\n\tremoved: ICellViewModel[];\n}\n\nexport class NotebookVisibleCellObserver extends Disposable {\n\tprivate readonly _onDidChangeVisibleCells = this._register(new Emitter<ICellVisibilityChangeEvent>());\n\treadonly onDidChangeVisibleCells = this._onDidChangeVisibleCells.event;\n\n\tprivate readonly _viewModelDisposables = this._register(new DisposableStore());\n\n\tprivate _visibleCells: ICellViewModel[] = [];\n\n\tget visibleCells(): ICellViewModel[] {\n\t\treturn this._visibleCells;\n\t}\n\n\tconstructor(private readonly _notebookEditor: INotebookEditor) {\n\t\tsuper();\n\n\t\tthis._register(this._notebookEditor.onDidChangeVisibleRanges(this._updateVisibleCells, this));\n\t\tthis._register(this._notebookEditor.onDidChangeModel(this._onModelChange, this));\n\t\tthis._updateVisibleCells();\n\t}\n\n\tprivate _onModelChange() {\n\t\tthis._viewModelDisposables.clear();\n\t\tif (this._notebookEditor.hasModel()) {\n\t\t\tthis._viewModelDisposables.add(this._notebookEditor.onDidChangeViewCells(() => this.updateEverything()));\n\t\t}\n\n\t\tthis.updateEverything();\n\t}\n\n\tprotected updateEverything(): void {\n\t\tthis._onDidChangeVisibleCells.fire({ added: [], removed: Array.from(this._visibleCells) });\n\t\tthis._visibleCells = [];\n\t\tthis._updateVisibleCells();\n\t}\n\n\tprivate _updateVisibleCells(): void {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newVisibleCells = cellRangesToIndexes(this._notebookEditor.visibleRanges)\n\t\t\t.map(index => this._notebookEditor.cellAt(index))\n\t\t\t.filter(isDefined);\n\t\tconst newVisibleHandles = new Set(newVisibleCells.map(cell => cell.handle));\n\t\tconst oldVisibleHandles = new Set(this._visibleCells.map(cell => cell.handle));\n\t\tconst diff = diffSets(oldVisibleHandles, newVisibleHandles);\n\n\t\tconst added = diff.added\n\t\t\t.map(handle => this._notebookEditor.getCellByHandle(handle))\n\t\t\t.filter(isDefined);\n\t\tconst removed = diff.removed\n\t\t\t.map(handle => this._notebookEditor.getCellByHandle(handle))\n\t\t\t.filter(isDefined);\n\n\t\tthis._visibleCells = newVisibleCells;\n\t\tthis._onDidChangeVisibleCells.fire({\n\t\t\tadded,\n\t\t\tremoved\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[]}