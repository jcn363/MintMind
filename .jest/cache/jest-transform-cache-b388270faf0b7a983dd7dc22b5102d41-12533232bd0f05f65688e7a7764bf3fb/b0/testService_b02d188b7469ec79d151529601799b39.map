{"version":3,"names":["cov_vywmbwzq4","actualCoverage","assert","DeferredPromise","CancellationToken","Iterable","LinkedList","WellDefinedPrefixTree","createDecorator","TestId","ITestService","s","testCollectionIsEmpty","collection","f","some","rootItems","r","children","size","getContextForTestItem","id","b","fromString","isRoot","controller","toString","context","$mid","tests","i","idsFromRoot","test","getNodeById","push","expandAndGetTestById","ct","None","idPath","expandToLevel","length","isCancellationRequested","existing","has","expand","undefined","waitForTestToBeIdle","testService","item","busy","Promise","resolve","l","onDidProcessDiff","extId","dispose","testsInFile","ident","uri","waitForIdle","descendInFile","queue","getNodeByUrl","sort","a","prefix","k","startsWith","splice","map","e","rootIds","n","gather","next","pop","ids","isSettled","value","empty","p","extUri","isEqual","isEqualOrParent","prom","then","fromPromise","testsUnderUri","testId","values","simplifyTestsToExecute","tree","insert","path","out","process","currentId","node","thisChildren","part","child","c","entries"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/testing/common/testService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { assert } from '../../../../base/common/assert.js';\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IDisposable } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { IObservable } from '../../../../base/common/observable.js';\nimport { IPrefixTreeNode, WellDefinedPrefixTree } from '../../../../base/common/prefixTree.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { Location } from '../../../../editor/common/languages.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { MutableObservableValue } from './observableValue.js';\nimport { TestExclusions } from './testExclusions.js';\nimport { TestId, TestIdPathParts } from './testId.js';\nimport { ITestResult } from './testResult.js';\nimport { AbstractIncrementalTestCollection, ICallProfileRunHandler, IncrementalTestCollectionItem, InternalTestItem, IStartControllerTests, IStartControllerTestsResult, ITestItemContext, ResolvedTestRunRequest, TestControllerCapability, TestItemExpandState, TestMessageFollowupRequest, TestMessageFollowupResponse, TestRunProfileBitset, TestsDiff } from './testTypes.js';\n\nexport const ITestService = createDecorator<ITestService>('testService');\n\nexport interface IMainThreadTestController {\n\treadonly id: string;\n\treadonly label: IObservable<string>;\n\treadonly capabilities: IObservable<TestControllerCapability>;\n\tsyncTests(token: CancellationToken): Promise<void>;\n\trefreshTests(token: CancellationToken): Promise<void>;\n\tconfigureRunProfile(profileId: number): void;\n\texpandTest(id: string, levels: number): Promise<void>;\n\tgetRelatedCode(testId: string, token: CancellationToken): Promise<Location[]>;\n\tstartContinuousRun(request: ICallProfileRunHandler[], token: CancellationToken): Promise<IStartControllerTestsResult[]>;\n\trunTests(request: IStartControllerTests[], token: CancellationToken): Promise<IStartControllerTestsResult[]>;\n}\n\nexport interface IMainThreadTestHostProxy {\n\tprovideTestFollowups(req: TestMessageFollowupRequest, token: CancellationToken): Promise<TestMessageFollowupResponse[]>;\n\tgetTestsRelatedToCode(uri: URI, position: Position, token: CancellationToken): Promise<string[]>;\n\texecuteTestFollowup(id: number): Promise<void>;\n\tdisposeTestFollowups(ids: number[]): void;\n}\n\nexport interface IMainThreadTestCollection extends AbstractIncrementalTestCollection<IncrementalTestCollectionItem> {\n\treadonly onBusyProvidersChange: Event<number>;\n\n\t/**\n\t * Number of providers working to discover tests.\n\t */\n\tbusyProviders: number;\n\n\t/**\n\t * Root item IDs.\n\t */\n\trootIds: Iterable<string>;\n\n\t/**\n\t * Root items, correspond to registered controllers.\n\t */\n\trootItems: Iterable<IncrementalTestCollectionItem>;\n\n\t/**\n\t * Iterates over every test in the collection, in strictly descending\n\t * order of depth.\n\t */\n\tall: Iterable<IncrementalTestCollectionItem>;\n\n\t/**\n\t * Gets a node in the collection by ID.\n\t */\n\tgetNodeById(id: string): IncrementalTestCollectionItem | undefined;\n\n\t/**\n\t * Gets all tests that have the given URL. Tests returned from this\n\t * method are *not* in any particular order.\n\t */\n\tgetNodeByUrl(uri: URI): Iterable<IncrementalTestCollectionItem>;\n\n\t/**\n\t * Requests that children be revealed for the given test. \"Levels\" may\n\t * be infinite.\n\t */\n\texpand(testId: string, levels: number): Promise<void>;\n\n\t/**\n\t * Gets a diff that adds all items currently in the tree to a new collection,\n\t * allowing it to fully hydrate.\n\t */\n\tgetReviverDiff(): TestsDiff;\n}\n\nexport const testCollectionIsEmpty = (collection: IMainThreadTestCollection) =>\n\t!Iterable.some(collection.rootItems, r => r.children.size > 0);\n\nexport const getContextForTestItem = (collection: IMainThreadTestCollection, id: string | TestId) => {\n\tif (typeof id === 'string') {\n\t\tid = TestId.fromString(id);\n\t}\n\n\tif (id.isRoot) {\n\t\treturn { controller: id.toString() };\n\t}\n\n\tconst context: ITestItemContext = { $mid: MarshalledId.TestItemContext, tests: [] };\n\tfor (const i of id.idsFromRoot()) {\n\t\tif (!i.isRoot) {\n\t\t\tconst test = collection.getNodeById(i.toString());\n\t\t\tif (test) {\n\t\t\t\tcontext.tests.push(test);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn context;\n};\n\n/**\n * Ensures the test with the given ID exists in the collection, if possible.\n * If cancellation is requested, or the test cannot be found, it will return\n * undefined.\n */\nexport const expandAndGetTestById = async (collection: IMainThreadTestCollection, id: string, ct = CancellationToken.None) => {\n\tconst idPath = [...TestId.fromString(id).idsFromRoot()];\n\n\tlet expandToLevel = 0;\n\tfor (let i = idPath.length - 1; !ct.isCancellationRequested && i >= expandToLevel;) {\n\t\tconst id = idPath[i].toString();\n\t\tconst existing = collection.getNodeById(id);\n\t\tif (!existing) {\n\t\t\ti--;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (i === idPath.length - 1) {\n\t\t\treturn existing;\n\t\t}\n\n\t\t// expand children only if it looks like it's necessary\n\t\tif (!existing.children.has(idPath[i + 1].toString())) {\n\t\t\tawait collection.expand(id, 0);\n\t\t}\n\n\t\texpandToLevel = i + 1; // avoid an infinite loop if the test does not exist\n\t\ti = idPath.length - 1;\n\t}\n\treturn undefined;\n};\n\n/**\n * Waits for the test to no longer be in the \"busy\" state.\n */\nexport const waitForTestToBeIdle = (testService: ITestService, test: IncrementalTestCollectionItem) => {\n\tif (!test.item.busy) {\n\t\treturn;\n\t}\n\n\treturn new Promise<void>(resolve => {\n\t\tconst l = testService.onDidProcessDiff(() => {\n\t\t\tif (testService.collection.getNodeById(test.item.extId)?.item.busy !== true) {\n\t\t\t\tresolve(); // removed, or no longer busy\n\t\t\t\tl.dispose();\n\t\t\t}\n\t\t});\n\t});\n};\n\n/**\n * Iterator that expands to and iterates through tests in the file. Iterates\n * in strictly descending order.\n */\nexport const testsInFile = async function* (testService: ITestService, ident: IUriIdentityService, uri: URI, waitForIdle = true, descendInFile = true): AsyncIterable<readonly IncrementalTestCollectionItem[]> {\n\t// In this function we go to a bit of effort to avoid awaiting unnecessarily\n\t// and bulking the test collections we do collect for consumers. This fixes\n\t// a performance issue (#235819) where a large number of tests in a file\n\t// would cause a long delay switching editors.\n\tconst queue = new LinkedList<Iterable<string> | DeferredPromise<Iterable<string>>>();\n\n\tconst existing = [...testService.collection.getNodeByUrl(uri)].sort((a, b) => a.item.extId.length - b.item.extId.length);\n\n\t// getNodeByUrl will return all known tests in the URI, but this can include\n\t// children of tests even when `descendInFile` is false. Remove those cases.\n\tfor (let i = 0; i < existing.length - 1; i++) {\n\t\tconst prefix = existing[i].item.extId + TestIdPathParts.Delimiter;\n\t\tfor (let k = i + 1; k < existing.length; k++) {\n\t\t\tif (existing[k].item.extId.startsWith(prefix)) {\n\t\t\t\texisting.splice(k--, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tqueue.push(existing.length ? existing.map(e => e.item.extId) : testService.collection.rootIds);\n\n\tlet n = 0;\n\tlet gather: IncrementalTestCollectionItem[] = [];\n\twhile (queue.size > 0) {\n\t\tconst next = queue.pop()!;\n\t\tlet ids: Iterable<string>;\n\t\tif (!(next instanceof DeferredPromise)) {\n\t\t\tids = next;\n\t\t} else if (next.isSettled) {\n\t\t\tids = next.value || Iterable.empty();\n\t\t} else {\n\t\t\tif (gather.length) {\n\t\t\t\tyield gather;\n\t\t\t\tgather = [];\n\t\t\t}\n\t\t\tids = await next.p;\n\t\t}\n\n\t\tfor (const id of ids) {\n\t\t\tn++;\n\t\t\tconst test = testService.collection.getNodeById(id);\n\t\t\tif (!test) {\n\t\t\t\tcontinue; // possible because we expand async and things could delete\n\t\t\t}\n\n\t\t\tif (!test.item.uri) {\n\t\t\t\tqueue.push(test.children);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (ident.extUri.isEqual(uri, test.item.uri)) {\n\t\t\t\tgather.push(test);\n\n\t\t\t\tif (!descendInFile) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ident.extUri.isEqualOrParent(uri, test.item.uri)) {\n\t\t\t\tlet prom: Promise<void> | undefined;\n\t\t\t\tif (test.expand === TestItemExpandState.Expandable) {\n\t\t\t\t\tprom = testService.collection.expand(test.item.extId, 1);\n\t\t\t\t}\n\t\t\t\tif (waitForIdle) {\n\t\t\t\t\tif (prom) {\n\t\t\t\t\t\tprom = prom.then(() => waitForTestToBeIdle(testService, test));\n\t\t\t\t\t} else if (test.item.busy) {\n\t\t\t\t\t\tprom = waitForTestToBeIdle(testService, test);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (prom) {\n\t\t\t\t\tqueue.push(DeferredPromise.fromPromise(prom.then(() => test.children)));\n\t\t\t\t} else if (test.children.size) {\n\t\t\t\t\tqueue.push(test.children);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (gather.length) {\n\t\tyield gather;\n\t}\n};\n\n/**\n * Iterator that iterates to the top-level children of tests under the given\n * the URI.\n */\nexport const testsUnderUri = async function* (testService: ITestService, ident: IUriIdentityService, uri: URI, waitForIdle = true): AsyncIterable<IncrementalTestCollectionItem> {\n\n\tconst queue = [testService.collection.rootIds];\n\twhile (queue.length) {\n\t\tfor (const testId of queue.pop()!) {\n\t\t\tconst test = testService.collection.getNodeById(testId);\n\n\t\t\t// Expand tests with URIs that are parent of the item, add tests\n\t\t\t// that are within the URI. Don't add their children, since those\n\t\t\t// tests already encompass their children.\n\t\t\tif (!test) {\n\t\t\t\t// no-op\n\t\t\t} else if (test.item.uri && ident.extUri.isEqualOrParent(test.item.uri, uri)) {\n\t\t\t\tyield test;\n\t\t\t} else if (!test.item.uri || ident.extUri.isEqualOrParent(uri, test.item.uri)) {\n\t\t\t\tif (test.expand === TestItemExpandState.Expandable) {\n\t\t\t\t\tawait testService.collection.expand(test.item.extId, 1);\n\t\t\t\t}\n\t\t\t\tif (waitForIdle) {\n\t\t\t\t\tawait waitForTestToBeIdle(testService, test);\n\t\t\t\t}\n\t\t\t\tqueue.push(test.children.values());\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Simplifies the array of tests by preferring test item parents if all of\n * their children are included.\n */\nexport const simplifyTestsToExecute = (collection: IMainThreadTestCollection, tests: IncrementalTestCollectionItem[]): IncrementalTestCollectionItem[] => {\n\tif (tests.length < 2) {\n\t\treturn tests;\n\t}\n\n\tconst tree = new WellDefinedPrefixTree<IncrementalTestCollectionItem>();\n\tfor (const test of tests) {\n\t\ttree.insert(TestId.fromString(test.item.extId).path, test);\n\t}\n\n\tconst out: IncrementalTestCollectionItem[] = [];\n\n\t// Returns the node if it and any children should be included. Otherwise\n\t// pushes into the `out` any individual children that should be included.\n\tconst process = (currentId: string[], node: IPrefixTreeNode<IncrementalTestCollectionItem>) => {\n\t\t// directly included, don't try to over-specify, and children should be ignored\n\t\tif (node.value) {\n\t\t\treturn node.value;\n\t\t}\n\n\t\tassert(!!node.children, 'expect to have children');\n\n\t\tconst thisChildren: IncrementalTestCollectionItem[] = [];\n\t\tfor (const [part, child] of node.children) {\n\t\t\tcurrentId.push(part);\n\t\t\tconst c = process(currentId, child);\n\t\t\tif (c) { thisChildren.push(c); }\n\t\t\tcurrentId.pop();\n\t\t}\n\n\t\tif (!thisChildren.length) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are multiple children and we have all of them, then tell the\n\t\t// parent this node should be included. Otherwise include children individually.\n\t\tconst id = new TestId(currentId);\n\t\tconst test = collection.getNodeById(id.toString());\n\t\tif (test?.children.size === thisChildren.length) {\n\t\t\treturn test;\n\t\t}\n\n\t\tout.push(...thisChildren);\n\t\treturn;\n\t};\n\n\tfor (const [id, node] of tree.entries) {\n\t\tconst n = process([id], node);\n\t\tif (n) { out.push(n); }\n\t}\n\n\treturn out;\n};\n\n/**\n * A run request that expresses the intent of the request and allows the\n * test service to resolve the specifics of the group.\n */\nexport interface AmbiguousRunTestsRequest {\n\t/** Group to run */\n\tgroup: TestRunProfileBitset;\n\t/** Tests to run. Allowed to be from different controllers */\n\ttests: readonly InternalTestItem[];\n\t/** Tests to exclude. If not given, the current UI excluded tests are used */\n\texclude?: InternalTestItem[];\n\t/** Whether this was triggered from an auto run. */\n\tcontinuous?: boolean;\n\t/** Whether this was trigged by a user action in UI. Default=true */\n\tpreserveFocus?: boolean;\n}\n\nexport interface ITestFollowup {\n\tmessage: string;\n\texecute(): Promise<void>;\n}\n\nexport interface ITestFollowups extends IDisposable {\n\tfollowups: ITestFollowup[];\n}\n\nexport interface ITestService {\n\treadonly _serviceBrand: undefined;\n\t/**\n\t * Fires when the user requests to cancel a test run -- or all runs, if no\n\t * runId is given.\n\t */\n\treadonly onDidCancelTestRun: Event<{ runId: string | undefined; taskId: string | undefined }>;\n\n\t/**\n\t * Event that fires when the excluded tests change.\n\t */\n\treadonly excluded: TestExclusions;\n\n\t/**\n\t * Test collection instance.\n\t */\n\treadonly collection: IMainThreadTestCollection;\n\n\t/**\n\t * Event that fires immediately before a diff is processed.\n\t */\n\treadonly onWillProcessDiff: Event<TestsDiff>;\n\n\t/**\n\t * Event that fires after a diff is processed.\n\t */\n\treadonly onDidProcessDiff: Event<TestsDiff>;\n\n\t/**\n\t * Whether inline editor decorations should be visible.\n\t */\n\treadonly showInlineOutput: MutableObservableValue<boolean>;\n\n\t/**\n\t * Registers an interface that represents an extension host..\n\t */\n\tregisterExtHost(controller: IMainThreadTestHostProxy): IDisposable;\n\n\t/**\n\t * Registers an interface that runs tests for the given provider ID.\n\t */\n\tregisterTestController(providerId: string, controller: IMainThreadTestController): IDisposable;\n\n\t/**\n\t * Gets a registered test controller by ID.\n\t */\n\tgetTestController(controllerId: string): IMainThreadTestController | undefined;\n\n\t/**\n\t * Refreshes tests for the controller, or all controllers if no ID is given.\n\t */\n\trefreshTests(controllerId?: string): Promise<void>;\n\n\t/**\n\t * Cancels any ongoing test refreshes.\n\t */\n\tcancelRefreshTests(): void;\n\n\t/**\n\t * Requests that tests be executed continuously, until the token is cancelled.\n\t */\n\tstartContinuousRun(req: ResolvedTestRunRequest, token: CancellationToken): Promise<void>;\n\n\t/**\n\t * Requests that tests be executed.\n\t */\n\trunTests(req: AmbiguousRunTestsRequest, token?: CancellationToken): Promise<ITestResult>;\n\n\t/**\n\t * Requests that tests be executed.\n\t */\n\trunResolvedTests(req: ResolvedTestRunRequest, token?: CancellationToken): Promise<ITestResult>;\n\n\t/**\n\t * Provides followup actions for a test run.\n\t */\n\tprovideTestFollowups(req: TestMessageFollowupRequest, token: CancellationToken): Promise<ITestFollowups>;\n\n\t/**\n\t * Ensures the test diff from the remote ext host is flushed and waits for\n\t * any \"busy\" tests to become idle before resolving.\n\t */\n\tsyncTests(): Promise<void>;\n\n\t/**\n\t * Cancels an ongoing test run by its ID, or all runs if no ID is given.\n\t */\n\tcancelTestRun(runId?: string, taskId?: string): void;\n\n\t/**\n\t * Publishes a test diff for a controller.\n\t */\n\tpublishDiff(controllerId: string, diff: TestsDiff): void;\n\n\t/**\n\t * Gets all tests related to the given code position.\n\t */\n\tgetTestsRelatedToCode(uri: URI, position: Position, token?: CancellationToken): Promise<InternalTestItem[]>;\n\n\t/**\n\t * Gets code related to the given test item.\n\t */\n\tgetCodeRelatedToTest(test: InternalTestItem, token?: CancellationToken): Promise<Location[]>;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}