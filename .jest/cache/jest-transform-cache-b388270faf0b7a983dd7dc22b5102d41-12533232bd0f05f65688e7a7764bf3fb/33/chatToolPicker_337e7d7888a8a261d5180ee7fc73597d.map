{"version":3,"names":["cov_1p1n4dr2ou","actualCoverage","assertNever","Codicon","Emitter","Event","markdownCommandLink","DisposableStore","Severity","ThemeIcon","localize","CommandsRegistry","ICommandService","IContextKeyService","ExtensionIdentifier","IQuickInputService","IEditorService","IExtensionsWorkbenchService","IMcpRegistry","IMcpService","IMcpWorkbenchService","startServerAndWaitForLiveTools","ChatContextKeys","ILanguageModelToolsService","ToolDataSource","ConfigureToolSets","isBucketTreeItem","item","f","s","itemType","isToolSetTreeItem","isToolTreeItem","isCallbackTreeItem","mapIconToTreeItem","icon","useDefaultToolIcon","b","iconClass","asClassName","tools","isThemeIcon","iconPath","createToolTreeItemFromData","tool","checked","iconProps","id","label","toolReferenceName","displayName","description","userDescription","modelDescription","createToolSetTreeItem","toolset","editorService","buttons","source","type","resource","file","push","edit","tooltip","action","openEditor","referenceName","children","undefined","collapsed","showToolsPicker","accessor","placeHolder","getToolsEntries","quickPickService","get","mcpService","mcpRegistry","commandService","extensionsWorkbenchService","mcpWorkbenchService","toolsService","toolLimit","getContextKeyValue","chatToolGroupingThreshold","key","mcpServerByTool","Map","server","servers","set","computeItems","previousToolsEntries","toolsEntries","defaultEntries","getTools","canBeReferencedInPrompt","toolSet","toolSets","forEach","value","treeItems","bucketMap","getKey","toKey","toString","Error","mcpServers","map","definition","seen","createBucket","mcpServerEntry","definitionId","mcpServer","collection","collections","find","c","settingsGear","open","tab","feature","presentation","origin","connectionState","state","warning","showOutput","cacheState","sync","pickable","run","treePicker","busy","ok","promptType","hide","collectResults","bucket","ordinal","sortOrder","serverMetadata","icons","getUrl","mcp","extensions","getBucket","has","toolSetChecked","treeItem","toolChecked","toolTreeItem","length","values","instructions","serverLabel","collectionId","sortedBuckets","Array","from","sort","a","localeCompare","child","placeholder","setItemTree","store","add","createQuickTree","ignoreFocusOut","matchOnDescription","matchOnLabel","sortByLabel","onDidTriggerItemButton","e","button","dispose","updateToolLimitMessage","count","traverse","items","itemTree","severity","Warning","validationMessage","title","String","Ignore","result","allChecked","registerCommand","handler","executeCommand","onDidChangeCheckedLeafItems","didAccept","didAcceptFinalItem","onDidAccept","activeItems","callbackItem","ret","fire","addMcpServerButton","installExtension","configureToolSets","gear","onDidTriggerButton","openSearch","ID","show","Promise","race","toPromise","any","onDidHide","event"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/chat/browser/actions/chatToolPicker.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { assertNever } from '../../../../../base/common/assert.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { markdownCommandLink } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport Severity from '../../../../../base/common/severity.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { localize } from '../../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ExtensionIdentifier } from '../../../../../platform/extensions/common/extensions.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IQuickInputButton, IQuickInputService, IQuickPickItem, IQuickTreeItem } from '../../../../../platform/quickinput/common/quickInput.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { ExtensionEditorTab, IExtensionsWorkbenchService } from '../../../extensions/common/extensions.js';\nimport { McpCommandIds } from '../../../mcp/common/mcpCommandIds.js';\nimport { IMcpRegistry } from '../../../mcp/common/mcpRegistryTypes.js';\nimport { IMcpServer, IMcpService, IMcpWorkbenchService, McpConnectionState, McpServerCacheState, McpServerEditorTab } from '../../../mcp/common/mcpTypes.js';\nimport { startServerAndWaitForLiveTools } from '../../../mcp/common/mcpTypesUtils.js';\nimport { ChatContextKeys } from '../../common/chatContextKeys.js';\nimport { ILanguageModelToolsService, IToolData, ToolDataSource, ToolSet } from '../../common/languageModelToolsService.js';\nimport { ConfigureToolSets } from '../tools/toolSetsContribution.js';\n\nconst enum BucketOrdinal { User, BuiltIn, Mcp, Extension }\n\n// Legacy QuickPick types (existing implementation)\ntype BucketPick = IQuickPickItem & { picked: boolean; ordinal: BucketOrdinal; status?: string; toolset?: ToolSet; children: (ToolPick | ToolSetPick)[] };\ntype ToolSetPick = IQuickPickItem & { picked: boolean; toolset: ToolSet; parent: BucketPick };\ntype ToolPick = IQuickPickItem & { picked: boolean; tool: IToolData; parent: BucketPick };\ntype ActionableButton = IQuickInputButton & { action: () => void };\n\n// New QuickTree types for tree-based implementation\n\n/**\n * Base interface for all tree items in the QuickTree implementation.\n * Extends IQuickTreeItem with common properties for tool picker items.\n */\ninterface IToolTreeItem extends IQuickTreeItem {\n\treadonly itemType: 'bucket' | 'toolset' | 'tool' | 'callback';\n\treadonly ordinal?: BucketOrdinal;\n\treadonly buttons?: readonly ActionableButton[];\n}\n\n/**\n * Bucket tree item - represents a category of tools (User, BuiltIn, MCP Server, Extension).\n * For MCP servers, the bucket directly represents the server and stores the toolset.\n */\ninterface IBucketTreeItem extends IToolTreeItem {\n\treadonly itemType: 'bucket';\n\treadonly ordinal: BucketOrdinal;\n\ttoolset?: ToolSet; // For MCP servers where the bucket represents the ToolSet - mutable\n\treadonly status?: string;\n\treadonly children: AnyTreeItem[];\n\tchecked: boolean | 'mixed' | undefined;\n\treadonly sortOrder: number;\n}\n\n/**\n * ToolSet tree item - represents a collection of tools that can be managed together.\n * Used for regular (non-MCP) toolsets that appear as intermediate nodes in the tree.\n */\ninterface IToolSetTreeItem extends IToolTreeItem {\n\treadonly itemType: 'toolset';\n\treadonly toolset: ToolSet;\n\tchildren: AnyTreeItem[] | undefined;\n\tchecked: boolean | 'mixed';\n}\n\n/**\n * Tool tree item - represents an individual tool that can be selected/deselected.\n * This is a leaf node in the tree structure.\n */\ninterface IToolTreeItemData extends IToolTreeItem {\n\treadonly itemType: 'tool';\n\treadonly tool: IToolData;\n\tchecked: boolean;\n}\n\n/**\n * Callback tree item - represents action items like \"Add MCP Server\" or \"Configure Tool Sets\".\n * These are non-selectable items that execute actions when clicked. Can return\n * false to keep the picker open.\n */\ninterface ICallbackTreeItem extends IToolTreeItem {\n\treadonly itemType: 'callback';\n\treadonly run: () => boolean | void;\n\treadonly pickable: false;\n}\n\ntype AnyTreeItem = IBucketTreeItem | IToolSetTreeItem | IToolTreeItemData | ICallbackTreeItem;\n\n// Type guards for new QuickTree types\nfunction isBucketTreeItem(item: AnyTreeItem): item is IBucketTreeItem {\n\treturn item.itemType === 'bucket';\n}\nfunction isToolSetTreeItem(item: AnyTreeItem): item is IToolSetTreeItem {\n\treturn item.itemType === 'toolset';\n}\nfunction isToolTreeItem(item: AnyTreeItem): item is IToolTreeItemData {\n\treturn item.itemType === 'tool';\n}\nfunction isCallbackTreeItem(item: AnyTreeItem): item is ICallbackTreeItem {\n\treturn item.itemType === 'callback';\n}\n\n/**\n * Maps different icon types (ThemeIcon or URI-based) to QuickTreeItem icon properties.\n * Handles the conversion between ToolSet/IToolData icon formats and tree item requirements.\n * Provides a default tool icon when no icon is specified.\n *\n * @param icon - Icon to map (ThemeIcon, URI object, or undefined)\n * @param useDefaultToolIcon - Whether to use a default tool icon when none is provided\n * @returns Object with iconClass (for ThemeIcon) or iconPath (for URIs) properties\n */\nfunction mapIconToTreeItem(icon: ThemeIcon | { dark: URI; light?: URI } | undefined, useDefaultToolIcon: boolean = false): Pick<IQuickTreeItem, 'iconClass' | 'iconPath'> {\n\tif (!icon) {\n\t\tif (useDefaultToolIcon) {\n\t\t\treturn { iconClass: ThemeIcon.asClassName(Codicon.tools) };\n\t\t}\n\t\treturn {};\n\t}\n\n\tif (ThemeIcon.isThemeIcon(icon)) {\n\t\treturn { iconClass: ThemeIcon.asClassName(icon) };\n\t} else {\n\t\treturn { iconPath: icon };\n\t}\n}\n\nfunction createToolTreeItemFromData(tool: IToolData, checked: boolean): IToolTreeItemData {\n\tconst iconProps = mapIconToTreeItem(tool.icon, true); // Use default tool icon if none provided\n\n\treturn {\n\t\titemType: 'tool',\n\t\ttool,\n\t\tid: tool.id,\n\t\tlabel: tool.toolReferenceName ?? tool.displayName,\n\t\tdescription: tool.userDescription ?? tool.modelDescription,\n\t\tchecked,\n\t\t...iconProps\n\t};\n}\n\nfunction createToolSetTreeItem(toolset: ToolSet, checked: boolean, editorService: IEditorService): IToolSetTreeItem {\n\tconst iconProps = mapIconToTreeItem(toolset.icon);\n\tconst buttons = [];\n\tif (toolset.source.type === 'user') {\n\t\tconst resource = toolset.source.file;\n\t\tbuttons.push({\n\t\t\ticonClass: ThemeIcon.asClassName(Codicon.edit),\n\t\t\ttooltip: localize('editUserBucket', \"Edit Tool Set\"),\n\t\t\taction: () => editorService.openEditor({ resource })\n\t\t});\n\t}\n\treturn {\n\t\titemType: 'toolset',\n\t\ttoolset,\n\t\tbuttons,\n\t\tid: toolset.id,\n\t\tlabel: toolset.referenceName,\n\t\tdescription: toolset.description,\n\t\tchecked,\n\t\tchildren: undefined,\n\t\tcollapsed: true,\n\t\t...iconProps\n\t};\n}\n\n/**\n * New QuickTree implementation of the tools picker.\n * Uses IQuickTree to provide a true hierarchical tree structure with:\n * - Collapsible nodes for buckets and toolsets\n * - Checkbox state management with parent-child relationships\n * - Special handling for MCP servers (server as bucket, tools as direct children)\n * - Built-in filtering and search capabilities\n *\n * @param accessor - Service accessor for dependency injection\n * @param placeHolder - Placeholder text shown in the picker\n * @param description - Optional description text shown in the picker\n * @param toolsEntries - Optional initial selection state for tools and toolsets\n * @param onUpdate - Optional callback fired when the selection changes\n * @returns Promise resolving to the final selection map, or undefined if cancelled\n */\nexport async function showToolsPicker(\n\taccessor: ServicesAccessor,\n\tplaceHolder: string,\n\tdescription?: string,\n\tgetToolsEntries?: () => ReadonlyMap<ToolSet | IToolData, boolean>\n): Promise<ReadonlyMap<ToolSet | IToolData, boolean> | undefined> {\n\n\tconst quickPickService = accessor.get(IQuickInputService);\n\tconst mcpService = accessor.get(IMcpService);\n\tconst mcpRegistry = accessor.get(IMcpRegistry);\n\tconst commandService = accessor.get(ICommandService);\n\tconst extensionsWorkbenchService = accessor.get(IExtensionsWorkbenchService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst mcpWorkbenchService = accessor.get(IMcpWorkbenchService);\n\tconst toolsService = accessor.get(ILanguageModelToolsService);\n\tconst toolLimit = accessor.get(IContextKeyService).getContextKeyValue<number>(ChatContextKeys.chatToolGroupingThreshold.key);\n\n\tconst mcpServerByTool = new Map<string, IMcpServer>();\n\tfor (const server of mcpService.servers.get()) {\n\t\tfor (const tool of server.tools.get()) {\n\t\t\tmcpServerByTool.set(tool.id, server);\n\t\t}\n\t}\n\n\tfunction computeItems(previousToolsEntries?: ReadonlyMap<ToolSet | IToolData, boolean>) {\n\t\t// Create default entries if none provided\n\t\tlet toolsEntries = getToolsEntries ? new Map(getToolsEntries()) : undefined;\n\t\tif (!toolsEntries) {\n\t\t\tconst defaultEntries = new Map();\n\t\t\tfor (const tool of toolsService.getTools()) {\n\t\t\t\tif (tool.canBeReferencedInPrompt) {\n\t\t\t\t\tdefaultEntries.set(tool, false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const toolSet of toolsService.toolSets.get()) {\n\t\t\t\tdefaultEntries.set(toolSet, false);\n\t\t\t}\n\t\t\ttoolsEntries = defaultEntries;\n\t\t}\n\t\tpreviousToolsEntries?.forEach((value, key) => {\n\t\t\ttoolsEntries.set(key, value);\n\t\t});\n\n\t\t// Build tree structure\n\t\tconst treeItems: AnyTreeItem[] = [];\n\t\tconst bucketMap = new Map<string, IBucketTreeItem>();\n\n\t\tconst getKey = (source: ToolDataSource): string => {\n\t\t\tswitch (source.type) {\n\t\t\t\tcase 'mcp':\n\t\t\t\tcase 'extension':\n\t\t\t\t\treturn ToolDataSource.toKey(source);\n\t\t\t\tcase 'internal':\n\t\t\t\t\treturn BucketOrdinal.BuiltIn.toString();\n\t\t\t\tcase 'user':\n\t\t\t\t\treturn BucketOrdinal.User.toString();\n\t\t\t\tcase 'external':\n\t\t\t\t\tthrow new Error('should not be reachable');\n\t\t\t\tdefault:\n\t\t\t\t\tassertNever(source);\n\t\t\t}\n\t\t};\n\n\t\tconst mcpServers = new Map(mcpService.servers.get().map(s => [s.definition.id, { server: s, seen: false }]));\n\t\tconst createBucket = (source: ToolDataSource, key: string): IBucketTreeItem | undefined => {\n\t\t\tif (source.type === 'mcp') {\n\t\t\t\tconst mcpServerEntry = mcpServers.get(source.definitionId);\n\t\t\t\tif (!mcpServerEntry) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\tmcpServerEntry.seen = true;\n\t\t\t\tconst mcpServer = mcpServerEntry.server;\n\t\t\t\tconst buttons: ActionableButton[] = [];\n\t\t\t\tconst collection = mcpRegistry.collections.get().find(c => c.id === mcpServer.collection.id);\n\t\t\t\tif (collection?.source) {\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.settingsGear),\n\t\t\t\t\t\ttooltip: localize('configMcpCol', \"Configure {0}\", collection.label),\n\t\t\t\t\t\taction: () => collection.source ? collection.source instanceof ExtensionIdentifier ? extensionsWorkbenchService.open(collection.source.value, { tab: ExtensionEditorTab.Features, feature: 'mcp' }) : mcpWorkbenchService.open(collection.source, { tab: McpServerEditorTab.Configuration }) : undefined\n\t\t\t\t\t});\n\t\t\t\t} else if (collection?.presentation?.origin) {\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.settingsGear),\n\t\t\t\t\t\ttooltip: localize('configMcpCol', \"Configure {0}\", collection.label),\n\t\t\t\t\t\taction: () => editorService.openEditor({\n\t\t\t\t\t\t\tresource: collection!.presentation!.origin,\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (mcpServer.connectionState.get().state === McpConnectionState.Kind.Error) {\n\t\t\t\t\tbuttons.push({\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.warning),\n\t\t\t\t\t\ttooltip: localize('mcpShowOutput', \"Show Output\"),\n\t\t\t\t\t\taction: () => mcpServer.showOutput(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst cacheState = mcpServer.cacheState.get();\n\t\t\t\tconst children: AnyTreeItem[] = [];\n\t\t\t\tlet collapsed = true;\n\t\t\t\tif (cacheState === McpServerCacheState.Unknown || cacheState === McpServerCacheState.Outdated) {\n\t\t\t\t\tcollapsed = false;\n\t\t\t\t\tchildren.push({\n\t\t\t\t\t\titemType: 'callback',\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.sync),\n\t\t\t\t\t\tlabel: localize('mcpUpdate', \"Update Tools\"),\n\t\t\t\t\t\tpickable: false,\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\ttreePicker.busy = true;\n\t\t\t\t\t\t\t(async () => {\n\t\t\t\t\t\t\t\tconst ok = await startServerAndWaitForLiveTools(mcpServer, { promptType: 'all-untrusted' });\n\t\t\t\t\t\t\t\tif (!ok) {\n\t\t\t\t\t\t\t\t\tmcpServer.showOutput();\n\t\t\t\t\t\t\t\t\ttreePicker.hide();\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttreePicker.busy = false;\n\t\t\t\t\t\t\t\tcomputeItems(collectResults());\n\t\t\t\t\t\t\t})();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst bucket: IBucketTreeItem = {\n\t\t\t\t\titemType: 'bucket',\n\t\t\t\t\tordinal: BucketOrdinal.Mcp,\n\t\t\t\t\tid: key,\n\t\t\t\t\tlabel: source.label,\n\t\t\t\t\tchecked: undefined,\n\t\t\t\t\tcollapsed,\n\t\t\t\t\tchildren,\n\t\t\t\t\tbuttons,\n\t\t\t\t\tsortOrder: 2,\n\t\t\t\t};\n\t\t\t\tconst iconPath = mcpServer.serverMetadata.get()?.icons.getUrl(22);\n\t\t\t\tif (iconPath) {\n\t\t\t\t\tbucket.iconPath = iconPath;\n\t\t\t\t} else {\n\t\t\t\t\tbucket.iconClass = ThemeIcon.asClassName(Codicon.mcp);\n\t\t\t\t}\n\t\t\t\treturn bucket;\n\t\t\t} else if (source.type === 'extension') {\n\t\t\t\treturn {\n\t\t\t\t\titemType: 'bucket',\n\t\t\t\t\tordinal: BucketOrdinal.Extension,\n\t\t\t\t\tid: key,\n\t\t\t\t\tlabel: source.label,\n\t\t\t\t\tchecked: undefined,\n\t\t\t\t\tchildren: [],\n\t\t\t\t\tbuttons: [],\n\t\t\t\t\tcollapsed: true,\n\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.extensions),\n\t\t\t\t\tsortOrder: 3,\n\t\t\t\t};\n\t\t\t} else if (source.type === 'internal') {\n\t\t\t\treturn {\n\t\t\t\t\titemType: 'bucket',\n\t\t\t\t\tordinal: BucketOrdinal.BuiltIn,\n\t\t\t\t\tid: key,\n\t\t\t\t\tlabel: localize('defaultBucketLabel', \"Built-In\"),\n\t\t\t\t\tchecked: undefined,\n\t\t\t\t\tchildren: [],\n\t\t\t\t\tbuttons: [],\n\t\t\t\t\tcollapsed: false,\n\t\t\t\t\tsortOrder: 1,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\titemType: 'bucket',\n\t\t\t\t\tordinal: BucketOrdinal.User,\n\t\t\t\t\tid: key,\n\t\t\t\t\tlabel: localize('userBucket', \"User Defined Tool Sets\"),\n\t\t\t\t\tchecked: undefined,\n\t\t\t\t\tchildren: [],\n\t\t\t\t\tbuttons: [],\n\t\t\t\t\tcollapsed: true,\n\t\t\t\t\tsortOrder: 4,\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tconst getBucket = (source: ToolDataSource): IBucketTreeItem | undefined => {\n\t\t\tconst key = getKey(source);\n\t\t\tlet bucket = bucketMap.get(key);\n\t\t\tif (!bucket) {\n\t\t\t\tbucket = createBucket(source, key);\n\t\t\t\tif (bucket) {\n\t\t\t\t\tbucketMap.set(key, bucket);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn bucket;\n\t\t};\n\n\t\tfor (const toolSet of toolsService.toolSets.get()) {\n\t\t\tif (!toolsEntries.has(toolSet)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst bucket = getBucket(toolSet.source);\n\t\t\tif (!bucket) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst toolSetChecked = toolsEntries.get(toolSet) === true;\n\t\t\tif (toolSet.source.type === 'mcp') {\n\t\t\t\t// bucket represents the toolset\n\t\t\t\tbucket.toolset = toolSet;\n\t\t\t\tif (toolSetChecked) {\n\t\t\t\t\tbucket.checked = toolSetChecked;\n\t\t\t\t}\n\t\t\t\t// all mcp tools are part of toolsService.getTools()\n\t\t\t} else {\n\t\t\t\tconst treeItem = createToolSetTreeItem(toolSet, toolSetChecked, editorService);\n\t\t\t\tbucket.children.push(treeItem);\n\t\t\t\tconst children = [];\n\t\t\t\tfor (const tool of toolSet.getTools()) {\n\t\t\t\t\tconst toolChecked = toolSetChecked || toolsEntries.get(tool) === true;\n\t\t\t\t\tconst toolTreeItem = createToolTreeItemFromData(tool, toolChecked);\n\t\t\t\t\tchildren.push(toolTreeItem);\n\t\t\t\t}\n\t\t\t\tif (children.length > 0) {\n\t\t\t\t\ttreeItem.children = children;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfor (const tool of toolsService.getTools()) {\n\t\t\tif (!tool.canBeReferencedInPrompt || !toolsEntries.has(tool)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst bucket = getBucket(tool.source);\n\t\t\tif (!bucket) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst toolChecked = bucket.checked === true || toolsEntries.get(tool) === true;\n\t\t\tconst toolTreeItem = createToolTreeItemFromData(tool, toolChecked);\n\t\t\tbucket.children.push(toolTreeItem);\n\t\t}\n\n\t\t// Show entries for MCP servers that don't have any tools in them and might need to be started.\n\t\tfor (const { server, seen } of mcpServers.values()) {\n\t\t\tconst cacheState = server.cacheState.get();\n\t\t\tif (!seen && (cacheState === McpServerCacheState.Unknown || cacheState === McpServerCacheState.Outdated)) {\n\t\t\t\tgetBucket({ type: 'mcp', definitionId: server.definition.id, label: server.definition.label, instructions: '', serverLabel: '', collectionId: server.collection.id });\n\t\t\t}\n\t\t}\n\n\t\t// Convert bucket map to sorted tree items\n\t\tconst sortedBuckets = Array.from(bucketMap.values()).sort((a, b) => {\n\t\t\tif (a.sortOrder !== b.sortOrder) {\n\t\t\t\treturn a.sortOrder - b.sortOrder;\n\t\t\t}\n\t\t\treturn a.label.localeCompare(b.label);\n\t\t});\n\t\tfor (const bucket of sortedBuckets) {\n\t\t\ttreeItems.push(bucket);\n\t\t\t// Sort children alphabetically\n\t\t\tbucket.children.sort((a, b) => a.label.localeCompare(b.label));\n\t\t\tfor (const child of bucket.children) {\n\t\t\t\tif (isToolSetTreeItem(child) && child.children) {\n\t\t\t\t\tchild.children.sort((a, b) => a.label.localeCompare(b.label));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (treeItems.length === 0) {\n\t\t\ttreePicker.placeholder = localize('noTools', \"Add tools to chat\");\n\t\t} else {\n\t\t\ttreePicker.placeholder = placeHolder;\n\t\t}\n\t\ttreePicker.setItemTree(treeItems);\n\t}\n\n\t// Create and configure the tree picker\n\tconst store = new DisposableStore();\n\tconst treePicker = store.add(quickPickService.createQuickTree<AnyTreeItem>());\n\n\ttreePicker.placeholder = placeHolder;\n\ttreePicker.ignoreFocusOut = true;\n\ttreePicker.description = description;\n\ttreePicker.matchOnDescription = true;\n\ttreePicker.matchOnLabel = true;\n\ttreePicker.sortByLabel = false;\n\n\tcomputeItems();\n\n\t// Handle button triggers\n\tstore.add(treePicker.onDidTriggerItemButton(e => {\n\t\tif (e.button && typeof (e.button as ActionableButton).action === 'function') {\n\t\t\t(e.button as ActionableButton).action();\n\t\t\tstore.dispose();\n\t\t}\n\t}));\n\n\tconst updateToolLimitMessage = () => {\n\t\tif (toolLimit) {\n\t\t\tlet count = 0;\n\t\t\tconst traverse = (items: readonly AnyTreeItem[]) => {\n\t\t\t\tfor (const item of items) {\n\t\t\t\t\tif (isBucketTreeItem(item) || isToolSetTreeItem(item)) {\n\t\t\t\t\t\tif (item.children) {\n\t\t\t\t\t\t\ttraverse(item.children);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (isToolTreeItem(item) && item.checked) {\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\ttraverse(treePicker.itemTree);\n\t\t\tif (count > toolLimit) {\n\t\t\t\ttreePicker.severity = Severity.Warning;\n\t\t\t\ttreePicker.validationMessage = localize('toolLimitExceeded', \"{0} tools are enabled. You may experience degraded tool calling above {1} tools.\", count, markdownCommandLink({ title: String(toolLimit), id: '_chat.toolPicker.closeAndOpenVirtualThreshold' }));\n\t\t\t} else {\n\t\t\t\ttreePicker.severity = Severity.Ignore;\n\t\t\t\ttreePicker.validationMessage = undefined;\n\t\t\t}\n\t\t}\n\t};\n\tupdateToolLimitMessage();\n\n\tconst collectResults = () => {\n\n\t\tconst result = new Map<IToolData | ToolSet, boolean>();\n\t\tconst traverse = (items: readonly AnyTreeItem[]) => {\n\t\t\tfor (const item of items) {\n\t\t\t\tif (isBucketTreeItem(item)) {\n\t\t\t\t\tif (item.toolset) { // MCP server\n\t\t\t\t\t\t// MCP toolset is enabled only if all tools are enabled\n\t\t\t\t\t\tconst allChecked = item.checked === true;\n\t\t\t\t\t\tresult.set(item.toolset, allChecked);\n\t\t\t\t\t}\n\t\t\t\t\ttraverse(item.children);\n\t\t\t\t} else if (isToolSetTreeItem(item)) {\n\t\t\t\t\tresult.set(item.toolset, item.checked === true);\n\t\t\t\t\tif (item.children) {\n\t\t\t\t\t\ttraverse(item.children);\n\t\t\t\t\t}\n\t\t\t\t} else if (isToolTreeItem(item)) {\n\t\t\t\t\tresult.set(item.tool, item.checked || result.get(item.tool) === true); // tools can be in user tool sets and other buckets\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\ttraverse(treePicker.itemTree);\n\t\treturn result;\n\t};\n\n\t// Temporary command to close the picker and open settings, for use in the validation message\n\tstore.add(CommandsRegistry.registerCommand({\n\t\tid: '_chat.toolPicker.closeAndOpenVirtualThreshold',\n\t\thandler: () => {\n\t\t\ttreePicker.hide();\n\t\t\tcommandService.executeCommand('workbench.action.openSettings', 'github.copilot.chat.virtualTools.threshold');\n\t\t}\n\t}));\n\n\t// Handle checkbox state changes\n\tstore.add(treePicker.onDidChangeCheckedLeafItems(() => updateToolLimitMessage()));\n\n\t// Handle acceptance\n\tlet didAccept = false;\n\tconst didAcceptFinalItem = store.add(new Emitter<void>());\n\tstore.add(treePicker.onDidAccept(() => {\n\t\t// Check if a callback item was activated\n\t\tconst activeItems = treePicker.activeItems;\n\t\tconst callbackItem = activeItems.find(isCallbackTreeItem);\n\t\tif (!callbackItem) {\n\t\t\tdidAccept = true;\n\t\t\ttreePicker.hide();\n\t\t\treturn;\n\t\t}\n\n\t\tconst ret = callbackItem.run();\n\t\tif (ret !== false) {\n\t\t\tdidAcceptFinalItem.fire();\n\t\t}\n\t}));\n\n\tconst addMcpServerButton = {\n\t\ticonClass: ThemeIcon.asClassName(Codicon.mcp),\n\t\ttooltip: localize('addMcpServer', 'Add MCP Server...')\n\t};\n\tconst installExtension = {\n\t\ticonClass: ThemeIcon.asClassName(Codicon.extensions),\n\t\ttooltip: localize('addExtensionButton', 'Install Extension...')\n\t};\n\tconst configureToolSets = {\n\t\ticonClass: ThemeIcon.asClassName(Codicon.gear),\n\t\ttooltip: localize('configToolSets', 'Configure Tool Sets...')\n\t};\n\ttreePicker.title = localize('configureTools', \"Configure Tools\");\n\ttreePicker.buttons = [addMcpServerButton, installExtension, configureToolSets];\n\tstore.add(treePicker.onDidTriggerButton(button => {\n\t\tif (button === addMcpServerButton) {\n\t\t\tcommandService.executeCommand(McpCommandIds.AddConfiguration);\n\t\t} else if (button === installExtension) {\n\t\t\textensionsWorkbenchService.openSearch('@tag:language-model-tools');\n\t\t} else if (button === configureToolSets) {\n\t\t\tcommandService.executeCommand(ConfigureToolSets.ID);\n\t\t}\n\t\ttreePicker.hide();\n\t}));\n\n\ttreePicker.show();\n\n\tawait Promise.race([Event.toPromise(Event.any(treePicker.onDidHide, didAcceptFinalItem.event), store)]);\n\n\tstore.dispose();\n\n\treturn didAccept ? collectResults() : undefined;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}