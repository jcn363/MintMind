{"version":3,"names":["cov_fujgpvm9w","actualCoverage","isNonEmptyArray","DisposableStore","CharacterSet","CommitCharacterController","_disposables","s","_active","constructor","editor","widget","model","accept","f","add","onDidSuggest","e","completionModel","items","length","b","reset","onDidCancel","onDidShow","_onItem","getFocusedItem","onDidFocus","onDidHide","onWillType","text","isFrozen","state","ch","charCodeAt","acceptCharacters","has","getOption","item","selected","completion","commitCharacters","undefined","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/contrib/suggest/browser/suggestCommitCharacters.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorOption } from '../../../common/config/editorOptions.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { State, SuggestModel } from './suggestModel.js';\nimport { ISelectedSuggestion, SuggestWidget } from './suggestWidget.js';\n\nexport class CommitCharacterController {\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate _active?: {\n\t\treadonly acceptCharacters: CharacterSet;\n\t\treadonly item: ISelectedSuggestion;\n\t};\n\n\tconstructor(editor: ICodeEditor, widget: SuggestWidget, model: SuggestModel, accept: (selected: ISelectedSuggestion) => unknown) {\n\n\t\tthis._disposables.add(model.onDidSuggest(e => {\n\t\t\tif (e.completionModel.items.length === 0) {\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}));\n\t\tthis._disposables.add(model.onDidCancel(e => {\n\t\t\tthis.reset();\n\t\t}));\n\n\t\tthis._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n\t\tthis._disposables.add(widget.onDidFocus(this._onItem, this));\n\t\tthis._disposables.add(widget.onDidHide(this.reset, this));\n\n\t\tthis._disposables.add(editor.onWillType(text => {\n\t\t\tif (this._active && !widget.isFrozen() && model.state !== State.Idle) {\n\t\t\t\tconst ch = text.charCodeAt(text.length - 1);\n\t\t\t\tif (this._active.acceptCharacters.has(ch) && editor.getOption(EditorOption.acceptSuggestionOnCommitCharacter)) {\n\t\t\t\t\taccept(this._active.item);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _onItem(selected: ISelectedSuggestion | undefined): void {\n\t\tif (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n\t\t\t// no item or no commit characters\n\t\t\tthis.reset();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._active && this._active.item.item === selected.item) {\n\t\t\t// still the same item\n\t\t\treturn;\n\t\t}\n\n\t\t// keep item and its commit characters\n\t\tconst acceptCharacters = new CharacterSet();\n\t\tfor (const ch of selected.item.completion.commitCharacters) {\n\t\t\tif (ch.length > 0) {\n\t\t\t\tacceptCharacters.add(ch.charCodeAt(0));\n\t\t\t}\n\t\t}\n\t\tthis._active = { acceptCharacters, item: selected };\n\t}\n\n\treset(): void {\n\t\tthis._active = undefined;\n\t}\n\n\tdispose() {\n\t\tthis._disposables.dispose();\n\t}\n}\n"],"mappings":"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","ignoreList":[]}