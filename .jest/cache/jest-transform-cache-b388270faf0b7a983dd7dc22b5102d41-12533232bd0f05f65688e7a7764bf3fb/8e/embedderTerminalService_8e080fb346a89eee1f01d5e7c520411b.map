{"version":3,"names":["cov_1o4gn92o1r","actualCoverage","registerSingleton","createDecorator","Emitter","Event","Disposable","IEmbedderTerminalService","s","EmbedderTerminalService","_onDidCreateTerminal","onDidCreateTerminal","buffer","event","createTerminal","options","f","slc","name","isFeatureTerminal","customPtyImplementation","terminalId","cols","rows","EmbedderTerminalProcess","pty","fire","id","_pty","shouldPersist","onProcessData","_onProcessReady","_register","onProcessReady","_onDidChangeProperty","onDidChangeProperty","_onProcessExit","onProcessExit","constructor","onDidWrite","onDidClose","b","e","undefined","onDidChangeName","type","value","start","pid","cwd","windowsPty","open","shutdown","close","input","sendSignal","processBinary","resize","clearBuffer","acknowledgeDataEvent","setUnicodeVersion","setNextCommandId","getInitialCwd","getCwd","refreshProperty","property","Error","updateProperty"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/services/terminal/common/embedderTerminalService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IProcessDataEvent, IProcessProperty, IProcessPropertyMap, IProcessReadyEvent, IShellLaunchConfig, ITerminalChildProcess, ITerminalLaunchError, ProcessPropertyType } from '../../../../platform/terminal/common/terminal.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\n\nexport const IEmbedderTerminalService = createDecorator<IEmbedderTerminalService>('embedderTerminalService');\n\n/**\n * Manages terminals that the embedder can create before the terminal contrib is available.\n */\nexport interface IEmbedderTerminalService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidCreateTerminal: Event<IShellLaunchConfig>;\n\n\tcreateTerminal(options: IEmbedderTerminalOptions): void;\n}\n\nexport type EmbedderTerminal = IShellLaunchConfig & Required<Pick<IShellLaunchConfig, 'customPtyImplementation'>>;\n\nexport interface IEmbedderTerminalOptions {\n\tname: string;\n\tpty: IEmbedderTerminalPty;\n\n\t// Extension APIs that have not been implemented for embedders:\n\t//   iconPath?: URI | { light: URI; dark: URI } | ThemeIcon;\n\t//   color?: ThemeColor;\n\t//   location?: TerminalLocation | TerminalEditorLocationOptions | TerminalSplitLocationOptions;\n\t//   isTransient?: boolean;\n}\n\n/**\n * See Pseudoterminal on the vscode API for usage.\n */\nexport interface IEmbedderTerminalPty {\n\treadonly onDidWrite: Event<string>;\n\treadonly onDidClose?: Event<void | number>;\n\treadonly onDidChangeName?: Event<string>;\n\n\topen(): void;\n\tclose(): void;\n\n\t// Extension APIs that have not been implemented for embedders:\n\t//   onDidOverrideDimensions?: Event<TerminalDimensions | undefined>;\n\t//   handleInput?(data: string): void;\n\t//   setDimensions?(dimensions: TerminalDimensions): void;\n}\n\nclass EmbedderTerminalService implements IEmbedderTerminalService {\n\tdeclare _serviceBrand: undefined;\n\n\tprivate readonly _onDidCreateTerminal = new Emitter<IShellLaunchConfig>();\n\treadonly onDidCreateTerminal = Event.buffer(this._onDidCreateTerminal.event);\n\n\tcreateTerminal(options: IEmbedderTerminalOptions): void {\n\t\tconst slc: EmbedderTerminal = {\n\t\t\tname: options.name,\n\t\t\tisFeatureTerminal: true,\n\t\t\tcustomPtyImplementation(terminalId, cols, rows) {\n\t\t\t\treturn new EmbedderTerminalProcess(terminalId, options.pty);\n\t\t\t},\n\t\t};\n\t\tthis._onDidCreateTerminal.fire(slc);\n\t}\n}\n\n\nclass EmbedderTerminalProcess extends Disposable implements ITerminalChildProcess {\n\tprivate readonly _pty: IEmbedderTerminalPty;\n\n\treadonly shouldPersist = false;\n\n\treadonly onProcessData: Event<IProcessDataEvent | string>;\n\tprivate readonly _onProcessReady = this._register(new Emitter<IProcessReadyEvent>());\n\treadonly onProcessReady = this._onProcessReady.event;\n\tprivate readonly _onDidChangeProperty = this._register(new Emitter<IProcessProperty<any>>());\n\treadonly onDidChangeProperty = this._onDidChangeProperty.event;\n\tprivate readonly _onProcessExit = this._register(new Emitter<number | undefined>());\n\treadonly onProcessExit = this._onProcessExit.event;\n\n\tconstructor(\n\t\treadonly id: number,\n\t\tpty: IEmbedderTerminalPty\n\t) {\n\t\tsuper();\n\n\t\tthis._pty = pty;\n\t\tthis.onProcessData = this._pty.onDidWrite;\n\t\tif (this._pty.onDidClose) {\n\t\t\tthis._register(this._pty.onDidClose(e => this._onProcessExit.fire(e || undefined)));\n\t\t}\n\t\tif (this._pty.onDidChangeName) {\n\t\t\tthis._register(this._pty.onDidChangeName(e => this._onDidChangeProperty.fire({\n\t\t\t\ttype: ProcessPropertyType.Title,\n\t\t\t\tvalue: e\n\t\t\t})));\n\t\t}\n\t}\n\n\tasync start(): Promise<ITerminalLaunchError | undefined> {\n\t\tthis._onProcessReady.fire({ pid: -1, cwd: '', windowsPty: undefined });\n\t\tthis._pty.open();\n\t\treturn undefined;\n\t}\n\tshutdown(): void {\n\t\tthis._pty.close();\n\t}\n\n\t// TODO: A lot of these aren't useful for some implementations of ITerminalChildProcess, should\n\t// they be optional? Should there be a base class for \"external\" consumers to implement?\n\n\tinput(): void {\n\t\t// not supported\n\t}\n\tsendSignal(): void {\n\t\t// not supported\n\t}\n\tasync processBinary(): Promise<void> {\n\t\t// not supported\n\t}\n\tresize(): void {\n\t\t// no-op\n\t}\n\tclearBuffer(): void {\n\t\t// no-op\n\t}\n\tacknowledgeDataEvent(): void {\n\t\t// no-op, flow control not currently implemented\n\t}\n\tasync setUnicodeVersion(): Promise<void> {\n\t\t// no-op\n\t}\n\tasync setNextCommandId(): Promise<void> {\n\t\t// no-op\n\t}\n\tasync getInitialCwd(): Promise<string> {\n\t\treturn '';\n\t}\n\tasync getCwd(): Promise<string> {\n\t\treturn '';\n\t}\n\trefreshProperty<T extends ProcessPropertyType>(property: ProcessPropertyType): Promise<IProcessPropertyMap[T]> {\n\t\tthrow new Error(`refreshProperty is not suppported in EmbedderTerminalProcess. property: ${property}`);\n\t}\n\n\tupdateProperty(property: ProcessPropertyType, value: any): Promise<void> {\n\t\tthrow new Error(`updateProperty is not suppported in EmbedderTerminalProcess. property: ${property}, value: ${value}`);\n\t}\n}\n\nregisterSingleton(IEmbedderTerminalService, EmbedderTerminalService, InstantiationType.Delayed);\n"],"mappings":"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","ignoreList":[]}