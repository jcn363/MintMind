{"version":3,"names":["cov_155ijg6zw2","actualCoverage","Emitter","Disposable","markAsSingleton","RGBA8","TokenizationRegistry","MinimapTokensColorTracker","_INSTANCE","s","getInstance","f","b","_colors","_backgroundIsLight","_onDidChange","onDidChange","event","constructor","_updateColorMap","_register","e","changedColorMap","colorMap","getColorMap","Empty","colorId","length","source","rgba","r","g","Math","round","a","backgroundLuminosity","getRelativeLuminance","fire","undefined","getColor","backgroundIsLight"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/viewModel/minimapTokensColorTracker.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable, markAsSingleton } from '../../../base/common/lifecycle.js';\nimport { RGBA8 } from '../core/misc/rgba.js';\nimport { TokenizationRegistry } from '../languages.js';\nimport { ColorId } from '../encodedTokenAttributes.js';\n\nexport class MinimapTokensColorTracker extends Disposable {\n\tprivate static _INSTANCE: MinimapTokensColorTracker | null = null;\n\tpublic static getInstance(): MinimapTokensColorTracker {\n\t\tif (!this._INSTANCE) {\n\t\t\tthis._INSTANCE = markAsSingleton(new MinimapTokensColorTracker());\n\t\t}\n\t\treturn this._INSTANCE;\n\t}\n\n\tprivate _colors!: RGBA8[];\n\tprivate _backgroundIsLight!: boolean;\n\n\tprivate readonly _onDidChange = new Emitter<void>();\n\tpublic readonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tprivate constructor() {\n\t\tsuper();\n\t\tthis._updateColorMap();\n\t\tthis._register(TokenizationRegistry.onDidChange(e => {\n\t\t\tif (e.changedColorMap) {\n\t\t\t\tthis._updateColorMap();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _updateColorMap(): void {\n\t\tconst colorMap = TokenizationRegistry.getColorMap();\n\t\tif (!colorMap) {\n\t\t\tthis._colors = [RGBA8.Empty];\n\t\t\tthis._backgroundIsLight = true;\n\t\t\treturn;\n\t\t}\n\t\tthis._colors = [RGBA8.Empty];\n\t\tfor (let colorId = 1; colorId < colorMap.length; colorId++) {\n\t\t\tconst source = colorMap[colorId].rgba;\n\t\t\t// Use a VM friendly data-type\n\t\t\tthis._colors[colorId] = new RGBA8(source.r, source.g, source.b, Math.round(source.a * 255));\n\t\t}\n\t\tconst backgroundLuminosity = colorMap[ColorId.DefaultBackground].getRelativeLuminance();\n\t\tthis._backgroundIsLight = backgroundLuminosity >= 0.5;\n\t\tthis._onDidChange.fire(undefined);\n\t}\n\n\tpublic getColor(colorId: ColorId): RGBA8 {\n\t\tif (colorId < 1 || colorId >= this._colors.length) {\n\t\t\t// background color (basically invisible)\n\t\t\tcolorId = ColorId.DefaultBackground;\n\t\t}\n\t\treturn this._colors[colorId];\n\t}\n\n\tpublic backgroundIsLight(): boolean {\n\t\treturn this._backgroundIsLight;\n\t}\n}\n"],"mappings":"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","ignoreList":[]}