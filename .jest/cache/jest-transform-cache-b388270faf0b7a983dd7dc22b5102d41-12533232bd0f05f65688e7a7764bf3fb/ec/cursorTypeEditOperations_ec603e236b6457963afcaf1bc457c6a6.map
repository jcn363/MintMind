{"version":3,"names":["cov_i44lmq5w9","actualCoverage","onUnexpectedError","strings","ReplaceCommand","ReplaceCommandWithOffsetCursorState","ReplaceCommandWithoutChangingPosition","ReplaceCommandThatPreservesSelection","ReplaceOvertypeCommand","ReplaceOvertypeCommandOnCompositionEnd","ShiftCommand","SurroundSelectionCommand","EditOperationResult","isQuote","getMapForWordSeparators","Range","Position","IndentAction","getIndentationAtPosition","createScopedLineTokens","getIndentActionForType","getIndentForEnter","getInheritIndentForLine","getEnterAction","AutoIndentOperation","getEdits","config","model","selections","ch","isDoingComposition","f","s","b","_isAutoIndentType","indentationForSelections","selection","indentation","_findActualIndentationForSelection","push","autoClosingPairClose","AutoClosingOpenCharTypeOperation","getAutoClosingPairClose","_getIndentationAndAutoClosingPairEdits","autoIndent","i","len","length","tokenization","isCheapToTokenize","getEndPosition","lineNumber","actualIndentation","shiftIndent","unshiftIndent","languageConfigurationService","currentIndentation","startLineNumber","startColumn","normalizeIndentation","commands","map","indentationEdit","_getEditFromIndentationAndSelection","TypeWithIndentationAndAutoClosingCommand","typeCommand","range","text","editOptions","shouldPushStackElementBefore","shouldPushStackElementAfter","includeChInEdit","firstNonWhitespaceColumn","getLineFirstNonWhitespaceColumn","startLine","getLineContent","substring","endLineNumber","endColumn","AutoClosingOvertypeOperation","prevEditOperationType","autoClosedCharacters","isAutoClosingOvertype","_runAutoClosingOvertype","position","getPosition","typeSelection","column","shouldPushStackElementBetween","AutoClosingOvertypeWithInterceptorsOperation","positionLineNumber","positionColumn","chIsAlreadyTyped","_runAutoClosingOpenCharType","TypeWithAutoClosingCommand","isEmpty","positions","beforeColumn","afterColumn","pair","_findAutoClosingPairOpen","p","autoCloseConfig","shouldAutoCloseBefore","chIsQuote","autoClosingQuotes","quote","pairIsForComments","blockCommentStartToken","open","includes","autoClosingComments","comment","autoClosingBrackets","bracket","containedPair","_findContainedAutoClosingPair","containedPairClose","close","isContainedPairPresent","lineText","lineBefore","lineAfter","startsWith","characterAfter","charAt","isBeforeCloseBrace","_isBeforeClosingBrace","wordSeparators","characterBefore","charCodeAt","get","forceTokenization","lineTokens","getLineTokens","scopedLineTokens","shouldAutoClose","firstCharOffset","neutralCharacter","findNeutralCharacter","tokenType","getTokenTypeIfInsertingCharacter","isOK","lastChar","candidates","autoClosingPairs","autoClosingPairsCloseByEnd","result","candidate","endsWith","autoClosingPairsOpenByEnd","candidateIsMatch","relevantText","getValueInRange","nextChar","potentialStartingBraces","autoClosingPairsOpenByStart","potentialClosingBraces","autoClosingPairsCloseByStart","isBeforeStartingBrace","some","x","isBeforeClosingBrace","CompositionEndOvertypeOperation","compositions","isOvertypeMode","inputMode","composition","insertedTextRange","SurroundSelectionOperation","_isSurroundSelectionType","_runSurroundSelectionType","closeCharacter","surroundingPairs","shouldSurroundChar","hasOwnProperty","isTypingAQuoteCharacter","selectionContainsOnlyWhitespace","startIndex","endIndex","selectedText","test","selectionText","InterceptorElectricCharOperation","_isTypeInterceptorElectricChar","r","_typeInterceptorElectricChar","electricChars","electricAction","onElectricCharacter","e","matchOpenBracket","lastIndexOf","match","bracketPairs","findMatchingBracketUp","matchLine","matchLineIndentation","getLeadingWhitespace","newIndentation","lineFirstNonBlankColumn","prefix","typeText","command","getTypingOperation","SimpleCharacterTypeOperation","ChosenReplaceCommand","opType","EnterOperation","_enter","keepPosition","getStartPosition","indentAction","None","appendText","Indent","IndentOutdent","normalIndent","increasedIndent","Outdent","ir","indent","oldEndViewColumn","visibleColumnFromColumn","oldEndColumn","newLineContent","firstNonWhitespace","firstNonWhitespaceIndex","setEndPosition","Math","max","getLineMaxColumn","afterEnter","offset","insertSpaces","ceil","indentSize","min","lineInsertBefore","lineInsertAfter","lineBreakInsert","PasteOperation","pasteOnNewLine","multicursorText","distributedPaste","_distributePasteToCursors","sort","compareRangesUsingStarts","_distributedPaste","_simplePaste","multiCursorPaste","lines","splitLines","shouldOvertypeOnPaste","overtypeOnPaste","indexOf","CompositionOperation","replacePrevCharCnt","replaceNextCharCnt","positionDelta","_compositionType","pos","TypeWithoutInterceptorsOperation","str","TabOperation","getCommands","goodIndent","_goodIndentForLine","possibleTypeText","_replaceJumpToNextIndent","lineMaxColumn","isUnshift","tabSize","useTabStops","action","expectedIndentAction","lastLineNumber","nonWhitespaceIdx","lastNonWhitespaceIndex","maxColumn","expectedEnterAction","insertsAutoWhitespace","spacesCnt","BaseTypeWithAutoClosingCommand","_openCharacter","_closeCharacter","closeCharacterRange","enclosingRange","constructor","lineNumberDeltaOffset","columnDeltaOffset","openCharacter","_computeCursorStateWithRange","helper","computeCursorState","insertOpenCharacter","inverseEditOperations","getInverseEditOperations","_autoIndentationEdit","_autoClosingEdit","autoIndentationEdit","getEditOperations","builder","addTrackedEditOperation","Error","range1","range2","plusRange","typedText","previousTypingOperation","typingOperation","isTypingOperation","normalizeOperationType","type","autoClosingOvertype","autoClosingPairsCloseSingleChar","has","afterCharacter","beforeCharacter","found","j","lenJ","autoClosedCharacter","count","autoSurround"],"sources":["/home/user/Desktop/MintMind/src/vs/editor/common/cursor/cursorTypeEditOperations.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from '../../../base/common/charCode.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { ReplaceCommand, ReplaceCommandWithOffsetCursorState, ReplaceCommandWithoutChangingPosition, ReplaceCommandThatPreservesSelection, ReplaceOvertypeCommand, ReplaceOvertypeCommandOnCompositionEnd } from '../commands/replaceCommand.js';\nimport { ShiftCommand } from '../commands/shiftCommand.js';\nimport { SurroundSelectionCommand } from '../commands/surroundSelectionCommand.js';\nimport { CursorConfiguration, EditOperationResult, EditOperationType, ICursorSimpleModel, isQuote } from '../cursorCommon.js';\nimport { WordCharacterClass, getMapForWordSeparators } from '../core/wordCharacterClassifier.js';\nimport { Range } from '../core/range.js';\nimport { Selection } from '../core/selection.js';\nimport { Position } from '../core/position.js';\nimport { ICommand, ICursorStateComputerData, IEditOperationBuilder } from '../editorCommon.js';\nimport { ITextModel } from '../model.js';\nimport { EnterAction, IndentAction, StandardAutoClosingPairConditional } from '../languages/languageConfiguration.js';\nimport { getIndentationAtPosition } from '../languages/languageConfigurationRegistry.js';\nimport { IElectricAction } from '../languages/supports/electricCharacter.js';\nimport { EditorAutoClosingStrategy, EditorAutoIndentStrategy } from '../config/editorOptions.js';\nimport { createScopedLineTokens } from '../languages/supports.js';\nimport { getIndentActionForType, getIndentForEnter, getInheritIndentForLine } from '../languages/autoIndent.js';\nimport { getEnterAction } from '../languages/enterAction.js';\nimport { CompositionOutcome } from './cursorTypeOperations.js';\n\nexport class AutoIndentOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string, isDoingComposition: boolean): EditOperationResult | undefined {\n\t\tif (!isDoingComposition && this._isAutoIndentType(config, model, selections)) {\n\t\t\tconst indentationForSelections: { selection: Selection; indentation: string }[] = [];\n\t\t\tfor (const selection of selections) {\n\t\t\t\tconst indentation = this._findActualIndentationForSelection(config, model, selection, ch);\n\t\t\t\tif (indentation === null) {\n\t\t\t\t\t// Auto indentation failed\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tindentationForSelections.push({ selection, indentation });\n\t\t\t}\n\t\t\tconst autoClosingPairClose = AutoClosingOpenCharTypeOperation.getAutoClosingPairClose(config, model, selections, ch, false);\n\t\t\treturn this._getIndentationAndAutoClosingPairEdits(config, model, indentationForSelections, ch, autoClosingPairClose);\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate static _isAutoIndentType(config: CursorConfiguration, model: ITextModel, selections: Selection[]): boolean {\n\t\tif (config.autoIndent < EditorAutoIndentStrategy.Full) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tif (!model.tokenization.isCheapToTokenize(selections[i].getEndPosition().lineNumber)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate static _findActualIndentationForSelection(config: CursorConfiguration, model: ITextModel, selection: Selection, ch: string): string | null {\n\t\tconst actualIndentation = getIndentActionForType(config, model, selection, ch, {\n\t\t\tshiftIndent: (indentation) => {\n\t\t\t\treturn shiftIndent(config, indentation);\n\t\t\t},\n\t\t\tunshiftIndent: (indentation) => {\n\t\t\t\treturn unshiftIndent(config, indentation);\n\t\t\t},\n\t\t}, config.languageConfigurationService);\n\n\t\tif (actualIndentation === null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst currentIndentation = getIndentationAtPosition(model, selection.startLineNumber, selection.startColumn);\n\t\tif (actualIndentation === config.normalizeIndentation(currentIndentation)) {\n\t\t\treturn null;\n\t\t}\n\t\treturn actualIndentation;\n\t}\n\n\tprivate static _getIndentationAndAutoClosingPairEdits(config: CursorConfiguration, model: ITextModel, indentationForSelections: { selection: Selection; indentation: string }[], ch: string, autoClosingPairClose: string | null): EditOperationResult {\n\t\tconst commands: ICommand[] = indentationForSelections.map(({ selection, indentation }) => {\n\t\t\tif (autoClosingPairClose !== null) {\n\t\t\t\t// Apply both auto closing pair edits and auto indentation edits\n\t\t\t\tconst indentationEdit = this._getEditFromIndentationAndSelection(config, model, indentation, selection, ch, false);\n\t\t\t\treturn new TypeWithIndentationAndAutoClosingCommand(indentationEdit, selection, ch, autoClosingPairClose);\n\t\t\t} else {\n\t\t\t\t// Apply only auto indentation edits\n\t\t\t\tconst indentationEdit = this._getEditFromIndentationAndSelection(config, model, indentation, selection, ch, true);\n\t\t\t\treturn typeCommand(indentationEdit.range, indentationEdit.text, false);\n\t\t\t}\n\t\t});\n\t\tconst editOptions = { shouldPushStackElementBefore: true, shouldPushStackElementAfter: false };\n\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, editOptions);\n\t}\n\n\tprivate static _getEditFromIndentationAndSelection(config: CursorConfiguration, model: ITextModel, indentation: string, selection: Selection, ch: string, includeChInEdit: boolean = true): { range: Range; text: string } {\n\t\tconst startLineNumber = selection.startLineNumber;\n\t\tconst firstNonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(startLineNumber);\n\t\tlet text: string = config.normalizeIndentation(indentation);\n\t\tif (firstNonWhitespaceColumn !== 0) {\n\t\t\tconst startLine = model.getLineContent(startLineNumber);\n\t\t\ttext += startLine.substring(firstNonWhitespaceColumn - 1, selection.startColumn - 1);\n\t\t}\n\t\ttext += includeChInEdit ? ch : '';\n\t\tconst range = new Range(startLineNumber, 1, selection.endLineNumber, selection.endColumn);\n\t\treturn { range, text };\n\t}\n}\n\nexport class AutoClosingOvertypeOperation {\n\n\tpublic static getEdits(prevEditOperationType: EditOperationType, config: CursorConfiguration, model: ITextModel, selections: Selection[], autoClosedCharacters: Range[], ch: string): EditOperationResult | undefined {\n\t\tif (isAutoClosingOvertype(config, model, selections, autoClosedCharacters, ch)) {\n\t\t\treturn this._runAutoClosingOvertype(prevEditOperationType, selections, ch);\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate static _runAutoClosingOvertype(prevEditOperationType: EditOperationType, selections: Selection[], ch: string): EditOperationResult {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst selection = selections[i];\n\t\t\tconst position = selection.getPosition();\n\t\t\tconst typeSelection = new Range(position.lineNumber, position.column, position.lineNumber, position.column + 1);\n\t\t\tcommands[i] = new ReplaceCommand(typeSelection, ch);\n\t\t}\n\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, {\n\t\t\tshouldPushStackElementBefore: shouldPushStackElementBetween(prevEditOperationType, EditOperationType.TypingOther),\n\t\t\tshouldPushStackElementAfter: false\n\t\t});\n\t}\n}\n\nexport class AutoClosingOvertypeWithInterceptorsOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, model: ITextModel, selections: Selection[], autoClosedCharacters: Range[], ch: string): EditOperationResult | undefined {\n\t\tif (isAutoClosingOvertype(config, model, selections, autoClosedCharacters, ch)) {\n\t\t\t// Unfortunately, the close character is at this point \"doubled\", so we need to delete it...\n\t\t\tconst commands = selections.map(s => new ReplaceCommand(new Range(s.positionLineNumber, s.positionColumn, s.positionLineNumber, s.positionColumn + 1), '', false));\n\t\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, {\n\t\t\t\tshouldPushStackElementBefore: true,\n\t\t\t\tshouldPushStackElementAfter: false\n\t\t\t});\n\t\t}\n\t\treturn;\n\t}\n}\n\nexport class AutoClosingOpenCharTypeOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string, chIsAlreadyTyped: boolean, isDoingComposition: boolean): EditOperationResult | undefined {\n\t\tif (!isDoingComposition) {\n\t\t\tconst autoClosingPairClose = this.getAutoClosingPairClose(config, model, selections, ch, chIsAlreadyTyped);\n\t\t\tif (autoClosingPairClose !== null) {\n\t\t\t\treturn this._runAutoClosingOpenCharType(selections, ch, chIsAlreadyTyped, autoClosingPairClose);\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate static _runAutoClosingOpenCharType(selections: Selection[], ch: string, chIsAlreadyTyped: boolean, autoClosingPairClose: string): EditOperationResult {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst selection = selections[i];\n\t\t\tcommands[i] = new TypeWithAutoClosingCommand(selection, ch, !chIsAlreadyTyped, autoClosingPairClose);\n\t\t}\n\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, {\n\t\t\tshouldPushStackElementBefore: true,\n\t\t\tshouldPushStackElementAfter: false\n\t\t});\n\t}\n\n\tpublic static getAutoClosingPairClose(config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string, chIsAlreadyTyped: boolean): string | null {\n\t\tfor (const selection of selections) {\n\t\t\tif (!selection.isEmpty()) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t// This method is called both when typing (regularly) and when composition ends\n\t\t// This means that we need to work with a text buffer where sometimes `ch` is not\n\t\t// there (it is being typed right now) or with a text buffer where `ch` has already been typed\n\t\t//\n\t\t// In order to avoid adding checks for `chIsAlreadyTyped` in all places, we will work\n\t\t// with two conceptual positions, the position before `ch` and the position after `ch`\n\t\t//\n\t\tconst positions: { lineNumber: number; beforeColumn: number; afterColumn: number }[] = selections.map((s) => {\n\t\t\tconst position = s.getPosition();\n\t\t\tif (chIsAlreadyTyped) {\n\t\t\t\treturn { lineNumber: position.lineNumber, beforeColumn: position.column - ch.length, afterColumn: position.column };\n\t\t\t} else {\n\t\t\t\treturn { lineNumber: position.lineNumber, beforeColumn: position.column, afterColumn: position.column };\n\t\t\t}\n\t\t});\n\t\t// Find the longest auto-closing open pair in case of multiple ending in `ch`\n\t\t// e.g. when having [f\",\"] and [\",\"], it picks [f\",\"] if the character before is f\n\t\tconst pair = this._findAutoClosingPairOpen(config, model, positions.map(p => new Position(p.lineNumber, p.beforeColumn)), ch);\n\t\tif (!pair) {\n\t\t\treturn null;\n\t\t}\n\t\tlet autoCloseConfig: EditorAutoClosingStrategy;\n\t\tlet shouldAutoCloseBefore: (ch: string) => boolean;\n\n\t\tconst chIsQuote = isQuote(ch);\n\t\tif (chIsQuote) {\n\t\t\tautoCloseConfig = config.autoClosingQuotes;\n\t\t\tshouldAutoCloseBefore = config.shouldAutoCloseBefore.quote;\n\t\t} else {\n\t\t\tconst pairIsForComments = config.blockCommentStartToken ? pair.open.includes(config.blockCommentStartToken) : false;\n\t\t\tif (pairIsForComments) {\n\t\t\t\tautoCloseConfig = config.autoClosingComments;\n\t\t\t\tshouldAutoCloseBefore = config.shouldAutoCloseBefore.comment;\n\t\t\t} else {\n\t\t\t\tautoCloseConfig = config.autoClosingBrackets;\n\t\t\t\tshouldAutoCloseBefore = config.shouldAutoCloseBefore.bracket;\n\t\t\t}\n\t\t}\n\t\tif (autoCloseConfig === 'never') {\n\t\t\treturn null;\n\t\t}\n\t\t// Sometimes, it is possible to have two auto-closing pairs that have a containment relationship\n\t\t// e.g. when having [(,)] and [(*,*)]\n\t\t// - when typing (, the resulting state is (|)\n\t\t// - when typing *, the desired resulting state is (*|*), not (*|*))\n\t\tconst containedPair = this._findContainedAutoClosingPair(config, pair);\n\t\tconst containedPairClose = containedPair ? containedPair.close : '';\n\t\tlet isContainedPairPresent = true;\n\n\t\tfor (const position of positions) {\n\t\t\tconst { lineNumber, beforeColumn, afterColumn } = position;\n\t\t\tconst lineText = model.getLineContent(lineNumber);\n\t\t\tconst lineBefore = lineText.substring(0, beforeColumn - 1);\n\t\t\tconst lineAfter = lineText.substring(afterColumn - 1);\n\n\t\t\tif (!lineAfter.startsWith(containedPairClose)) {\n\t\t\t\tisContainedPairPresent = false;\n\t\t\t}\n\t\t\t// Only consider auto closing the pair if an allowed character follows or if another autoclosed pair closing brace follows\n\t\t\tif (lineAfter.length > 0) {\n\t\t\t\tconst characterAfter = lineAfter.charAt(0);\n\t\t\t\tconst isBeforeCloseBrace = this._isBeforeClosingBrace(config, lineAfter);\n\t\t\t\tif (!isBeforeCloseBrace && !shouldAutoCloseBefore(characterAfter)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Do not auto-close ' or \" after a word character\n\t\t\tif (pair.open.length === 1 && (ch === '\\'' || ch === '\"') && autoCloseConfig !== 'always') {\n\t\t\t\tconst wordSeparators = getMapForWordSeparators(config.wordSeparators, []);\n\t\t\t\tif (lineBefore.length > 0) {\n\t\t\t\t\tconst characterBefore = lineBefore.charCodeAt(lineBefore.length - 1);\n\t\t\t\t\tif (wordSeparators.get(characterBefore) === WordCharacterClass.Regular) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!model.tokenization.isCheapToTokenize(lineNumber)) {\n\t\t\t\t// Do not force tokenization\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tmodel.tokenization.forceTokenization(lineNumber);\n\t\t\tconst lineTokens = model.tokenization.getLineTokens(lineNumber);\n\t\t\tconst scopedLineTokens = createScopedLineTokens(lineTokens, beforeColumn - 1);\n\t\t\tif (!pair.shouldAutoClose(scopedLineTokens, beforeColumn - scopedLineTokens.firstCharOffset)) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t// Typing for example a quote could either start a new string, in which case auto-closing is desirable\n\t\t\t// or it could end a previously started string, in which case auto-closing is not desirable\n\t\t\t//\n\t\t\t// In certain cases, it is really not possible to look at the previous token to determine\n\t\t\t// what would happen. That's why we do something really unusual, we pretend to type a different\n\t\t\t// character and ask the tokenizer what the outcome of doing that is: after typing a neutral\n\t\t\t// character, are we in a string (i.e. the quote would most likely end a string) or not?\n\t\t\t//\n\t\t\tconst neutralCharacter = pair.findNeutralCharacter();\n\t\t\tif (neutralCharacter) {\n\t\t\t\tconst tokenType = model.tokenization.getTokenTypeIfInsertingCharacter(lineNumber, beforeColumn, neutralCharacter);\n\t\t\t\tif (!pair.isOK(tokenType)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (isContainedPairPresent) {\n\t\t\treturn pair.close.substring(0, pair.close.length - containedPairClose.length);\n\t\t} else {\n\t\t\treturn pair.close;\n\t\t}\n\t}\n\n\t/**\n\t * Find another auto-closing pair that is contained by the one passed in.\n\t *\n\t * e.g. when having [(,)] and [(*,*)] as auto-closing pairs\n\t * this method will find [(,)] as a containment pair for [(*,*)]\n\t */\n\tprivate static _findContainedAutoClosingPair(config: CursorConfiguration, pair: StandardAutoClosingPairConditional): StandardAutoClosingPairConditional | null {\n\t\tif (pair.open.length <= 1) {\n\t\t\treturn null;\n\t\t}\n\t\tconst lastChar = pair.close.charAt(pair.close.length - 1);\n\t\t// get candidates with the same last character as close\n\t\tconst candidates = config.autoClosingPairs.autoClosingPairsCloseByEnd.get(lastChar) || [];\n\t\tlet result: StandardAutoClosingPairConditional | null = null;\n\t\tfor (const candidate of candidates) {\n\t\t\tif (candidate.open !== pair.open && pair.open.includes(candidate.open) && pair.close.endsWith(candidate.close)) {\n\t\t\t\tif (!result || candidate.open.length > result.open.length) {\n\t\t\t\t\tresult = candidate;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * Determine if typing `ch` at all `positions` in the `model` results in an\n\t * auto closing open sequence being typed.\n\t *\n\t * Auto closing open sequences can consist of multiple characters, which\n\t * can lead to ambiguities. In such a case, the longest auto-closing open\n\t * sequence is returned.\n\t */\n\tprivate static _findAutoClosingPairOpen(config: CursorConfiguration, model: ITextModel, positions: Position[], ch: string): StandardAutoClosingPairConditional | null {\n\t\tconst candidates = config.autoClosingPairs.autoClosingPairsOpenByEnd.get(ch);\n\t\tif (!candidates) {\n\t\t\treturn null;\n\t\t}\n\t\t// Determine which auto-closing pair it is\n\t\tlet result: StandardAutoClosingPairConditional | null = null;\n\t\tfor (const candidate of candidates) {\n\t\t\tif (result === null || candidate.open.length > result.open.length) {\n\t\t\t\tlet candidateIsMatch = true;\n\t\t\t\tfor (const position of positions) {\n\t\t\t\t\tconst relevantText = model.getValueInRange(new Range(position.lineNumber, position.column - candidate.open.length + 1, position.lineNumber, position.column));\n\t\t\t\t\tif (relevantText + ch !== candidate.open) {\n\t\t\t\t\t\tcandidateIsMatch = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (candidateIsMatch) {\n\t\t\t\t\tresult = candidate;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate static _isBeforeClosingBrace(config: CursorConfiguration, lineAfter: string) {\n\t\t// If the start of lineAfter can be interpretted as both a starting or ending brace, default to returning false\n\t\tconst nextChar = lineAfter.charAt(0);\n\t\tconst potentialStartingBraces = config.autoClosingPairs.autoClosingPairsOpenByStart.get(nextChar) || [];\n\t\tconst potentialClosingBraces = config.autoClosingPairs.autoClosingPairsCloseByStart.get(nextChar) || [];\n\n\t\tconst isBeforeStartingBrace = potentialStartingBraces.some(x => lineAfter.startsWith(x.open));\n\t\tconst isBeforeClosingBrace = potentialClosingBraces.some(x => lineAfter.startsWith(x.close));\n\n\t\treturn !isBeforeStartingBrace && isBeforeClosingBrace;\n\t}\n}\n\nexport class CompositionEndOvertypeOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, compositions: CompositionOutcome[]): EditOperationResult | null {\n\t\tconst isOvertypeMode = config.inputMode === 'overtype';\n\t\tif (!isOvertypeMode) {\n\t\t\treturn null;\n\t\t}\n\t\tconst commands = compositions.map(composition => new ReplaceOvertypeCommandOnCompositionEnd(composition.insertedTextRange));\n\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, {\n\t\t\tshouldPushStackElementBefore: true,\n\t\t\tshouldPushStackElementAfter: false\n\t\t});\n\t}\n}\n\nexport class SurroundSelectionOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string, isDoingComposition: boolean): EditOperationResult | undefined {\n\t\tif (!isDoingComposition && this._isSurroundSelectionType(config, model, selections, ch)) {\n\t\t\treturn this._runSurroundSelectionType(config, selections, ch);\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate static _runSurroundSelectionType(config: CursorConfiguration, selections: Selection[], ch: string): EditOperationResult {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst selection = selections[i];\n\t\t\tconst closeCharacter = config.surroundingPairs[ch];\n\t\t\tcommands[i] = new SurroundSelectionCommand(selection, ch, closeCharacter);\n\t\t}\n\t\treturn new EditOperationResult(EditOperationType.Other, commands, {\n\t\t\tshouldPushStackElementBefore: true,\n\t\t\tshouldPushStackElementAfter: true\n\t\t});\n\t}\n\n\tprivate static _isSurroundSelectionType(config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string): boolean {\n\t\tif (!shouldSurroundChar(config, ch) || !config.surroundingPairs.hasOwnProperty(ch)) {\n\t\t\treturn false;\n\t\t}\n\t\tconst isTypingAQuoteCharacter = isQuote(ch);\n\t\tfor (const selection of selections) {\n\t\t\tif (selection.isEmpty()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet selectionContainsOnlyWhitespace = true;\n\t\t\tfor (let lineNumber = selection.startLineNumber; lineNumber <= selection.endLineNumber; lineNumber++) {\n\t\t\t\tconst lineText = model.getLineContent(lineNumber);\n\t\t\t\tconst startIndex = (lineNumber === selection.startLineNumber ? selection.startColumn - 1 : 0);\n\t\t\t\tconst endIndex = (lineNumber === selection.endLineNumber ? selection.endColumn - 1 : lineText.length);\n\t\t\t\tconst selectedText = lineText.substring(startIndex, endIndex);\n\t\t\t\tif (/[^ \\t]/.test(selectedText)) {\n\t\t\t\t\t// this selected text contains something other than whitespace\n\t\t\t\t\tselectionContainsOnlyWhitespace = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (selectionContainsOnlyWhitespace) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (isTypingAQuoteCharacter && selection.startLineNumber === selection.endLineNumber && selection.startColumn + 1 === selection.endColumn) {\n\t\t\t\tconst selectionText = model.getValueInRange(selection);\n\t\t\t\tif (isQuote(selectionText)) {\n\t\t\t\t\t// Typing a quote character on top of another quote character\n\t\t\t\t\t// => disable surround selection type\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n}\n\nexport class InterceptorElectricCharOperation {\n\n\tpublic static getEdits(prevEditOperationType: EditOperationType, config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string, isDoingComposition: boolean): EditOperationResult | undefined {\n\t\t// Electric characters make sense only when dealing with a single cursor,\n\t\t// as multiple cursors typing brackets for example would interfer with bracket matching\n\t\tif (!isDoingComposition && this._isTypeInterceptorElectricChar(config, model, selections)) {\n\t\t\tconst r = this._typeInterceptorElectricChar(prevEditOperationType, config, model, selections[0], ch);\n\t\t\tif (r) {\n\t\t\t\treturn r;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate static _isTypeInterceptorElectricChar(config: CursorConfiguration, model: ITextModel, selections: Selection[]) {\n\t\tif (selections.length === 1 && model.tokenization.isCheapToTokenize(selections[0].getEndPosition().lineNumber)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate static _typeInterceptorElectricChar(prevEditOperationType: EditOperationType, config: CursorConfiguration, model: ITextModel, selection: Selection, ch: string): EditOperationResult | null {\n\t\tif (!config.electricChars.hasOwnProperty(ch) || !selection.isEmpty()) {\n\t\t\treturn null;\n\t\t}\n\t\tconst position = selection.getPosition();\n\t\tmodel.tokenization.forceTokenization(position.lineNumber);\n\t\tconst lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n\t\tlet electricAction: IElectricAction | null;\n\t\ttry {\n\t\t\telectricAction = config.onElectricCharacter(ch, lineTokens, position.column);\n\t\t} catch (e) {\n\t\t\tonUnexpectedError(e);\n\t\t\treturn null;\n\t\t}\n\t\tif (!electricAction) {\n\t\t\treturn null;\n\t\t}\n\t\tif (electricAction.matchOpenBracket) {\n\t\t\tconst endColumn = (lineTokens.getLineContent() + ch).lastIndexOf(electricAction.matchOpenBracket) + 1;\n\t\t\tconst match = model.bracketPairs.findMatchingBracketUp(electricAction.matchOpenBracket, {\n\t\t\t\tlineNumber: position.lineNumber,\n\t\t\t\tcolumn: endColumn\n\t\t\t}, 500 /* give at most 500ms to compute */);\n\t\t\tif (match) {\n\t\t\t\tif (match.startLineNumber === position.lineNumber) {\n\t\t\t\t\t// matched something on the same line => no change in indentation\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst matchLine = model.getLineContent(match.startLineNumber);\n\t\t\t\tconst matchLineIndentation = strings.getLeadingWhitespace(matchLine);\n\t\t\t\tconst newIndentation = config.normalizeIndentation(matchLineIndentation);\n\t\t\t\tconst lineText = model.getLineContent(position.lineNumber);\n\t\t\t\tconst lineFirstNonBlankColumn = model.getLineFirstNonWhitespaceColumn(position.lineNumber) || position.column;\n\t\t\t\tconst prefix = lineText.substring(lineFirstNonBlankColumn - 1, position.column - 1);\n\t\t\t\tconst typeText = newIndentation + prefix + ch;\n\t\t\t\tconst typeSelection = new Range(position.lineNumber, 1, position.lineNumber, position.column);\n\t\t\t\tconst command = new ReplaceCommand(typeSelection, typeText);\n\t\t\t\treturn new EditOperationResult(getTypingOperation(typeText, prevEditOperationType), [command], {\n\t\t\t\t\tshouldPushStackElementBefore: false,\n\t\t\t\t\tshouldPushStackElementAfter: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport class SimpleCharacterTypeOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, prevEditOperationType: EditOperationType, selections: Selection[], ch: string, isDoingComposition: boolean): EditOperationResult {\n\t\t// A simple character type\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst ChosenReplaceCommand = config.inputMode === 'overtype' && !isDoingComposition ? ReplaceOvertypeCommand : ReplaceCommand;\n\t\t\tcommands[i] = new ChosenReplaceCommand(selections[i], ch);\n\t\t}\n\n\t\tconst opType = getTypingOperation(ch, prevEditOperationType);\n\t\treturn new EditOperationResult(opType, commands, {\n\t\t\tshouldPushStackElementBefore: shouldPushStackElementBetween(prevEditOperationType, opType),\n\t\t\tshouldPushStackElementAfter: false\n\t\t});\n\t}\n}\n\nexport class EnterOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, model: ITextModel, selections: Selection[], ch: string, isDoingComposition: boolean): EditOperationResult | undefined {\n\t\tif (!isDoingComposition && ch === '\\n') {\n\t\t\tconst commands: ICommand[] = [];\n\t\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\t\tcommands[i] = this._enter(config, model, false, selections[i]);\n\t\t\t}\n\t\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, {\n\t\t\t\tshouldPushStackElementBefore: true,\n\t\t\t\tshouldPushStackElementAfter: false,\n\t\t\t});\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate static _enter(config: CursorConfiguration, model: ITextModel, keepPosition: boolean, range: Range): ICommand {\n\t\tif (config.autoIndent === EditorAutoIndentStrategy.None) {\n\t\t\treturn typeCommand(range, '\\n', keepPosition);\n\t\t}\n\t\tif (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber) || config.autoIndent === EditorAutoIndentStrategy.Keep) {\n\t\t\tconst lineText = model.getLineContent(range.startLineNumber);\n\t\t\tconst indentation = strings.getLeadingWhitespace(lineText).substring(0, range.startColumn - 1);\n\t\t\treturn typeCommand(range, '\\n' + config.normalizeIndentation(indentation), keepPosition);\n\t\t}\n\t\tconst r = getEnterAction(config.autoIndent, model, range, config.languageConfigurationService);\n\t\tif (r) {\n\t\t\tif (r.indentAction === IndentAction.None) {\n\t\t\t\t// Nothing special\n\t\t\t\treturn typeCommand(range, '\\n' + config.normalizeIndentation(r.indentation + r.appendText), keepPosition);\n\n\t\t\t} else if (r.indentAction === IndentAction.Indent) {\n\t\t\t\t// Indent once\n\t\t\t\treturn typeCommand(range, '\\n' + config.normalizeIndentation(r.indentation + r.appendText), keepPosition);\n\n\t\t\t} else if (r.indentAction === IndentAction.IndentOutdent) {\n\t\t\t\t// Ultra special\n\t\t\t\tconst normalIndent = config.normalizeIndentation(r.indentation);\n\t\t\t\tconst increasedIndent = config.normalizeIndentation(r.indentation + r.appendText);\n\t\t\t\tconst typeText = '\\n' + increasedIndent + '\\n' + normalIndent;\n\t\t\t\tif (keepPosition) {\n\t\t\t\t\treturn new ReplaceCommandWithoutChangingPosition(range, typeText, true);\n\t\t\t\t} else {\n\t\t\t\t\treturn new ReplaceCommandWithOffsetCursorState(range, typeText, -1, increasedIndent.length - normalIndent.length, true);\n\t\t\t\t}\n\t\t\t} else if (r.indentAction === IndentAction.Outdent) {\n\t\t\t\tconst actualIndentation = unshiftIndent(config, r.indentation);\n\t\t\t\treturn typeCommand(range, '\\n' + config.normalizeIndentation(actualIndentation + r.appendText), keepPosition);\n\t\t\t}\n\t\t}\n\n\t\tconst lineText = model.getLineContent(range.startLineNumber);\n\t\tconst indentation = strings.getLeadingWhitespace(lineText).substring(0, range.startColumn - 1);\n\n\t\tif (config.autoIndent >= EditorAutoIndentStrategy.Full) {\n\t\t\tconst ir = getIndentForEnter(config.autoIndent, model, range, {\n\t\t\t\tunshiftIndent: (indent) => {\n\t\t\t\t\treturn unshiftIndent(config, indent);\n\t\t\t\t},\n\t\t\t\tshiftIndent: (indent) => {\n\t\t\t\t\treturn shiftIndent(config, indent);\n\t\t\t\t},\n\t\t\t\tnormalizeIndentation: (indent) => {\n\t\t\t\t\treturn config.normalizeIndentation(indent);\n\t\t\t\t}\n\t\t\t}, config.languageConfigurationService);\n\n\t\t\tif (ir) {\n\t\t\t\tlet oldEndViewColumn = config.visibleColumnFromColumn(model, range.getEndPosition());\n\t\t\t\tconst oldEndColumn = range.endColumn;\n\t\t\t\tconst newLineContent = model.getLineContent(range.endLineNumber);\n\t\t\t\tconst firstNonWhitespace = strings.firstNonWhitespaceIndex(newLineContent);\n\t\t\t\tif (firstNonWhitespace >= 0) {\n\t\t\t\t\trange = range.setEndPosition(range.endLineNumber, Math.max(range.endColumn, firstNonWhitespace + 1));\n\t\t\t\t} else {\n\t\t\t\t\trange = range.setEndPosition(range.endLineNumber, model.getLineMaxColumn(range.endLineNumber));\n\t\t\t\t}\n\t\t\t\tif (keepPosition) {\n\t\t\t\t\treturn new ReplaceCommandWithoutChangingPosition(range, '\\n' + config.normalizeIndentation(ir.afterEnter), true);\n\t\t\t\t} else {\n\t\t\t\t\tlet offset = 0;\n\t\t\t\t\tif (oldEndColumn <= firstNonWhitespace + 1) {\n\t\t\t\t\t\tif (!config.insertSpaces) {\n\t\t\t\t\t\t\toldEndViewColumn = Math.ceil(oldEndViewColumn / config.indentSize);\n\t\t\t\t\t\t}\n\t\t\t\t\t\toffset = Math.min(oldEndViewColumn + 1 - config.normalizeIndentation(ir.afterEnter).length - 1, 0);\n\t\t\t\t\t}\n\t\t\t\t\treturn new ReplaceCommandWithOffsetCursorState(range, '\\n' + config.normalizeIndentation(ir.afterEnter), 0, offset, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn typeCommand(range, '\\n' + config.normalizeIndentation(indentation), keepPosition);\n\t}\n\n\n\tpublic static lineInsertBefore(config: CursorConfiguration, model: ITextModel | null, selections: Selection[] | null): ICommand[] {\n\t\tif (model === null || selections === null) {\n\t\t\treturn [];\n\t\t}\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tlet lineNumber = selections[i].positionLineNumber;\n\t\t\tif (lineNumber === 1) {\n\t\t\t\tcommands[i] = new ReplaceCommandWithoutChangingPosition(new Range(1, 1, 1, 1), '\\n');\n\t\t\t} else {\n\t\t\t\tlineNumber--;\n\t\t\t\tconst column = model.getLineMaxColumn(lineNumber);\n\n\t\t\t\tcommands[i] = this._enter(config, model, false, new Range(lineNumber, column, lineNumber, column));\n\t\t\t}\n\t\t}\n\t\treturn commands;\n\t}\n\n\tpublic static lineInsertAfter(config: CursorConfiguration, model: ITextModel | null, selections: Selection[] | null): ICommand[] {\n\t\tif (model === null || selections === null) {\n\t\t\treturn [];\n\t\t}\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst lineNumber = selections[i].positionLineNumber;\n\t\t\tconst column = model.getLineMaxColumn(lineNumber);\n\t\t\tcommands[i] = this._enter(config, model, false, new Range(lineNumber, column, lineNumber, column));\n\t\t}\n\t\treturn commands;\n\t}\n\n\tpublic static lineBreakInsert(config: CursorConfiguration, model: ITextModel, selections: Selection[]): ICommand[] {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tcommands[i] = this._enter(config, model, true, selections[i]);\n\t\t}\n\t\treturn commands;\n\t}\n}\n\nexport class PasteOperation {\n\n\tpublic static getEdits(config: CursorConfiguration, model: ICursorSimpleModel, selections: Selection[], text: string, pasteOnNewLine: boolean, multicursorText: string[]) {\n\t\tconst distributedPaste = this._distributePasteToCursors(config, selections, text, pasteOnNewLine, multicursorText);\n\t\tif (distributedPaste) {\n\t\t\tselections = selections.sort(Range.compareRangesUsingStarts);\n\t\t\treturn this._distributedPaste(config, model, selections, distributedPaste);\n\t\t} else {\n\t\t\treturn this._simplePaste(config, model, selections, text, pasteOnNewLine);\n\t\t}\n\t}\n\n\tprivate static _distributePasteToCursors(config: CursorConfiguration, selections: Selection[], text: string, pasteOnNewLine: boolean, multicursorText: string[]): string[] | null {\n\t\tif (pasteOnNewLine) {\n\t\t\treturn null;\n\t\t}\n\t\tif (selections.length === 1) {\n\t\t\treturn null;\n\t\t}\n\t\tif (multicursorText && multicursorText.length === selections.length) {\n\t\t\treturn multicursorText;\n\t\t}\n\t\tif (config.multiCursorPaste === 'spread') {\n\t\t\t// Try to spread the pasted text in case the line count matches the cursor count\n\t\t\t// Remove trailing \\n if present\n\t\t\tif (text.charCodeAt(text.length - 1) === CharCode.LineFeed) {\n\t\t\t\ttext = text.substring(0, text.length - 1);\n\t\t\t}\n\t\t\t// Remove trailing \\r if present\n\t\t\tif (text.charCodeAt(text.length - 1) === CharCode.CarriageReturn) {\n\t\t\t\ttext = text.substring(0, text.length - 1);\n\t\t\t}\n\t\t\tconst lines = strings.splitLines(text);\n\t\t\tif (lines.length === selections.length) {\n\t\t\t\treturn lines;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate static _distributedPaste(config: CursorConfiguration, model: ICursorSimpleModel, selections: Selection[], text: string[]): EditOperationResult {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst shouldOvertypeOnPaste = config.overtypeOnPaste && config.inputMode === 'overtype';\n\t\t\tconst ChosenReplaceCommand = shouldOvertypeOnPaste ? ReplaceOvertypeCommand : ReplaceCommand;\n\t\t\tcommands[i] = new ChosenReplaceCommand(selections[i], text[i]);\n\t\t}\n\t\treturn new EditOperationResult(EditOperationType.Other, commands, {\n\t\t\tshouldPushStackElementBefore: true,\n\t\t\tshouldPushStackElementAfter: true\n\t\t});\n\t}\n\n\tprivate static _simplePaste(config: CursorConfiguration, model: ICursorSimpleModel, selections: Selection[], text: string, pasteOnNewLine: boolean): EditOperationResult {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst selection = selections[i];\n\t\t\tconst position = selection.getPosition();\n\t\t\tif (pasteOnNewLine && !selection.isEmpty()) {\n\t\t\t\tpasteOnNewLine = false;\n\t\t\t}\n\t\t\tif (pasteOnNewLine && text.indexOf('\\n') !== text.length - 1) {\n\t\t\t\tpasteOnNewLine = false;\n\t\t\t}\n\t\t\tif (pasteOnNewLine) {\n\t\t\t\t// Paste entire line at the beginning of line\n\t\t\t\tconst typeSelection = new Range(position.lineNumber, 1, position.lineNumber, 1);\n\t\t\t\tcommands[i] = new ReplaceCommandThatPreservesSelection(typeSelection, text, selection, true);\n\t\t\t} else {\n\t\t\t\tconst shouldOvertypeOnPaste = config.overtypeOnPaste && config.inputMode === 'overtype';\n\t\t\t\tconst ChosenReplaceCommand = shouldOvertypeOnPaste ? ReplaceOvertypeCommand : ReplaceCommand;\n\t\t\t\tcommands[i] = new ChosenReplaceCommand(selection, text);\n\t\t\t}\n\t\t}\n\t\treturn new EditOperationResult(EditOperationType.Other, commands, {\n\t\t\tshouldPushStackElementBefore: true,\n\t\t\tshouldPushStackElementAfter: true\n\t\t});\n\t}\n}\n\nexport class CompositionOperation {\n\n\tpublic static getEdits(prevEditOperationType: EditOperationType, config: CursorConfiguration, model: ITextModel, selections: Selection[], text: string, replacePrevCharCnt: number, replaceNextCharCnt: number, positionDelta: number) {\n\t\tconst commands = selections.map(selection => this._compositionType(model, selection, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta));\n\t\treturn new EditOperationResult(EditOperationType.TypingOther, commands, {\n\t\t\tshouldPushStackElementBefore: shouldPushStackElementBetween(prevEditOperationType, EditOperationType.TypingOther),\n\t\t\tshouldPushStackElementAfter: false\n\t\t});\n\t}\n\n\tprivate static _compositionType(model: ITextModel, selection: Selection, text: string, replacePrevCharCnt: number, replaceNextCharCnt: number, positionDelta: number): ICommand | null {\n\t\tif (!selection.isEmpty()) {\n\t\t\t// looks like https://github.com/microsoft/vscode/issues/2773\n\t\t\t// where a cursor operation occurred before a canceled composition\n\t\t\t// => ignore composition\n\t\t\treturn null;\n\t\t}\n\t\tconst pos = selection.getPosition();\n\t\tconst startColumn = Math.max(1, pos.column - replacePrevCharCnt);\n\t\tconst endColumn = Math.min(model.getLineMaxColumn(pos.lineNumber), pos.column + replaceNextCharCnt);\n\t\tconst range = new Range(pos.lineNumber, startColumn, pos.lineNumber, endColumn);\n\t\treturn new ReplaceCommandWithOffsetCursorState(range, text, 0, positionDelta);\n\t}\n}\n\nexport class TypeWithoutInterceptorsOperation {\n\n\tpublic static getEdits(prevEditOperationType: EditOperationType, selections: Selection[], str: string): EditOperationResult {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tcommands[i] = new ReplaceCommand(selections[i], str);\n\t\t}\n\t\tconst opType = getTypingOperation(str, prevEditOperationType);\n\t\treturn new EditOperationResult(opType, commands, {\n\t\t\tshouldPushStackElementBefore: shouldPushStackElementBetween(prevEditOperationType, opType),\n\t\t\tshouldPushStackElementAfter: false\n\t\t});\n\t}\n}\n\nexport class TabOperation {\n\n\tpublic static getCommands(config: CursorConfiguration, model: ITextModel, selections: Selection[]) {\n\t\tconst commands: ICommand[] = [];\n\t\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\t\tconst selection = selections[i];\n\t\t\tif (selection.isEmpty()) {\n\t\t\t\tconst lineText = model.getLineContent(selection.startLineNumber);\n\t\t\t\tif (/^\\s*$/.test(lineText) && model.tokenization.isCheapToTokenize(selection.startLineNumber)) {\n\t\t\t\t\tlet goodIndent = this._goodIndentForLine(config, model, selection.startLineNumber);\n\t\t\t\t\tgoodIndent = goodIndent || '\\t';\n\t\t\t\t\tconst possibleTypeText = config.normalizeIndentation(goodIndent);\n\t\t\t\t\tif (!lineText.startsWith(possibleTypeText)) {\n\t\t\t\t\t\tcommands[i] = new ReplaceCommand(new Range(selection.startLineNumber, 1, selection.startLineNumber, lineText.length + 1), possibleTypeText, true);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcommands[i] = this._replaceJumpToNextIndent(config, model, selection, true);\n\t\t\t} else {\n\t\t\t\tif (selection.startLineNumber === selection.endLineNumber) {\n\t\t\t\t\tconst lineMaxColumn = model.getLineMaxColumn(selection.startLineNumber);\n\t\t\t\t\tif (selection.startColumn !== 1 || selection.endColumn !== lineMaxColumn) {\n\t\t\t\t\t\t// This is a single line selection that is not the entire line\n\t\t\t\t\t\tcommands[i] = this._replaceJumpToNextIndent(config, model, selection, false);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcommands[i] = new ShiftCommand(selection, {\n\t\t\t\t\tisUnshift: false,\n\t\t\t\t\ttabSize: config.tabSize,\n\t\t\t\t\tindentSize: config.indentSize,\n\t\t\t\t\tinsertSpaces: config.insertSpaces,\n\t\t\t\t\tuseTabStops: config.useTabStops,\n\t\t\t\t\tautoIndent: config.autoIndent\n\t\t\t\t}, config.languageConfigurationService);\n\t\t\t}\n\t\t}\n\t\treturn commands;\n\t}\n\n\tprivate static _goodIndentForLine(config: CursorConfiguration, model: ITextModel, lineNumber: number): string | null {\n\t\tlet action: IndentAction | EnterAction | null = null;\n\t\tlet indentation: string = '';\n\t\tconst expectedIndentAction = getInheritIndentForLine(config.autoIndent, model, lineNumber, false, config.languageConfigurationService);\n\t\tif (expectedIndentAction) {\n\t\t\taction = expectedIndentAction.action;\n\t\t\tindentation = expectedIndentAction.indentation;\n\t\t} else if (lineNumber > 1) {\n\t\t\tlet lastLineNumber: number;\n\t\t\tfor (lastLineNumber = lineNumber - 1; lastLineNumber >= 1; lastLineNumber--) {\n\t\t\t\tconst lineText = model.getLineContent(lastLineNumber);\n\t\t\t\tconst nonWhitespaceIdx = strings.lastNonWhitespaceIndex(lineText);\n\t\t\t\tif (nonWhitespaceIdx >= 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastLineNumber < 1) {\n\t\t\t\t// No previous line with content found\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst maxColumn = model.getLineMaxColumn(lastLineNumber);\n\t\t\tconst expectedEnterAction = getEnterAction(config.autoIndent, model, new Range(lastLineNumber, maxColumn, lastLineNumber, maxColumn), config.languageConfigurationService);\n\t\t\tif (expectedEnterAction) {\n\t\t\t\tindentation = expectedEnterAction.indentation + expectedEnterAction.appendText;\n\t\t\t}\n\t\t}\n\t\tif (action) {\n\t\t\tif (action === IndentAction.Indent) {\n\t\t\t\tindentation = shiftIndent(config, indentation);\n\t\t\t}\n\t\t\tif (action === IndentAction.Outdent) {\n\t\t\t\tindentation = unshiftIndent(config, indentation);\n\t\t\t}\n\t\t\tindentation = config.normalizeIndentation(indentation);\n\t\t}\n\t\tif (!indentation) {\n\t\t\treturn null;\n\t\t}\n\t\treturn indentation;\n\t}\n\n\tprivate static _replaceJumpToNextIndent(config: CursorConfiguration, model: ICursorSimpleModel, selection: Selection, insertsAutoWhitespace: boolean): ReplaceCommand {\n\t\tlet typeText = '';\n\t\tconst position = selection.getStartPosition();\n\t\tif (config.insertSpaces) {\n\t\t\tconst visibleColumnFromColumn = config.visibleColumnFromColumn(model, position);\n\t\t\tconst indentSize = config.indentSize;\n\t\t\tconst spacesCnt = indentSize - (visibleColumnFromColumn % indentSize);\n\t\t\tfor (let i = 0; i < spacesCnt; i++) {\n\t\t\t\ttypeText += ' ';\n\t\t\t}\n\t\t} else {\n\t\t\ttypeText = '\\t';\n\t\t}\n\t\treturn new ReplaceCommand(selection, typeText, insertsAutoWhitespace);\n\t}\n}\n\nexport class BaseTypeWithAutoClosingCommand extends ReplaceCommandWithOffsetCursorState {\n\n\tprivate readonly _openCharacter: string;\n\tprivate readonly _closeCharacter: string;\n\tpublic closeCharacterRange: Range | null;\n\tpublic enclosingRange: Range | null;\n\n\tconstructor(selection: Selection, text: string, lineNumberDeltaOffset: number, columnDeltaOffset: number, openCharacter: string, closeCharacter: string) {\n\t\tsuper(selection, text, lineNumberDeltaOffset, columnDeltaOffset);\n\t\tthis._openCharacter = openCharacter;\n\t\tthis._closeCharacter = closeCharacter;\n\t\tthis.closeCharacterRange = null;\n\t\tthis.enclosingRange = null;\n\t}\n\n\tprotected _computeCursorStateWithRange(model: ITextModel, range: Range, helper: ICursorStateComputerData): Selection {\n\t\tthis.closeCharacterRange = new Range(range.startLineNumber, range.endColumn - this._closeCharacter.length, range.endLineNumber, range.endColumn);\n\t\tthis.enclosingRange = new Range(range.startLineNumber, range.endColumn - this._openCharacter.length - this._closeCharacter.length, range.endLineNumber, range.endColumn);\n\t\treturn super.computeCursorState(model, helper);\n\t}\n}\n\nclass TypeWithAutoClosingCommand extends BaseTypeWithAutoClosingCommand {\n\n\tconstructor(selection: Selection, openCharacter: string, insertOpenCharacter: boolean, closeCharacter: string) {\n\t\tconst text = (insertOpenCharacter ? openCharacter : '') + closeCharacter;\n\t\tconst lineNumberDeltaOffset = 0;\n\t\tconst columnDeltaOffset = -closeCharacter.length;\n\t\tsuper(selection, text, lineNumberDeltaOffset, columnDeltaOffset, openCharacter, closeCharacter);\n\t}\n\n\tpublic override computeCursorState(model: ITextModel, helper: ICursorStateComputerData): Selection {\n\t\tconst inverseEditOperations = helper.getInverseEditOperations();\n\t\tconst range = inverseEditOperations[0].range;\n\t\treturn this._computeCursorStateWithRange(model, range, helper);\n\t}\n}\n\nclass TypeWithIndentationAndAutoClosingCommand extends BaseTypeWithAutoClosingCommand {\n\n\tprivate readonly _autoIndentationEdit: { range: Range; text: string };\n\tprivate readonly _autoClosingEdit: { range: Range; text: string };\n\n\tconstructor(autoIndentationEdit: { range: Range; text: string }, selection: Selection, openCharacter: string, closeCharacter: string) {\n\t\tconst text = openCharacter + closeCharacter;\n\t\tconst lineNumberDeltaOffset = 0;\n\t\tconst columnDeltaOffset = openCharacter.length;\n\t\tsuper(selection, text, lineNumberDeltaOffset, columnDeltaOffset, openCharacter, closeCharacter);\n\t\tthis._autoIndentationEdit = autoIndentationEdit;\n\t\tthis._autoClosingEdit = { range: selection, text };\n\t}\n\n\tpublic override getEditOperations(model: ITextModel, builder: IEditOperationBuilder): void {\n\t\tbuilder.addTrackedEditOperation(this._autoIndentationEdit.range, this._autoIndentationEdit.text);\n\t\tbuilder.addTrackedEditOperation(this._autoClosingEdit.range, this._autoClosingEdit.text);\n\t}\n\n\tpublic override computeCursorState(model: ITextModel, helper: ICursorStateComputerData): Selection {\n\t\tconst inverseEditOperations = helper.getInverseEditOperations();\n\t\tif (inverseEditOperations.length !== 2) {\n\t\t\tthrow new Error('There should be two inverse edit operations!');\n\t\t}\n\t\tconst range1 = inverseEditOperations[0].range;\n\t\tconst range2 = inverseEditOperations[1].range;\n\t\tconst range = range1.plusRange(range2);\n\t\treturn this._computeCursorStateWithRange(model, range, helper);\n\t}\n}\n\nfunction getTypingOperation(typedText: string, previousTypingOperation: EditOperationType): EditOperationType {\n\tif (typedText === ' ') {\n\t\treturn previousTypingOperation === EditOperationType.TypingFirstSpace\n\t\t\t|| previousTypingOperation === EditOperationType.TypingConsecutiveSpace\n\t\t\t? EditOperationType.TypingConsecutiveSpace\n\t\t\t: EditOperationType.TypingFirstSpace;\n\t}\n\n\treturn EditOperationType.TypingOther;\n}\n\nfunction shouldPushStackElementBetween(previousTypingOperation: EditOperationType, typingOperation: EditOperationType): boolean {\n\tif (isTypingOperation(previousTypingOperation) && !isTypingOperation(typingOperation)) {\n\t\t// Always set an undo stop before non-type operations\n\t\treturn true;\n\t}\n\tif (previousTypingOperation === EditOperationType.TypingFirstSpace) {\n\t\t// `abc |d`: No undo stop\n\t\t// `abc  |d`: Undo stop\n\t\treturn false;\n\t}\n\t// Insert undo stop between different operation types\n\treturn normalizeOperationType(previousTypingOperation) !== normalizeOperationType(typingOperation);\n}\n\nfunction normalizeOperationType(type: EditOperationType): EditOperationType | 'space' {\n\treturn (type === EditOperationType.TypingConsecutiveSpace || type === EditOperationType.TypingFirstSpace)\n\t\t? 'space'\n\t\t: type;\n}\n\nfunction isTypingOperation(type: EditOperationType): boolean {\n\treturn type === EditOperationType.TypingOther\n\t\t|| type === EditOperationType.TypingFirstSpace\n\t\t|| type === EditOperationType.TypingConsecutiveSpace;\n}\n\nfunction isAutoClosingOvertype(config: CursorConfiguration, model: ITextModel, selections: Selection[], autoClosedCharacters: Range[], ch: string): boolean {\n\tif (config.autoClosingOvertype === 'never') {\n\t\treturn false;\n\t}\n\tif (!config.autoClosingPairs.autoClosingPairsCloseSingleChar.has(ch)) {\n\t\treturn false;\n\t}\n\tfor (let i = 0, len = selections.length; i < len; i++) {\n\t\tconst selection = selections[i];\n\t\tif (!selection.isEmpty()) {\n\t\t\treturn false;\n\t\t}\n\t\tconst position = selection.getPosition();\n\t\tconst lineText = model.getLineContent(position.lineNumber);\n\t\tconst afterCharacter = lineText.charAt(position.column - 1);\n\t\tif (afterCharacter !== ch) {\n\t\t\treturn false;\n\t\t}\n\t\t// Do not over-type quotes after a backslash\n\t\tconst chIsQuote = isQuote(ch);\n\t\tconst beforeCharacter = position.column > 2 ? lineText.charCodeAt(position.column - 2) : CharCode.Null;\n\t\tif (beforeCharacter === CharCode.Backslash && chIsQuote) {\n\t\t\treturn false;\n\t\t}\n\t\t// Must over-type a closing character typed by the editor\n\t\tif (config.autoClosingOvertype === 'auto') {\n\t\t\tlet found = false;\n\t\t\tfor (let j = 0, lenJ = autoClosedCharacters.length; j < lenJ; j++) {\n\t\t\t\tconst autoClosedCharacter = autoClosedCharacters[j];\n\t\t\t\tif (position.lineNumber === autoClosedCharacter.startLineNumber && position.column === autoClosedCharacter.startColumn) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction typeCommand(range: Range, text: string, keepPosition: boolean): ICommand {\n\tif (keepPosition) {\n\t\treturn new ReplaceCommandWithoutChangingPosition(range, text, true);\n\t} else {\n\t\treturn new ReplaceCommand(range, text, true);\n\t}\n}\n\nexport function shiftIndent(config: CursorConfiguration, indentation: string, count?: number): string {\n\tcount = count || 1;\n\treturn ShiftCommand.shiftIndent(indentation, indentation.length + count, config.tabSize, config.indentSize, config.insertSpaces);\n}\n\nexport function unshiftIndent(config: CursorConfiguration, indentation: string, count?: number): string {\n\tcount = count || 1;\n\treturn ShiftCommand.unshiftIndent(indentation, indentation.length + count, config.tabSize, config.indentSize, config.insertSpaces);\n}\n\nexport function shouldSurroundChar(config: CursorConfiguration, ch: string): boolean {\n\tif (isQuote(ch)) {\n\t\treturn (config.autoSurround === 'quotes' || config.autoSurround === 'languageDefined');\n\t} else {\n\t\t// Character is a bracket\n\t\treturn (config.autoSurround === 'brackets' || config.autoSurround === 'languageDefined');\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAsBS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","ignoreList":[]}