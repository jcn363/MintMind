{"version":3,"names":["cov_18qts1nfr0","actualCoverage","_util","s","f","serviceIds","Map","DI_TARGET","DI_DEPENDENCIES","getServiceDependencies","ctor","b","IInstantiationService","createDecorator","storeServiceDependency","id","target","index","push","serviceId","has","get","key","arguments","length","Error","toString","set","refineServiceDecorator","serviceIdentifier"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/instantiation/common/instantiation.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport * as descriptors from './descriptors.js';\nimport { ServiceCollection } from './serviceCollection.js';\n\n// ------ internal util\n\nexport namespace _util {\n\n\texport const serviceIds = new Map<string, ServiceIdentifier<any>>();\n\n\texport const DI_TARGET = '$di$target';\n\texport const DI_DEPENDENCIES = '$di$dependencies';\n\n\texport function getServiceDependencies(ctor: DI_TARGET_OBJ): { id: ServiceIdentifier<any>; index: number }[] {\n\t\treturn ctor[DI_DEPENDENCIES] || [];\n\t}\n\n\texport interface DI_TARGET_OBJ extends Function {\n\t\t[DI_TARGET]: Function;\n\t\t[DI_DEPENDENCIES]: { id: ServiceIdentifier<any>; index: number }[];\n\t}\n}\n\n// --- interfaces ------\n\nexport type BrandedService = { _serviceBrand: undefined };\n\nexport interface IConstructorSignature<T, Args extends any[] = []> {\n\tnew <Services extends BrandedService[]>(...args: [...Args, ...Services]): T;\n}\n\nexport interface ServicesAccessor {\n\tget<T>(id: ServiceIdentifier<T>): T;\n\tgetIfExists<T>(id: ServiceIdentifier<T>): T | undefined;\n}\n\nexport const IInstantiationService = createDecorator<IInstantiationService>('instantiationService');\n\n/**\n * Given a list of arguments as a tuple, attempt to extract the leading, non-service arguments\n * to their own tuple.\n */\nexport type GetLeadingNonServiceArgs<TArgs extends any[]> =\n\tTArgs extends [] ? []\n\t: TArgs extends [...infer TFirst, BrandedService] ? GetLeadingNonServiceArgs<TFirst>\n\t: TArgs;\n\nexport interface IInstantiationService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Synchronously creates an instance that is denoted by the descriptor\n\t */\n\tcreateInstance<T>(descriptor: descriptors.SyncDescriptor0<T>): T;\n\tcreateInstance<Ctor extends new (...args: any[]) => unknown, R extends InstanceType<Ctor>>(ctor: Ctor, ...args: GetLeadingNonServiceArgs<ConstructorParameters<Ctor>>): R;\n\n\t/**\n\t * Calls a function with a service accessor.\n\t */\n\tinvokeFunction<R, TS extends any[] = []>(fn: (accessor: ServicesAccessor, ...args: TS) => R, ...args: TS): R;\n\n\t/**\n\t * Creates a child of this service which inherits all current services\n\t * and adds/overwrites the given services.\n\t *\n\t * NOTE that the returned child is `disposable` and should be disposed when not used\n\t * anymore. This will also dispose all the services that this service has created.\n\t */\n\tcreateChild(services: ServiceCollection, store?: DisposableStore): IInstantiationService;\n\n\t/**\n\t * Disposes this instantiation service.\n\t *\n\t * - Will dispose all services that this instantiation service has created.\n\t * - Will dispose all its children but not its parent.\n\t * - Will NOT dispose services-instances that this service has been created with\n\t * - Will NOT dispose consumer-instances this service has created\n\t */\n\tdispose(): void;\n}\n\n\n/**\n * Identifies a service of type `T`.\n */\nexport interface ServiceIdentifier<T> {\n\t(...args: any[]): void;\n\ttype: T;\n}\n\n\nfunction storeServiceDependency(id: ServiceIdentifier<unknown>, target: Function, index: number): void {\n\tif ((target as _util.DI_TARGET_OBJ)[_util.DI_TARGET] === target) {\n\t\t(target as _util.DI_TARGET_OBJ)[_util.DI_DEPENDENCIES].push({ id, index });\n\t} else {\n\t\t(target as _util.DI_TARGET_OBJ)[_util.DI_DEPENDENCIES] = [{ id, index }];\n\t\t(target as _util.DI_TARGET_OBJ)[_util.DI_TARGET] = target;\n\t}\n}\n\n/**\n * The *only* valid way to create a {{ServiceIdentifier}}.\n */\nexport function createDecorator<T>(serviceId: string): ServiceIdentifier<T> {\n\n\tif (_util.serviceIds.has(serviceId)) {\n\t\treturn _util.serviceIds.get(serviceId)!;\n\t}\n\n\tconst id = function (target: Function, key: string, index: number) {\n\t\tif (arguments.length !== 3) {\n\t\t\tthrow new Error('@IServiceName-decorator can only be used to decorate a parameter');\n\t\t}\n\t\tstoreServiceDependency(id, target, index);\n\t} as ServiceIdentifier<T>;\n\n\tid.toString = () => serviceId;\n\n\t_util.serviceIds.set(serviceId, id);\n\treturn id;\n}\n\nexport function refineServiceDecorator<T1, T extends T1>(serviceIdentifier: ServiceIdentifier<T1>): ServiceIdentifier<T> {\n\treturn <ServiceIdentifier<T>>serviceIdentifier;\n}\n"],"mappings":"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","ignoreList":[]}