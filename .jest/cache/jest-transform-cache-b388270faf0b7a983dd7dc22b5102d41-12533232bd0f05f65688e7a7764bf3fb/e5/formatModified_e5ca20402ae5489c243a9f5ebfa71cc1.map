{"version":3,"names":["cov_rbsz7xw4d","actualCoverage","isNonEmptyArray","CancellationToken","EditorAction","registerEditorAction","Range","EditorContextKeys","shouldSynchronizeModel","IEditorWorkerService","ITextModelService","formatDocumentRangesWithSelectedProvider","nls","ContextKeyExpr","IInstantiationService","Progress","IQuickDiffService","getOriginalResource","s","FormatModifiedAction","constructor","f","id","label","localize2","precondition","and","writable","hasDocumentSelectionFormattingProvider","run","accessor","editor","instaService","get","hasModel","b","ranges","invokeFunction","getModifiedRanges","getModel","None","modified","quickDiffService","workerService","modelService","original","uri","getLanguageId","ref","createModelReference","canComputeDirtyDiff","undefined","changes","computeDirtyDiff","change","push","validateRange","modifiedStartLineNumber","modifiedEndLineNumber","Number","MAX_SAFE_INTEGER","dispose"],"sources":["/home/user/Desktop/MintMind/src/vs/workbench/contrib/format/browser/formatModified.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorAction, registerEditorAction, ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { EditorContextKeys } from '../../../../editor/common/editorContextKeys.js';\nimport { ITextModel, shouldSynchronizeModel } from '../../../../editor/common/model.js';\nimport { IEditorWorkerService } from '../../../../editor/common/services/editorWorker.js';\nimport { ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport { formatDocumentRangesWithSelectedProvider, FormattingMode } from '../../../../editor/contrib/format/browser/format.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { IQuickDiffService } from '../../scm/common/quickDiff.js';\nimport { getOriginalResource } from '../../scm/common/quickDiffService.js';\n\nregisterEditorAction(class FormatModifiedAction extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.formatChanges',\n\t\t\tlabel: nls.localize2('formatChanges', \"Format Modified Lines\"),\n\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, editor: ICodeEditor): Promise<void> {\n\t\tconst instaService = accessor.get(IInstantiationService);\n\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ranges = await instaService.invokeFunction(getModifiedRanges, editor.getModel());\n\t\tif (isNonEmptyArray(ranges)) {\n\t\t\treturn instaService.invokeFunction(\n\t\t\t\tformatDocumentRangesWithSelectedProvider, editor, ranges,\n\t\t\t\tFormattingMode.Explicit, Progress.None, CancellationToken.None,\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t}\n});\n\nexport async function getModifiedRanges(accessor: ServicesAccessor, modified: ITextModel): Promise<Range[] | undefined | null> {\n\tconst quickDiffService = accessor.get(IQuickDiffService);\n\tconst workerService = accessor.get(IEditorWorkerService);\n\tconst modelService = accessor.get(ITextModelService);\n\n\tconst original = await getOriginalResource(quickDiffService, modified.uri, modified.getLanguageId(), shouldSynchronizeModel(modified));\n\tif (!original) {\n\t\treturn null; // let undefined signify no changes, null represents no source control (there's probably a better way, but I can't think of one rn)\n\t}\n\n\tconst ranges: Range[] = [];\n\tconst ref = await modelService.createModelReference(original);\n\ttry {\n\t\tif (!workerService.canComputeDirtyDiff(original, modified.uri)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst changes = await workerService.computeDirtyDiff(original, modified.uri, false);\n\t\tif (!isNonEmptyArray(changes)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tfor (const change of changes) {\n\t\t\tranges.push(modified.validateRange(new Range(\n\t\t\t\tchange.modifiedStartLineNumber, 1,\n\t\t\t\tchange.modifiedEndLineNumber || change.modifiedStartLineNumber /*endLineNumber is 0 when things got deleted*/, Number.MAX_SAFE_INTEGER)\n\t\t\t));\n\t\t}\n\t} finally {\n\t\tref.dispose();\n\t}\n\n\treturn ranges;\n}\n"],"mappings":"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","ignoreList":[]}