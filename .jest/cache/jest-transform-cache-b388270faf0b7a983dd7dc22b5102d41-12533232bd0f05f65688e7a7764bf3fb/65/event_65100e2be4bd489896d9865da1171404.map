{"version":3,"names":["cov_10kwgwls38","actualCoverage","diffSets","onUnexpectedError","createSingleCallFunction","combinedDisposable","Disposable","DisposableMap","DisposableStore","toDisposable","LinkedList","StopWatch","_enableDisposeWithListenerWarning","s","_enableSnapshotPotentialLeakWarning","Event","f","None","_addLeakageTraceLogic","options","b","onDidAddListener","origListenerDidAdd","stack","Stacktrace","create","count","console","warn","print","defer","event","disposable","debounce","undefined","once","listener","thisArgs","disposables","didFire","result","e","dispose","call","onceIf","condition","filter","map","snapshot","i","forEach","each","signal","any","events","addAndReturnDisposable","reduce","merge","initial","output","onWillAddFirstListener","emitter","fire","onDidRemoveLastListener","Emitter","add","d","store","Array","push","delay","leading","flushOnListenerRemove","leakWarningThreshold","subscription","handle","numDebouncedCalls","doFire","cur","_output","clearTimeout","setTimeout","queueMicrotask","onWillRemoveListener","accumulate","last","latch","equals","a","firstCall","cache","value","shouldEmit","split","isT","buffer","flushAfterTimeout","_buffer","slice","flush","onDidAddFirstListener","chain","sythensize","fn","cs","ChainableSynthesis","evaluate","HaltChainable","Symbol","steps","v","step","fromNodeEventEmitter","eventName","id","args","onFirstListenerAdd","on","onLastListenerRemove","removeListener","fromDOMEventEmitter","addEventListener","removeEventListener","toPromise","cancelRef","promise","Promise","resolve","reject","cancel","forward","from","to","runAndSubscribe","handler","EmitterObserver","_observable","_counter","_hasChanged","constructor","addObserver","reportChanges","removeObserver","beginUpdate","handlePossibleChange","handleChange","_change","endUpdate","get","fromObservable","obs","observer","fromObservableLight","observable","didChange","isArray","EventProfiling","all","Set","_idPool","name","listenerCount","invocationCount","elapsedOverall","durations","_stopWatch","start","stop","elapsed","_globalLeakWarningThreshold","setGlobalLeakWarningThreshold","n","oldValue","LeakageMonitor","_errorHandler","threshold","_stacks","_warnCountdown","toString","padStart","clear","check","Map","set","topStack","topCount","getMostFrequentStack","message","error","ListenerLeakError","err","Error","join","ListenerRefusalError","UniqueContainer","compactionThreshold","forEachListener","listeners","length","l","_options","_leakageMon","_perfMon","_disposed","_event","_listeners","_deliveryQueue","_size","onListenerError","_profName","deliveryQueue","current","reset","callback","tuple","errorHandler","bind","contained","removeMonitor","Math","ceil","EventDeliveryQueuePrivate","_removeListener","index","indexOf","log","JSON","stringify","adjustDeliveryQueue","end","_deliver","_deliverQueue","dq","enqueue","hasListeners","createEventDeliveryQueue","AsyncEmitter","_asyncDeliveryQueue","fireAsync","data","token","promiseJoin","size","isCancellationRequested","shift","thenables","waitUntil","p","Object","isFrozen","freeze","allSettled","then","values","status","reason","PauseableEmitter","_isPaused","_eventQueue","_mergeFn","isPaused","pause","resume","DebounceEmitter","_delay","_handle","MicrotaskEmitter","_queuedEvents","EventMultiplexer","hook","unhook","idx","splice","r","DynamicListEventMultiplexer","_store","items","onAddItem","onRemoveItem","getEvent","multiplexer","itemListeners","addItem","instance","deleteAndDispose","EventBufferer","wrapEvent","buffers","reduceData","reducedResult","bufferEvents","pop","Relay","listening","inputEvent","inputEventListener","input","ValueWithChangeEvent","_value","const","ConstValueWithChangeEvent","_onDidChange","onDidChange","trackSetChanges","getData","onDidChangeData","handleItem","oldData","newData","diff","removed","added"],"sources":["/home/user/Desktop/MintMind/src/vs/base/common/event.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancelablePromise } from './async.js';\nimport { CancellationToken } from './cancellation.js';\nimport { diffSets } from './collections.js';\nimport { onUnexpectedError } from './errors.js';\nimport { createSingleCallFunction } from './functional.js';\nimport { combinedDisposable, Disposable, DisposableMap, DisposableStore, IDisposable, toDisposable } from './lifecycle.js';\nimport { LinkedList } from './linkedList.js';\nimport { IObservable, IObservableWithChange, IObserver } from './observable.js';\nimport { StopWatch } from './stopwatch.js';\nimport { MicrotaskDelay } from './symbols.js';\n\n\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever an emitter with listeners is disposed. That is a sign of code smell.\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableDisposeWithListenerWarning = false\n\t// || Boolean(\"TRUE\") // causes a linter warning so that it cannot be pushed\n\t;\n\n\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever a snapshotted event is used repeatedly without cleanup.\n// See https://github.com/microsoft/vscode/issues/142851\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableSnapshotPotentialLeakWarning = false\n\t// || Boolean(\"TRUE\") // causes a linter warning so that it cannot be pushed\n\t;\n\n/**\n * An event with zero or one parameters that can be subscribed to. The event is a function itself.\n */\nexport interface Event<T> {\n\t(listener: (e: T) => unknown, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable;\n}\n\nexport namespace Event {\n\texport const None: Event<any> = () => Disposable.None;\n\n\tfunction _addLeakageTraceLogic(options: EmitterOptions) {\n\t\tif (_enableSnapshotPotentialLeakWarning) {\n\t\t\tconst { onDidAddListener: origListenerDidAdd } = options;\n\t\t\tconst stack = Stacktrace.create();\n\t\t\tlet count = 0;\n\t\t\toptions.onDidAddListener = () => {\n\t\t\t\tif (++count === 2) {\n\t\t\t\t\tconsole.warn('snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here');\n\t\t\t\t\tstack.print();\n\t\t\t\t}\n\t\t\t\torigListenerDidAdd?.();\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Given an event, returns another event which debounces calls and defers the listeners to a later task via a shared\n\t * `setTimeout`. The event is converted into a signal (`Event<void>`) to avoid additional object creation as a\n\t * result of merging events and to try prevent race conditions that could arise when using related deferred and\n\t * non-deferred events.\n\t *\n\t * This is useful for deferring non-critical work (eg. general UI updates) to ensure it does not block critical work\n\t * (eg. latency of keypress to text rendered).\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function defer(event: Event<unknown>, disposable?: DisposableStore): Event<void> {\n\t\treturn debounce<unknown, void>(event, () => void 0, 0, undefined, true, undefined, disposable);\n\t}\n\n\t/**\n\t * Given an event, returns another event which only fires once.\n\t *\n\t * @param event The event source for the new event.\n\t */\n\texport function once<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => {\n\t\t\t// we need this, in case the event fires during the listener call\n\t\t\tlet didFire = false;\n\t\t\tlet result: IDisposable | undefined = undefined;\n\t\t\tresult = event(e => {\n\t\t\t\tif (didFire) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (result) {\n\t\t\t\t\tresult.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tdidFire = true;\n\t\t\t\t}\n\n\t\t\t\treturn listener.call(thisArgs, e);\n\t\t\t}, null, disposables);\n\n\t\t\tif (didFire) {\n\t\t\t\tresult.dispose();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\t/**\n\t * Given an event, returns another event which only fires once, and only when the condition is met.\n\t *\n\t * @param event The event source for the new event.\n\t */\n\texport function onceIf<T>(event: Event<T>, condition: (e: T) => boolean): Event<T> {\n\t\treturn Event.once(Event.filter(event, condition));\n\t}\n\n\t/**\n\t * Maps an event of one type into an event of another type using a mapping function, similar to how\n\t * `Array.prototype.map` works.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param map The mapping function.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function map<I, O>(event: Event<I>, map: (i: I) => O, disposable?: DisposableStore): Event<O> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => listener.call(thisArgs, map(i)), null, disposables), disposable);\n\t}\n\n\t/**\n\t * Wraps an event in another event that performs some function on the event object before firing.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param each The function to perform on the event object.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function forEach<I>(event: Event<I>, each: (i: I) => void, disposable?: DisposableStore): Event<I> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => { each(i); listener.call(thisArgs, i); }, null, disposables), disposable);\n\t}\n\n\t/**\n\t * Wraps an event in another event that fires only when some condition is met.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param filter The filter function that defines the condition. The event will fire for the object if this function\n\t * returns true.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function filter<T, U>(event: Event<T | U>, filter: (e: T | U) => e is T, disposable?: DisposableStore): Event<T>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean, disposable?: DisposableStore): Event<T>;\n\texport function filter<T, R>(event: Event<T | R>, filter: (e: T | R) => e is R, disposable?: DisposableStore): Event<R>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean, disposable?: DisposableStore): Event<T> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables), disposable);\n\t}\n\n\t/**\n\t * Given an event, returns the same event but typed as `Event<void>`.\n\t */\n\texport function signal<T>(event: Event<T>): Event<void> {\n\t\treturn event as Event<any> as Event<void>;\n\t}\n\n\t/**\n\t * Given a collection of events, returns a single event which emits whenever any of the provided events emit.\n\t */\n\texport function any<T>(...events: Event<T>[]): Event<T>;\n\texport function any(...events: Event<any>[]): Event<void>;\n\texport function any<T>(...events: Event<T>[]): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => {\n\t\t\tconst disposable = combinedDisposable(...events.map(event => event(e => listener.call(thisArgs, e))));\n\t\t\treturn addAndReturnDisposable(disposable, disposables);\n\t\t};\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function reduce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, initial?: O, disposable?: DisposableStore): Event<O> {\n\t\tlet output: O | undefined = initial;\n\n\t\treturn map<I, O>(event, e => {\n\t\t\toutput = merge(output, e);\n\t\t\treturn output;\n\t\t}, disposable);\n\t}\n\n\tfunction snapshot<T>(event: Event<T>, disposable: DisposableStore | undefined): Event<T> {\n\t\tlet listener: IDisposable | undefined;\n\n\t\tconst options: EmitterOptions | undefined = {\n\t\t\tonWillAddFirstListener() {\n\t\t\t\tlistener = event(emitter.fire, emitter);\n\t\t\t},\n\t\t\tonDidRemoveLastListener() {\n\t\t\t\tlistener?.dispose();\n\t\t\t}\n\t\t};\n\n\t\tif (!disposable) {\n\t\t\t_addLeakageTraceLogic(options);\n\t\t}\n\n\t\tconst emitter = new Emitter<T>(options);\n\n\t\tdisposable?.add(emitter);\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * Adds the IDisposable to the store if it's set, and returns it. Useful to\n\t * Event function implementation.\n\t */\n\tfunction addAndReturnDisposable<T extends IDisposable>(d: T, store: DisposableStore | IDisposable[] | undefined): T {\n\t\tif (store instanceof Array) {\n\t\t\tstore.push(d);\n\t\t} else if (store) {\n\t\t\tstore.add(d);\n\t\t}\n\t\treturn d;\n\t}\n\n\t/**\n\t * Given an event, creates a new emitter that event that will debounce events based on {@link delay} and give an\n\t * array event object of all events that fired.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The original event to debounce.\n\t * @param merge A function that reduces all events into a single event.\n\t * @param delay The number of milliseconds to debounce.\n\t * @param leading Whether to fire a leading event without debouncing.\n\t * @param flushOnListenerRemove Whether to fire all debounced events when a listener is removed. If this is not\n\t * specified, some events could go missing. Use this if it's important that all events are processed, even if the\n\t * listener gets disposed before the debounced event fires.\n\t * @param leakWarningThreshold See {@link EmitterOptions.leakWarningThreshold}.\n\t * @param disposable A disposable store to register the debounce emitter to.\n\t */\n\texport function debounce<T>(event: Event<T>, merge: (last: T | undefined, event: T) => T, delay?: number | typeof MicrotaskDelay, leading?: boolean, flushOnListenerRemove?: boolean, leakWarningThreshold?: number, disposable?: DisposableStore): Event<T>;\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay?: number | typeof MicrotaskDelay, leading?: boolean, flushOnListenerRemove?: boolean, leakWarningThreshold?: number, disposable?: DisposableStore): Event<O>;\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay: number | typeof MicrotaskDelay = 100, leading = false, flushOnListenerRemove = false, leakWarningThreshold?: number, disposable?: DisposableStore): Event<O> {\n\t\tlet subscription: IDisposable;\n\t\tlet output: O | undefined = undefined;\n\t\tlet handle: Timeout | undefined | null = undefined;\n\t\tlet numDebouncedCalls = 0;\n\t\tlet doFire: (() => void) | undefined;\n\n\t\tconst options: EmitterOptions | undefined = {\n\t\t\tleakWarningThreshold,\n\t\t\tonWillAddFirstListener() {\n\t\t\t\tsubscription = event(cur => {\n\t\t\t\t\tnumDebouncedCalls++;\n\t\t\t\t\toutput = merge(output, cur);\n\n\t\t\t\t\tif (leading && !handle) {\n\t\t\t\t\t\temitter.fire(output);\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tdoFire = () => {\n\t\t\t\t\t\tconst _output = output;\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t\thandle = undefined;\n\t\t\t\t\t\tif (!leading || numDebouncedCalls > 1) {\n\t\t\t\t\t\t\temitter.fire(_output!);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnumDebouncedCalls = 0;\n\t\t\t\t\t};\n\n\t\t\t\t\tif (typeof delay === 'number') {\n\t\t\t\t\t\tif (handle) {\n\t\t\t\t\t\t\tclearTimeout(handle);\n\t\t\t\t\t\t}\n\t\t\t\t\t\thandle = setTimeout(doFire, delay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (handle === undefined) {\n\t\t\t\t\t\t\thandle = null;\n\t\t\t\t\t\t\tqueueMicrotask(doFire);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tonWillRemoveListener() {\n\t\t\t\tif (flushOnListenerRemove && numDebouncedCalls > 0) {\n\t\t\t\t\tdoFire?.();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDidRemoveLastListener() {\n\t\t\t\tdoFire = undefined;\n\t\t\t\tsubscription.dispose();\n\t\t\t}\n\t\t};\n\n\t\tif (!disposable) {\n\t\t\t_addLeakageTraceLogic(options);\n\t\t}\n\n\t\tconst emitter = new Emitter<O>(options);\n\n\t\tdisposable?.add(emitter);\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * Debounces an event, firing after some delay (default=0) with an array of all event original objects.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function accumulate<T>(event: Event<T>, delay: number | typeof MicrotaskDelay = 0, disposable?: DisposableStore): Event<T[]> {\n\t\treturn Event.debounce<T, T[]>(event, (last, e) => {\n\t\t\tif (!last) {\n\t\t\t\treturn [e];\n\t\t\t}\n\t\t\tlast.push(e);\n\t\t\treturn last;\n\t\t}, delay, undefined, true, undefined, disposable);\n\t}\n\n\t/**\n\t * Filters an event such that some condition is _not_ met more than once in a row, effectively ensuring duplicate\n\t * event objects from different sources do not fire the same event object.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param equals The equality condition.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t *\n\t * @example\n\t * ```\n\t * // Fire only one time when a single window is opened or focused\n\t * Event.latch(Event.any(onDidOpenWindow, onDidFocusWindow))\n\t * ```\n\t */\n\texport function latch<T>(event: Event<T>, equals: (a: T, b: T) => boolean = (a, b) => a === b, disposable?: DisposableStore): Event<T> {\n\t\tlet firstCall = true;\n\t\tlet cache: T;\n\n\t\treturn filter(event, value => {\n\t\t\tconst shouldEmit = firstCall || !equals(value, cache);\n\t\t\tfirstCall = false;\n\t\t\tcache = value;\n\t\t\treturn shouldEmit;\n\t\t}, disposable);\n\t}\n\n\t/**\n\t * Splits an event whose parameter is a union type into 2 separate events for each type in the union.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @example\n\t * ```\n\t * const event = new EventEmitter<number | undefined>().event;\n\t * const [numberEvent, undefinedEvent] = Event.split(event, isUndefined);\n\t * ```\n\t *\n\t * @param event The event source for the new event.\n\t * @param isT A function that determines what event is of the first type.\n\t * @param disposable A disposable store to add the new EventEmitter to.\n\t */\n\texport function split<T, U>(event: Event<T | U>, isT: (e: T | U) => e is T, disposable?: DisposableStore): [Event<T>, Event<U>] {\n\t\treturn [\n\t\t\tEvent.filter(event, isT, disposable),\n\t\t\tEvent.filter(event, e => !isT(e), disposable) as Event<U>,\n\t\t];\n\t}\n\n\t/**\n\t * Buffers an event until it has a listener attached.\n\t *\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t *\n\t * @param event The event source for the new event.\n\t * @param flushAfterTimeout Determines whether to flush the buffer after a timeout immediately or after a\n\t * `setTimeout` when the first event listener is added.\n\t * @param _buffer Internal: A source event array used for tests.\n\t *\n\t * @example\n\t * ```\n\t * // Start accumulating events, when the first listener is attached, flush\n\t * // the event after a timeout such that multiple listeners attached before\n\t * // the timeout would receive the event\n\t * this.onInstallExtension = Event.buffer(service.onInstallExtension, true);\n\t * ```\n\t */\n\texport function buffer<T>(event: Event<T>, flushAfterTimeout = false, _buffer: T[] = [], disposable?: DisposableStore): Event<T> {\n\t\tlet buffer: T[] | null = _buffer.slice();\n\n\t\tlet listener: IDisposable | null = event(e => {\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.push(e);\n\t\t\t} else {\n\t\t\t\temitter.fire(e);\n\t\t\t}\n\t\t});\n\n\t\tif (disposable) {\n\t\t\tdisposable.add(listener);\n\t\t}\n\n\t\tconst flush = () => {\n\t\t\tbuffer?.forEach(e => emitter.fire(e));\n\t\t\tbuffer = null;\n\t\t};\n\n\t\tconst emitter = new Emitter<T>({\n\t\t\tonWillAddFirstListener() {\n\t\t\t\tif (!listener) {\n\t\t\t\t\tlistener = event(e => emitter.fire(e));\n\t\t\t\t\tif (disposable) {\n\t\t\t\t\t\tdisposable.add(listener);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDidAddFirstListener() {\n\t\t\t\tif (buffer) {\n\t\t\t\t\tif (flushAfterTimeout) {\n\t\t\t\t\t\tsetTimeout(flush);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflush();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonDidRemoveLastListener() {\n\t\t\t\tif (listener) {\n\t\t\t\t\tlistener.dispose();\n\t\t\t\t}\n\t\t\t\tlistener = null;\n\t\t\t}\n\t\t});\n\n\t\tif (disposable) {\n\t\t\tdisposable.add(emitter);\n\t\t}\n\n\t\treturn emitter.event;\n\t}\n\t/**\n\t * Wraps the event in an {@link IChainableEvent}, allowing a more functional programming style.\n\t *\n\t * @example\n\t * ```\n\t * // Normal\n\t * const onEnterPressNormal = Event.filter(\n\t *   Event.map(onKeyPress.event, e => new StandardKeyboardEvent(e)),\n\t *   e.keyCode === KeyCode.Enter\n\t * ).event;\n\t *\n\t * // Using chain\n\t * const onEnterPressChain = Event.chain(onKeyPress.event, $ => $\n\t *   .map(e => new StandardKeyboardEvent(e))\n\t *   .filter(e => e.keyCode === KeyCode.Enter)\n\t * );\n\t * ```\n\t */\n\texport function chain<T, R>(event: Event<T>, sythensize: ($: IChainableSythensis<T>) => IChainableSythensis<R>): Event<R> {\n\t\tconst fn: Event<R> = (listener, thisArgs, disposables) => {\n\t\t\tconst cs = sythensize(new ChainableSynthesis()) as ChainableSynthesis;\n\t\t\treturn event(function (value) {\n\t\t\t\tconst result = cs.evaluate(value);\n\t\t\t\tif (result !== HaltChainable) {\n\t\t\t\t\tlistener.call(thisArgs, result);\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\t\t};\n\n\t\treturn fn;\n\t}\n\n\tconst HaltChainable = Symbol('HaltChainable');\n\n\tclass ChainableSynthesis implements IChainableSythensis<any> {\n\t\tprivate readonly steps: ((input: any) => unknown)[] = [];\n\n\t\tmap<O>(fn: (i: any) => O): this {\n\t\t\tthis.steps.push(fn);\n\t\t\treturn this;\n\t\t}\n\n\t\tforEach(fn: (i: any) => void): this {\n\t\t\tthis.steps.push(v => {\n\t\t\t\tfn(v);\n\t\t\t\treturn v;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tfilter(fn: (e: any) => boolean): this {\n\t\t\tthis.steps.push(v => fn(v) ? v : HaltChainable);\n\t\t\treturn this;\n\t\t}\n\n\t\treduce<R>(merge: (last: R | undefined, event: any) => R, initial?: R | undefined): this {\n\t\t\tlet last = initial;\n\t\t\tthis.steps.push(v => {\n\t\t\t\tlast = merge(last, v);\n\t\t\t\treturn last;\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\tlatch(equals: (a: any, b: any) => boolean = (a, b) => a === b): ChainableSynthesis {\n\t\t\tlet firstCall = true;\n\t\t\tlet cache: any;\n\t\t\tthis.steps.push(value => {\n\t\t\t\tconst shouldEmit = firstCall || !equals(value, cache);\n\t\t\t\tfirstCall = false;\n\t\t\t\tcache = value;\n\t\t\t\treturn shouldEmit ? value : HaltChainable;\n\t\t\t});\n\n\t\t\treturn this;\n\t\t}\n\n\t\tpublic evaluate(value: any) {\n\t\t\tfor (const step of this.steps) {\n\t\t\t\tvalue = step(value);\n\t\t\t\tif (value === HaltChainable) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t}\n\n\texport interface IChainableSythensis<T> {\n\t\tmap<O>(fn: (i: T) => O): IChainableSythensis<O>;\n\t\tforEach(fn: (i: T) => void): IChainableSythensis<T>;\n\t\tfilter<R extends T>(fn: (e: T) => e is R): IChainableSythensis<R>;\n\t\tfilter(fn: (e: T) => boolean): IChainableSythensis<T>;\n\t\treduce<R>(merge: (last: R, event: T) => R, initial: R): IChainableSythensis<R>;\n\t\treduce<R>(merge: (last: R | undefined, event: T) => R): IChainableSythensis<R>;\n\t\tlatch(equals?: (a: T, b: T) => boolean): IChainableSythensis<T>;\n\t}\n\n\texport interface NodeEventEmitter {\n\t\ton(event: string | symbol, listener: Function): unknown;\n\t\tremoveListener(event: string | symbol, listener: Function): unknown;\n\t}\n\n\t/**\n\t * Creates an {@link Event} from a node event emitter.\n\t */\n\texport function fromNodeEventEmitter<T>(emitter: NodeEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.on(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onWillAddFirstListener: onFirstListenerAdd, onDidRemoveLastListener: onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\texport interface DOMEventEmitter {\n\t\taddEventListener(event: string | symbol, listener: Function): void;\n\t\tremoveEventListener(event: string | symbol, listener: Function): void;\n\t}\n\n\t/**\n\t * Creates an {@link Event} from a DOM event emitter.\n\t */\n\texport function fromDOMEventEmitter<T>(emitter: DOMEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.addEventListener(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeEventListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onWillAddFirstListener: onFirstListenerAdd, onDidRemoveLastListener: onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\t/**\n\t * Creates a promise out of an event, using the {@link Event.once} helper.\n\t */\n\texport function toPromise<T>(event: Event<T>, disposables?: IDisposable[] | DisposableStore): CancelablePromise<T> {\n\t\tlet cancelRef: () => void;\n\t\tconst promise = new Promise((resolve, reject) => {\n\t\t\tconst listener = once(event)(resolve, null, disposables);\n\t\t\t// not resolved, matching the behavior of a normal disposal\n\t\t\tcancelRef = () => listener.dispose();\n\t\t}) as CancelablePromise<T>;\n\t\tpromise.cancel = cancelRef!;\n\n\t\treturn promise;\n\t}\n\n\t/**\n\t * A convenience function for forwarding an event to another emitter which\n\t * improves readability.\n\t *\n\t * This is similar to {@link Relay} but allows instantiating and forwarding\n\t * on a single line and also allows for multiple source events.\n\t * @param from The event to forward.\n\t * @param to The emitter to forward the event to.\n\t * @example\n\t * Event.forward(event, emitter);\n\t * // equivalent to\n\t * event(e => emitter.fire(e));\n\t * // equivalent to\n\t * event(emitter.fire, emitter);\n\t */\n\texport function forward<T>(from: Event<T>, to: Emitter<T>): IDisposable {\n\t\treturn from(e => to.fire(e));\n\t}\n\n\t/**\n\t * Adds a listener to an event and calls the listener immediately with undefined as the event object.\n\t *\n\t * @example\n\t * ```\n\t * // Initialize the UI and update it when dataChangeEvent fires\n\t * runAndSubscribe(dataChangeEvent, () => this._updateUI());\n\t * ```\n\t */\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T) => unknown, initial: T): IDisposable;\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T | undefined) => unknown): IDisposable;\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T | undefined) => unknown, initial?: T): IDisposable {\n\t\thandler(initial);\n\t\treturn event(e => handler(e));\n\t}\n\n\tclass EmitterObserver<T> implements IObserver {\n\n\t\treadonly emitter: Emitter<T>;\n\n\t\tprivate _counter = 0;\n\t\tprivate _hasChanged = false;\n\n\t\tconstructor(readonly _observable: IObservable<T>, store: DisposableStore | undefined) {\n\t\t\tconst options: EmitterOptions = {\n\t\t\t\tonWillAddFirstListener: () => {\n\t\t\t\t\t_observable.addObserver(this);\n\n\t\t\t\t\t// Communicate to the observable that we received its current value and would like to be notified about future changes.\n\t\t\t\t\tthis._observable.reportChanges();\n\t\t\t\t},\n\t\t\t\tonDidRemoveLastListener: () => {\n\t\t\t\t\t_observable.removeObserver(this);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (!store) {\n\t\t\t\t_addLeakageTraceLogic(options);\n\t\t\t}\n\t\t\tthis.emitter = new Emitter<T>(options);\n\t\t\tif (store) {\n\t\t\t\tstore.add(this.emitter);\n\t\t\t}\n\t\t}\n\n\t\tbeginUpdate<T>(_observable: IObservable<T>): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t\tthis._counter++;\n\t\t}\n\n\t\thandlePossibleChange<T>(_observable: IObservable<T>): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t}\n\n\t\thandleChange<T, TChange>(_observable: IObservableWithChange<T, TChange>, _change: TChange): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t\tthis._hasChanged = true;\n\t\t}\n\n\t\tendUpdate<T>(_observable: IObservable<T>): void {\n\t\t\t// assert(_observable === this.obs);\n\t\t\tthis._counter--;\n\t\t\tif (this._counter === 0) {\n\t\t\t\tthis._observable.reportChanges();\n\t\t\t\tif (this._hasChanged) {\n\t\t\t\t\tthis._hasChanged = false;\n\t\t\t\t\tthis.emitter.fire(this._observable.get());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Creates an event emitter that is fired when the observable changes.\n\t * Each listeners subscribes to the emitter.\n\t */\n\texport function fromObservable<T>(obs: IObservable<T>, store?: DisposableStore): Event<T> {\n\t\tconst observer = new EmitterObserver(obs, store);\n\t\treturn observer.emitter.event;\n\t}\n\n\t/**\n\t * Each listener is attached to the observable directly.\n\t */\n\texport function fromObservableLight(observable: IObservable<unknown>): Event<void> {\n\t\treturn (listener, thisArgs, disposables) => {\n\t\t\tlet count = 0;\n\t\t\tlet didChange = false;\n\t\t\tconst observer: IObserver = {\n\t\t\t\tbeginUpdate() {\n\t\t\t\t\tcount++;\n\t\t\t\t},\n\t\t\t\tendUpdate() {\n\t\t\t\t\tcount--;\n\t\t\t\t\tif (count === 0) {\n\t\t\t\t\t\tobservable.reportChanges();\n\t\t\t\t\t\tif (didChange) {\n\t\t\t\t\t\t\tdidChange = false;\n\t\t\t\t\t\t\tlistener.call(thisArgs);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\thandlePossibleChange() {\n\t\t\t\t\t// noop\n\t\t\t\t},\n\t\t\t\thandleChange() {\n\t\t\t\t\tdidChange = true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tobservable.addObserver(observer);\n\t\t\tobservable.reportChanges();\n\t\t\tconst disposable = {\n\t\t\t\tdispose() {\n\t\t\t\t\tobservable.removeObserver(observer);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (disposables instanceof DisposableStore) {\n\t\t\t\tdisposables.add(disposable);\n\t\t\t} else if (Array.isArray(disposables)) {\n\t\t\t\tdisposables.push(disposable);\n\t\t\t}\n\n\t\t\treturn disposable;\n\t\t};\n\t}\n}\n\nexport interface EmitterOptions {\n\t/**\n\t * Optional function that's called *before* the very first listener is added\n\t */\n\tonWillAddFirstListener?: Function;\n\t/**\n\t * Optional function that's called *after* the very first listener is added\n\t */\n\tonDidAddFirstListener?: Function;\n\t/**\n\t * Optional function that's called after a listener is added\n\t */\n\tonDidAddListener?: Function;\n\t/**\n\t * Optional function that's called *after* remove the very last listener\n\t */\n\tonDidRemoveLastListener?: Function;\n\t/**\n\t * Optional function that's called *before* a listener is removed\n\t */\n\tonWillRemoveListener?: Function;\n\t/**\n\t * Optional function that's called when a listener throws an error. Defaults to\n\t * {@link onUnexpectedError}\n\t */\n\tonListenerError?: (e: any) => void;\n\t/**\n\t * Number of listeners that are allowed before assuming a leak. Default to\n\t * a globally configured value\n\t *\n\t * @see setGlobalLeakWarningThreshold\n\t */\n\tleakWarningThreshold?: number;\n\t/**\n\t * Pass in a delivery queue, which is useful for ensuring\n\t * in order event delivery across multiple emitters.\n\t */\n\tdeliveryQueue?: EventDeliveryQueue;\n\n\t/** ONLY enable this during development */\n\t_profName?: string;\n}\n\n\nexport class EventProfiling {\n\n\tstatic readonly all = new Set<EventProfiling>();\n\n\tprivate static _idPool = 0;\n\n\treadonly name: string;\n\tpublic listenerCount: number = 0;\n\tpublic invocationCount = 0;\n\tpublic elapsedOverall = 0;\n\tpublic durations: number[] = [];\n\n\tprivate _stopWatch?: StopWatch;\n\n\tconstructor(name: string) {\n\t\tthis.name = `${name}_${EventProfiling._idPool++}`;\n\t\tEventProfiling.all.add(this);\n\t}\n\n\tstart(listenerCount: number): void {\n\t\tthis._stopWatch = new StopWatch();\n\t\tthis.listenerCount = listenerCount;\n\t}\n\n\tstop(): void {\n\t\tif (this._stopWatch) {\n\t\t\tconst elapsed = this._stopWatch.elapsed();\n\t\t\tthis.durations.push(elapsed);\n\t\t\tthis.elapsedOverall += elapsed;\n\t\t\tthis.invocationCount += 1;\n\t\t\tthis._stopWatch = undefined;\n\t\t}\n\t}\n}\n\nlet _globalLeakWarningThreshold = -1;\nexport function setGlobalLeakWarningThreshold(n: number): IDisposable {\n\tconst oldValue = _globalLeakWarningThreshold;\n\t_globalLeakWarningThreshold = n;\n\treturn {\n\t\tdispose() {\n\t\t\t_globalLeakWarningThreshold = oldValue;\n\t\t}\n\t};\n}\n\nclass LeakageMonitor {\n\n\tprivate static _idPool = 1;\n\n\tprivate _stacks: Map<string, number> | undefined;\n\tprivate _warnCountdown: number = 0;\n\n\tconstructor(\n\t\tprivate readonly _errorHandler: (err: Error) => void,\n\t\treadonly threshold: number,\n\t\treadonly name: string = (LeakageMonitor._idPool++).toString(16).padStart(3, '0')\n\t) { }\n\n\tdispose(): void {\n\t\tthis._stacks?.clear();\n\t}\n\n\tcheck(stack: Stacktrace, listenerCount: number): undefined | (() => void) {\n\n\t\tconst threshold = this.threshold;\n\t\tif (threshold <= 0 || listenerCount < threshold) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!this._stacks) {\n\t\t\tthis._stacks = new Map();\n\t\t}\n\t\tconst count = (this._stacks.get(stack.value) || 0);\n\t\tthis._stacks.set(stack.value, count + 1);\n\t\tthis._warnCountdown -= 1;\n\n\t\tif (this._warnCountdown <= 0) {\n\t\t\t// only warn on first exceed and then every time the limit\n\t\t\t// is exceeded by 50% again\n\t\t\tthis._warnCountdown = threshold * 0.5;\n\n\t\t\tconst [topStack, topCount] = this.getMostFrequentStack()!;\n\t\t\tconst message = `[${this.name}] potential listener LEAK detected, having ${listenerCount} listeners already. MOST frequent listener (${topCount}):`;\n\t\t\tconsole.warn(message);\n\t\t\tconsole.warn(topStack);\n\n\t\t\tconst error = new ListenerLeakError(message, topStack);\n\t\t\tthis._errorHandler(error);\n\t\t}\n\n\t\treturn () => {\n\t\t\tconst count = (this._stacks!.get(stack.value) || 0);\n\t\t\tthis._stacks!.set(stack.value, count - 1);\n\t\t};\n\t}\n\n\tgetMostFrequentStack(): [string, number] | undefined {\n\t\tif (!this._stacks) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet topStack: [string, number] | undefined;\n\t\tlet topCount: number = 0;\n\t\tfor (const [stack, count] of this._stacks) {\n\t\t\tif (!topStack || topCount < count) {\n\t\t\t\ttopStack = [stack, count];\n\t\t\t\ttopCount = count;\n\t\t\t}\n\t\t}\n\t\treturn topStack;\n\t}\n}\n\nclass Stacktrace {\n\n\tstatic create() {\n\t\tconst err = new Error();\n\t\treturn new Stacktrace(err.stack ?? '');\n\t}\n\n\tprivate constructor(readonly value: string) { }\n\n\tprint() {\n\t\tconsole.warn(this.value.split('\\n').slice(2).join('\\n'));\n\t}\n}\n\n// error that is logged when going over the configured listener threshold\nexport class ListenerLeakError extends Error {\n\tconstructor(message: string, stack: string) {\n\t\tsuper(message);\n\t\tthis.name = 'ListenerLeakError';\n\t\tthis.stack = stack;\n\t}\n}\n\n// SEVERE error that is logged when having gone way over the configured listener\n// threshold so that the emitter refuses to accept more listeners\nexport class ListenerRefusalError extends Error {\n\tconstructor(message: string, stack: string) {\n\t\tsuper(message);\n\t\tthis.name = 'ListenerRefusalError';\n\t\tthis.stack = stack;\n\t}\n}\n\nlet id = 0;\nclass UniqueContainer<T> {\n\tstack?: Stacktrace;\n\tpublic id = id++;\n\tconstructor(public readonly value: T) { }\n}\nconst compactionThreshold = 2;\n\ntype ListenerContainer<T> = UniqueContainer<(data: T) => void>;\ntype ListenerOrListeners<T> = (ListenerContainer<T> | undefined)[] | ListenerContainer<T>;\n\nconst forEachListener = <T>(listeners: ListenerOrListeners<T>, fn: (c: ListenerContainer<T>) => void) => {\n\tif (listeners instanceof UniqueContainer) {\n\t\tfn(listeners);\n\t} else {\n\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\tconst l = listeners[i];\n\t\t\tif (l) {\n\t\t\t\tfn(l);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * The Emitter can be used to expose an Event to the public\n * to fire it from the insides.\n * Sample:\n\tclass Document {\n\n\t\tprivate readonly _onDidChange = new Emitter<(value:string)=>any>();\n\n\t\tpublic onDidChange = this._onDidChange.event;\n\n\t\t// getter-style\n\t\t// get onDidChange(): Event<(value:string)=>any> {\n\t\t// \treturn this._onDidChange.event;\n\t\t// }\n\n\t\tprivate _doIt() {\n\t\t\t//...\n\t\t\tthis._onDidChange.fire(value);\n\t\t}\n\t}\n */\nexport class Emitter<T> {\n\n\tprivate readonly _options?: EmitterOptions;\n\tprivate readonly _leakageMon?: LeakageMonitor;\n\tprivate readonly _perfMon?: EventProfiling;\n\tprivate _disposed?: true;\n\tprivate _event?: Event<T>;\n\n\t/**\n\t * A listener, or list of listeners. A single listener is the most common\n\t * for event emitters (#185789), so we optimize that special case to avoid\n\t * wrapping it in an array (just like Node.js itself.)\n\t *\n\t * A list of listeners never 'downgrades' back to a plain function if\n\t * listeners are removed, for two reasons:\n\t *\n\t *  1. That's complicated (especially with the deliveryQueue)\n\t *  2. A listener with >1 listener is likely to have >1 listener again at\n\t *     some point, and swapping between arrays and functions may[citation needed]\n\t *     introduce unnecessary work and garbage.\n\t *\n\t * The array listeners can be 'sparse', to avoid reallocating the array\n\t * whenever any listener is added or removed. If more than `1 / compactionThreshold`\n\t * of the array is empty, only then is it resized.\n\t */\n\tprotected _listeners?: ListenerOrListeners<T>;\n\n\t/**\n\t * Always to be defined if _listeners is an array. It's no longer a true\n\t * queue, but holds the dispatching 'state'. If `fire()` is called on an\n\t * emitter, any work left in the _deliveryQueue is finished first.\n\t */\n\tprivate _deliveryQueue?: EventDeliveryQueuePrivate;\n\tprotected _size = 0;\n\n\tconstructor(options?: EmitterOptions) {\n\t\tthis._options = options;\n\t\tthis._leakageMon = (_globalLeakWarningThreshold > 0 || this._options?.leakWarningThreshold)\n\t\t\t? new LeakageMonitor(options?.onListenerError ?? onUnexpectedError, this._options?.leakWarningThreshold ?? _globalLeakWarningThreshold) :\n\t\t\tundefined;\n\t\tthis._perfMon = this._options?._profName ? new EventProfiling(this._options._profName) : undefined;\n\t\tthis._deliveryQueue = this._options?.deliveryQueue as EventDeliveryQueuePrivate | undefined;\n\t}\n\n\tdispose() {\n\t\tif (!this._disposed) {\n\t\t\tthis._disposed = true;\n\n\t\t\t// It is bad to have listeners at the time of disposing an emitter, it is worst to have listeners keep the emitter\n\t\t\t// alive via the reference that's embedded in their disposables. Therefore we loop over all remaining listeners and\n\t\t\t// unset their subscriptions/disposables. Looping and blaming remaining listeners is done on next tick because the\n\t\t\t// the following programming pattern is very popular:\n\t\t\t//\n\t\t\t// const someModel = this._disposables.add(new ModelObject()); // (1) create and register model\n\t\t\t// this._disposables.add(someModel.onDidChange(() => { ... }); // (2) subscribe and register model-event listener\n\t\t\t// ...later...\n\t\t\t// this._disposables.dispose(); disposes (1) then (2): don't warn after (1) but after the \"overall dispose\" is done\n\n\t\t\tif (this._deliveryQueue?.current === this) {\n\t\t\t\tthis._deliveryQueue.reset();\n\t\t\t}\n\t\t\tif (this._listeners) {\n\t\t\t\tif (_enableDisposeWithListenerWarning) {\n\t\t\t\t\tconst listeners = this._listeners;\n\t\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\t\tforEachListener(listeners, l => l.stack?.print());\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._listeners = undefined;\n\t\t\t\tthis._size = 0;\n\t\t\t}\n\t\t\tthis._options?.onDidRemoveLastListener?.();\n\t\t\tthis._leakageMon?.dispose();\n\t\t}\n\t}\n\n\t/**\n\t * For the public to allow to subscribe\n\t * to events from this Emitter\n\t */\n\tget event(): Event<T> {\n\t\tthis._event ??= (callback: (e: T) => unknown, thisArgs?: any, disposables?: IDisposable[] | DisposableStore) => {\n\t\t\tif (this._leakageMon && this._size > this._leakageMon.threshold ** 2) {\n\t\t\t\tconst message = `[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;\n\t\t\t\tconsole.warn(message);\n\n\t\t\t\tconst tuple = this._leakageMon.getMostFrequentStack() ?? ['UNKNOWN stack', -1];\n\t\t\t\tconst error = new ListenerRefusalError(`${message}. HINT: Stack shows most frequent listener (${tuple[1]}-times)`, tuple[0]);\n\t\t\t\tconst errorHandler = this._options?.onListenerError || onUnexpectedError;\n\t\t\t\terrorHandler(error);\n\n\t\t\t\treturn Disposable.None;\n\t\t\t}\n\n\t\t\tif (this._disposed) {\n\t\t\t\t// todo: should we warn if a listener is added to a disposed emitter? This happens often\n\t\t\t\treturn Disposable.None;\n\t\t\t}\n\n\t\t\tif (thisArgs) {\n\t\t\t\tcallback = callback.bind(thisArgs);\n\t\t\t}\n\n\t\t\tconst contained = new UniqueContainer(callback);\n\n\t\t\tlet removeMonitor: Function | undefined;\n\t\t\tlet stack: Stacktrace | undefined;\n\t\t\tif (this._leakageMon && this._size >= Math.ceil(this._leakageMon.threshold * 0.2)) {\n\t\t\t\t// check and record this emitter for potential leakage\n\t\t\t\tcontained.stack = Stacktrace.create();\n\t\t\t\tremoveMonitor = this._leakageMon.check(contained.stack, this._size + 1);\n\t\t\t}\n\n\t\t\tif (_enableDisposeWithListenerWarning) {\n\t\t\t\tcontained.stack = stack ?? Stacktrace.create();\n\t\t\t}\n\n\t\t\tif (!this._listeners) {\n\t\t\t\tthis._options?.onWillAddFirstListener?.(this);\n\t\t\t\tthis._listeners = contained;\n\t\t\t\tthis._options?.onDidAddFirstListener?.(this);\n\t\t\t} else if (this._listeners instanceof UniqueContainer) {\n\t\t\t\tthis._deliveryQueue ??= new EventDeliveryQueuePrivate();\n\t\t\t\tthis._listeners = [this._listeners, contained];\n\t\t\t} else {\n\t\t\t\tthis._listeners.push(contained);\n\t\t\t}\n\t\t\tthis._options?.onDidAddListener?.(this);\n\n\t\t\tthis._size++;\n\n\n\t\t\tconst result = toDisposable(() => {\n\t\t\t\tremoveMonitor?.();\n\t\t\t\tthis._removeListener(contained);\n\t\t\t});\n\t\t\tif (disposables instanceof DisposableStore) {\n\t\t\t\tdisposables.add(result);\n\t\t\t} else if (Array.isArray(disposables)) {\n\t\t\t\tdisposables.push(result);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\treturn this._event;\n\t}\n\n\tprivate _removeListener(listener: ListenerContainer<T>) {\n\t\tthis._options?.onWillRemoveListener?.(this);\n\n\t\tif (!this._listeners) {\n\t\t\treturn; // expected if a listener gets disposed\n\t\t}\n\n\t\tif (this._size === 1) {\n\t\t\tthis._listeners = undefined;\n\t\t\tthis._options?.onDidRemoveLastListener?.(this);\n\t\t\tthis._size = 0;\n\t\t\treturn;\n\t\t}\n\n\t\t// size > 1 which requires that listeners be a list:\n\t\tconst listeners = this._listeners as (ListenerContainer<T> | undefined)[];\n\n\t\tconst index = listeners.indexOf(listener);\n\t\tif (index === -1) {\n\t\t\tconsole.log('disposed?', this._disposed);\n\t\t\tconsole.log('size?', this._size);\n\t\t\tconsole.log('arr?', JSON.stringify(this._listeners));\n\t\t\tthrow new Error('Attempted to dispose unknown listener');\n\t\t}\n\n\t\tthis._size--;\n\t\tlisteners[index] = undefined;\n\n\t\tconst adjustDeliveryQueue = this._deliveryQueue!.current === this;\n\t\tif (this._size * compactionThreshold <= listeners.length) {\n\t\t\tlet n = 0;\n\t\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\t\tif (listeners[i]) {\n\t\t\t\t\tlisteners[n++] = listeners[i];\n\t\t\t\t} else if (adjustDeliveryQueue && n < this._deliveryQueue!.end) {\n\t\t\t\t\tthis._deliveryQueue!.end--;\n\t\t\t\t\tif (n < this._deliveryQueue!.i) {\n\t\t\t\t\t\tthis._deliveryQueue!.i--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlisteners.length = n;\n\t\t}\n\t}\n\n\tprivate _deliver(listener: undefined | UniqueContainer<(value: T) => void>, value: T) {\n\t\tif (!listener) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorHandler = this._options?.onListenerError || onUnexpectedError;\n\t\tif (!errorHandler) {\n\t\t\tlistener.value(value);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tlistener.value(value);\n\t\t} catch (e) {\n\t\t\terrorHandler(e);\n\t\t}\n\t}\n\n\t/** Delivers items in the queue. Assumes the queue is ready to go. */\n\tprivate _deliverQueue(dq: EventDeliveryQueuePrivate) {\n\t\tconst listeners = dq.current!._listeners! as (ListenerContainer<T> | undefined)[];\n\t\twhile (dq.i < dq.end) {\n\t\t\t// important: dq.i is incremented before calling deliver() because it might reenter deliverQueue()\n\t\t\tthis._deliver(listeners[dq.i++], dq.value as T);\n\t\t}\n\t\tdq.reset();\n\t}\n\n\t/**\n\t * To be kept private to fire an event to\n\t * subscribers\n\t */\n\tfire(event: T): void {\n\t\tif (this._deliveryQueue?.current) {\n\t\t\tthis._deliverQueue(this._deliveryQueue);\n\t\t\tthis._perfMon?.stop(); // last fire() will have starting perfmon, stop it before starting the next dispatch\n\t\t}\n\n\t\tthis._perfMon?.start(this._size);\n\n\t\tif (!this._listeners) {\n\t\t\t// no-op\n\t\t} else if (this._listeners instanceof UniqueContainer) {\n\t\t\tthis._deliver(this._listeners, event);\n\t\t} else {\n\t\t\tconst dq = this._deliveryQueue!;\n\t\t\tdq.enqueue(this, event, this._listeners.length);\n\t\t\tthis._deliverQueue(dq);\n\t\t}\n\n\t\tthis._perfMon?.stop();\n\t}\n\n\thasListeners(): boolean {\n\t\treturn this._size > 0;\n\t}\n}\n\nexport interface EventDeliveryQueue {\n\t_isEventDeliveryQueue: true;\n}\n\nexport const createEventDeliveryQueue = (): EventDeliveryQueue => new EventDeliveryQueuePrivate();\n\nclass EventDeliveryQueuePrivate implements EventDeliveryQueue {\n\tdeclare _isEventDeliveryQueue: true;\n\n\t/**\n\t * Index in current's listener list.\n\t */\n\tpublic i = -1;\n\n\t/**\n\t * The last index in the listener's list to deliver.\n\t */\n\tpublic end = 0;\n\n\t/**\n\t * Emitter currently being dispatched on. Emitter._listeners is always an array.\n\t */\n\tpublic current?: Emitter<any>;\n\t/**\n\t * Currently emitting value. Defined whenever `current` is.\n\t */\n\tpublic value?: unknown;\n\n\tpublic enqueue<T>(emitter: Emitter<T>, value: T, end: number) {\n\t\tthis.i = 0;\n\t\tthis.end = end;\n\t\tthis.current = emitter;\n\t\tthis.value = value;\n\t}\n\n\tpublic reset() {\n\t\tthis.i = this.end; // force any current emission loop to stop, mainly for during dispose\n\t\tthis.current = undefined;\n\t\tthis.value = undefined;\n\t}\n}\n\nexport interface IWaitUntil {\n\ttoken: CancellationToken;\n\twaitUntil(thenable: Promise<unknown>): void;\n}\n\nexport type IWaitUntilData<T> = Omit<Omit<T, 'waitUntil'>, 'token'>;\n\nexport class AsyncEmitter<T extends IWaitUntil> extends Emitter<T> {\n\n\tprivate _asyncDeliveryQueue?: LinkedList<[(ev: T) => void, IWaitUntilData<T>]>;\n\n\tasync fireAsync(data: IWaitUntilData<T>, token: CancellationToken, promiseJoin?: (p: Promise<unknown>, listener: Function) => Promise<unknown>): Promise<void> {\n\t\tif (!this._listeners) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._asyncDeliveryQueue) {\n\t\t\tthis._asyncDeliveryQueue = new LinkedList();\n\t\t}\n\n\t\tforEachListener(this._listeners, listener => this._asyncDeliveryQueue!.push([listener.value, data]));\n\n\t\twhile (this._asyncDeliveryQueue.size > 0 && !token.isCancellationRequested) {\n\n\t\t\tconst [listener, data] = this._asyncDeliveryQueue.shift()!;\n\t\t\tconst thenables: Promise<unknown>[] = [];\n\n\t\t\t// eslint-disable-next-line local/code-no-dangerous-type-assertions\n\t\t\tconst event = <T>{\n\t\t\t\t...data,\n\t\t\t\ttoken,\n\t\t\t\twaitUntil: (p: Promise<unknown>): void => {\n\t\t\t\t\tif (Object.isFrozen(thenables)) {\n\t\t\t\t\t\tthrow new Error('waitUntil can NOT be called asynchronous');\n\t\t\t\t\t}\n\t\t\t\t\tif (promiseJoin) {\n\t\t\t\t\t\tp = promiseJoin(p, listener);\n\t\t\t\t\t}\n\t\t\t\t\tthenables.push(p);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tlistener(event);\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// freeze thenables-collection to enforce sync-calls to\n\t\t\t// wait until and then wait for all thenables to resolve\n\t\t\tObject.freeze(thenables);\n\n\t\t\tawait Promise.allSettled(thenables).then(values => {\n\t\t\t\tfor (const value of values) {\n\t\t\t\t\tif (value.status === 'rejected') {\n\t\t\t\t\t\tonUnexpectedError(value.reason);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\n\nexport class PauseableEmitter<T> extends Emitter<T> {\n\n\tprivate _isPaused = 0;\n\tprotected _eventQueue = new LinkedList<T>();\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tpublic get isPaused(): boolean {\n\t\treturn this._isPaused !== 0;\n\t}\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\n\tpause(): void {\n\t\tthis._isPaused++;\n\t}\n\n\tresume(): void {\n\t\tif (this._isPaused !== 0 && --this._isPaused === 0) {\n\t\t\tif (this._mergeFn) {\n\t\t\t\t// use the merge function to create a single composite\n\t\t\t\t// event. make a copy in case firing pauses this emitter\n\t\t\t\tif (this._eventQueue.size > 0) {\n\t\t\t\t\tconst events = Array.from(this._eventQueue);\n\t\t\t\t\tthis._eventQueue.clear();\n\t\t\t\t\tsuper.fire(this._mergeFn(events));\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// no merging, fire each event individually and test\n\t\t\t\t// that this emitter isn't paused halfway through\n\t\t\t\twhile (!this._isPaused && this._eventQueue.size !== 0) {\n\t\t\t\t\tsuper.fire(this._eventQueue.shift()!);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (this._size) {\n\t\t\tif (this._isPaused !== 0) {\n\t\t\t\tthis._eventQueue.push(event);\n\t\t\t} else {\n\t\t\t\tsuper.fire(event);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class DebounceEmitter<T> extends PauseableEmitter<T> {\n\n\tprivate readonly _delay: number;\n\tprivate _handle: Timeout | undefined;\n\n\tconstructor(options: EmitterOptions & { merge: (input: T[]) => T; delay?: number }) {\n\t\tsuper(options);\n\t\tthis._delay = options.delay ?? 100;\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (!this._handle) {\n\t\t\tthis.pause();\n\t\t\tthis._handle = setTimeout(() => {\n\t\t\t\tthis._handle = undefined;\n\t\t\t\tthis.resume();\n\t\t\t}, this._delay);\n\t\t}\n\t\tsuper.fire(event);\n\t}\n}\n\n/**\n * An emitter which queue all events and then process them at the\n * end of the event loop.\n */\nexport class MicrotaskEmitter<T> extends Emitter<T> {\n\tprivate _queuedEvents: T[] = [];\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\toverride fire(event: T): void {\n\n\t\tif (!this.hasListeners()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._queuedEvents.push(event);\n\t\tif (this._queuedEvents.length === 1) {\n\t\t\tqueueMicrotask(() => {\n\t\t\t\tif (this._mergeFn) {\n\t\t\t\t\tsuper.fire(this._mergeFn(this._queuedEvents));\n\t\t\t\t} else {\n\t\t\t\t\tthis._queuedEvents.forEach(e => super.fire(e));\n\t\t\t\t}\n\t\t\t\tthis._queuedEvents = [];\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * An event emitter that multiplexes many events into a single event.\n *\n * @example Listen to the `onData` event of all `Thing`s, dynamically adding and removing `Thing`s\n * to the multiplexer as needed.\n *\n * ```typescript\n * const anythingDataMultiplexer = new EventMultiplexer<{ data: string }>();\n *\n * const thingListeners = DisposableMap<Thing, IDisposable>();\n *\n * thingService.onDidAddThing(thing => {\n *   thingListeners.set(thing, anythingDataMultiplexer.add(thing.onData);\n * });\n * thingService.onDidRemoveThing(thing => {\n *   thingListeners.deleteAndDispose(thing);\n * });\n *\n * anythingDataMultiplexer.event(e => {\n *   console.log('Something fired data ' + e.data)\n * });\n * ```\n */\nexport class EventMultiplexer<T> implements IDisposable {\n\n\tprivate readonly emitter: Emitter<T>;\n\tprivate hasListeners = false;\n\tprivate events: { event: Event<T>; listener: IDisposable | null }[] = [];\n\n\tconstructor() {\n\t\tthis.emitter = new Emitter<T>({\n\t\t\tonWillAddFirstListener: () => this.onFirstListenerAdd(),\n\t\t\tonDidRemoveLastListener: () => this.onLastListenerRemove()\n\t\t});\n\t}\n\n\tget event(): Event<T> {\n\t\treturn this.emitter.event;\n\t}\n\n\tadd(event: Event<T>): IDisposable {\n\t\tconst e = { event: event, listener: null };\n\t\tthis.events.push(e);\n\n\t\tif (this.hasListeners) {\n\t\t\tthis.hook(e);\n\t\t}\n\n\t\tconst dispose = () => {\n\t\t\tif (this.hasListeners) {\n\t\t\t\tthis.unhook(e);\n\t\t\t}\n\n\t\t\tconst idx = this.events.indexOf(e);\n\t\t\tthis.events.splice(idx, 1);\n\t\t};\n\n\t\treturn toDisposable(createSingleCallFunction(dispose));\n\t}\n\n\tprivate onFirstListenerAdd(): void {\n\t\tthis.hasListeners = true;\n\t\tthis.events.forEach(e => this.hook(e));\n\t}\n\n\tprivate onLastListenerRemove(): void {\n\t\tthis.hasListeners = false;\n\t\tthis.events.forEach(e => this.unhook(e));\n\t}\n\n\tprivate hook(e: { event: Event<T>; listener: IDisposable | null }): void {\n\t\te.listener = e.event(r => this.emitter.fire(r));\n\t}\n\n\tprivate unhook(e: { event: Event<T>; listener: IDisposable | null }): void {\n\t\te.listener?.dispose();\n\t\te.listener = null;\n\t}\n\n\tdispose(): void {\n\t\tthis.emitter.dispose();\n\n\t\tfor (const e of this.events) {\n\t\t\te.listener?.dispose();\n\t\t}\n\t\tthis.events = [];\n\t}\n}\n\nexport interface IDynamicListEventMultiplexer<TEventType> extends IDisposable {\n\treadonly event: Event<TEventType>;\n}\nexport class DynamicListEventMultiplexer<TItem, TEventType> implements IDynamicListEventMultiplexer<TEventType> {\n\tprivate readonly _store = new DisposableStore();\n\n\treadonly event: Event<TEventType>;\n\n\tconstructor(\n\t\titems: TItem[],\n\t\tonAddItem: Event<TItem>,\n\t\tonRemoveItem: Event<TItem>,\n\t\tgetEvent: (item: TItem) => Event<TEventType>\n\t) {\n\t\tconst multiplexer = this._store.add(new EventMultiplexer<TEventType>());\n\t\tconst itemListeners = this._store.add(new DisposableMap<TItem, IDisposable>());\n\n\t\tfunction addItem(instance: TItem) {\n\t\t\titemListeners.set(instance, multiplexer.add(getEvent(instance)));\n\t\t}\n\n\t\t// Existing items\n\t\tfor (const instance of items) {\n\t\t\taddItem(instance);\n\t\t}\n\n\t\t// Added items\n\t\tthis._store.add(onAddItem(instance => {\n\t\t\taddItem(instance);\n\t\t}));\n\n\t\t// Removed items\n\t\tthis._store.add(onRemoveItem(instance => {\n\t\t\titemListeners.deleteAndDispose(instance);\n\t\t}));\n\n\t\tthis.event = multiplexer.event;\n\t}\n\n\tdispose() {\n\t\tthis._store.dispose();\n\t}\n}\n\n/**\n * The EventBufferer is useful in situations in which you want\n * to delay firing your events during some code.\n * You can wrap that code and be sure that the event will not\n * be fired during that wrap.\n *\n * ```\n * const emitter: Emitter;\n * const delayer = new EventDelayer();\n * const delayedEvent = delayer.wrapEvent(emitter.event);\n *\n * delayedEvent(console.log);\n *\n * delayer.bufferEvents(() => {\n *   emitter.fire(); // event will not be fired yet\n * });\n *\n * // event will only be fired at this point\n * ```\n */\nexport class EventBufferer {\n\n\tprivate data: { buffers: Function[] }[] = [];\n\n\twrapEvent<T>(event: Event<T>): Event<T>;\n\twrapEvent<T>(event: Event<T>, reduce: (last: T | undefined, event: T) => T): Event<T>;\n\twrapEvent<T, O>(event: Event<T>, reduce: (last: O | undefined, event: T) => O, initial: O): Event<O>;\n\twrapEvent<T, O>(event: Event<T>, reduce?: (last: T | O | undefined, event: T) => T | O, initial?: O): Event<O | T> {\n\t\treturn (listener, thisArgs?, disposables?) => {\n\t\t\treturn event(i => {\n\t\t\t\tconst data = this.data[this.data.length - 1];\n\n\t\t\t\t// Non-reduce scenario\n\t\t\t\tif (!reduce) {\n\t\t\t\t\t// Buffering case\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tdata.buffers.push(() => listener.call(thisArgs, i));\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Not buffering case\n\t\t\t\t\t\tlistener.call(thisArgs, i);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Reduce scenario\n\t\t\t\tconst reduceData = data as typeof data & {\n\t\t\t\t\t/**\n\t\t\t\t\t * The accumulated items that will be reduced.\n\t\t\t\t\t */\n\t\t\t\t\titems?: T[];\n\t\t\t\t\t/**\n\t\t\t\t\t * The reduced result cached to be shared with other listeners.\n\t\t\t\t\t */\n\t\t\t\t\treducedResult?: T | O;\n\t\t\t\t};\n\n\t\t\t\t// Not buffering case\n\t\t\t\tif (!reduceData) {\n\t\t\t\t\t// TODO: Is there a way to cache this reduce call for all listeners?\n\t\t\t\t\tlistener.call(thisArgs, reduce(initial, i));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Buffering case\n\t\t\t\treduceData.items ??= [];\n\t\t\t\treduceData.items.push(i);\n\t\t\t\tif (reduceData.buffers.length === 0) {\n\t\t\t\t\t// Include a single buffered function that will reduce all events when we're done buffering events\n\t\t\t\t\tdata.buffers.push(() => {\n\t\t\t\t\t\t// cache the reduced result so that the value can be shared across all listeners\n\t\t\t\t\t\treduceData.reducedResult ??= initial\n\t\t\t\t\t\t\t? reduceData.items!.reduce(reduce as (last: O | undefined, event: T) => O, initial)\n\t\t\t\t\t\t\t: reduceData.items!.reduce(reduce as (last: T | undefined, event: T) => T);\n\t\t\t\t\t\tlistener.call(thisArgs, reduceData.reducedResult);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\t\t};\n\t}\n\n\tbufferEvents<R = void>(fn: () => R): R {\n\t\tconst data = { buffers: new Array<Function>() };\n\t\tthis.data.push(data);\n\t\tconst r = fn();\n\t\tthis.data.pop();\n\t\tdata.buffers.forEach(flush => flush());\n\t\treturn r;\n\t}\n}\n\n/**\n * A Relay is an event forwarder which functions as a replugabble event pipe.\n * Once created, you can connect an input event to it and it will simply forward\n * events from that input event through its own `event` property. The `input`\n * can be changed at any point in time.\n */\nexport class Relay<T> implements IDisposable {\n\n\tprivate listening = false;\n\tprivate inputEvent: Event<T> = Event.None;\n\tprivate inputEventListener: IDisposable = Disposable.None;\n\n\tprivate readonly emitter = new Emitter<T>({\n\t\tonDidAddFirstListener: () => {\n\t\t\tthis.listening = true;\n\t\t\tthis.inputEventListener = this.inputEvent(this.emitter.fire, this.emitter);\n\t\t},\n\t\tonDidRemoveLastListener: () => {\n\t\t\tthis.listening = false;\n\t\t\tthis.inputEventListener.dispose();\n\t\t}\n\t});\n\n\treadonly event: Event<T> = this.emitter.event;\n\n\tset input(event: Event<T>) {\n\t\tthis.inputEvent = event;\n\n\t\tif (this.listening) {\n\t\t\tthis.inputEventListener.dispose();\n\t\t\tthis.inputEventListener = event(this.emitter.fire, this.emitter);\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.inputEventListener.dispose();\n\t\tthis.emitter.dispose();\n\t}\n}\n\nexport interface IValueWithChangeEvent<T> {\n\treadonly onDidChange: Event<void>;\n\tget value(): T;\n}\n\nexport class ValueWithChangeEvent<T> implements IValueWithChangeEvent<T> {\n\tpublic static const<T>(value: T): IValueWithChangeEvent<T> {\n\t\treturn new ConstValueWithChangeEvent(value);\n\t}\n\n\tprivate readonly _onDidChange = new Emitter<void>();\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(private _value: T) { }\n\n\tget value(): T {\n\t\treturn this._value;\n\t}\n\n\tset value(value: T) {\n\t\tif (value !== this._value) {\n\t\t\tthis._value = value;\n\t\t\tthis._onDidChange.fire(undefined);\n\t\t}\n\t}\n}\n\nclass ConstValueWithChangeEvent<T> implements IValueWithChangeEvent<T> {\n\tpublic readonly onDidChange: Event<void> = Event.None;\n\n\tconstructor(readonly value: T) { }\n}\n\n/**\n * @param handleItem Is called for each item in the set (but only the first time the item is seen in the set).\n * \tThe returned disposable is disposed if the item is no longer in the set.\n */\nexport function trackSetChanges<T>(getData: () => ReadonlySet<T>, onDidChangeData: Event<unknown>, handleItem: (d: T) => IDisposable): IDisposable {\n\tconst map = new DisposableMap<T, IDisposable>();\n\tlet oldData = new Set(getData());\n\tfor (const d of oldData) {\n\t\tmap.set(d, handleItem(d));\n\t}\n\n\tconst store = new DisposableStore();\n\tstore.add(onDidChangeData(() => {\n\t\tconst newData = getData();\n\t\tconst diff = diffSets(oldData, newData);\n\t\tfor (const r of diff.removed) {\n\t\t\tmap.deleteAndDispose(r);\n\t\t}\n\t\tfor (const a of diff.added) {\n\t\t\tmap.set(a, handleItem(a));\n\t\t}\n\t\toldData = new Set(newData);\n\t}));\n\tstore.add(map);\n\treturn store;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}