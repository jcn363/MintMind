{"version":3,"names":["cov_14lyjtz5iv","actualCoverage","Emitter","Event","Iterable","Disposable","createDecorator","IPolicyService","s","AbstractPolicyService","_serviceBrand","policyDefinitions","policies","Map","_onDidChange","_register","onDidChange","event","updatePolicyDefinitions","f","size","Object","keys","length","b","_updatePolicyDefinitions","reduce","entries","r","name","value","getPolicyValue","get","serialize","definition","NullPolicyService","None","undefined"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/policy/common/policy.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IStringDictionary } from '../../../base/common/collections.js';\nimport { IDefaultAccount } from '../../../base/common/defaultAccount.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { PolicyName } from '../../../base/common/policy.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\n\nexport type PolicyValue = string | number | boolean;\nexport type PolicyDefinition = {\n\ttype: 'string' | 'number' | 'boolean';\n\tvalue?: (account: IDefaultAccount) => string | number | boolean | undefined;\n};\n\nexport const IPolicyService = createDecorator<IPolicyService>('policy');\n\nexport interface IPolicyService {\n\treadonly _serviceBrand: undefined;\n\n\treadonly onDidChange: Event<readonly PolicyName[]>;\n\tupdatePolicyDefinitions(policyDefinitions: IStringDictionary<PolicyDefinition>): Promise<IStringDictionary<PolicyValue>>;\n\tgetPolicyValue(name: PolicyName): PolicyValue | undefined;\n\tserialize(): IStringDictionary<{ definition: PolicyDefinition; value: PolicyValue }> | undefined;\n\treadonly policyDefinitions: IStringDictionary<PolicyDefinition>;\n}\n\nexport abstract class AbstractPolicyService extends Disposable implements IPolicyService {\n\treadonly _serviceBrand: undefined;\n\n\tpublic policyDefinitions: IStringDictionary<PolicyDefinition> = {};\n\tprotected policies = new Map<PolicyName, PolicyValue>();\n\n\tprotected readonly _onDidChange = this._register(new Emitter<readonly PolicyName[]>());\n\treadonly onDidChange = this._onDidChange.event;\n\n\tasync updatePolicyDefinitions(policyDefinitions: IStringDictionary<PolicyDefinition>): Promise<IStringDictionary<PolicyValue>> {\n\t\tconst size = Object.keys(this.policyDefinitions).length;\n\t\tthis.policyDefinitions = { ...policyDefinitions, ...this.policyDefinitions };\n\n\t\tif (size !== Object.keys(this.policyDefinitions).length) {\n\t\t\tawait this._updatePolicyDefinitions(this.policyDefinitions);\n\t\t}\n\n\t\treturn Iterable.reduce(this.policies.entries(), (r, [name, value]) => ({ ...r, [name]: value }), {});\n\t}\n\n\tgetPolicyValue(name: PolicyName): PolicyValue | undefined {\n\t\treturn this.policies.get(name);\n\t}\n\n\tserialize(): IStringDictionary<{ definition: PolicyDefinition; value: PolicyValue }> {\n\t\treturn Iterable.reduce<[PolicyName, PolicyDefinition], IStringDictionary<{ definition: PolicyDefinition; value: PolicyValue }>>(Object.entries(this.policyDefinitions), (r, [name, definition]) => ({ ...r, [name]: { definition, value: this.policies.get(name)! } }), {});\n\t}\n\n\tprotected abstract _updatePolicyDefinitions(policyDefinitions: IStringDictionary<PolicyDefinition>): Promise<void>;\n}\n\nexport class NullPolicyService implements IPolicyService {\n\treadonly _serviceBrand: undefined;\n\treadonly onDidChange = Event.None;\n\tasync updatePolicyDefinitions() { return {}; }\n\tgetPolicyValue() { return undefined; }\n\tserialize() { return undefined; }\n\tpolicyDefinitions: IStringDictionary<PolicyDefinition> = {};\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAwCO;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAxCP;;;;AAOA,SAASE,OAAO,EAAEC,KAAK,QAAQ,+BAA+B;AAC9D,SAASC,QAAQ,QAAQ,kCAAkC;AAC3D,SAASC,UAAU,QAAQ,mCAAmC;AAE9D,SAASC,eAAe,QAAQ,6CAA6C;AAQ7E,OAAO,MAAMC,cAAc;AAAA;AAAA,CAAAP,cAAA,GAAAQ,CAAA,OAAGF,eAAe,CAAiB,QAAQ,CAAC;AAYvE,OAAM,MAAgBG,qBAAsB,SAAQJ,UAAU;EACpDK,aAAa;EAEfC,iBAAiB;EAAA;EAAA,CAAAX,cAAA,GAAAQ,CAAA,OAAwC,EAAE;EACxDI,QAAQ;EAAA;EAAA,CAAAZ,cAAA,GAAAQ,CAAA,OAAG,IAAIK,GAAG,EAA2B;EAEpCC,YAAY;EAAA;EAAA,CAAAd,cAAA,GAAAQ,CAAA,OAAG,IAAI,CAACO,SAAS,CAAC,IAAIb,OAAO,EAAyB,CAAC;EAC7Ec,WAAW;EAAA;EAAA,CAAAhB,cAAA,GAAAQ,CAAA,OAAG,IAAI,CAACM,YAAY,CAACG,KAAK;EAE9C,MAAMC,uBAAuBA,CAACP,iBAAsD;IAAA;IAAAX,cAAA,GAAAmB,CAAA;IACnF,MAAMC,IAAI;IAAA;IAAA,CAAApB,cAAA,GAAAQ,CAAA,OAAGa,MAAM,CAACC,IAAI,CAAC,IAAI,CAACX,iBAAiB,CAAC,CAACY,MAAM;IAAC;IAAAvB,cAAA,GAAAQ,CAAA;IACxD,IAAI,CAACG,iBAAiB,GAAG;MAAE,GAAGA,iBAAiB;MAAE,GAAG,IAAI,CAACA;IAAiB,CAAE;IAAC;IAAAX,cAAA,GAAAQ,CAAA;IAE7E,IAAIY,IAAI,KAAKC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACX,iBAAiB,CAAC,CAACY,MAAM,EAAE;MAAA;MAAAvB,cAAA,GAAAwB,CAAA;MAAAxB,cAAA,GAAAQ,CAAA;MACxD,MAAM,IAAI,CAACiB,wBAAwB,CAAC,IAAI,CAACd,iBAAiB,CAAC;IAC5D,CAAC;IAAA;IAAA;MAAAX,cAAA,GAAAwB,CAAA;IAAA;IAAAxB,cAAA,GAAAQ,CAAA;IAED,OAAOJ,QAAQ,CAACsB,MAAM,CAAC,IAAI,CAACd,QAAQ,CAACe,OAAO,EAAE,EAAE,CAACC,CAAC,EAAE,CAACC,IAAI,EAAEC,KAAK,CAAC,KAAM;MAAA;MAAA9B,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAQ,CAAA;MAAA;QAAE,GAAGoB,CAAC;QAAE,CAACC,IAAI,GAAGC;MAAK,CAAE;IAAF,CAAG,EAAE,EAAE,CAAC;EACrG;EAEAC,cAAcA,CAACF,IAAgB;IAAA;IAAA7B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAQ,CAAA;IAC9B,OAAO,IAAI,CAACI,QAAQ,CAACoB,GAAG,CAACH,IAAI,CAAC;EAC/B;EAEAI,SAASA,CAAA;IAAA;IAAAjC,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAQ,CAAA;IACR,OAAOJ,QAAQ,CAACsB,MAAM,CAA0GL,MAAM,CAACM,OAAO,CAAC,IAAI,CAAChB,iBAAiB,CAAC,EAAE,CAACiB,CAAC,EAAE,CAACC,IAAI,EAAEK,UAAU,CAAC,KAAM;MAAA;MAAAlC,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAQ,CAAA;MAAA;QAAE,GAAGoB,CAAC;QAAE,CAACC,IAAI,GAAG;UAAEK,UAAU;UAAEJ,KAAK,EAAE,IAAI,CAAClB,QAAQ,CAACoB,GAAG,CAACH,IAAI;QAAE;MAAE,CAAE;IAAF,CAAG,EAAE,EAAE,CAAC;EAC5Q;;AAKD,OAAM,MAAOM,iBAAiB;EACpBzB,aAAa;EACbM,WAAW;EAAA;EAAA,CAAAhB,cAAA,GAAAQ,CAAA,QAAGL,KAAK,CAACiC,IAAI;EACjC,MAAMlB,uBAAuBA,CAAA;IAAA;IAAAlB,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAQ,CAAA;IAAK,OAAO,EAAE;EAAE;EAC7CuB,cAAcA,CAAA;IAAA;IAAA/B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAQ,CAAA;IAAK,OAAO6B,SAAS;EAAE;EACrCJ,SAASA,CAAA;IAAA;IAAAjC,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAQ,CAAA;IAAK,OAAO6B,SAAS;EAAE;EAChC1B,iBAAiB;EAAA;EAAA,CAAAX,cAAA,GAAAQ,CAAA,QAAwC,EAAE","ignoreList":[]}