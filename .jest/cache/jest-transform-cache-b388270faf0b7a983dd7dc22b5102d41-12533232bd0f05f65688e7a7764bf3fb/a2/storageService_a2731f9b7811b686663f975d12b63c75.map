{"version":3,"names":["cov_v6xf83se1","actualCoverage","Promises","DisposableStore","Schemas","joinPath","Storage","AbstractStorageService","isProfileUsingDefaultStorage","WillSaveStateReason","ApplicationStorageDatabaseClient","ProfileStorageDatabaseClient","WorkspaceStorageDatabaseClient","isUserDataProfile","RemoteStorageService","remoteService","environmentService","applicationStorageProfile","applicationStorage","profileStorageProfile","profileStorageDisposables","s","_register","profileStorage","workspaceStorageId","workspaceStorageDisposables","workspaceStorage","constructor","initialWorkspace","initialProfiles","f","defaultProfile","createApplicationStorage","currentProfile","createProfileStorage","id","createWorkspaceStorage","storageDataBaseClient","getChannel","onDidChangeStorage","e","emitDidChangeValue","profile","clear","b","add","workspace","undefined","doInitialize","settled","init","Promise","resolve","getStorage","scope","getLogDetails","globalStorageHome","with","scheme","file","fsPath","workspaceStorageHome","close","stopFlushWhenIdle","emitWillSaveState","SHUTDOWN","switchToProfile","toProfile","canSwitchProfile","oldProfileStorage","oldItems","items","switchData","switchToWorkspace","toWorkspace","preserveData","oldWorkspaceStorage","Map","hasScope"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/storage/common/storageService.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Promises } from '../../../base/common/async.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { joinPath } from '../../../base/common/resources.js';\nimport { IStorage, Storage } from '../../../base/parts/storage/common/storage.js';\nimport { IEnvironmentService } from '../../environment/common/environment.js';\nimport { IRemoteService } from '../../ipc/common/services.js';\nimport { AbstractStorageService, isProfileUsingDefaultStorage, StorageScope, WillSaveStateReason } from './storage.js';\nimport { ApplicationStorageDatabaseClient, ProfileStorageDatabaseClient, WorkspaceStorageDatabaseClient } from './storageIpc.js';\nimport { isUserDataProfile, IUserDataProfile } from '../../userDataProfile/common/userDataProfile.js';\nimport { IAnyWorkspaceIdentifier } from '../../workspace/common/workspace.js';\n\nexport class RemoteStorageService extends AbstractStorageService {\n\n\tprivate readonly applicationStorageProfile: IUserDataProfile;\n\tprivate readonly applicationStorage: IStorage;\n\n\tprivate profileStorageProfile: IUserDataProfile;\n\tprivate readonly profileStorageDisposables = this._register(new DisposableStore());\n\tprivate profileStorage: IStorage;\n\n\tprivate workspaceStorageId: string | undefined;\n\tprivate readonly workspaceStorageDisposables = this._register(new DisposableStore());\n\tprivate workspaceStorage: IStorage | undefined;\n\n\tconstructor(\n\t\tinitialWorkspace: IAnyWorkspaceIdentifier | undefined,\n\t\tinitialProfiles: { defaultProfile: IUserDataProfile; currentProfile: IUserDataProfile },\n\t\tprivate readonly remoteService: IRemoteService,\n\t\tprivate readonly environmentService: IEnvironmentService\n\t) {\n\t\tsuper();\n\n\t\tthis.applicationStorageProfile = initialProfiles.defaultProfile;\n\t\tthis.applicationStorage = this.createApplicationStorage();\n\n\t\tthis.profileStorageProfile = initialProfiles.currentProfile;\n\t\tthis.profileStorage = this.createProfileStorage(this.profileStorageProfile);\n\n\t\tthis.workspaceStorageId = initialWorkspace?.id;\n\t\tthis.workspaceStorage = this.createWorkspaceStorage(initialWorkspace);\n\t}\n\n\tprivate createApplicationStorage(): IStorage {\n\t\tconst storageDataBaseClient = this._register(new ApplicationStorageDatabaseClient(this.remoteService.getChannel('storage')));\n\t\tconst applicationStorage = this._register(new Storage(storageDataBaseClient));\n\n\t\tthis._register(applicationStorage.onDidChangeStorage(e => this.emitDidChangeValue(StorageScope.APPLICATION, e)));\n\n\t\treturn applicationStorage;\n\t}\n\n\tprivate createProfileStorage(profile: IUserDataProfile): IStorage {\n\n\t\t// First clear any previously associated disposables\n\t\tthis.profileStorageDisposables.clear();\n\n\t\t// Remember profile associated to profile storage\n\t\tthis.profileStorageProfile = profile;\n\n\t\tlet profileStorage: IStorage;\n\t\tif (isProfileUsingDefaultStorage(profile)) {\n\n\t\t\t// If we are using default profile storage, the profile storage is\n\t\t\t// actually the same as application storage. As such we\n\t\t\t// avoid creating the storage library a second time on\n\t\t\t// the same DB.\n\n\t\t\tprofileStorage = this.applicationStorage;\n\t\t} else {\n\t\t\tconst storageDataBaseClient = this.profileStorageDisposables.add(new ProfileStorageDatabaseClient(this.remoteService.getChannel('storage'), profile));\n\t\t\tprofileStorage = this.profileStorageDisposables.add(new Storage(storageDataBaseClient));\n\t\t}\n\n\t\tthis.profileStorageDisposables.add(profileStorage.onDidChangeStorage(e => this.emitDidChangeValue(StorageScope.PROFILE, e)));\n\n\t\treturn profileStorage;\n\t}\n\n\tprivate createWorkspaceStorage(workspace: IAnyWorkspaceIdentifier): IStorage;\n\tprivate createWorkspaceStorage(workspace: IAnyWorkspaceIdentifier | undefined): IStorage | undefined;\n\tprivate createWorkspaceStorage(workspace: IAnyWorkspaceIdentifier | undefined): IStorage | undefined {\n\n\t\t// First clear any previously associated disposables\n\t\tthis.workspaceStorageDisposables.clear();\n\n\t\t// Remember workspace ID for logging later\n\t\tthis.workspaceStorageId = workspace?.id;\n\n\t\tlet workspaceStorage: IStorage | undefined = undefined;\n\t\tif (workspace) {\n\t\t\tconst storageDataBaseClient = this.workspaceStorageDisposables.add(new WorkspaceStorageDatabaseClient(this.remoteService.getChannel('storage'), workspace));\n\t\t\tworkspaceStorage = this.workspaceStorageDisposables.add(new Storage(storageDataBaseClient));\n\n\t\t\tthis.workspaceStorageDisposables.add(workspaceStorage.onDidChangeStorage(e => this.emitDidChangeValue(StorageScope.WORKSPACE, e)));\n\t\t}\n\n\t\treturn workspaceStorage;\n\t}\n\n\tprotected async doInitialize(): Promise<void> {\n\n\t\t// Init all storage locations\n\t\tawait Promises.settled([\n\t\t\tthis.applicationStorage.init(),\n\t\t\tthis.profileStorage.init(),\n\t\t\tthis.workspaceStorage?.init() ?? Promise.resolve()\n\t\t]);\n\t}\n\n\tprotected getStorage(scope: StorageScope): IStorage | undefined {\n\t\tswitch (scope) {\n\t\t\tcase StorageScope.APPLICATION:\n\t\t\t\treturn this.applicationStorage;\n\t\t\tcase StorageScope.PROFILE:\n\t\t\t\treturn this.profileStorage;\n\t\t\tdefault:\n\t\t\t\treturn this.workspaceStorage;\n\t\t}\n\t}\n\n\tprotected getLogDetails(scope: StorageScope): string | undefined {\n\t\tswitch (scope) {\n\t\t\tcase StorageScope.APPLICATION:\n\t\t\t\treturn this.applicationStorageProfile.globalStorageHome.with({ scheme: Schemas.file }).fsPath;\n\t\t\tcase StorageScope.PROFILE:\n\t\t\t\treturn this.profileStorageProfile?.globalStorageHome.with({ scheme: Schemas.file }).fsPath;\n\t\t\tdefault:\n\t\t\t\treturn this.workspaceStorageId ? `${joinPath(this.environmentService.workspaceStorageHome, this.workspaceStorageId, 'state.vscdb').with({ scheme: Schemas.file }).fsPath}` : undefined;\n\t\t}\n\t}\n\n\tasync close(): Promise<void> {\n\n\t\t// Stop periodic scheduler and idle runner as we now collect state normally\n\t\tthis.stopFlushWhenIdle();\n\n\t\t// Signal as event so that clients can still store data\n\t\tthis.emitWillSaveState(WillSaveStateReason.SHUTDOWN);\n\n\t\t// Do it\n\t\tawait Promises.settled([\n\t\t\tthis.applicationStorage.close(),\n\t\t\tthis.profileStorage.close(),\n\t\t\tthis.workspaceStorage?.close() ?? Promise.resolve()\n\t\t]);\n\t}\n\n\tprotected async switchToProfile(toProfile: IUserDataProfile): Promise<void> {\n\t\tif (!this.canSwitchProfile(this.profileStorageProfile, toProfile)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldProfileStorage = this.profileStorage;\n\t\tconst oldItems = oldProfileStorage.items;\n\n\t\t// Close old profile storage but only if this is\n\t\t// different from application storage!\n\t\tif (oldProfileStorage !== this.applicationStorage) {\n\t\t\tawait oldProfileStorage.close();\n\t\t}\n\n\t\t// Create new profile storage & init\n\t\tthis.profileStorage = this.createProfileStorage(toProfile);\n\t\tawait this.profileStorage.init();\n\n\t\t// Handle data switch and eventing\n\t\tthis.switchData(oldItems, this.profileStorage, StorageScope.PROFILE);\n\t}\n\n\tprotected async switchToWorkspace(toWorkspace: IAnyWorkspaceIdentifier, preserveData: boolean): Promise<void> {\n\t\tconst oldWorkspaceStorage = this.workspaceStorage;\n\t\tconst oldItems = oldWorkspaceStorage?.items ?? new Map();\n\n\t\t// Close old workspace storage\n\t\tawait oldWorkspaceStorage?.close();\n\n\t\t// Create new workspace storage & init\n\t\tthis.workspaceStorage = this.createWorkspaceStorage(toWorkspace);\n\t\tawait this.workspaceStorage.init();\n\n\t\t// Handle data switch and eventing\n\t\tthis.switchData(oldItems, this.workspaceStorage, StorageScope.WORKSPACE);\n\t}\n\n\thasScope(scope: IAnyWorkspaceIdentifier | IUserDataProfile): boolean {\n\t\tif (isUserDataProfile(scope)) {\n\t\t\treturn this.profileStorageProfile.id === scope.id;\n\t\t}\n\n\t\treturn this.workspaceStorageId === scope.id;\n\t}\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}