{"version":3,"names":["cov_1udzlbe1f4","actualCoverage","TerminalDataBufferer","_callback","_terminalBufferMap","s","Map","constructor","f","dispose","buffer","values","startBuffering","id","event","throttleBy","b","disposable","e","data","get","push","timeoutId","setTimeout","flushBuffer","clearTimeout","set","stopBuffering","delete","join"],"sources":["/home/user/Desktop/MintMind/src/vs/platform/terminal/common/terminalDataBuffering.ts"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../base/common/event.js';\nimport { IDisposable } from '../../../base/common/lifecycle.js';\nimport { IProcessDataEvent } from './terminal.js';\n\ninterface TerminalDataBuffer extends IDisposable {\n\tdata: string[];\n\ttimeoutId: Timeout;\n}\n\nexport class TerminalDataBufferer implements IDisposable {\n\tprivate readonly _terminalBufferMap = new Map<number, TerminalDataBuffer>();\n\n\tconstructor(private readonly _callback: (id: number, data: string) => void) {\n\t}\n\n\tdispose() {\n\t\tfor (const buffer of this._terminalBufferMap.values()) {\n\t\t\tbuffer.dispose();\n\t\t}\n\t}\n\n\tstartBuffering(id: number, event: Event<string | IProcessDataEvent>, throttleBy: number = 5): IDisposable {\n\n\t\tconst disposable = event((e: string | IProcessDataEvent) => {\n\t\t\tconst data = (typeof e === 'string' ? e : e.data);\n\t\t\tlet buffer = this._terminalBufferMap.get(id);\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.data.push(data);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timeoutId = setTimeout(() => this.flushBuffer(id), throttleBy);\n\t\t\tbuffer = {\n\t\t\t\tdata: [data],\n\t\t\t\ttimeoutId,\n\t\t\t\tdispose: () => {\n\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\tthis.flushBuffer(id);\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis._terminalBufferMap.set(id, buffer);\n\t\t});\n\t\treturn disposable;\n\t}\n\n\tstopBuffering(id: number) {\n\t\tconst buffer = this._terminalBufferMap.get(id);\n\t\tbuffer?.dispose();\n\t}\n\n\tflushBuffer(id: number): void {\n\t\tconst buffer = this._terminalBufferMap.get(id);\n\t\tif (buffer) {\n\t\t\tthis._terminalBufferMap.delete(id);\n\t\t\tthis._callback(id, buffer.data.join(''));\n\t\t}\n\t}\n}\n"],"mappings":"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","ignoreList":[]}